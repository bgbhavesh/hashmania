!function(){var e,t;(function(){t={}}).call(this),function(){(function(){var e=this,n=e._,i={},o=Array.prototype,r=Object.prototype,a=Function.prototype,s=o.push,c=o.slice,l=o.concat,u=r.toString,d=r.hasOwnProperty,f=o.forEach,p=o.map,h=o.reduce,g=o.reduceRight,m=o.filter,v=o.every,y=o.some,b=o.indexOf,_=o.lastIndexOf,w=Array.isArray,k=Object.keys,T=a.bind,S=function(e){return e instanceof S?e:this instanceof S?(this._wrapped=e,void 0):new S(e)};"undefined"!=typeof t?("undefined"!=typeof module&&module.exports&&(t=module.exports=S),t._=S):e._=S,S.VERSION="1.5.2";var x=function(e){return"[object Arguments]"===u.call(e)};x(arguments)||(x=function(e){return!(!e||!d.call(e,"callee")||"function"!=typeof e.callee)});var E=function(e){return e.length===+e.length&&(x(e)||e.constructor!==Object)},C=S.each=S.forEach=function(e,t,n){if(null!=e)if(f&&e.forEach===f)e.forEach(t,n);else if(E(e)){for(var o=0,r=e.length;r>o;o++)if(t.call(n,e[o],o,e)===i)return}else for(var a=S.keys(e),o=0,r=a.length;r>o;o++)if(t.call(n,e[a[o]],a[o],e)===i)return};S.map=S.collect=function(e,t,n){var i=[];return null==e?i:p&&e.map===p?e.map(t,n):(C(e,function(e,o,r){i.push(t.call(n,e,o,r))}),i)};var P="Reduce of empty array with no initial value";S.reduce=S.foldl=S.inject=function(e,t,n,i){var o=arguments.length>2;if(null==e&&(e=[]),h&&e.reduce===h)return i&&(t=S.bind(t,i)),o?e.reduce(t,n):e.reduce(t);if(C(e,function(e,r,a){o?n=t.call(i,n,e,r,a):(n=e,o=!0)}),!o)throw new TypeError(P);return n},S.reduceRight=S.foldr=function(e,t,n,i){var o=arguments.length>2;if(null==e&&(e=[]),g&&e.reduceRight===g)return i&&(t=S.bind(t,i)),o?e.reduceRight(t,n):e.reduceRight(t);var r=e.length;if(!E(e)){var a=S.keys(e);r=a.length}if(C(e,function(s,c,l){c=a?a[--r]:--r,o?n=t.call(i,n,e[c],c,l):(n=e[c],o=!0)}),!o)throw new TypeError(P);return n},S.find=S.detect=function(e,t,n){var i;return D(e,function(e,o,r){return t.call(n,e,o,r)?(i=e,!0):void 0}),i},S.filter=S.select=function(e,t,n){var i=[];return null==e?i:m&&e.filter===m?e.filter(t,n):(C(e,function(e,o,r){t.call(n,e,o,r)&&i.push(e)}),i)},S.reject=function(e,t,n){return S.filter(e,function(e,i,o){return!t.call(n,e,i,o)},n)},S.every=S.all=function(e,t,n){t||(t=S.identity);var o=!0;return null==e?o:v&&e.every===v?e.every(t,n):(C(e,function(e,r,a){return(o=o&&t.call(n,e,r,a))?void 0:i}),!!o)};var D=S.some=S.any=function(e,t,n){t||(t=S.identity);var o=!1;return null==e?o:y&&e.some===y?e.some(t,n):(C(e,function(e,r,a){return o||(o=t.call(n,e,r,a))?i:void 0}),!!o)};S.contains=S.include=function(e,t){return null==e?!1:b&&e.indexOf===b?-1!=e.indexOf(t):D(e,function(e){return e===t})},S.invoke=function(e,t){var n=c.call(arguments,2),i=S.isFunction(t);return S.map(e,function(e){return(i?t:e[t]).apply(e,n)})},S.pluck=function(e,t){return S.map(e,function(e){return e[t]})},S.where=function(e,t,n){return S.isEmpty(t)?n?void 0:[]:S[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},S.findWhere=function(e,t){return S.where(e,t,!0)},S.max=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&S.isEmpty(e))return-1/0;var i={computed:-1/0,value:-1/0};return C(e,function(e,o,r){var a=t?t.call(n,e,o,r):e;a>i.computed&&(i={value:e,computed:a})}),i.value},S.min=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&S.isEmpty(e))return 1/0;var i={computed:1/0,value:1/0};return C(e,function(e,o,r){var a=t?t.call(n,e,o,r):e;a<i.computed&&(i={value:e,computed:a})}),i.value},S.shuffle=function(e){var t,n=0,i=[];return C(e,function(e){t=S.random(n++),i[n-1]=i[t],i[t]=e}),i},S.sample=function(e,t,n){return arguments.length<2||n?e[S.random(e.length-1)]:S.shuffle(e).slice(0,Math.max(0,t))};var O=function(e){return S.isFunction(e)?e:function(t){return t[e]}};S.sortBy=function(e,t,n){var i=O(t);return S.pluck(S.map(e,function(e,t,o){return{value:e,index:t,criteria:i.call(n,e,t,o)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var M=function(e){return function(t,n,i){var o={},r=null==n?S.identity:O(n);return C(t,function(n,a){var s=r.call(i,n,a,t);e(o,s,n)}),o}};S.groupBy=M(function(e,t,n){(S.has(e,t)?e[t]:e[t]=[]).push(n)}),S.indexBy=M(function(e,t,n){e[t]=n}),S.countBy=M(function(e,t){S.has(e,t)?e[t]++:e[t]=1}),S.sortedIndex=function(e,t,n,i){n=null==n?S.identity:O(n);for(var o=n.call(i,t),r=0,a=e.length;a>r;){var s=r+a>>>1;n.call(i,e[s])<o?r=s+1:a=s}return r},S.toArray=function(e){return e?S.isArray(e)?c.call(e):E(e)?S.map(e,S.identity):S.values(e):[]},S.size=function(e){return null==e?0:E(e)?e.length:S.keys(e).length},S.first=S.head=S.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:c.call(e,0,t)},S.initial=function(e,t,n){return c.call(e,0,e.length-(null==t||n?1:t))},S.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:c.call(e,Math.max(e.length-t,0))},S.rest=S.tail=S.drop=function(e,t,n){return c.call(e,null==t||n?1:t)},S.compact=function(e){return S.filter(e,S.identity)};var I=function(e,t,n){return t&&S.every(e,S.isArray)?l.apply(n,e):(C(e,function(e){S.isArray(e)||S.isArguments(e)?t?s.apply(n,e):I(e,t,n):n.push(e)}),n)};S.flatten=function(e,t){return I(e,t,[])},S.without=function(e){return S.difference(e,c.call(arguments,1))},S.uniq=S.unique=function(e,t,n,i){S.isFunction(t)&&(i=n,n=t,t=!1);var o=n?S.map(e,n,i):e,r=[],a=[];return C(o,function(n,i){(t?i&&a[a.length-1]===n:S.contains(a,n))||(a.push(n),r.push(e[i]))}),r},S.union=function(){return S.uniq(S.flatten(arguments,!0))},S.intersection=function(e){var t=c.call(arguments,1);return S.filter(S.uniq(e),function(e){return S.every(t,function(t){return S.indexOf(t,e)>=0})})},S.difference=function(e){var t=l.apply(o,c.call(arguments,1));return S.filter(e,function(e){return!S.contains(t,e)})},S.zip=function(){for(var e=S.max(S.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=S.pluck(arguments,""+n);return t},S.object=function(e,t){if(null==e)return{};for(var n={},i=0,o=e.length;o>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},S.indexOf=function(e,t,n){if(null==e)return-1;var i=0,o=e.length;if(n){if("number"!=typeof n)return i=S.sortedIndex(e,t),e[i]===t?i:-1;i=0>n?Math.max(0,o+n):n}if(b&&e.indexOf===b)return e.indexOf(t,n);for(;o>i;i++)if(e[i]===t)return i;return-1},S.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(_&&e.lastIndexOf===_)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var o=i?n:e.length;o--;)if(e[o]===t)return o;return-1},S.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),o=0,r=new Array(i);i>o;)r[o++]=e,e+=n;return r};var A=function(){};S.bind=function(e,t){var n,i;if(T&&e.bind===T)return T.apply(e,c.call(arguments,1));if(!S.isFunction(e))throw new TypeError;return n=c.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,n.concat(c.call(arguments)));A.prototype=e.prototype;var o=new A;A.prototype=null;var r=e.apply(o,n.concat(c.call(arguments)));return Object(r)===r?r:o}},S.partial=function(e){var t=c.call(arguments,1);return function(){return e.apply(this,t.concat(c.call(arguments)))}},S.bindAll=function(e){var t=c.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return C(t,function(t){e[t]=S.bind(e[t],e)}),e},S.memoize=function(e,t){var n={};return t||(t=S.identity),function(){var i=t.apply(this,arguments);return S.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},S.delay=function(e,t){var n=c.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},S.defer=function(e){return S.delay.apply(S,[e,1].concat(c.call(arguments,1)))},S.throttle=function(e,t,n){var i,o,r,a=null,s=0;n||(n={});var c=function(){s=n.leading===!1?0:new Date,a=null,r=e.apply(i,o)};return function(){var l=new Date;s||n.leading!==!1||(s=l);var u=t-(l-s);return i=this,o=arguments,0>=u?(clearTimeout(a),a=null,s=l,r=e.apply(i,o)):a||n.trailing===!1||(a=setTimeout(c,u)),r}},S.debounce=function(e,t,n){var i,o,r,a,s;return function(){r=this,o=arguments,a=new Date;var c=function(){var l=new Date-a;t>l?i=setTimeout(c,t-l):(i=null,n||(s=e.apply(r,o)))},l=n&&!i;return i||(i=setTimeout(c,t)),l&&(s=e.apply(r,o)),s}},S.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},S.wrap=function(e,t){return function(){var n=[e];return s.apply(n,arguments),t.apply(this,n)}},S.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},S.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},S.keys=k||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)S.has(e,n)&&t.push(n);return t},S.values=function(e){for(var t=S.keys(e),n=t.length,i=new Array(n),o=0;n>o;o++)i[o]=e[t[o]];return i},S.pairs=function(e){for(var t=S.keys(e),n=t.length,i=new Array(n),o=0;n>o;o++)i[o]=[t[o],e[t[o]]];return i},S.invert=function(e){for(var t={},n=S.keys(e),i=0,o=n.length;o>i;i++)t[e[n[i]]]=n[i];return t},S.functions=S.methods=function(e){var t=[];for(var n in e)S.isFunction(e[n])&&t.push(n);return t.sort()},S.extend=function(e){return C(c.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},S.pick=function(e){var t={},n=l.apply(o,c.call(arguments,1));return C(n,function(n){n in e&&(t[n]=e[n])}),t},S.omit=function(e){var t={},n=l.apply(o,c.call(arguments,1));for(var i in e)S.contains(n,i)||(t[i]=e[i]);return t},S.defaults=function(e){return C(c.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e};var N=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof S&&(e=e._wrapped),t instanceof S&&(t=t._wrapped);var o=u.call(e);if(o!=u.call(t))return!1;switch(o){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var r=n.length;r--;)if(n[r]==e)return i[r]==t;var a=e.constructor,s=t.constructor;if(a!==s&&!(S.isFunction(a)&&a instanceof a&&S.isFunction(s)&&s instanceof s))return!1;n.push(e),i.push(t);var c=0,l=!0;if("[object Array]"==o){if(c=e.length,l=c==t.length)for(;c--&&(l=N(e[c],t[c],n,i)););}else{for(var d in e)if(S.has(e,d)&&(c++,!(l=S.has(t,d)&&N(e[d],t[d],n,i))))break;if(l){for(d in t)if(S.has(t,d)&&!c--)break;l=!c}}return n.pop(),i.pop(),l};S.isEqual=function(e,t){return N(e,t,[],[])},S.isEmpty=function(e){if(null==e)return!0;if(S.isArray(e)||S.isString(e))return 0===e.length;for(var t in e)if(S.has(e,t))return!1;return!0},S.isElement=function(e){return!(!e||1!==e.nodeType)},S.isArray=w||function(e){return"[object Array]"==u.call(e)},S.isObject=function(e){return e===Object(e)},C(["Arguments","Function","String","Number","Date","RegExp"],function(e){S["is"+e]=function(t){return u.call(t)=="[object "+e+"]"}}),S.isArguments(arguments)||(S.isArguments=function(e){return!(!e||!S.has(e,"callee"))}),"function"!=typeof/./&&(S.isFunction=function(e){return"function"==typeof e}),S.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},S.isNaN=function(e){return S.isNumber(e)&&e!=+e},S.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==u.call(e)},S.isNull=function(e){return null===e},S.isUndefined=function(e){return void 0===e},S.has=function(e,t){return d.call(e,t)},S.noConflict=function(){return e._=n,this},S.identity=function(e){return e},S.times=function(e,t,n){for(var i=Array(Math.max(0,e)),o=0;e>o;o++)i[o]=t.call(n,o);return i},S.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var $={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};$.unescape=S.invert($.escape);var F={escape:new RegExp("["+S.keys($.escape).join("")+"]","g"),unescape:new RegExp("("+S.keys($.unescape).join("|")+")","g")};S.each(["escape","unescape"],function(e){S[e]=function(t){return null==t?"":(""+t).replace(F[e],function(t){return $[e][t]})}}),S.result=function(e,t){if(null==e)return void 0;var n=e[t];return S.isFunction(n)?n.call(e):n},S.mixin=function(e){C(S.functions(e),function(t){var n=S[t]=e[t];S.prototype[t]=function(){var e=[this._wrapped];return s.apply(e,arguments),U.call(this,n.apply(S,e))}})};var B=0;S.uniqueId=function(e){var t=++B+"";return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;S.template=function(e,t,n){var i;n=S.defaults({},n,S.templateSettings);var o=new RegExp([(n.escape||L).source,(n.interpolate||L).source,(n.evaluate||L).source].join("|")+"|$","g"),r=0,a="__p+='";e.replace(o,function(t,n,i,o,s){return a+=e.slice(r,s).replace(R,function(e){return"\\"+j[e]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),o&&(a+="';\n"+o+"\n__p+='"),r=s+t.length,t}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function(n.variable||"obj","_",a)}catch(s){throw s.source=a,s}if(t)return i(t,S);var c=function(e){return i.call(this,e,S)};return c.source="function("+(n.variable||"obj")+"){\n"+a+"}",c},S.chain=function(e){return S(e).chain()};var U=function(e){return this._chain?S(e).chain():e};S.mixin(S),C(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];S.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],U.call(this,n)}}),C(["concat","join","slice"],function(e){var t=o[e];S.prototype[e]=function(){return U.call(this,t.apply(this._wrapped,arguments))}}),S.extend(S.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)}.call(this),function(){e=t._}.call(this),"undefined"==typeof Package&&(Package={}),Package.underscore={_:e}}(),function(){var e,t=Package.underscore._;(function(){e={isClient:!0,isServer:!1},"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.PUBLIC_SETTINGS&&(e.settings={"public":__meteor_runtime_config__.PUBLIC_SETTINGS})}).call(this),function(){if(e.isServer)var n=Npm.require("fibers/future");"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.meteorRelease&&(e.release=__meteor_runtime_config__.meteorRelease),t.extend(e,{_get:function(e){for(var t=1;t<arguments.length;t++){if(!(arguments[t]in e))return void 0;e=e[arguments[t]]}return e},_ensure:function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];n in e||(e[n]={}),e=e[n]}return e},_delete:function(e){for(var t=[e],n=!0,i=1;i<arguments.length-1;i++){var o=arguments[i];if(!(o in e)){n=!1;break}if(e=e[o],"object"!=typeof e)break;t.push(e)}for(var i=t.length-1;i>=0;i--){var o=arguments[i+1];if(n)n=!1;else for(var r in t[i][o])return;delete t[i][o]}},_wrapAsync:function(i){return function(){for(var o,r,a=this,s=t.toArray(arguments),c=function(t){return t?e._debug("Exception in callback of async function",t.stack?t.stack:t):void 0};s.length>0&&"undefined"==typeof s[s.length-1];)s.pop();s.length>0&&s[s.length-1]instanceof Function?o=s.pop():e.isClient?o=c:(r=new n,o=r.resolver()),s.push(e.bindEnvironment(o));var l=i.apply(a,s);return r?r.wait():l}},_inherits:function(e,n){t.each(n,function(t,n){e[n]=t});var i=function(){this.constructor=e};return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e}})}.call(this),function(){"use strict";function t(){if(o.setImmediate){var e=function(e){o.setImmediate(e)};return e.implementation="setImmediate",e}return null}function n(){function e(e,t){return"string"==typeof e&&e.substring(0,t.length)===t}function t(t){if(t.source===o&&e(t.data,s)){var n=t.data.substring(s.length);try{a[n]&&a[n]()}finally{delete a[n]}}}if(!o.postMessage||o.importScripts)return null;var n=!0,i=o.onmessage;if(o.onmessage=function(){n=!1},o.postMessage("","*"),o.onmessage=i,!n)return null;var r=0,a={},s="Meteor._setImmediate."+Math.random()+".";o.addEventListener?o.addEventListener("message",t,!1):o.attachEvent("onmessage",t);var c=function(e){++r,a[r]=e,o.postMessage(s+r,"*")};return c.implementation="postMessage",c}function i(){var e=function(e){o.setTimeout(e,0)};return e.implementation="setTimeout",e}var o=this;e._setImmediate=t()||n()||i()}.call(this),function(){var n=function(e){if(Package.livedata){var t=Package.livedata.DDP._CurrentInvocation;if(t.get()&&t.get().isSimulation)throw new Error("Can't set timers inside simulations");return function(){t.withValue(null,e)}}return e},i=function(t,i){return e.bindEnvironment(n(i),t)};t.extend(e,{setTimeout:function(e,t){return setTimeout(i("setTimeout callback",e),t)},setInterval:function(e,t){return setInterval(i("setInterval callback",e),t)},clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)},defer:function(t){e._setImmediate(i("defer callback",t))}})}.call(this),function(){var t=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};e.makeErrorType=function(e,n){var i=function(){var t=this;if(Error.captureStackTrace)Error.captureStackTrace(t,i);else{var o=new Error;o.__proto__=i.prototype,o instanceof i&&(t=o)}return n.apply(t,arguments),t.errorType=e,t};return t(i,Error),i},e.Error=e.makeErrorType("Meteor.Error",function(e,t,n){var i=this;i.error=e,i.reason=t,i.details=n,i.message=i.reason?i.reason+" ["+i.error+"]":"["+i.error+"]"}),e.Error.prototype.clone=function(){var t=this;return new e.Error(t.error,t.reason,t.details)}}.call(this),function(){e._noYieldsAllowed=function(e){return e()},e._SynchronousQueue=function(){var e=this;e._tasks=[],e._running=!1},t.extend(e._SynchronousQueue.prototype,{runTask:function(n){var i=this;if(!i.safeToRunTask())throw new Error("Could not synchronously run a task from a running task");i._tasks.push(n);var o=i._tasks;i._tasks=[],i._running=!0;try{for(;!t.isEmpty(o);){var r=o.shift();try{r()}catch(a){if(t.isEmpty(o))throw a;e._debug("Exception in queued task: "+a.stack)}}}finally{i._running=!1}},queueTask:function(e){var n=this,i=t.isEmpty(n._tasks);n._tasks.push(e),i&&setTimeout(t.bind(n.flush,n),0)},flush:function(){var e=this;e.runTask(function(){})},drain:function(){var e=this;if(e.safeToRunTask())for(;!t.isEmpty(e._tasks);)e.flush()},safeToRunTask:function(){var e=this;return!e._running}})}.call(this),function(){var t=[],n="loaded"===document.readyState||"complete"==document.readyState,i=function(){for(n=!0;t.length;)t.shift()()};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&i()}),window.attachEvent("load",i)),e.startup=function(i){var o=!document.addEventListener&&document.documentElement.doScroll;if(o&&window===top){try{o("left")}catch(r){return setTimeout(function(){e.startup(i)},50),void 0}i()}else n?i():t.push(i)}}.call(this),function(){var t=0;e._debug=function(){if(t)return t--,void 0;if("undefined"!=typeof console&&"undefined"!=typeof console.log)if(0==arguments.length)console.log("");else if("function"==typeof console.log.apply){for(var e=!0,n=0;n<arguments.length;n++)"string"!=typeof arguments[n]&&(e=!1);e?console.log.apply(console,[Array.prototype.join.call(arguments," ")]):console.log.apply(console,arguments)}else if("function"==typeof Function.prototype.bind){var i=Function.prototype.bind.call(console.log,console);i.apply(console,arguments)}else Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments))},e._suppress_log=function(e){t+=e}}.call(this),function(){var n=0,i=[];e.EnvironmentVariable=function(){this.slot=n++},t.extend(e.EnvironmentVariable.prototype,{get:function(){return i[this.slot]},withValue:function(e,t){var n=i[this.slot];try{i[this.slot]=e;var o=t()}finally{i[this.slot]=n}return o}}),e.bindEnvironment=function(n,o,r){var a=t.clone(i);if(!o||"string"==typeof o){var s=o||"callback of async function";o=function(t){e._debug("Exception in "+s+":",t&&t.stack||t)}}return function(){var e=i;try{i=a;var s=n.apply(r,t.toArray(arguments))}catch(c){o(c)}finally{i=e}return s}},e._nodeCodeMustBeInFiber=function(){}}.call(this),function(){e.absoluteUrl=function(n,i){i||"object"!=typeof n||(i=n,n=void 0),i=t.extend({},e.absoluteUrl.defaultOptions,i||{});var o=i.rootUrl;if(!o)throw new Error("Must pass options.rootUrl or set ROOT_URL in the server environment");return/^http[s]?:\/\//i.test(o)||(o="http://"+o),/\/$/.test(o)||(o+="/"),n&&(o+=n),i.secure&&/^http:/.test(o)&&!/http:\/\/localhost[:\/]/.test(o)&&!/http:\/\/127\.0\.0\.1[:\/]/.test(o)&&(o=o.replace(/^http:/,"https:")),i.replaceLocalhost&&(o=o.replace(/^http:\/\/localhost([:\/].*)/,"http://127.0.0.1$1")),o},e.absoluteUrl.defaultOptions={},"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.ROOT_URL&&(e.absoluteUrl.defaultOptions.rootUrl=__meteor_runtime_config__.ROOT_URL),e._relativeToSiteRootUrl=function(e){return"object"==typeof __meteor_runtime_config__&&"/"===e.substr(0,1)&&(e=(__meteor_runtime_config__.ROOT_URL_PATH_PREFIX||"")+e),e}}.call(this),"undefined"==typeof Package&&(Package={}),Package.meteor={Meteor:e}}(),function(){Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.insecure={}}(),function(){var e,t=Package.meteor.Meteor,n=Package.underscore._;(function(){e={},e.active=!1,e.currentComputation=null;var i=function(t){e.currentComputation=t,e.active=!!t},o=function(){return"undefined"!=typeof t?t._debug:"undefined"!=typeof console&&console.log?console.log:function(){}},r=function(e,t){if(d)throw t;o()("Exception from Deps "+e+" function:",t.stack||t.message)},a=1,s=[],c=!1,l=!1,u=!1,d=!1,f=[],p=function(){c||(setTimeout(e.flush,0),c=!0)},h=!1;e.Computation=function(e,t){if(!h)throw new Error("Deps.Computation constructor is private; use Deps.autorun");h=!1;var n=this;n.stopped=!1,n.invalidated=!1,n.firstRun=!0,n._id=a++,n._onInvalidateCallbacks=[],n._parent=t,n._func=e,n._recomputing=!1;var i=!0;try{n._compute(),i=!1}finally{n.firstRun=!1,i&&n.stop()}},n.extend(e.Computation.prototype,{onInvalidate:function(n){var i=this;if("function"!=typeof n)throw new Error("onInvalidate requires a function");var o=function(){e.nonreactive(function(){return t._noYieldsAllowed(function(){n(i)})})};i.invalidated?o():i._onInvalidateCallbacks.push(o)},invalidate:function(){var e=this;if(!e.invalidated){e._recomputing||e.stopped||(p(),s.push(this)),e.invalidated=!0;for(var t,n=0;t=e._onInvalidateCallbacks[n];n++)t();e._onInvalidateCallbacks=[]}},stop:function(){this.stopped||(this.stopped=!0,this.invalidate())},_compute:function(){var t=this;t.invalidated=!1;var n=e.currentComputation;i(t);u=!0;try{t._func(t)}finally{i(n),u=!1}},_recompute:function(){var e=this;e._recomputing=!0;try{for(;e.invalidated&&!e.stopped;)try{e._compute()}catch(t){r("recompute",t)}}finally{e._recomputing=!1}}}),e.Dependency=function(){this._dependentsById={}},n.extend(e.Dependency.prototype,{depend:function(t){if(!t){if(!e.active)return!1;t=e.currentComputation}var n=this,i=t._id;return i in n._dependentsById?!1:(n._dependentsById[i]=t,t.onInvalidate(function(){delete n._dependentsById[i]}),!0)},changed:function(){var e=this;for(var t in e._dependentsById)e._dependentsById[t].invalidate()},hasDependents:function(){var e=this;for(var t in e._dependentsById)return!0;return!1}}),n.extend(e,{flush:function(t){if(l)throw new Error("Can't call Deps.flush while flushing");if(u)throw new Error("Can't flush inside Deps.autorun");l=!0,c=!0,d=!(!t||!t._throwFirstError);try{for(;s.length||f.length;){for(;s.length;){var n=s.shift();n._recompute()}if(f.length){var i=f.shift();try{i()}catch(o){r("afterFlush function",o)}}}}catch(o){throw l=!1,e.flush({_throwFirstError:!1}),o}finally{c=!1,l=!1}},autorun:function(n){if("function"!=typeof n)throw new Error("Deps.autorun requires a function argument");h=!0;var i=new e.Computation(function(e){t._noYieldsAllowed(function(){n(e)})},e.currentComputation);return e.active&&e.onInvalidate(function(){i.stop()}),i},nonreactive:function(t){var n=e.currentComputation;i(null);try{return t()}finally{i(n)}},onInvalidate:function(t){if(!e.active)throw new Error("Deps.onInvalidate requires a currentComputation");e.currentComputation.onInvalidate(t)},afterFlush:function(e){f.push(e),p()}})}).call(this),function(){t.flush=e.flush,t.autorun=e.autorun,t.autosubscribe=e.autorun,e.depend=function(e){return e.depend()}}.call(this),"undefined"==typeof Package&&(Package={}),Package.deps={Deps:e}}(),function(){{var e,t=Package.meteor.Meteor;Package.underscore._}(function(){if(t.isServer)var n=Npm.require("crypto");var i=function(){function e(){var e=4022871197,t=function(t){t=t.toString();for(var n=0;n<t.length;n++){e+=t.charCodeAt(n);var i=.02519603282416938*e;e=i>>>0,i-=e,i*=e,e=i>>>0,i-=e,e+=4294967296*i}return 2.3283064365386963e-10*(e>>>0)};return t.version="Mash 0.9",t}return function(t){var n=0,i=0,o=0,r=1;0==t.length&&(t=[+new Date]);var a=e();n=a(" "),i=a(" "),o=a(" ");for(var s=0;s<t.length;s++)n-=a(t[s]),0>n&&(n+=1),i-=a(t[s]),0>i&&(i+=1),o-=a(t[s]),0>o&&(o+=1);a=null;var c=function(){var e=2091639*n+2.3283064365386963e-10*r;return n=i,i=o,o=e-(r=0|e)};return c.uint32=function(){return 4294967296*c()},c.fract53=function(){return c()+1.1102230246251565e-16*(2097152*c()|0)},c.version="Alea 0.9",c.args=t,c}(Array.prototype.slice.call(arguments))},o="23456789ABCDEFGHJKLMNPQRSTWXYZabcdefghijkmnopqrstuvwxyz",r=function(e){var t=this;void 0!==e&&(t.alea=i.apply(null,e))};r.prototype.fraction=function(){var e=this;if(e.alea)return e.alea();if(n){var t=parseInt(e.hexString(8),16);return 2.3283064365386963e-10*t}if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues){var i=new Uint32Array(1);return window.crypto.getRandomValues(i),2.3283064365386963e-10*i[0]}},r.prototype.hexString=function(e){var t=this;if(n&&!t.alea){var i,o=Math.ceil(e/2);try{i=n.randomBytes(o)}catch(r){i=n.pseudoRandomBytes(o)}var a=i.toString("hex");return a.substring(0,e)}for(var s=[],c=0;e>c;++c)s.push(t.choice("0123456789abcdef"));return s.join("")},r.prototype.id=function(){for(var e=[],t=this,n=0;17>n;n++)e[n]=t.choice(o);return e.join("")},r.prototype.choice=function(e){var t=Math.floor(this.fraction()*e.length);return"string"==typeof e?e.substr(t,1):e[t]};var a="undefined"!=typeof window&&window.innerHeight||"undefined"!=typeof document&&document.documentElement&&document.documentElement.clientHeight||"undefined"!=typeof document&&document.body&&document.body.clientHeight||1,s="undefined"!=typeof window&&window.innerWidth||"undefined"!=typeof document&&document.documentElement&&document.documentElement.clientWidth||"undefined"!=typeof document&&document.body&&document.body.clientWidth||1,c="undefined"!=typeof navigator&&navigator.userAgent||"";e=n||"undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues?new r:new r([new Date,a,s,c,Math.random()]),e.create=function(){return new r(arguments)}}).call(this),function(){t.uuid=function(){for(var t="0123456789abcdef",n=[],i=0;36>i;i++)n[i]=e.choice(t);n[14]="4",n[19]=t.substr(3&parseInt(n[19],16)|8,1),n[8]=n[13]=n[18]=n[23]="-";var o=n.join("");return o}}.call(this),"undefined"==typeof Package&&(Package={}),Package.random={Random:e}}(),function(){var Meteor=Package.meteor.Meteor,JSON;(function(){window.JSON&&(JSON=window.JSON)}).call(this),function(){"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,o,r,a,s=gap,c=t[e];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(c)){for(r=c.length,n=0;r>n;n+=1)a[n]=str(n,c)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;r>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],o=str(i,c),o&&a.push(quote(i)+(gap?": ":":")+o));else for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(o=str(i,c),o&&a.push(quote(i)+(gap?": ":":")+o));return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i=walk(o,n),void 0!==i?o[n]=i:delete o[n]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()}.call(this),"undefined"==typeof Package&&(Package={}),Package.json={JSON:JSON}}(),function(){var e,t,n,i,o=(Package.meteor.Meteor,Package.json.JSON),r=Package.underscore._;(function(){e={},t={};var a={};e.addType=function(e,t){if(r.has(a,e))throw new Error("Type "+e+" already present");a[e]=t};var s=function(e){return r.isNaN(e)||1/0===e||e===-1/0},c=[{matchJSONValue:function(e){return r.has(e,"$date")&&1===r.size(e)},matchObject:function(e){return e instanceof Date},toJSONValue:function(e){return{$date:e.getTime()}},fromJSONValue:function(e){return new Date(e.$date)}},{matchJSONValue:function(e){return r.has(e,"$InfNaN")&&1===r.size(e)},matchObject:s,toJSONValue:function(e){var t;return t=r.isNaN(e)?0:1/0===e?1:-1,{$InfNaN:t}},fromJSONValue:function(e){return e.$InfNaN/0}},{matchJSONValue:function(e){return r.has(e,"$binary")&&1===r.size(e)},matchObject:function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&r.has(e,"$Uint8ArrayPolyfill")},toJSONValue:function(e){return{$binary:n(e)}},fromJSONValue:function(e){return i(e.$binary)}},{matchJSONValue:function(e){return r.has(e,"$escape")&&1===r.size(e)
},matchObject:function(e){return r.isEmpty(e)||r.size(e)>2?!1:r.any(c,function(t){return t.matchJSONValue(e)})},toJSONValue:function(t){var n={};return r.each(t,function(t,i){n[i]=e.toJSONValue(t)}),{$escape:n}},fromJSONValue:function(t){var n={};return r.each(t.$escape,function(t,i){n[i]=e.fromJSONValue(t)}),n}},{matchJSONValue:function(e){return r.has(e,"$type")&&r.has(e,"$value")&&2===r.size(e)},matchObject:function(t){return e._isCustomType(t)},toJSONValue:function(e){return{$type:e.typeName(),$value:e.toJSONValue()}},fromJSONValue:function(e){var t=e.$type,n=a[t];return n(e.$value)}}];e._isCustomType=function(e){return e&&"function"==typeof e.toJSONValue&&"function"==typeof e.typeName&&r.has(a,e.typeName())};var l=e._adjustTypesToJSONValue=function(e){if(null===e)return null;var t=u(e);return void 0!==t?t:"object"!=typeof e?e:(r.each(e,function(t,n){if("object"==typeof t||void 0===t||s(t)){var i=u(t);return i?(e[n]=i,void 0):(l(t),void 0)}}),e)},u=function(e){for(var t=0;t<c.length;t++){var n=c[t];if(n.matchObject(e))return n.toJSONValue(e)}return void 0};e.toJSONValue=function(t){var n=u(t);return void 0!==n?n:("object"==typeof t&&(t=e.clone(t),l(t)),t)};var d=e._adjustTypesFromJSONValue=function(e){if(null===e)return null;var t=f(e);return t!==e?t:"object"!=typeof e?e:(r.each(e,function(t,n){if("object"==typeof t){var i=f(t);if(t!==i)return e[n]=i,void 0;d(t)}}),e)},f=function(e){if("object"==typeof e&&null!==e&&r.size(e)<=2&&r.all(e,function(e,t){return"string"==typeof t&&"$"===t.substr(0,1)}))for(var t=0;t<c.length;t++){var n=c[t];if(n.matchJSONValue(e))return n.fromJSONValue(e)}return e};e.fromJSONValue=function(t){var n=f(t);return n===t&&"object"==typeof t?(t=e.clone(t),d(t),t):n},e.stringify=function(t,n){var i=e.toJSONValue(t);return n&&(n.canonical||n.indent)?e._canonicalStringify(i,n):o.stringify(i)},e.parse=function(t){if("string"!=typeof t)throw new Error("EJSON.parse argument should be a string");return e.fromJSONValue(o.parse(t))},e.isBinary=function(e){return!!("undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill)},e.equals=function(t,n,i){var o,a=!(!i||!i.keyOrderSensitive);if(t===n)return!0;if(r.isNaN(t)&&r.isNaN(n))return!0;if(!t||!n)return!1;if("object"!=typeof t||"object"!=typeof n)return!1;if(t instanceof Date&&n instanceof Date)return t.valueOf()===n.valueOf();if(e.isBinary(t)&&e.isBinary(n)){if(t.length!==n.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==n[o])return!1;return!0}if("function"==typeof t.equals)return t.equals(n,i);if("function"==typeof n.equals)return n.equals(t,i);if(t instanceof Array){if(!(n instanceof Array))return!1;if(t.length!==n.length)return!1;for(o=0;o<t.length;o++)if(!e.equals(t[o],n[o],i))return!1;return!0}switch(e._isCustomType(t)+e._isCustomType(n)){case 1:return!1;case 2:return e.equals(e.toJSONValue(t),e.toJSONValue(n))}var s;if(a){var c=[];return r.each(n,function(e,t){c.push(t)}),o=0,s=r.all(t,function(t,r){return o>=c.length?!1:r!==c[o]?!1:e.equals(t,n[c[o]],i)?(o++,!0):!1}),s&&o===c.length}return o=0,s=r.all(t,function(t,a){return r.has(n,a)?e.equals(t,n[a],i)?(o++,!0):!1:!1}),s&&r.size(n)===o},e.clone=function(t){var n;if("object"!=typeof t)return t;if(null===t)return null;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return t;if(e.isBinary(t)){n=e.newBinary(t.length);for(var i=0;i<t.length;i++)n[i]=t[i];return n}if(r.isArray(t)||r.isArguments(t)){for(n=[],i=0;i<t.length;i++)n[i]=e.clone(t[i]);return n}return"function"==typeof t.clone?t.clone():e._isCustomType(t)?e.fromJSONValue(e.clone(e.toJSONValue(t)),!0):(n={},r.each(t,function(t,i){n[i]=e.clone(t)}),n)}}).call(this),function(){function t(e){return o.stringify(e)}var n=function(e,i,o,a,s){var c,l,u,d,f=a,p=i[e];switch(typeof p){case"string":return t(p);case"number":return isFinite(p)?String(p):"null";case"boolean":return String(p);case"object":if(!p)return"null";if(f=a+o,d=[],r.isArray(p)||r.isArguments(p)){for(u=p.length,c=0;u>c;c+=1)d[c]=n(c,p,o,f,s)||"null";return l=0===d.length?"[]":f?"[\n"+f+d.join(",\n"+f)+"\n"+a+"]":"["+d.join(",")+"]"}var h=r.keys(p);return s&&(h=h.sort()),r.each(h,function(e){l=n(e,p,o,f,s),l&&d.push(t(e)+(f?": ":":")+l)}),l=0===d.length?"{}":f?"{\n"+f+d.join(",\n"+f)+"\n"+a+"}":"{"+d.join(",")+"}"}};e._canonicalStringify=function(e,t){if(t=r.extend({indent:"",canonical:!1},t),t.indent===!0)t.indent="  ";else if("number"==typeof t.indent){for(var i="",o=0;o<t.indent;o++)i+=" ";t.indent=i}return n("",{"":e},t.indent,"",t.canonical)}}.call(this),function(){for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={},a=0;a<o.length;a++)r[o.charAt(a)]=a;n=function(e){for(var t=[],n=null,i=null,o=null,r=null,a=0;a<e.length;a++)switch(a%3){case 0:n=e[a]>>2&63,i=(3&e[a])<<4;break;case 1:i|=e[a]>>4&15,o=(15&e[a])<<2;break;case 2:o|=e[a]>>6&3,r=63&e[a],t.push(s(n)),t.push(s(i)),t.push(s(o)),t.push(s(r)),n=null,i=null,o=null,r=null}return null!=n&&(t.push(s(n)),t.push(s(i)),null==o?t.push("="):t.push(s(o)),null==r&&t.push("=")),t.join("")};var s=function(e){return o.charAt(e)},c=function(e){return"="===e?-1:r[e]};e.newBinary=function(e){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var t=[],n=0;e>n;n++)t.push(0);return t.$Uint8ArrayPolyfill=!0,t}return new Uint8Array(new ArrayBuffer(e))},i=function(t){var n=Math.floor(3*t.length/4);"="==t.charAt(t.length-1)&&(n--,"="==t.charAt(t.length-2)&&n--);for(var i=e.newBinary(n),o=null,r=null,a=null,s=0,l=0;l<t.length;l++){var u=t.charAt(l),d=c(u);switch(l%4){case 0:if(0>d)throw new Error("invalid base64 string");o=d<<2;break;case 1:if(0>d)throw new Error("invalid base64 string");o|=d>>4,i[s++]=o,r=(15&d)<<4;break;case 2:d>=0&&(r|=d>>2,i[s++]=r,a=(3&d)<<6);break;case 3:d>=0&&(i[s++]=a|d)}}return i},t.base64Encode=n,t.base64Decode=i}.call(this),"undefined"==typeof Package&&(Package={}),Package.ejson={EJSON:e,EJSONTest:t}}(),function(){var e,t=(Package.meteor.Meteor,Package.underscore._),n=Package.json.JSON,i=Package.ejson.EJSON;(function(){e=function(e,t){var i=this;i._map={},i._idStringify=e||n.stringify,i._idParse=t||n.parse},t.extend(e.prototype,{get:function(e){var t=this,n=t._idStringify(e);return t._map[n]},set:function(e,t){var n=this,i=n._idStringify(e);n._map[i]=t},remove:function(e){var t=this,n=t._idStringify(e);delete t._map[n]},has:function(e){var n=this,i=n._idStringify(e);return t.has(n._map,i)},empty:function(){var e=this;return t.isEmpty(e._map)},clear:function(){var e=this;e._map={}},forEach:function(e){for(var n=this,i=t.keys(n._map),o=0;o<i.length;o++){var r=e.call(null,n._map[i[o]],n._idParse(i[o]));if(r===!1)return}},size:function(){var e=this;return t.size(e._map)},setDefault:function(e,n){var i=this,o=i._idStringify(e);return t.has(i._map,o)?i._map[o]:(i._map[o]=n,n)},clone:function(){var t=this,n=new e(t._idStringify,t._idParse);return t.forEach(function(e,t){n.set(t,i.clone(e))}),n}})}).call(this),"undefined"==typeof Package&&(Package={}),Package["id-map"]={IdMap:e}}(),function(){var e,t=(Package.meteor.Meteor,Package.underscore._);(function(){var n=function(e,t,n,i){return{key:e,value:t,next:n,prev:i}};e=function(){var e=this;e._dict={},e._first=null,e._last=null,e._size=0;var n=t.toArray(arguments);e._stringify=function(e){return e},"function"==typeof n[0]&&(e._stringify=n.shift()),t.each(n,function(t){e.putBefore(t[0],t[1],null)})},t.extend(e.prototype,{_k:function(e){return" "+this._stringify(e)},empty:function(){var e=this;return!e._first},size:function(){var e=this;return e._size},_linkEltIn:function(e){var t=this;e.next?(e.prev=e.next.prev,e.next.prev=e,e.prev&&(e.prev.next=e)):(e.prev=t._last,t._last&&(t._last.next=e),t._last=e),(null===t._first||t._first===e.next)&&(t._first=e)},_linkEltOut:function(e){var t=this;e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next),e===t._last&&(t._last=e.prev),e===t._first&&(t._first=e.next)},putBefore:function(e,t,i){var o=this;if(o._dict[o._k(e)])throw new Error("Item "+e+" already present in OrderedDict");var r=i?n(e,t,o._dict[o._k(i)]):n(e,t,null);if(void 0===r.next)throw new Error("could not find item to put this one before");o._linkEltIn(r),o._dict[o._k(e)]=r,o._size++},append:function(e,t){var n=this;n.putBefore(e,t,null)},remove:function(e){var t=this,n=t._dict[t._k(e)];if(void 0===n)throw new Error("Item "+e+" not present in OrderedDict");return t._linkEltOut(n),t._size--,delete t._dict[t._k(e)],n.value},get:function(e){var t=this;return t.has(e)?t._dict[t._k(e)].value:void 0},has:function(e){var n=this;return t.has(n._dict,n._k(e))},forEach:function(t){for(var n=this,i=0,o=n._first;null!==o;){var r=t(o.value,o.key,i);if(r===e.BREAK)return;o=o.next,i++}},first:function(){var e=this;return e.empty()?void 0:e._first.key},firstValue:function(){var e=this;return e.empty()?void 0:e._first.value},last:function(){var e=this;return e.empty()?void 0:e._last.key},lastValue:function(){var e=this;return e.empty()?void 0:e._last.value},prev:function(e){var t=this;if(t.has(e)){var n=t._dict[t._k(e)];if(n.prev)return n.prev.key}return null},next:function(e){var t=this;if(t.has(e)){var n=t._dict[t._k(e)];if(n.next)return n.next.key}return null},moveBefore:function(e,t){var n=this,i=n._dict[n._k(e)],o=t?n._dict[n._k(t)]:null;if(void 0===i)throw new Error("Item to move is not present");if(void 0===o)throw new Error("Could not find element to move this one before");o!==i.next&&(n._linkEltOut(i),i.next=o,n._linkEltIn(i))},indexOf:function(t){var n=this,i=null;return n.forEach(function(o,r,a){return n._k(r)===n._k(t)?(i=a,e.BREAK):void 0}),i},_checkRep:function(){var e=this;t.each(e._dict,function(e,t){if(t.next===t)throw new Error("Next is a loop");if(t.prev===t)throw new Error("Prev is a loop")})}}),e.BREAK={"break":!0}}).call(this),"undefined"==typeof Package&&(Package={}),Package["ordered-dict"]={OrderedDict:e}}(),function(){{var e,t;Package.meteor.Meteor}(function(){t={exports:{}}}).call(this),function(){!function(){function e(e){for(var t=[],n=[],i=0;i<e[0].length;i++)t.push(e[0][i][1]),n.push(e[0][i][0]);return t=t.sort(function(e,t){return e-t}),n=n.sort(function(e,t){return e-t}),[[t[0],n[0]],[t[t.length-1],n[n.length-1]]]}function n(e,t,n){for(var i=[[0,0]],o=0;o<n.length;o++){for(var r=0;r<n[o].length;r++)i.push(n[o][r]);i.push([0,0])}for(var a=!1,o=0,r=i.length-1;o<i.length;r=o++)i[o][0]>t!=i[r][0]>t&&e<(i[r][1]-i[o][1])*(t-i[o][0])/(i[r][0]-i[o][0])+i[o][1]&&(a=!a);return a}var i={};"undefined"!=typeof t&&t.exports&&(t.exports=i),i.lineStringsIntersect=function(e,t){for(var n=[],i=0;i<=e.coordinates.length-2;++i)for(var o=0;o<=t.coordinates.length-2;++o){var r={x:e.coordinates[i][1],y:e.coordinates[i][0]},a={x:e.coordinates[i+1][1],y:e.coordinates[i+1][0]},s={x:t.coordinates[o][1],y:t.coordinates[o][0]},c={x:t.coordinates[o+1][1],y:t.coordinates[o+1][0]},l=(c.x-s.x)*(r.y-s.y)-(c.y-s.y)*(r.x-s.x),u=(a.x-r.x)*(r.y-s.y)-(a.y-r.y)*(r.x-s.x),d=(c.y-s.y)*(a.x-r.x)-(c.x-s.x)*(a.y-r.y);if(0!=d){var f=l/d,p=u/d;f>=0&&1>=f&&p>=0&&1>=p&&n.push({type:"Point",coordinates:[r.x+f*(a.x-r.x),r.y+f*(a.y-r.y)]})}}return 0==n.length&&(n=!1),n},i.pointInBoundingBox=function(e,t){return!(e.coordinates[1]<t[0][0]||e.coordinates[1]>t[1][0]||e.coordinates[0]<t[0][1]||e.coordinates[0]>t[1][1])},i.pointInPolygon=function(t,o){for(var r="Polygon"==o.type?[o.coordinates]:o.coordinates,a=!1,s=0;s<r.length;s++)i.pointInBoundingBox(t,e(r[s]))&&(a=!0);if(!a)return!1;for(var c=!1,s=0;s<r.length;s++)n(t.coordinates[1],t.coordinates[0],r[s])&&(c=!0);return c},i.numberToRadius=function(e){return e*Math.PI/180},i.numberToDegree=function(e){return 180*e/Math.PI},i.drawCircle=function(e,t,n){for(var o=[t.coordinates[1],t.coordinates[0]],r=e/1e3/6371,a=[i.numberToRadius(o[0]),i.numberToRadius(o[1])],n=n||15,s=[[o[0],o[1]]],c=0;n>c;c++){var l=2*Math.PI*c/n,u=Math.asin(Math.sin(a[0])*Math.cos(r)+Math.cos(a[0])*Math.sin(r)*Math.cos(l)),d=a[1]+Math.atan2(Math.sin(l)*Math.sin(r)*Math.cos(a[0]),Math.cos(r)-Math.sin(a[0])*Math.sin(u));s[c]=[],s[c][1]=i.numberToDegree(u),s[c][0]=i.numberToDegree(d)}return{type:"Polygon",coordinates:[s]}},i.rectangleCentroid=function(e){var t=e.coordinates[0],n=t[0][0],i=t[0][1],o=t[2][0],r=t[2][1],a=o-n,s=r-i;return{type:"Point",coordinates:[n+a/2,i+s/2]}},i.pointDistance=function(e,t){var n=e.coordinates[0],o=e.coordinates[1],r=t.coordinates[0],a=t.coordinates[1],s=i.numberToRadius(a-o),c=i.numberToRadius(r-n),l=Math.pow(Math.sin(s/2),2)+Math.cos(i.numberToRadius(o))*Math.cos(i.numberToRadius(a))*Math.pow(Math.sin(c/2),2),u=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return 6371*u*1e3},i.geometryWithinRadius=function(e,t,n){if("Point"==e.type)return i.pointDistance(e,t)<=n;if("LineString"==e.type||"Polygon"==e.type){var o,r={};o="Polygon"==e.type?e.coordinates[0]:e.coordinates;for(var a in o)if(r.coordinates=o[a],i.pointDistance(r,t)>n)return!1}return!0},i.area=function(e){for(var t,n,i=0,o=e.coordinates[0],r=o.length-1,a=0;a<o.length;r=a++){var t={x:o[a][1],y:o[a][0]},n={x:o[r][1],y:o[r][0]};i+=t.x*n.y,i-=t.y*n.x}return i/=2},i.centroid=function(e){for(var t,n,o,r=0,a=0,s=e.coordinates[0],c=s.length-1,l=0;l<s.length;c=l++){var n={x:s[l][1],y:s[l][0]},o={x:s[c][1],y:s[c][0]};t=n.x*o.y-o.x*n.y,r+=(n.x+o.x)*t,a+=(n.y+o.y)*t}return t=6*i.area(e),{type:"Point",coordinates:[a/t,r/t]}},i.simplify=function(e,t){t=t||20,e=e.map(function(e){return{lng:e.coordinates[0],lat:e.coordinates[1]}});var n,i,o,r,a,s,c,l,u,d,f,p,h,g,m,v,y,b,_,w=Math.PI/180*.5,k=new Array,T=new Array,S=new Array;if(e.length<3)return e;for(n=e.length,d=360*t/(2*Math.PI*6378137),d*=d,o=0,T[0]=0,S[0]=n-1,i=1;i>0;)if(r=T[i-1],a=S[i-1],i--,a-r>1){for(f=e[a].lng()-e[r].lng(),p=e[a].lat()-e[r].lat(),Math.abs(f)>180&&(f=360-Math.abs(f)),f*=Math.cos(w*(e[a].lat()+e[r].lat())),h=f*f+p*p,s=r+1,c=r,u=-1;a>s;s++)g=e[s].lng()-e[r].lng(),m=e[s].lat()-e[r].lat(),Math.abs(g)>180&&(g=360-Math.abs(g)),g*=Math.cos(w*(e[s].lat()+e[r].lat())),v=g*g+m*m,y=e[s].lng()-e[a].lng(),b=e[s].lat()-e[a].lat(),Math.abs(y)>180&&(y=360-Math.abs(y)),y*=Math.cos(w*(e[s].lat()+e[a].lat())),_=y*y+b*b,l=v>=h+_?_:_>=h+v?v:(g*p-m*f)*(g*p-m*f)/h,l>u&&(c=s,u=l);d>u?(k[o]=r,o++):(i++,T[i-1]=c,S[i-1]=a,i++,T[i-1]=r,S[i-1]=c)}else k[o]=r,o++;k[o]=n-1,o++;for(var x=new Array,s=0;o>s;s++)x.push(e[k[s]]);return x.map(function(e){return{type:"Point",coordinates:[e.lng,e.lat]}})},i.destinationPoint=function(e,t,n){n/=6371,t=i.numberToRadius(t);var o=i.numberToRadius(e.coordinates[0]),r=i.numberToRadius(e.coordinates[1]),a=Math.asin(Math.sin(o)*Math.cos(n)+Math.cos(o)*Math.sin(n)*Math.cos(t)),s=r+Math.atan2(Math.sin(t)*Math.sin(n)*Math.cos(o),Math.cos(n)-Math.sin(o)*Math.sin(a));return s=(s+3*Math.PI)%(2*Math.PI)-Math.PI,{type:"Point",coordinates:[i.numberToDegree(a),i.numberToDegree(s)]}}}()}.call(this),function(){e=t.exports}.call(this),"undefined"==typeof Package&&(Package={}),Package["geojson-utils"]={GeoJSON:e}}(),function(){var e,t,n,i,o,r,a,s,c,l,u,d,f,p,h,g,m=Package.meteor.Meteor,v=Package.underscore._,y=Package.json.JSON,b=Package.ejson.EJSON,_=Package["id-map"].IdMap,w=Package["ordered-dict"].OrderedDict,k=Package.deps.Deps,T=Package.random.Random,S=Package["geojson-utils"].GeoJSON;(function(){e=function(t){var n=this;n.name=t,n._docs=new e._IdMap,n._observeQueue=new m._SynchronousQueue,n.next_qid=1,n.queries={},n._savedOriginals=null,n.paused=!1},t={},n={},e._applyChanges=function(e,t){v.each(t,function(t,n){void 0===t?delete e[n]:e[n]=t})},i=function(e){var t=new Error(e);return t.name="MinimongoError",t},e.prototype.find=function(t,n){return 0===arguments.length&&(t={}),new e.Cursor(this,t,n)},e.Cursor=function(n,i,o){var r=this;o||(o={}),r.collection=n,r.sorter=null,e._selectorIsId(i)?(r._selectorId=i,r.matcher=new t.Matcher(i,r)):(r._selectorId=void 0,r.matcher=new t.Matcher(i,r),(r.matcher.hasGeoQuery()||o.sort)&&(r.sorter=new t.Sorter(o.sort||[],{matcher:r.matcher}))),r.skip=o.skip,r.limit=o.limit,r.fields=o.fields,r.fields&&(r.projectionFn=e._compileProjection(r.fields)),r._transform=e.wrapTransform(o.transform),r.db_objects=null,r.cursor_pos=0,"undefined"!=typeof k&&(r.reactive=void 0===o.reactive?!0:o.reactive)},e.Cursor.prototype.rewind=function(){var e=this;e.db_objects=null,e.cursor_pos=0},e.prototype.findOne=function(e,t){return 0===arguments.length&&(e={}),t=t||{},t.limit=1,this.find(e,t).fetch()[0]},e.Cursor.prototype.forEach=function(e,t){var n=this;for(null===n.db_objects&&(n.db_objects=n._getRawObjects({ordered:!0})),n.reactive&&n._depend({addedBefore:!0,removed:!0,changed:!0,movedBefore:!0});n.cursor_pos<n.db_objects.length;){var i=b.clone(n.db_objects[n.cursor_pos]);n.projectionFn&&(i=n.projectionFn(i)),n._transform&&(i=n._transform(i)),e.call(t,i,n.cursor_pos,n),++n.cursor_pos}},e.Cursor.prototype.getTransform=function(){return this._transform},e.Cursor.prototype.map=function(e,t){var n=this,i=[];return n.forEach(function(o,r){i.push(e.call(t,o,r,n))}),i},e.Cursor.prototype.fetch=function(){var e=this,t=[];return e.forEach(function(e){t.push(e)}),t},e.Cursor.prototype.count=function(){var e=this;return e.reactive&&e._depend({added:!0,removed:!0},!0),null===e.db_objects&&(e.db_objects=e._getRawObjects({ordered:!0})),e.db_objects.length},e.Cursor.prototype._publishCursor=function(e){var t=this;if(!t.collection.name)throw new Error("Can't publish a cursor from a collection without a name.");var n=t.collection.name;return m.Collection._publishCursor(t,e,n)},e.Cursor.prototype._getCollectionName=function(){var e=this;return e.collection.name},e._observeChangesCallbacksAreOrdered=function(e){if(e.added&&e.addedBefore)throw new Error("Please specify only one of added() and addedBefore()");return!(!e.addedBefore&&!e.movedBefore)},e._observeCallbacksAreOrdered=function(e){if(e.addedAt&&e.added)throw new Error("Please specify only one of added() and addedAt()");if(e.changedAt&&e.changed)throw new Error("Please specify only one of changed() and changedAt()");if(e.removed&&e.removedAt)throw new Error("Please specify only one of removed() and removedAt()");return!!(e.addedAt||e.movedTo||e.changedAt||e.removedAt)},e.ObserveHandle=function(){},v.extend(e.Cursor.prototype,{observe:function(t){var n=this;return e._observeFromObserveChanges(n,t)},observeChanges:function(t){var n=this,i=e._observeChangesCallbacksAreOrdered(t);if(!t._allow_unordered&&!i&&(n.skip||n.limit))throw new Error("must use ordered observe with skip or limit");if(n.fields&&(0===n.fields._id||n.fields._id===!1))throw Error("You may not observe a cursor with {fields: {_id: 0}}");var o,r={matcher:n.matcher,sorter:i&&n.sorter,distances:n.matcher.hasGeoQuery()&&i&&new e._IdMap,resultsSnapshot:null,ordered:i,cursor:n,projectionFn:n.projectionFn};n.reactive&&(o=n.collection.next_qid++,n.collection.queries[o]=r),r.results=n._getRawObjects({ordered:i,distances:r.distances}),n.collection.paused&&(r.resultsSnapshot=i?[]:new e._IdMap);var a=function(e,t,i){return e?function(){var o=this,r=arguments;n.collection.paused||void 0!==t&&n.projectionFn&&(r[t]=n.projectionFn(r[t]),i&&v.isEmpty(r[t]))||n.collection._observeQueue.queueTask(function(){e.apply(o,r)})}:function(){}};if(r.added=a(t.added,1),r.changed=a(t.changed,1,!0),r.removed=a(t.removed),i&&(r.addedBefore=a(t.addedBefore,1),r.movedBefore=a(t.movedBefore)),!t._suppress_initial&&!n.collection.paused){var s=i?v.bind(v.each,null,r.results):v.bind(r.results.forEach,r.results);s(function(e){var t=b.clone(e);delete t._id,i&&r.addedBefore(e._id,t,null),r.added(e._id,t)})}var c=new e.ObserveHandle;return v.extend(c,{collection:n.collection,stop:function(){n.reactive&&delete n.collection.queries[o]}}),n.reactive&&k.active&&k.onInvalidate(function(){c.stop()}),n.collection._observeQueue.drain(),c}}),e.Cursor.prototype._getRawObjects=function(t){var n=this;t=t||{};var i=t.ordered?[]:new e._IdMap;if(void 0!==n._selectorId){if(n.skip)return i;var o=n.collection._docs.get(n._selectorId);return o&&(t.ordered?i.push(o):i.set(n._selectorId,o)),i}var r;if(n.matcher.hasGeoQuery()&&t.ordered&&(t.distances?(r=t.distances,r.clear()):r=new e._IdMap),n.collection._docs.forEach(function(e,o){var a=n.matcher.documentMatches(e);return a.result&&(t.ordered?(i.push(e),r&&void 0!==a.distance&&r.set(o,a.distance)):i.set(o,e)),!n.limit||n.skip||n.sorter||i.length!==n.limit?!0:!1}),!t.ordered)return i;if(n.sorter){var a=n.sorter.getComparator({distances:r});i.sort(a)}var s=n.skip||0,c=n.limit?n.limit+s:i.length;return i.slice(s,c)},e.Cursor.prototype._depend=function(e,t){var n=this;if(k.active){var i=new k.Dependency;i.depend();var o=v.bind(i.changed,i),r={_suppress_initial:!0,_allow_unordered:t};v.each(["added","changed","removed","addedBefore","movedBefore"],function(t){e[t]&&(r[t]=o)}),n.observeChanges(r)}},e.prototype.insert=function(t,n){var o=this;t=b.clone(t),v.has(t,"_id")||(t._id=e._useOID?new e._ObjectID:T.id());var r=t._id;if(o._docs.has(r))throw i("Duplicate _id '"+r+"'");o._saveOriginal(r,void 0),o._docs.set(r,t);var a=[];for(var s in o.queries){var c=o.queries[s],l=c.matcher.documentMatches(t);l.result&&(c.distances&&void 0!==l.distance&&c.distances.set(r,l.distance),c.cursor.skip||c.cursor.limit?a.push(s):e._insertInResults(c,t))}return v.each(a,function(t){o.queries[t]&&e._recomputeResults(o.queries[t])}),o._observeQueue.drain(),n&&m.defer(function(){n(null,r)}),r},e.prototype._eachPossiblyMatchingDoc=function(t,n){var i=this,o=e._idsMatchedBySelector(t);if(o)for(var r=0;r<o.length;++r){var a=o[r],s=i._docs.get(a);if(s){var c=n(s,a);if(c===!1)break}}else i._docs.forEach(n)},e.prototype.remove=function(n,i){var o=this;if(o.paused&&!o._savedOriginals&&b.equals(n,{})){var r=o._docs.size();return o._docs.clear(),v.each(o.queries,function(e){e.ordered?e.results=[]:e.results.clear()}),i&&m.defer(function(){i(null,r)}),r}var a=new t.Matcher(n,o),s=[];o._eachPossiblyMatchingDoc(n,function(e,t){a.documentMatches(e).result&&s.push(t)});for(var c=[],l=[],u=0;u<s.length;u++){var d=s[u],f=o._docs.get(d);v.each(o.queries,function(e,t){e.matcher.documentMatches(f).result&&(e.cursor.skip||e.cursor.limit?c.push(t):l.push({qid:t,doc:f}))}),o._saveOriginal(d,f),o._docs.remove(d)}return v.each(l,function(t){var n=o.queries[t.qid];n&&(n.distances&&n.distances.remove(t.doc._id),e._removeFromResults(n,t.doc))}),v.each(c,function(t){var n=o.queries[t];n&&e._recomputeResults(n)}),o._observeQueue.drain(),r=s.length,i&&m.defer(function(){i(null,r)}),r},e.prototype.update=function(n,i,o,r){var a=this;!r&&o instanceof Function&&(r=o,o=null),o||(o={});var s=new t.Matcher(n,a),c={};v.each(a.queries,function(e,t){!e.cursor.skip&&!e.cursor.limit||e.paused||(c[t]=b.clone(e.results))});var l={},u=0;a._eachPossiblyMatchingDoc(n,function(e,t){var n=s.documentMatches(e);return n.result&&(a._saveOriginal(t,e),a._modifyAndNotify(e,i,l,n.arrayIndices),++u,!o.multi)?!1:!0}),v.each(l,function(t,n){var i=a.queries[n];i&&e._recomputeResults(i,c[n])}),a._observeQueue.drain();var d;if(0===u&&o.upsert){var f=e._removeDollarOperators(n);e._modify(f,i,{isInsert:!0}),!f._id&&o.insertedId&&(f._id=o.insertedId),d=a.insert(f),u=1}var p;return o._returnObject?(p={numberAffected:u},void 0!==d&&(p.insertedId=d)):p=u,r&&m.defer(function(){r(null,p)}),p},e.prototype.upsert=function(e,t,n,i){var o=this;return i||"function"!=typeof n||(i=n,n={}),o.update(e,t,v.extend({},n,{upsert:!0,_returnObject:!0}),i)},e.prototype._modifyAndNotify=function(t,n,i,o){var r=this,a={};for(var s in r.queries){var c=r.queries[s];a[s]=c.ordered?c.matcher.documentMatches(t).result:c.results.has(t._id)}var l=b.clone(t);e._modify(t,n,{arrayIndices:o});for(s in r.queries){c=r.queries[s];var u=a[s],d=c.matcher.documentMatches(t),f=d.result;f&&c.distances&&void 0!==d.distance&&c.distances.set(t._id,d.distance),c.cursor.skip||c.cursor.limit?(u||f)&&(i[s]=!0):u&&!f?e._removeFromResults(c,t):!u&&f?e._insertInResults(c,t):u&&f&&e._updateInResults(c,t,l)}},e._insertInResults=function(t,n){var i=b.clone(n);if(delete i._id,t.ordered){if(t.sorter){var o=e._insertInSortedList(t.sorter.getComparator({distances:t.distances}),t.results,n),r=t.results[o+1];r=r?r._id:null,t.addedBefore(n._id,i,r)}else t.addedBefore(n._id,i,null),t.results.push(n);t.added(n._id,i)}else t.added(n._id,i),t.results.set(n._id,n)},e._removeFromResults=function(t,n){if(t.ordered){var i=e._findInOrderedResults(t,n);t.removed(n._id),t.results.splice(i,1)}else{var o=n._id;t.removed(n._id),t.results.remove(o)}},e._updateInResults=function(t,n,i){if(!b.equals(n._id,i._id))throw new Error("Can't change a doc's _id while updating");var o=e._makeChangedFields(n,i);if(!t.ordered)return v.isEmpty(o)||(t.changed(n._id,o),t.results.set(n._id,n)),void 0;var r=e._findInOrderedResults(t,n);if(v.isEmpty(o)||t.changed(n._id,o),t.sorter){t.results.splice(r,1);var a=e._insertInSortedList(t.sorter.getComparator({distances:t.distances}),t.results,n);if(r!==a){var s=t.results[a+1];s=s?s._id:null,t.movedBefore&&t.movedBefore(n._id,s)}}},e._recomputeResults=function(t,n){n||(n=t.results),t.distances&&t.distances.clear(),t.results=t.cursor._getRawObjects({ordered:t.ordered,distances:t.distances}),t.paused||e._diffQueryChanges(t.ordered,n,t.results,t)},e._findInOrderedResults=function(e,t){if(!e.ordered)throw new Error("Can't call _findInOrderedResults on unordered query");for(var n=0;n<e.results.length;n++)if(e.results[n]===t)return n;throw Error("object missing from query")},e._binarySearch=function(e,t,n){for(var i=0,o=t.length;o>0;){var r=Math.floor(o/2);e(n,t[i+r])>=0?(i+=r+1,o-=r+1):o=r}return i},e._insertInSortedList=function(t,n,i){if(0===n.length)return n.push(i),0;var o=e._binarySearch(t,n,i);return n.splice(o,0,i),o},e.prototype.saveOriginals=function(){var t=this;if(t._savedOriginals)throw new Error("Called saveOriginals twice without retrieveOriginals");t._savedOriginals=new e._IdMap},e.prototype.retrieveOriginals=function(){var e=this;if(!e._savedOriginals)throw new Error("Called retrieveOriginals without saveOriginals");var t=e._savedOriginals;return e._savedOriginals=null,t},e.prototype._saveOriginal=function(e,t){var n=this;n._savedOriginals&&(n._savedOriginals.has(e)||n._savedOriginals.set(e,b.clone(t)))},e.prototype.pauseObservers=function(){if(!this.paused){this.paused=!0;for(var e in this.queries){var t=this.queries[e];t.resultsSnapshot=b.clone(t.results)}}},e.prototype.resumeObservers=function(){var t=this;if(this.paused){this.paused=!1;for(var n in this.queries){var i=t.queries[n];e._diffQueryChanges(i.ordered,i.resultsSnapshot,i.results,i),i.resultsSnapshot=null}t._observeQueue.drain()}},e._idStringify=function(t){if(t instanceof e._ObjectID)return t.valueOf();if("string"==typeof t)return""===t?t:"-"===t.substr(0,1)||"~"===t.substr(0,1)||e._looksLikeObjectID(t)||"{"===t.substr(0,1)?"-"+t:t;if(void 0===t)return"-";if("object"==typeof t&&null!==t)throw new Error("Meteor does not currently support objects other than ObjectID as ids");return"~"+y.stringify(t)},e._idParse=function(t){return""===t?t:"-"===t?void 0:"-"===t.substr(0,1)?t.substr(1):"~"===t.substr(0,1)?y.parse(t.substr(1)):e._looksLikeObjectID(t)?new e._ObjectID(t):t},e._makeChangedFields=function(t,n){var i={};return e._diffObjects(n,t,{leftOnly:function(e){i[e]=void 0},rightOnly:function(e,t){i[e]=t},both:function(e,t,n){b.equals(t,n)||(i[e]=n)}}),i}}).call(this),function(){e.wrapTransform=function(e){return e?function(t){if(!v.has(t,"_id"))throw new Error("can only transform documents with _id");var n=t._id,i=k.nonreactive(function(){return e(t)});if(!r(i))throw new Error("transform must return object");if(v.has(i,"_id")){if(!b.equals(i._id,n))throw new Error("transformed document can't have different _id")}else i._id=n;return i}:null}}.call(this),function(){o=function(e){return v.isArray(e)&&!b.isBinary(e)},r=function(t){return t&&3===e._f._type(t)},a=function(e){return o(e)||r(e)},s=function(e,t){if(!r(e))return!1;var n=void 0;return v.each(e,function(i,o){var r="$"===o.substr(0,1);if(void 0===n)n=r;else if(n!==r){if(!t)throw new Error("Inconsistent operator: "+y.stringify(e));n=!1}}),!!n},c=function(e){return/^[0-9]+$/.test(e)}}.call(this),function(){t.Matcher=function(e){var t=this;t._paths={},t._hasGeoQuery=!1,t._hasWhere=!1,t._isSimple=!0,t._matchingDocument=void 0,t._selector=null,t._docMatcher=t._compileSelector(e)},v.extend(t.Matcher.prototype,{documentMatches:function(e){if(!e||"object"!=typeof e)throw Error("documentMatches needs a document");return this._docMatcher(e)},hasGeoQuery:function(){return this._hasGeoQuery},hasWhere:function(){return this._hasWhere},isSimple:function(){return this._isSimple},_compileSelector:function(t){var n=this;if(t instanceof Function)return n._isSimple=!1,n._selector=t,n._recordPathUsed(""),function(e){return{result:!!t.call(e)}};if(e._selectorIsId(t))return n._selector={_id:t},n._recordPathUsed("_id"),function(e){return{result:b.equals(e._id,t)}};if(!t||"_id"in t&&!t._id)return n._isSimple=!1,C;if("boolean"==typeof t||o(t)||b.isBinary(t))throw new Error("Invalid selector: "+t);return n._selector=b.clone(t),i(t,n,{isRoot:!0})},_recordPathUsed:function(e){this._paths[e]=!0},_getPaths:function(){return v.keys(this._paths)}});var i=function(e,t,n){n=n||{};var i=[];return v.each(e,function(e,o){if("$"===o.substr(0,1)){if(!v.has(_,o))throw new Error("Unrecognized logical operator: "+o);t._isSimple=!1,i.push(_[o](e,t,n.inElemMatch))}else{n.inElemMatch||t._recordPathUsed(o);var r=f(o),a=h(e,t,n.isRoot);i.push(function(e){var t=r(e);return a(t)})}}),O(i)},h=function(e,t,n){return e instanceof RegExp?(t._isSimple=!1,g(l(e))):s(e)?m(e,t,n):g(u(e))},g=function(e,t){return t=t||{},function(n){var i=n;t.dontExpandLeafArrays||(i=p(n,t.dontIncludeLeafArrays));var o={};return o.result=v.any(i,function(t){var n=e(t.value);return"number"==typeof n&&(t.arrayIndices||(t.arrayIndices=[n]),n=!0),n&&t.arrayIndices&&(o.arrayIndices=t.arrayIndices),n}),o}};l=function(e){return function(t){return t instanceof RegExp?v.isEqual(t,e):"string"!=typeof t?!1:e.test(t)}},u=function(t){if(s(t))throw Error("Can't create equalityValueSelector for operator object");return null==t?function(e){return null==e}:function(n){return e._f._equal(t,n)}};var m=function(e,t,n){var i=[];return v.each(e,function(o,r){var a=v.contains(["$lt","$lte","$gt","$gte"],r)&&v.isNumber(o),s="$ne"===r&&!v.isObject(o),c=v.contains(["$in","$nin"],r)&&v.isArray(o)&&!v.any(o,v.isObject);if("$eq"===r||a||c||s||(t._isSimple=!1),v.has(k,r))i.push(k[r](o,e,t,n));else{if(!v.has(d,r))throw new Error("Unrecognized operator: "+r);var l=d[r];i.push(g(l.compileElementSelector(o,e,t),l))}}),M(i)},y=function(e,t,n){if(!o(e)||v.isEmpty(e))throw Error("$and/$or/$nor must be nonempty array");return v.map(e,function(e){if(!r(e))throw Error("$or/$and/$nor entries need to be full objects");return i(e,t,{inElemMatch:n})})},_={$and:function(e,t,n){var i=y(e,t,n);return O(i)},$or:function(e,t,n){var i=y(e,t,n);return 1===i.length?i[0]:function(e){var t=v.any(i,function(t){return t(e).result});return{result:t}}},$nor:function(e,t,n){var i=y(e,t,n);return function(e){var t=v.all(i,function(t){return!t(e).result});return{result:t}}},$where:function(e,t){return t._recordPathUsed(""),t._hasWhere=!0,e instanceof Function||(e=Function("obj","return "+e)),function(t){return{result:e.call(t,t)}}},$comment:function(){return function(){return{result:!0}}}},w=function(e){return function(t){var n=e(t);return{result:!n.result}}},k={$not:function(e,t,n){return w(h(e,n))},$ne:function(e){return w(g(u(e)))},$nin:function(e){return w(g(d.$in.compileElementSelector(e)))},$exists:function(e){var t=g(function(e){return void 0!==e});return e?t:w(t)},$options:function(e,t){if(!v.has(t,"$regex"))throw Error("$options needs a $regex");return P},$maxDistance:function(e,t){if(!t.$near)throw Error("$maxDistance needs a $near");return P},$all:function(e,t,n){if(!o(e))throw Error("$all requires array");if(v.isEmpty(e))return C;var i=[];return v.each(e,function(e){if(s(e))throw Error("no $ expressions in $all");i.push(h(e,n))}),M(i)},$near:function(e,t,n,i){if(!i)throw Error("$near can't be inside another $ operator");n._hasGeoQuery=!0;var a,s,c;if(r(e)&&v.has(e,"$geometry"))a=e.$maxDistance,s=e.$geometry,c=function(e){return e&&e.type?"Point"===e.type?S.pointDistance(s,e):S.geometryWithinRadius(e,s,a)?0:a+1:null
};else{if(a=t.$maxDistance,!o(e)&&!r(e))throw Error("$near argument must be coordinate pair or GeoJSON");s=x(e),c=function(e){return o(e)||r(e)?T(s,e):null}}return function(e){e=p(e);var t={result:!1};return v.each(e,function(e){var n=c(e.value);null===n||n>a||void 0!==t.distance&&t.distance<=n||(t.result=!0,t.distance=n,e.arrayIndices?t.arrayIndices=e.arrayIndices:delete t.arrayIndices)}),t}}},T=function(e,t){e=x(e),t=x(t);var n=e[0]-t[0],i=e[1]-t[1];return v.isNaN(n)||v.isNaN(i)?null:Math.sqrt(n*n+i*i)},x=function(e){return v.map(e,v.identity)},E=function(t){return{compileElementSelector:function(n){if(o(n))return function(){return!1};void 0===n&&(n=null);var i=e._f._type(n);return function(o){return void 0===o&&(o=null),e._f._type(o)!==i?!1:t(e._f._cmp(o,n))}}}};d={$lt:E(function(e){return 0>e}),$gt:E(function(e){return e>0}),$lte:E(function(e){return 0>=e}),$gte:E(function(e){return e>=0}),$mod:{compileElementSelector:function(e){if(!o(e)||2!==e.length||"number"!=typeof e[0]||"number"!=typeof e[1])throw Error("argument to $mod must be an array of two numbers");var t=e[0],n=e[1];return function(e){return"number"==typeof e&&e%t===n}}},$in:{compileElementSelector:function(e){if(!o(e))throw Error("$in needs an array");var t=[];return v.each(e,function(e){if(e instanceof RegExp)t.push(l(e));else{if(s(e))throw Error("cannot nest $ under $in");t.push(u(e))}}),function(e){return void 0===e&&(e=null),v.any(t,function(t){return t(e)})}}},$size:{dontExpandLeafArrays:!0,compileElementSelector:function(e){if("string"==typeof e)e=0;else if("number"!=typeof e)throw Error("$size needs a number");return function(t){return o(t)&&t.length===e}}},$type:{dontIncludeLeafArrays:!0,compileElementSelector:function(t){if("number"!=typeof t)throw Error("$type needs a number");return function(n){return void 0!==n&&e._f._type(n)===t}}},$regex:{compileElementSelector:function(e,t){if(!("string"==typeof e||e instanceof RegExp))throw Error("$regex has to be a string or RegExp");var n;if(void 0!==t.$options){if(/[^gim]/.test(t.$options))throw new Error("Only the i, m, and g regexp options are supported");var i=e instanceof RegExp?e.source:e;n=new RegExp(i,t.$options)}else n=e instanceof RegExp?e:new RegExp(e);return l(n)}},$elemMatch:{dontExpandLeafArrays:!0,compileElementSelector:function(e,t,n){if(!r(e))throw Error("$elemMatch need an object");var a,c;return s(e,!0)?(a=h(e,n),c=!1):(a=i(e,n,{inElemMatch:!0}),c=!0),function(e){if(!o(e))return!1;for(var t=0;t<e.length;++t){var n,i=e[t];if(c){if(!r(i)&&!o(i))return!1;n=i}else n=[{value:i,dontIterate:!0}];if(a(n).result)return t}return!1}}}},f=function(e){var t,n=e.split("."),i=n.length?n[0]:"",s=c(i);n.length>1&&(t=f(n.slice(1).join(".")));var l=function(e){return e.dontIterate||delete e.dontIterate,e.arrayIndices&&!e.arrayIndices.length&&delete e.arrayIndices,e};return function(e,n){if(n||(n=[]),o(e)){if(!(s&&i<e.length))return[];n=n.concat(+i,"x")}var c=e[i];if(!t)return[l({value:c,dontIterate:o(e)&&o(c),arrayIndices:n})];if(!a(c))return o(e)?[]:[l({value:void 0,arrayIndices:n})];var u=[],d=function(e){Array.prototype.push.apply(u,e)};return d(t(c,n)),o(c)&&v.each(c,function(e,i){r(e)&&d(t(e,n.concat(i)))}),u}},n.makeLookupFunction=f,p=function(e,t){var n=[];return v.each(e,function(e){var i=o(e.value);t&&i&&!e.dontIterate||n.push({value:e.value,arrayIndices:e.arrayIndices}),i&&!e.dontIterate&&v.each(e.value,function(t,i){n.push({value:t,arrayIndices:(e.arrayIndices||[]).concat(i)})})}),n};var C=function(){return{result:!1}},P=function(){return{result:!0}},D=function(e){return 0===e.length?P:1===e.length?e[0]:function(t){var n={};return n.result=v.all(e,function(e){var i=e(t);return i.result&&void 0!==i.distance&&void 0===n.distance&&(n.distance=i.distance),i.result&&i.arrayIndices&&(n.arrayIndices=i.arrayIndices),i.result}),n.result||(delete n.distance,delete n.arrayIndices),n}},O=D,M=D;e._f={_type:function(t){return"number"==typeof t?1:"string"==typeof t?2:"boolean"==typeof t?8:o(t)?4:null===t?10:t instanceof RegExp?11:"function"==typeof t?13:t instanceof Date?9:b.isBinary(t)?5:t instanceof e._ObjectID?7:3},_equal:function(e,t){return b.equals(e,t,{keyOrderSensitive:!0})},_typeorder:function(e){return[-1,1,2,3,4,5,-1,6,7,8,0,9,-1,100,2,100,1,8,1][e]},_cmp:function(t,n){if(void 0===t)return void 0===n?0:-1;if(void 0===n)return 1;var i=e._f._type(t),o=e._f._type(n),r=e._f._typeorder(i),a=e._f._typeorder(o);if(r!==a)return a>r?-1:1;if(i!==o)throw Error("Missing type coercion logic in _cmp");if(7===i&&(i=o=2,t=t.toHexString(),n=n.toHexString()),9===i&&(i=o=1,t=t.getTime(),n=n.getTime()),1===i)return t-n;if(2===o)return n>t?-1:t===n?0:1;if(3===i){var s=function(e){var t=[];for(var n in e)t.push(n),t.push(e[n]);return t};return e._f._cmp(s(t),s(n))}if(4===i)for(var c=0;;c++){if(c===t.length)return c===n.length?0:-1;if(c===n.length)return 1;var l=e._f._cmp(t[c],n[c]);if(0!==l)return l}if(5===i){if(t.length!==n.length)return t.length-n.length;for(c=0;c<t.length;c++){if(t[c]<n[c])return-1;if(t[c]>n[c])return 1}return 0}if(8===i)return t?n?0:1:n?-1:0;if(10===i)return 0;if(11===i)throw Error("Sorting not supported on regular expression");if(13===i)throw Error("Sorting not supported on Javascript code");throw Error("Unknown type to sort")}},e._removeDollarOperators=function(e){var t={};for(var n in e)"$"!==n.substr(0,1)&&(t[n]=e[n]);return t}}.call(this),function(){t.Sorter=function(e,i){var o=this;i=i||{},o._sortSpecParts=[];var r=function(e,t){if(!e)throw Error("sort keys must be non-empty");if("$"===e.charAt(0))throw Error("unsupported sort key: "+e);o._sortSpecParts.push({path:e,lookup:f(e),ascending:t})};if(e instanceof Array)for(var a=0;a<e.length;a++)"string"==typeof e[a]?r(e[a],!0):r(e[a][0],"desc"!==e[a][1]);else{if("object"!=typeof e)throw Error("Bad sort specification: "+y.stringify(e));v.each(e,function(e,t){r(t,e>=0)})}if(o.affectedByModifier){var s={};v.each(o._sortSpecParts,function(e){s[e.path]=1}),o._selectorForAffectedByModifier=new t.Matcher(s)}o._keyComparator=n(v.map(o._sortSpecParts,function(e,t){return o._keyFieldComparator(t)})),o._keyFilter=null,i.matcher&&o._useWithMatcher(i.matcher)},v.extend(t.Sorter.prototype,{getComparator:function(e){var t=this;if(!e||!e.distances)return t._getBaseComparator();var i=e.distances;return n([t._getBaseComparator(),function(e,t){if(!i.has(e._id))throw Error("Missing distance for "+e._id);if(!i.has(t._id))throw Error("Missing distance for "+t._id);return i.get(e._id)-i.get(t._id)}])},_getPaths:function(){var e=this;return v.pluck(e._sortSpecParts,"path")},_getMinKeyFromDoc:function(e){var t=this,n=null;if(t._generateKeysFromDoc(e,function(e){return t._keyCompatibleWithSelector(e)?null===n?(n=e,void 0):(t._compareKeys(e,n)<0&&(n=e),void 0):void 0}),null===n)throw Error("sort selector found no keys in doc?");return n},_keyCompatibleWithSelector:function(e){var t=this;return!t._keyFilter||t._keyFilter(e)},_generateKeysFromDoc:function(e,t){var n=this;if(0===n._sortSpecParts.length)throw new Error("can't generate keys without a spec");var i=[],o=function(e){return e.join(",")+","},r=null;if(v.each(n._sortSpecParts,function(t,n){var a=p(t.lookup(e),!0);a.length||(a=[{value:null}]);var s=!1;if(i[n]={},v.each(a,function(e){if(!e.arrayIndices){if(a.length>1)throw Error("multiple branches but no array used?");return i[n][""]=e.value,void 0}s=!0;var t=o(e.arrayIndices);if(v.has(i[n],t))throw Error("duplicate path: "+t);if(i[n][t]=e.value,r&&!v.has(r,t))throw Error("cannot index parallel arrays")}),r){if(!v.has(i[n],"")&&v.size(r)!==v.size(i[n]))throw Error("cannot index parallel arrays!")}else s&&(r={},v.each(i[n],function(e,t){r[t]=!0}))}),!r){var a=v.map(i,function(e){if(!v.has(e,""))throw Error("no value in sole key case?");return e[""]});return t(a),void 0}v.each(r,function(e,n){var o=v.map(i,function(e){if(v.has(e,""))return e[""];if(!v.has(e,n))throw Error("missing path?");return e[n]});t(o)})},_compareKeys:function(e,t){var n=this;if(e.length!==n._sortSpecParts.length||t.length!==n._sortSpecParts.length)throw Error("Key has wrong length");return n._keyComparator(e,t)},_keyFieldComparator:function(t){var n=this,i=!n._sortSpecParts[t].ascending;return function(n,o){var r=e._f._cmp(n[t],o[t]);return i&&(r=-r),r}},_getBaseComparator:function(){var e=this;return e._sortSpecParts.length?function(t,n){var i=e._getMinKeyFromDoc(t),o=e._getMinKeyFromDoc(n);return e._compareKeys(i,o)}:function(){return 0}},_useWithMatcher:function(e){var t=this;if(t._keyFilter)throw Error("called _useWithMatcher twice?");if(!v.isEmpty(t._sortSpecParts)){var n=e._selector;if(!(n instanceof Function)){var i={};v.each(t._sortSpecParts,function(e){i[e.path]=[]}),v.each(n,function(e,t){var n=i[t];if(n){if(e instanceof RegExp){if(e.ignoreCase||e.multiline)return;return n.push(l(e)),void 0}return s(e)?(v.each(e,function(t,i){v.contains(["$lt","$lte","$gt","$gte"],i)&&n.push(d[i].compileElementSelector(t)),"$regex"!==i||e.$options||n.push(d.$regex.compileElementSelector(t,e))}),void 0):(n.push(u(e)),void 0)}}),v.isEmpty(i[t._sortSpecParts[0].path])||(t._keyFilter=function(e){return v.all(t._sortSpecParts,function(t,n){return v.all(i[t.path],function(t){return t(e[n])})})})}}}});var n=function(e){return function(t,n){for(var i=0;i<e.length;++i){var o=e[i](t,n);if(0!==o)return o}return 0}}}.call(this),function(){e._compileProjection=function(t){e._checkSupportedProjection(t);var n=v.isUndefined(t._id)?!0:t._id,i=h(t),o=function(e,t){if(v.isArray(e))return v.map(e,function(e){return o(e,t)});var n=i.including?{}:b.clone(e);return v.each(t,function(t,r){v.has(e,r)&&(v.isObject(t)?v.isObject(e[r])&&(n[r]=o(e[r],t)):i.including?n[r]=b.clone(e[r]):delete n[r])}),n};return function(e){var t=o(e,i.tree);return n&&v.has(e,"_id")&&(t._id=e._id),!n&&v.has(t,"_id")&&delete t._id,t}},h=function(e){var t=v.keys(e).sort();t.length>0&&(1!==t.length||"_id"!==t[0])&&(t=v.reject(t,function(e){return"_id"===e}));var n=null;v.each(t,function(t){var o=!!e[t];if(null===n&&(n=o),n!==o)throw i("You cannot currently mix including and excluding fields.")});var o=g(t,function(){return n},function(e,t,n){var o=n,r=t;throw i("both "+o+" and "+r+" found in fields option, using both of them may trigger unexpected behavior. Did you mean to use only one of them?")});return{tree:o,including:n}},g=function(e,t,n,i){return i=i||{},v.each(e,function(e){var o=i,r=e.split("."),a=v.all(r.slice(0,-1),function(t,i){if(v.has(o,t)){if(!v.isObject(o[t])&&(o[t]=n(o[t],r.slice(0,i+1).join("."),e),!v.isObject(o[t])))return!1}else o[t]={};return o=o[t],!0});if(a){var s=v.last(r);o[s]=v.has(o,s)?n(o[s],e,e):t(e)}}),i},e._checkSupportedProjection=function(e){if(!v.isObject(e)||v.isArray(e))throw i("fields option must be an object");v.each(e,function(e,t){if(v.contains(t.split("."),"$"))throw i("Minimongo doesn't support $ operator in projections yet.");if(-1===v.indexOf([1,0,!0,!1],e))throw i("Projection values should be one of 1, 0, true, or false")})}}.call(this),function(){e._modify=function(e,t,a){if(a=a||{},!r(t))throw i("Modifier must be an object");var c,u=s(t);if(u)c=b.clone(e),v.each(t,function(e,t){var r=l[t];if(a.isInsert&&"$setOnInsert"===t&&(r=l.$set),!r)throw i("Invalid modifier specified "+t);v.each(e,function(e,s){if(s.length&&"."===s[s.length-1])throw i("Invalid mod field name, may not end in a period");if("_id"===s)throw i("Mod on _id not allowed");var l=s.split("."),u=(v.has(o,t),n(c,l,{noCreate:o[t],forbidArray:"$rename"===t,arrayIndices:a.arrayIndices})),d=l.pop();r(u,d,e,s,c)})});else{if(t._id&&!b.equals(e._id,t._id))throw i("Cannot change the _id of a document");for(var d in t)if(/\./.test(d))throw i("When replacing document, field name may not contain '.'");c=t}v.each(v.keys(e),function(t){("_id"!==t||a.isInsert)&&delete e[t]}),v.each(c,function(t,n){e[n]=t})};var n=function(e,t,n){n=n||{};for(var o=!1,r=0;r<t.length;r++){var s=r===t.length-1,l=t[r],u=a(e);if(!u){if(n.noCreate)return void 0;var d=i("cannot use the part '"+l+"' to traverse "+e);throw d.setPropertyError=!0,d}if(e instanceof Array){if(n.forbidArray)return null;if("$"===l){if(o)throw i("Too many positional (i.e. '$') elements");if(!n.arrayIndices||!n.arrayIndices.length)throw i("The positional operator did not find the match needed from the query");l=n.arrayIndices[0],o=!0}else{if(!c(l)){if(n.noCreate)return void 0;throw i("can't append to array using string field name ["+l+"]")}l=parseInt(l)}if(s&&(t[r]=l),n.noCreate&&l>=e.length)return void 0;for(;e.length<l;)e.push(null);if(!s)if(e.length===l)e.push({});else if("object"!=typeof e[l])throw i("can't modify field '"+t[r+1]+"' of list value "+y.stringify(e[l]))}else{if(l.length&&"$"===l.substr(0,1))throw i("can't set field named "+l);if(!(l in e)){if(n.noCreate)return void 0;s||(e[l]={})}}if(s)return e;e=e[l]}},o={$unset:!0,$pop:!0,$rename:!0,$pull:!0,$pullAll:!0},l={$inc:function(e,t,n){if("number"!=typeof n)throw i("Modifier $inc allowed for numbers only");if(t in e){if("number"!=typeof e[t])throw i("Cannot apply $inc modifier to non-number");e[t]+=n}else e[t]=n},$set:function(e,t,n){if(!v.isObject(e)){var o=i("Cannot set property on non-object field");throw o.setPropertyError=!0,o}if(null===e){var o=i("Cannot set property on null");throw o.setPropertyError=!0,o}e[t]=b.clone(n)},$setOnInsert:function(){},$unset:function(e,t){void 0!==e&&(e instanceof Array?t in e&&(e[t]=null):delete e[t])},$push:function(n,o,r){if(void 0===n[o]&&(n[o]=[]),!(n[o]instanceof Array))throw i("Cannot apply $push modifier to non-array");if(!r||!r.$each)return n[o].push(b.clone(r)),void 0;var a=r.$each;if(!(a instanceof Array))throw i("$each must be an array");var s=void 0;if("$slice"in r){if("number"!=typeof r.$slice)throw i("$slice must be a numeric value");if(r.$slice>0)throw i("$slice in $push must be zero or negative");s=r.$slice}var c=void 0;if(r.$sort){if(void 0===s)throw i("$sort requires $slice to be present");c=new t.Sorter(r.$sort).getComparator();for(var l=0;l<a.length;l++)if(3!==e._f._type(a[l]))throw i("$push like modifiers using $sort require all elements to be objects")}for(var u=0;u<a.length;u++)n[o].push(b.clone(a[u]));c&&n[o].sort(c),void 0!==s&&(n[o]=0===s?[]:n[o].slice(s))},$pushAll:function(e,t,n){if(!("object"==typeof n&&n instanceof Array))throw i("Modifier $pushAll/pullAll allowed for arrays only");var o=e[t];if(void 0===o)e[t]=n;else{if(!(o instanceof Array))throw i("Cannot apply $pushAll modifier to non-array");for(var r=0;r<n.length;r++)o.push(n[r])}},$addToSet:function(t,n,o){var r=t[n];if(void 0===r)t[n]=[o];else{if(!(r instanceof Array))throw i("Cannot apply $addToSet modifier to non-array");var a=!1;if("object"==typeof o)for(var s in o){"$each"===s&&(a=!0);break}var c=a?o.$each:[o];v.each(c,function(t){for(var n=0;n<r.length;n++)if(e._f._equal(t,r[n]))return;r.push(b.clone(t))})}},$pop:function(e,t,n){if(void 0!==e){var o=e[t];if(void 0!==o){if(!(o instanceof Array))throw i("Cannot apply $pop modifier to non-array");"number"==typeof n&&0>n?o.splice(0,1):o.pop()}}},$pull:function(n,o,r){if(void 0!==n){var a=n[o];if(void 0!==a){if(!(a instanceof Array))throw i("Cannot apply $pull/pullAll modifier to non-array");var s=[];if("object"!=typeof r||r instanceof Array)for(var c=0;c<a.length;c++)e._f._equal(a[c],r)||s.push(a[c]);else for(var l=new t.Matcher(r),c=0;c<a.length;c++)l.documentMatches(a[c]).result||s.push(a[c]);n[o]=s}}},$pullAll:function(t,n,o){if(!("object"==typeof o&&o instanceof Array))throw i("Modifier $pushAll/pullAll allowed for arrays only");if(void 0!==t){var r=t[n];if(void 0!==r){if(!(r instanceof Array))throw i("Cannot apply $pull/pullAll modifier to non-array");for(var a=[],s=0;s<r.length;s++){for(var c=!1,l=0;l<o.length;l++)if(e._f._equal(r[s],o[l])){c=!0;break}c||a.push(r[s])}t[n]=a}}},$rename:function(e,t,o,r,a){if(r===o)throw i("$rename source must differ from target");if(null===e)throw i("$rename source field invalid");if("string"!=typeof o)throw i("$rename target must be a string");if(void 0!==e){var s=e[t];delete e[t];var c=o.split("."),l=n(a,c,{forbidArray:!0});if(null===l)throw i("$rename target field invalid");var u=c.pop();l[u]=s}},$bit:function(){throw i("$bit is not supported")}}}.call(this),function(){e._diffQueryChanges=function(t,n,i,o){t?e._diffQueryOrderedChanges(n,i,o):e._diffQueryUnorderedChanges(n,i,o)},e._diffQueryUnorderedChanges=function(t,n,i){if(i.movedBefore)throw new Error("_diffQueryUnordered called with a movedBefore observer!");n.forEach(function(n,o){var r=t.get(o);if(r)i.changed&&!b.equals(r,n)&&i.changed(o,e._makeChangedFields(n,r));else if(i.added){var a=b.clone(n);delete a._id,i.added(n._id,a)}}),i.removed&&t.forEach(function(e,t){n.has(t)||i.removed(t)})},e._diffQueryOrderedChanges=function(t,n,i){var o={};v.each(n,function(e){o[e._id]&&m._debug("Duplicate _id in new_results"),o[e._id]=!0});var r={};v.each(t,function(e,t){e._id in r&&m._debug("Duplicate _id in old_results"),r[e._id]=t});for(var a=[],s=0,c=n.length,l=new Array(c),u=new Array(c),d=function(e){return r[n[e]._id]},f=0;c>f;f++)if(void 0!==r[n[f]._id]){for(var p=s;p>0&&!(d(l[p-1])<d(f));)p--;u[f]=0===p?-1:l[p-1],l[p]=f,p+1>s&&(s=p+1)}for(var h=0===s?-1:l[s-1];h>=0;)a.push(h),h=u[h];a.reverse(),a.push(n.length),v.each(t,function(e){o[e._id]||i.removed&&i.removed(e._id)});var g=0;v.each(a,function(o){for(var a,s,c,l=n[o]?n[o]._id:null,u=g;o>u;u++)s=n[u],v.has(r,s._id)?(a=t[r[s._id]],c=e._makeChangedFields(s,a),v.isEmpty(c)||i.changed&&i.changed(s._id,c),i.movedBefore&&i.movedBefore(s._id,l)):(c=b.clone(s),delete c._id,i.addedBefore&&i.addedBefore(s._id,c,l),i.added&&i.added(s._id,c));l&&(s=n[o],a=t[r[s._id]],c=e._makeChangedFields(s,a),v.isEmpty(c)||i.changed&&i.changed(s._id,c)),g=o+1})},e._diffObjects=function(e,t,n){v.each(e,function(e,i){v.has(t,i)?n.both&&n.both(i,e,t[i]):n.leftOnly&&n.leftOnly(i,e)}),n.rightOnly&&v.each(t,function(t,i){v.has(e,i)||n.rightOnly(i,t)})}}.call(this),function(){e._IdMap=function(){var t=this;_.call(t,e._idStringify,e._idParse)},m._inherits(e._IdMap,_)}.call(this),function(){e._CachingChangeObserver=function(t){var n=this;t=t||{};var i=t.callbacks&&e._observeChangesCallbacksAreOrdered(t.callbacks);if(v.has(t,"ordered")){if(n.ordered=t.ordered,t.callbacks&&t.ordered!==i)throw Error("ordered option doesn't match callbacks")}else{if(!t.callbacks)throw Error("must provide ordered or callbacks");n.ordered=i}var o=t.callbacks||{};n.ordered?(n.docs=new w(e._idStringify),n.applyChange={addedBefore:function(e,t,i){var r=b.clone(t);r._id=e,o.addedBefore&&o.addedBefore.call(n,e,t,i),o.added&&o.added.call(n,e,t),n.docs.putBefore(e,r,i||null)},movedBefore:function(e,t){n.docs.get(e);o.movedBefore&&o.movedBefore.call(n,e,t),n.docs.moveBefore(e,t||null)}}):(n.docs=new e._IdMap,n.applyChange={added:function(e,t){var i=b.clone(t);o.added&&o.added.call(n,e,t),i._id=e,n.docs.set(e,i)}}),n.applyChange.changed=function(t,i){var r=n.docs.get(t);if(!r)throw new Error("Unknown id for changed: "+t);o.changed&&o.changed.call(n,t,b.clone(i)),e._applyChanges(r,i)},n.applyChange.removed=function(e){o.removed&&o.removed.call(n,e),n.docs.remove(e)}},e._observeFromObserveChanges=function(t,n){var i,o=t.getTransform()||function(e){return e},r=!!n._suppress_initial;if(e._observeCallbacksAreOrdered(n)){var a=!n._no_indices;i={addedBefore:function(e,t,i){var s=this;if(!r&&(n.addedAt||n.added)){var c=o(v.extend(t,{_id:e}));if(n.addedAt){var l=a?i?s.docs.indexOf(i):s.docs.size():-1;n.addedAt(c,l,i)}else n.added(c)}},changed:function(t,i){var r=this;if(n.changedAt||n.changed){var s=b.clone(r.docs.get(t));if(!s)throw new Error("Unknown id for changed: "+t);var c=o(b.clone(s));if(e._applyChanges(s,i),s=o(s),n.changedAt){var l=a?r.docs.indexOf(t):-1;n.changedAt(s,c,l)}else n.changed(s,c)}},movedBefore:function(e,t){var i=this;if(n.movedTo){var r=a?i.docs.indexOf(e):-1,s=a?t?i.docs.indexOf(t):i.docs.size():-1;s>r&&--s,n.movedTo(o(b.clone(i.docs.get(e))),r,s,t||null)}},removed:function(e){var t=this;if(n.removedAt||n.removed){var i=o(t.docs.get(e));if(n.removedAt){var r=a?t.docs.indexOf(e):-1;n.removedAt(i,r)}else n.removed(i)}}}}else i={added:function(e,t){if(!r&&n.added){var i=v.extend(t,{_id:e});n.added(o(i))}},changed:function(t,i){var r=this;if(n.changed){var a=r.docs.get(t),s=b.clone(a);e._applyChanges(s,i),n.changed(o(s),o(a))}},removed:function(e){var t=this;n.removed&&n.removed(o(t.docs.get(e)))}};var s=new e._CachingChangeObserver({callbacks:i}),c=t.observeChanges(s.applyChange);return r=!1,s.ordered&&(c._fetch=function(){var e=[];return s.docs.forEach(function(t){e.push(o(b.clone(t)))}),e}),c}}.call(this),function(){e._looksLikeObjectID=function(e){return 24===e.length&&e.match(/^[0-9a-f]*$/)},e._ObjectID=function(t){var n=this;if(t){if(t=t.toLowerCase(),!e._looksLikeObjectID(t))throw new Error("Invalid hexadecimal string for creating an ObjectID");n._str=t}else n._str=T.hexString(24)},e._ObjectID.prototype.toString=function(){var e=this;return'ObjectID("'+e._str+'")'},e._ObjectID.prototype.equals=function(t){var n=this;return t instanceof e._ObjectID&&n.valueOf()===t.valueOf()},e._ObjectID.prototype.clone=function(){var t=this;return new e._ObjectID(t._str)},e._ObjectID.prototype.typeName=function(){return"oid"},e._ObjectID.prototype.getTimestamp=function(){var e=this;return parseInt(e._str.substr(0,8),16)},e._ObjectID.prototype.valueOf=e._ObjectID.prototype.toJSONValue=e._ObjectID.prototype.toHexString=function(){return this._str},e._selectorIsId=function(t){return"string"==typeof t||"number"==typeof t||t instanceof e._ObjectID},e._selectorIsIdPerhapsAsObject=function(t){return e._selectorIsId(t)||t&&"object"==typeof t&&t._id&&e._selectorIsId(t._id)&&1===v.size(t)},e._idsMatchedBySelector=function(t){if(e._selectorIsId(t))return[t];if(!t)return null;if(v.has(t,"_id"))return e._selectorIsId(t._id)?[t._id]:t._id&&t._id.$in&&v.isArray(t._id.$in)&&!v.isEmpty(t._id.$in)&&v.all(t._id.$in,e._selectorIsId)?t._id.$in:null;if(t.$and&&v.isArray(t.$and))for(var n=0;n<t.$and.length;++n){var i=e._idsMatchedBySelector(t.$and[n]);if(i)return i}return null},b.addType("oid",function(t){return new e._ObjectID(t)})}.call(this),"undefined"==typeof Package&&(Package={}),Package.minimongo={LocalCollection:e,Minimongo:t,MinimongoTest:n}}(),function(){var e,t=Package.meteor.Meteor,n=Package.underscore._,i=Package.ejson.EJSON;(function(){e=function(){return e.info.apply(this,arguments)};var o=0,r=[],a=0;e._intercept=function(e){o+=e},e._suppress=function(e){a+=e},e._intercepted=function(){var e=r;return r=[],o=0,e},e.outputFormat="json";var s={debug:"green",warn:"magenta",error:"red"},c="blue",l=["time","timeInexact","level","file","line","program","originApp","satellite","stderr"],u=l.concat(["app","message"]),d=function(n){var i=e.format(n),o=n.level;"undefined"!=typeof console&&console[o]?console[o](i):t._debug(i)};e._getCallerDetails=function(){var e=function(){var e=new Error,t=e.stack;return t},t=e();if(!t)return{};for(var n,i=t.split("\n"),o=1;o<i.length;++o){if(n=i[o],n.match(/^\s*at eval \(eval/))return{file:"eval"};if(!n.match(/packages\/logging(?:\/|(?::tests)?\.js)/))break}var r={},a=/(?:[@(]| at )([^(]+?):([0-9:]+)(?:\)|$)/.exec(n);return a?(r.line=a[2].split(":")[0],r.file=a[1].split("/").slice(-1)[0].split("?")[0],r):r},n.each(["debug","info","warn","error"],function(s){e[s]=function(c){if(a)return a--,void 0;var u=!1;o&&(o--,u=!0);var f=!n.isObject(c)||n.isRegExp(c)||n.isDate(c)?{message:new String(c).toString()}:c;if(n.each(l,function(e){if(f[e])throw new Error("Can't set '"+e+"' in log message")}),n.has(f,"message")&&!n.isString(f.message))throw new Error("The 'message' field in log objects must be a string");if(f.omitCallerDetails||(f=n.extend(e._getCallerDetails(),f)),f.time=new Date,f.level=s,"debug"!==s)if(u)r.push(i.stringify(f));else if(t.isServer)if("colored-text"===e.outputFormat)console.log(e.format(f,{color:!0}));else{if("json"!==e.outputFormat)throw new Error("Unknown logging output format: "+e.outputFormat);console.log(i.stringify(f))}else d(f)}}),e.parse=function(e){var t=null;if(e&&"{"===e.charAt(0))try{t=i.parse(e)}catch(n){}return t&&t.time&&t.time instanceof Date?t:null},e.format=function(e,o){e=i.clone(e),o=o||{};var r=e.time;if(!(r instanceof Date))throw new Error("'time' must be a Date object");var a=e.timeInexact,l=e.level||"info",d=e.file,f=e.line,p=e.app||"",h=e.originApp,g=e.message||"",m=e.program||"",v=e.satellite,y=e.stderr||"";n.each(u,function(t){delete e[t]}),n.isEmpty(e)||(g&&(g+=" "),g+=i.stringify(e));var b=function(e){return 10>e?"0"+e:e.toString()},_=function(e){return 100>e?"0"+b(e):e.toString()},w=r.getFullYear().toString()+b(r.getMonth()+1)+b(r.getDate()),k=b(r.getHours())+":"+b(r.getMinutes())+":"+b(r.getSeconds())+"."+_(r.getMilliseconds()),T="("+-((new Date).getTimezoneOffset()/60)+")",S="";p&&(S+=p),h&&h!==p&&(S+=" via "+h),S&&(S="["+S+"] ");var x=d&&f?["(",m?m+":":"",d,":",f,") "].join(""):"";v&&(x+=["[",v,"]"].join(""));var E=y?"(STDERR) ":"",C=[l.charAt(0).toUpperCase(),w,"-",k,T,a?"? ":" ",S,x,E].join(""),P=function(e,n){return o.color&&t.isServer&&n?Npm.require("cli-color")[n](e):e};return P(C,c)+P(g,s[l])},e.objFromText=function(e,t){var i={message:e,level:"info",time:new Date,timeInexact:!0};return n.extend(i,t)}}).call(this),"undefined"==typeof Package&&(Package={}),Package.logging={Log:e}}(),function(){var e,t,n=Package.meteor.Meteor,i=Package.underscore._,o=Package.ejson.EJSON;(function(){var r=new n.EnvironmentVariable;e=function(e,n){var i=r.get();i&&i.checking(e);try{d(e,n)}catch(o){throw o instanceof t.Error&&o.path&&(o.message+=" in field "+o.path),o}},t={Optional:function(e){return new a(e)},OneOf:function(){return new s(i.toArray(arguments))},Any:["__any__"],Where:function(e){return new c(e)},ObjectIncluding:function(e){return new l(e)},Integer:["__integer__"],Error:n.makeErrorType("Match.Error",function(e){this.message="Match error: "+e,this.path="",this.sanitizedError=new n.Error(400,"Match failed")}),test:function(e,n){try{return d(e,n),!0}catch(i){if(i instanceof t.Error)return!1;throw i}},_failIfArgumentsAreNotAllChecked:function(e,t,n,i){var o=new f(n,i),a=r.withValue(o,function(){return e.apply(t,n)});return o.throwUnlessAllArgumentsHaveBeenChecked(),a}};var a=function(e){this.pattern=e},s=function(e){if(i.isEmpty(e))throw new Error("Must provide at least one choice to Match.OneOf");this.choices=e},c=function(e){this.condition=e},l=function(e){this.pattern=e},u=[[String,"string"],[Number,"number"],[Boolean,"boolean"],[void 0,"undefined"]],d=function(e,n){if(n!==t.Any){for(var r=0;r<u.length;++r)if(n===u[r][0]){if(typeof e===u[r][1])return;throw new t.Error("Expected "+u[r][1]+", got "+typeof e)}if(null===n){if(null===e)return;throw new t.Error("Expected null, got "+o.stringify(e))}if(n===t.Integer){if("number"==typeof e&&(0|e)===e)return;throw new t.Error("Expected Integer, got "+(e instanceof Object?o.stringify(e):e))}if(n===Object&&(n=t.ObjectIncluding({})),n instanceof Array){if(1!==n.length)throw Error("Bad pattern: arrays must have one type element"+o.stringify(n));if(!i.isArray(e)&&!i.isArguments(e))throw new t.Error("Expected array, got "+o.stringify(e));return i.each(e,function(e,i){try{d(e,n[0])}catch(o){throw o instanceof t.Error&&(o.path=h(i,o.path)),o}}),void 0}if(n instanceof c){if(n.condition(e))return;throw new t.Error("Failed Match.Where validation")}if(n instanceof a&&(n=t.OneOf(void 0,n.pattern)),n instanceof s){for(var r=0;r<n.choices.length;++r)try{return d(e,n.choices[r]),void 0}catch(f){if(!(f instanceof t.Error))throw f}throw new t.Error("Failed Match.OneOf or Match.Optional validation")}if(n instanceof Function){if(e instanceof n)return;throw new t.Error("Expected "+n.name)}var p=!1;if(n instanceof l&&(p=!0,n=n.pattern),"object"!=typeof n)throw Error("Bad pattern: unknown pattern type");if("object"!=typeof e)throw new t.Error("Expected object, got "+typeof e);if(null===e)throw new t.Error("Expected object, got null");if(e.constructor!==Object)throw new t.Error("Expected plain object");var g={},m={};i.each(n,function(e,t){e instanceof a?m[t]=e.pattern:g[t]=e}),i.each(e,function(e,n){try{if(i.has(g,n))d(e,g[n]),delete g[n];else if(i.has(m,n))d(e,m[n]);else if(!p)throw new t.Error("Unknown key")}catch(o){throw o instanceof t.Error&&(o.path=h(n,o.path)),o}}),i.each(g,function(e,n){throw new t.Error("Missing key '"+n+"'")})}},f=function(e,t){var n=this;n.args=i.clone(e),n.args.reverse(),n.description=t};i.extend(f.prototype,{checking:function(e){var t=this;t._checkingOneValue(e)||(i.isArray(e)||i.isArguments(e))&&i.each(e,i.bind(t._checkingOneValue,t))},_checkingOneValue:function(e){for(var t=this,n=0;n<t.args.length;++n)if(e===t.args[n])return t.args.splice(n,1),!0;return!1},throwUnlessAllArgumentsHaveBeenChecked:function(){var e=this;if(!i.isEmpty(e.args))throw new Error("Did not check() all arguments during "+e.description)}});var p=["do","if","in","for","let","new","try","var","case","else","enum","eval","false","null","this","true","void","with","break","catch","class","const","super","throw","while","yield","delete","export","import","public","return","static","switch","typeof","default","extends","finally","package","private","continue","debugger","function","arguments","interface","protected","implements","instanceof"],h=function(e,t){return"number"==typeof e||e.match(/^[0-9]+$/)?e="["+e+"]":(!e.match(/^[a-z_$][0-9a-z_$]*$/i)||i.contains(p,e))&&(e=JSON.stringify([e])),t&&"["!==t[0]?e+"."+t:e+t}}).call(this),"undefined"==typeof Package&&(Package={}),Package.check={check:e,Match:t}}(),function(){var e,t=Package.meteor.Meteor,n=Package.underscore._,i=Package.random.Random;(function(){e=function(e){var t=this;n.extend(t,n.defaults(n.clone(e||{}),{baseTimeout:1e3,exponent:2.2,maxTimeout:3e5,minTimeout:10,minCount:2,fuzz:.5})),t.retryTimer=null},n.extend(e.prototype,{clear:function(){var e=this;e.retryTimer&&clearTimeout(e.retryTimer),e.retryTimer=null},_timeout:function(e){var t=this;if(e<t.minCount)return t.minTimeout;var n=Math.min(t.maxTimeout,t.baseTimeout*Math.pow(t.exponent,e));return n*=i.fraction()*t.fuzz+(1-t.fuzz/2)},retryLater:function(e,n){var i=this,o=i._timeout(e);return i.retryTimer&&clearTimeout(i.retryTimer),i.retryTimer=t.setTimeout(n,o),o}})}).call(this),"undefined"==typeof Package&&(Package={}),Package.retry={Retry:e}}(),function(){var e,t=Package.meteor.Meteor,n=Package.underscore._,i=(Package.logging.Log,Package.json.JSON);(function(){var o,r="Meteor_Reload",a=3e4,s={};"undefined"!=typeof sessionStorage&&sessionStorage&&(o=sessionStorage.getItem(r),sessionStorage.removeItem(r)),o||(o="{}");var c={};try{c=i.parse(o),"object"!=typeof c&&(t._debug("Got bad data on reload. Ignoring."),c={})}catch(l){t._debug("Got invalid JSON on reload. Ignoring.")}c.reload&&"object"==typeof c.data&&c.time+a>(new Date).getTime()&&(s=c.data);var u=[];e={},e._onMigrate=function(e,t){t||(t=e,e=void 0),u.push({name:e,callback:t})},e._migrationData=function(e){return s[e]};var d=!1;e._reload=function(){if(!d){d=!0;var e=function(){n.defer(function(){for(var o={},a=n.clone(u);a.length;){var s=a.shift(),c=s.callback(e);if(!c[0])return;c.length>1&&s.name&&(o[s.name]=c[1])}try{var l=i.stringify({time:(new Date).getTime(),data:o,reload:!0})}catch(d){throw t._debug("Couldn't serialize data for migration",o),d}if("undefined"!=typeof sessionStorage&&sessionStorage)try{sessionStorage.setItem(r,l)}catch(d){t._debug("Couldn't save data for migration to sessionStorage",d)}else t._debug("Browser does not support sessionStorage. Not saving migration state.");window.location.reload()})};e()}}}).call(this),function(){t._reload={onMigrate:e._onMigrate,migrationData:e._migrationData,reload:e._reload}}.call(this),"undefined"==typeof Package&&(Package={}),Package.reload={Reload:e}}(),function(){{var e,t,n,i,o,r,a,s,c,l,u=Package.meteor.Meteor,d=(Package.check.check,Package.check.Match,Package.random.Random),f=Package.ejson.EJSON,p=Package.json.JSON,h=Package.underscore._,g=Package.deps.Deps,m=(Package.logging.Log,Package.retry.Retry),v=Package.minimongo.LocalCollection;Package.minimongo.Minimongo
}(function(){t={}}).call(this),function(){n=function(){var e=document,t=window,n={},i=function(){};i.prototype.addEventListener=function(e,t){this._listeners||(this._listeners={}),e in this._listeners||(this._listeners[e]=[]);var i=this._listeners[e];-1===n.arrIndexOf(i,t)&&i.push(t)},i.prototype.removeEventListener=function(e,t){if(this._listeners&&e in this._listeners){var i=this._listeners[e],o=n.arrIndexOf(i,t);return-1!==o?(i.length>1?this._listeners[e]=i.slice(0,o).concat(i.slice(o+1)):delete this._listeners[e],void 0):void 0}},i.prototype.dispatchEvent=function(e){var t=e.type,n=Array.prototype.slice.call(arguments,0);if(this["on"+t]&&this["on"+t].apply(this,n),this._listeners&&t in this._listeners)for(var i=0;i<this._listeners[t].length;i++)this._listeners[t][i].apply(this,n)};var o=function(e,t){if(this.type=e,"undefined"!=typeof t)for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])};o.prototype.toString=function(){var e=[];for(var t in this)if(this.hasOwnProperty(t)){var n=this[t];"function"==typeof n&&(n="[function]"),e.push(t+"="+n)}return"SimpleEvent("+e.join(", ")+")"};var r=function(e){var t=this;t._events=e||[],t._listeners={}};r.prototype.emit=function(e){var t=this;if(t._verifyType(e),!t._nuked){var n=Array.prototype.slice.call(arguments,1);if(t["on"+e]&&t["on"+e].apply(t,n),e in t._listeners)for(var i=0;i<t._listeners[e].length;i++)t._listeners[e][i].apply(t,n)}},r.prototype.on=function(e,t){var n=this;n._verifyType(e),n._nuked||(e in n._listeners||(n._listeners[e]=[]),n._listeners[e].push(t))},r.prototype._verifyType=function(e){var t=this;-1===n.arrIndexOf(t._events,e)&&n.log("Event "+p.stringify(e)+" not listed "+p.stringify(t._events)+" in "+t)},r.prototype.nuke=function(){var e=this;e._nuked=!0;for(var t=0;t<e._events.length;t++)delete e[e._events[t]];e._listeners={}};var a="abcdefghijklmnopqrstuvwxyz0123456789_";n.random_string=function(e,t){t=t||a.length;var n,i=[];for(n=0;e>n;n++)i.push(a.substr(Math.floor(Math.random()*t),1));return i.join("")},n.random_number=function(e){return Math.floor(Math.random()*e)},n.random_number_string=function(e){var t=(""+(e-1)).length,i=Array(t+1).join("0");return(i+n.random_number(e)).slice(-t)},n.getOrigin=function(e){e+="/";var t=e.split("/").slice(0,3);return t.join("/")},n.isSameOriginUrl=function(e,n){return n||(n=t.location.href),e.split("/").slice(0,3).join("/")===n.split("/").slice(0,3).join("/")},n.isSameOriginScheme=function(e,n){return n||(n=t.location.href),e.split(":")[0]===n.split(":")[0]},n.getParentDomain=function(e){if(/^[0-9.]*$/.test(e))return e;if(/^\[/.test(e))return e;if(!/[.]/.test(e))return e;var t=e.split(".").slice(1);return t.join(".")},n.objectExtend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e};var s="_jp";n.polluteGlobalNamespace=function(){s in t||(t[s]={})},n.closeFrame=function(e,t){return"c"+p.stringify([e,t])},n.userSetCode=function(e){return 1e3===e||e>=3e3&&4999>=e},n.countRTO=function(e){var t;return t=e>100?3*e:e+200},n.log=function(){t.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},n.bind=function(e,t){return e.bind?e.bind(t):function(){return e.apply(t,arguments)}},n.flatUrl=function(e){return-1===e.indexOf("?")&&-1===e.indexOf("#")},n.amendUrl=function(t,i){var o;if(void 0===i)o=e.location;else{var r=/^([a-z0-9.+-]+:)/i.exec(i);if(r){var a=r[0].toLowerCase(),s=i.substring(a.length),c=/[a-z0-9\.-]+(:[0-9]+)?/.exec(s);if(c)var l=c[0]}if(!a||!l)throw new Error("relativeTo must be an absolute url");o={protocol:a,host:l}}if(!t)throw new Error("Wrong url for SockJS");if(!n.flatUrl(t))throw new Error("Only basic urls are supported in SockJS");0===t.indexOf("//")&&(t=o.protocol+t),0===t.indexOf("/")&&(t=o.protocol+"//"+o.host+t),t=t.replace(/[/]+$/,"");var u=t.split("/");return("http:"===u[0]&&/:80$/.test(u[2])||"https:"===u[0]&&/:443$/.test(u[2]))&&(u[2]=u[2].replace(/:(80|443)$/,"")),t=u.join("/")},n.arrIndexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},n.arrSkip=function(e,t){var i=n.arrIndexOf(e,t);if(-1===i)return e.slice();var o=e.slice(0,i);return o.concat(e.slice(i+1))},n.isArray=Array.isArray||function(e){return{}.toString.call(e).indexOf("Array")>=0},n.delay=function(e,t){return"function"==typeof e&&(t=e,e=0),setTimeout(t,e)};var c,l=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u={"\x00":"\\u0000","":"\\u0001","":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","	":"\\t","\n":"\\n","":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","Â€":"\\u0080","Â":"\\u0081","Â‚":"\\u0082","Âƒ":"\\u0083","Â„":"\\u0084","Â…":"\\u0085","Â†":"\\u0086","Â‡":"\\u0087","Âˆ":"\\u0088","Â‰":"\\u0089","ÂŠ":"\\u008a","Â‹":"\\u008b","ÂŒ":"\\u008c","Â":"\\u008d","ÂŽ":"\\u008e","Â":"\\u008f","Â":"\\u0090","Â‘":"\\u0091","Â’":"\\u0092","Â“":"\\u0093","Â”":"\\u0094","Â•":"\\u0095","Â–":"\\u0096","Â—":"\\u0097","Â˜":"\\u0098","Â™":"\\u0099","Âš":"\\u009a","Â›":"\\u009b","Âœ":"\\u009c","Â":"\\u009d","Âž":"\\u009e","ÂŸ":"\\u009f","Â­":"\\u00ad","Ø€":"\\u0600","Ø":"\\u0601","Ø‚":"\\u0602","Øƒ":"\\u0603","Ø„":"\\u0604","Ü":"\\u070f","áž´":"\\u17b4","ážµ":"\\u17b5","â€Œ":"\\u200c","â€":"\\u200d","â€Ž":"\\u200e","â€":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","â€ª":"\\u202a","â€«":"\\u202b","â€¬":"\\u202c","â€­":"\\u202d","â€®":"\\u202e","â€¯":"\\u202f","â ":"\\u2060","â¡":"\\u2061","â¢":"\\u2062","â£":"\\u2063","â¤":"\\u2064","â¥":"\\u2065","â¦":"\\u2066","â§":"\\u2067","â¨":"\\u2068","â©":"\\u2069","âª":"\\u206a","â«":"\\u206b","â¬":"\\u206c","â­":"\\u206d","â®":"\\u206e","â¯":"\\u206f","ï»¿":"\\ufeff","ï¿°":"\\ufff0","ï¿±":"\\ufff1","ï¿²":"\\ufff2","ï¿³":"\\ufff3","ï¿´":"\\ufff4","ï¿µ":"\\ufff5","ï¿¶":"\\ufff6","ï¿·":"\\ufff7","ï¿¸":"\\ufff8","ï¿¹":"\\ufff9","ï¿º":"\\ufffa","ï¿»":"\\ufffb","ï¿¼":"\\ufffc","ï¿½":"\\ufffd","ï¿¾":"\\ufffe","ï¿¿":"\\uffff"},d=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,f=p&&p.stringify||function(e){return l.lastIndex=0,l.test(e)&&(e=e.replace(l,function(e){return u[e]})),'"'+e+'"'},h=function(e){var t,n={},i=[];for(t=0;65536>t;t++)i.push(String.fromCharCode(t));return e.lastIndex=0,i.join("").replace(e,function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,n};n.quote=function(e){var t=f(e);return d.lastIndex=0,d.test(t)?(c||(c=h(d)),t.replace(d,function(e){return c[e]})):t};var g=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];n.probeProtocols=function(){for(var e={},t=0;t<g.length;t++){var n=g[t];e[n]=x[n]&&x[n].enabled()}return e},n.detectProtocols=function(e,t,n){var i={},o=[];t||(t=g);for(var r=0;r<t.length;r++){var a=t[r];i[a]=e[a]}var s=function(e){var t=e.shift();i[t]?o.push(t):e.length>0&&s(e)};return n.websocket!==!1&&s(["websocket"]),i["xhr-streaming"]&&!n.null_origin?o.push("xhr-streaming"):!i["xdr-streaming"]||n.cookie_needed||n.null_origin?s(["iframe-eventsource","iframe-htmlfile"]):o.push("xdr-streaming"),i["xhr-polling"]&&!n.null_origin?o.push("xhr-polling"):!i["xdr-polling"]||n.cookie_needed||n.null_origin?s(["iframe-xhr-polling","jsonp-polling"]):o.push("xdr-polling"),o};var m="_sockjs_global";n.createHook=function(){var e="a"+n.random_string(8);if(!(m in t)){var i={};t[m]=function(e){return e in i||(i[e]={id:e,del:function(){delete i[e]}}),i[e]}}return t[m](e)},n.attachMessage=function(e){n.attachEvent("message",e)},n.attachEvent=function(n,i){"undefined"!=typeof t.addEventListener?t.addEventListener(n,i,!1):(e.attachEvent("on"+n,i),t.attachEvent("on"+n,i))},n.detachMessage=function(e){n.detachEvent("message",e)},n.detachEvent=function(n,i){"undefined"!=typeof t.addEventListener?t.removeEventListener(n,i,!1):(e.detachEvent("on"+n,i),t.detachEvent("on"+n,i))};var v={},y=!1,b=function(){for(var e in v)v[e](),delete v[e]},_=function(){y||(y=!0,b())};n.attachEvent("unload",_),n.unload_add=function(e){var t=n.random_string(8);return v[t]=e,y&&n.delay(b),t},n.unload_del=function(e){e in v&&delete v[e]},n.createIframe=function(t,i){var o,r,a=e.createElement("iframe"),s=function(){clearTimeout(o);try{a.onload=null}catch(e){}a.onerror=null},c=function(){a&&(s(),setTimeout(function(){a&&a.parentNode.removeChild(a),a=null},0),n.unload_del(r))},l=function(e){a&&(c(),i(e))},u=function(e,t){try{a&&a.contentWindow&&a.contentWindow.postMessage(e,t)}catch(n){}};return a.src=t,a.style.display="none",a.style.position="absolute",a.onerror=function(){l("onerror")},a.onload=function(){clearTimeout(o),o=setTimeout(function(){l("onload timeout")},2e3)},e.body.appendChild(a),o=setTimeout(function(){l("timeout")},15e3),r=n.unload_add(c),{post:u,cleanup:c,loaded:s}},n.createHtmlfile=function(e,i){var o,r,a,c=new ActiveXObject("htmlfile"),l=function(){clearTimeout(o)},u=function(){c&&(l(),n.unload_del(r),a.parentNode.removeChild(a),a=c=null,CollectGarbage())},d=function(e){c&&(u(),i(e))},f=function(e,t){try{a&&a.contentWindow&&a.contentWindow.postMessage(e,t)}catch(n){}};c.open(),c.write('<html><script>document.domain="'+document.domain+'";</script></html>'),c.close(),c.parentWindow[s]=t[s];var p=c.createElement("div");return c.body.appendChild(p),a=c.createElement("iframe"),p.appendChild(a),a.src=e,o=setTimeout(function(){d("timeout")},15e3),r=n.unload_add(u),{post:f,cleanup:u,loaded:l}};var w=function(){};w.prototype=new r(["chunk","finish"]),w.prototype._start=function(e,i,o,r){var a=this;try{a.xhr=new XMLHttpRequest}catch(s){}if(!a.xhr)try{a.xhr=new t.ActiveXObject("Microsoft.XMLHTTP")}catch(s){}(t.ActiveXObject||t.XDomainRequest)&&(i+=(-1===i.indexOf("?")?"?":"&")+"t="+ +new Date),a.unload_ref=n.unload_add(function(){a._cleanup(!0)});try{a.xhr.open(e,i,!0)}catch(c){return a.emit("finish",0,""),a._cleanup(),void 0}if(r&&r.no_credentials||(a.xhr.withCredentials="true"),r&&r.headers)for(var l in r.headers)a.xhr.setRequestHeader(l,r.headers[l]);a.xhr.onreadystatechange=function(){if(a.xhr){var e=a.xhr;switch(e.readyState){case 3:try{var t=e.status,n=e.responseText}catch(e){}1223===t&&(t=204),n&&n.length>0&&a.emit("chunk",t,n);break;case 4:var t=e.status;1223===t&&(t=204),a.emit("finish",t,e.responseText),a._cleanup(!1)}}},a.xhr.send(o)},w.prototype._cleanup=function(e){var t=this;if(t.xhr){if(n.unload_del(t.unload_ref),t.xhr.onreadystatechange=function(){},e)try{t.xhr.abort()}catch(i){}t.unload_ref=t.xhr=null}},w.prototype.close=function(){var e=this;e.nuke(),e._cleanup(!0)};var k=n.XHRCorsObject=function(){var e=this,t=arguments;n.delay(function(){e._start.apply(e,t)})};k.prototype=new w;var T=n.XHRLocalObject=function(e,t,i){var o=this;n.delay(function(){o._start(e,t,i,{no_credentials:!0})})};T.prototype=new w;var S=n.XDRObject=function(e,t,i){var o=this;n.delay(function(){o._start(e,t,i)})};S.prototype=new r(["chunk","finish"]),S.prototype._start=function(e,t,i){var o=this,r=new XDomainRequest;t+=(-1===t.indexOf("?")?"?":"&")+"t="+ +new Date;var a=r.ontimeout=r.onerror=function(){o.emit("finish",0,""),o._cleanup(!1)};r.onprogress=function(){o.emit("chunk",200,r.responseText)},r.onload=function(){o.emit("finish",200,r.responseText),o._cleanup(!1)},o.xdr=r,o.unload_ref=n.unload_add(function(){o._cleanup(!0)});try{o.xdr.open(e,t),o.xdr.send(i)}catch(s){a()}},S.prototype._cleanup=function(e){var t=this;if(t.xdr){if(n.unload_del(t.unload_ref),t.xdr.ontimeout=t.xdr.onerror=t.xdr.onprogress=t.xdr.onload=null,e)try{t.xdr.abort()}catch(i){}t.unload_ref=t.xdr=null}},S.prototype.close=function(){var e=this;e.nuke(),e._cleanup(!0)},n.isXHRCorsCapable=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:t.XDomainRequest&&e.domain?2:L.enabled()?3:4};var x=function(e,t,i){if(!(this instanceof x))return new x(e,t,i);var o,r=this;r._options={devel:!1,debug:!1,protocols_whitelist:[],info:void 0,rtt:void 0},i&&n.objectExtend(r._options,i),r._base_url=n.amendUrl(e),r._server=r._options.server||n.random_number_string(1e3),r._options.protocols_whitelist&&r._options.protocols_whitelist.length?o=r._options.protocols_whitelist:(o="string"==typeof t&&t.length>0?[t]:n.isArray(t)?t:null,o&&r._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.')),r._protocols=[],r.protocol=null,r.readyState=x.CONNECTING,r._ir=V(r._base_url),r._ir.onfinish=function(e,t){r._ir=null,e?(r._options.info&&(e=n.objectExtend(e,r._options.info)),r._options.rtt&&(t=r._options.rtt),r._applyInfo(e,t,o),r._didClose()):r._didClose(1002,"Can't connect to server",!0)}};x.prototype=new i,x.version="0.3.4",x.CONNECTING=0,x.OPEN=1,x.CLOSING=2,x.CLOSED=3,x.prototype._debug=function(){this._options.debug&&n.log.apply(n,arguments)},x.prototype._dispatchOpen=function(){var e=this;e.readyState===x.CONNECTING?(e._transport_tref&&(clearTimeout(e._transport_tref),e._transport_tref=null),e.readyState=x.OPEN,e.dispatchEvent(new o("open"))):e._didClose(1006,"Server lost session")},x.prototype._dispatchMessage=function(e){var t=this;t.readyState===x.OPEN&&t.dispatchEvent(new o("message",{data:e}))},x.prototype._dispatchHeartbeat=function(){var e=this;e.readyState===x.OPEN&&e.dispatchEvent(new o("heartbeat",{}))},x.prototype._didClose=function(e,t,i){var r=this;if(r.readyState!==x.CONNECTING&&r.readyState!==x.OPEN&&r.readyState!==x.CLOSING)throw new Error("INVALID_STATE_ERR");r._ir&&(r._ir.nuke(),r._ir=null),r._transport&&(r._transport.doCleanup(),r._transport=null);var a=new o("close",{code:e,reason:t,wasClean:n.userSetCode(e)});if(!n.userSetCode(e)&&r.readyState===x.CONNECTING&&!i){if(r._try_next_protocol(a))return;a=new o("close",{code:2e3,reason:"All transports failed",wasClean:!1,last_event:a})}r.readyState=x.CLOSED,n.delay(function(){r.dispatchEvent(a)})},x.prototype._didMessage=function(e){var t=this,n=e.slice(0,1);switch(n){case"o":t._dispatchOpen();break;case"a":for(var i=p.parse(e.slice(1)||"[]"),o=0;o<i.length;o++)t._dispatchMessage(i[o]);break;case"m":var i=p.parse(e.slice(1)||"null");t._dispatchMessage(i);break;case"c":var i=p.parse(e.slice(1)||"[]");t._didClose(i[0],i[1]);break;case"h":t._dispatchHeartbeat()}},x.prototype._try_next_protocol=function(t){var i=this;for(i.protocol&&(i._debug("Closed transport:",i.protocol,""+t),i.protocol=null),i._transport_tref&&(clearTimeout(i._transport_tref),i._transport_tref=null);;){var o=i.protocol=i._protocols.shift();if(!o)return!1;if(x[o]&&x[o].need_body===!0&&(!e.body||"undefined"!=typeof e.readyState&&"complete"!==e.readyState))return i._protocols.unshift(o),i.protocol="waiting-for-load",n.attachEvent("load",function(){i._try_next_protocol()}),!0;if(x[o]&&x[o].enabled(i._options)){var r=x[o].roundTrips||1,a=(i._options.rto||0)*r||5e3;i._transport_tref=n.delay(a,function(){i.readyState===x.CONNECTING&&i._didClose(2007,"Transport timeouted")});var s=n.random_string(8),c=i._base_url+"/"+i._server+"/"+s;return i._debug("Opening transport:",o," url:"+c," RTO:"+i._options.rto),i._transport=new x[o](i,c,i._base_url),!0}i._debug("Skipping transport:",o)}},x.prototype.close=function(e,t){var i=this;if(e&&!n.userSetCode(e))throw new Error("INVALID_ACCESS_ERR");return i.readyState!==x.CONNECTING&&i.readyState!==x.OPEN?!1:(i.readyState=x.CLOSING,i._didClose(e||1e3,t||"Normal closure"),!0)},x.prototype.send=function(e){var t=this;if(t.readyState===x.CONNECTING)throw new Error("INVALID_STATE_ERR");return t.readyState===x.OPEN&&t._transport.doSend(n.quote(""+e)),!0},x.prototype._applyInfo=function(t,i,o){var r=this;r._options.info=t,r._options.rtt=i,r._options.rto=n.countRTO(i),r._options.info.null_origin=!e.domain,t.base_url&&(r._base_url=n.amendUrl(t.base_url,r._base_url));var a=n.probeProtocols();r._protocols=n.detectProtocols(a,o,t),n.isSameOriginScheme(r._base_url)||2!==n.isXHRCorsCapable()||(r._protocols=["jsonp-polling"])};var E=x.websocket=function(e,i){var o=this,r=i+"/websocket";r="https"===r.slice(0,5)?"wss"+r.slice(5):"ws"+r.slice(4),o.ri=e,o.url=r;var a=t.WebSocket||t.MozWebSocket;o.ws=new a(o.url),o.ws.onmessage=function(e){o.ri._didMessage(e.data)},o.unload_ref=n.unload_add(function(){o.ws.close()}),o.ws.onclose=function(){o.ri._didMessage(n.closeFrame(1006,"WebSocket connection broken"))}};E.prototype.doSend=function(e){this.ws.send("["+e+"]")},E.prototype.doCleanup=function(){var e=this,t=e.ws;t&&(t.onmessage=t.onclose=null,t.close(),n.unload_del(e.unload_ref),e.unload_ref=e.ri=e.ws=null)},E.enabled=function(){return!(!t.WebSocket&&!t.MozWebSocket)},E.roundTrips=2;var C=function(){};C.prototype.send_constructor=function(e){var t=this;t.send_buffer=[],t.sender=e},C.prototype.doSend=function(e){var t=this;t.send_buffer.push(e),t.send_stop||t.send_schedule()},C.prototype.send_schedule_wait=function(){var e,t=this;t.send_stop=function(){t.send_stop=null,clearTimeout(e)},e=n.delay(25,function(){t.send_stop=null,t.send_schedule()})},C.prototype.send_schedule=function(){var e=this;if(e.send_buffer.length>0){var t="["+e.send_buffer.join(",")+"]";e.send_stop=e.sender(e.trans_url,t,function(t,n){e.send_stop=null,t===!1?e.ri._didClose(1006,"Sending error "+n):e.send_schedule_wait()}),e.send_buffer=[]}},C.prototype.send_destructor=function(){var e=this;e._send_stop&&e._send_stop(),e._send_stop=null};var P=function(t,i,o){var r=this;if(!("_send_form"in r)){var a=r._send_form=e.createElement("form"),s=r._send_area=e.createElement("textarea");s.name="d",a.style.display="none",a.style.position="absolute",a.method="POST",a.enctype="application/x-www-form-urlencoded",a.acceptCharset="UTF-8",a.appendChild(s),e.body.appendChild(a)}var a=r._send_form,s=r._send_area,c="a"+n.random_string(8);a.target=c,a.action=t+"/jsonp_send?i="+c;var l;try{l=e.createElement('<iframe name="'+c+'">')}catch(u){l=e.createElement("iframe"),l.name=c}l.id=c,a.appendChild(l),l.style.display="none";try{s.value=i}catch(d){n.log("Your browser is seriously broken. Go home! "+d.message)}a.submit();var f=function(){l.onerror&&(l.onreadystatechange=l.onerror=l.onload=null,n.delay(500,function(){l.parentNode.removeChild(l),l=null}),s.value="",o(!0))};return l.onerror=l.onload=f,l.onreadystatechange=function(){"complete"==l.readyState&&f()},f},D=function(e){return function(t,n,i){var o=new e("POST",t+"/xhr_send",n);return o.onfinish=function(e){i(200===e||204===e,"http status "+e)},function(e){i(!1,e)}}},O=function(t,i){var o,r,a=e.createElement("script"),s=function(e){r&&(r.parentNode.removeChild(r),r=null),a&&(clearTimeout(o),a.parentNode.removeChild(a),a.onreadystatechange=a.onerror=a.onload=a.onclick=null,a=null,i(e),i=null)},c=!1,l=null;if(a.id="a"+n.random_string(8),a.src=t,a.type="text/javascript",a.charset="UTF-8",a.onerror=function(){l||(l=setTimeout(function(){c||s(n.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1e3))},a.onload=function(){s(n.closeFrame(1006,"JSONP script loaded abnormally (onload)"))},a.onreadystatechange=function(){if(/loaded|closed/.test(a.readyState)){if(a&&a.htmlFor&&a.onclick){c=!0;try{a.onclick()}catch(e){}}a&&s(n.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"==typeof a.async&&e.attachEvent)if(/opera/i.test(navigator.userAgent))r=e.createElement("script"),r.text="try{var a = document.getElementById('"+a.id+"'); if(a)a.onerror();}catch(x){};",a.async=r.async=!1;else{try{a.htmlFor=a.id,a.event="onclick"}catch(u){}a.async=!0}"undefined"!=typeof a.async&&(a.async=!0),o=setTimeout(function(){s(n.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var d=e.getElementsByTagName("head")[0];return d.insertBefore(a,d.firstChild),r&&d.insertBefore(r,d.firstChild),s},M=x["jsonp-polling"]=function(e,t){n.polluteGlobalNamespace();var i=this;i.ri=e,i.trans_url=t,i.send_constructor(P),i._schedule_recv()};M.prototype=new C,M.prototype._schedule_recv=function(){var e=this,t=function(t){e._recv_stop=null,t&&(e._is_closing||e.ri._didMessage(t)),e._is_closing||e._schedule_recv()};e._recv_stop=I(e.trans_url+"/jsonp",O,t)},M.enabled=function(){return!0},M.need_body=!0,M.prototype.doCleanup=function(){var e=this;e._is_closing=!0,e._recv_stop&&e._recv_stop(),e.ri=e._recv_stop=null,e.send_destructor()};var I=function(e,i,o){var r="a"+n.random_string(6),a=e+"?c="+escape(s+"."+r),c=0,l=function(e){switch(c){case 0:delete t[s][r],o(e);break;case 1:o(e),c=2;break;case 2:delete t[s][r]}},u=i(a,l);t[s][r]=u;var d=function(){t[s][r]&&(c=1,t[s][r](n.closeFrame(1e3,"JSONP user aborted read")))};return d},A=function(){};A.prototype=new C,A.prototype.run=function(e,t,n,i,o){var r=this;r.ri=e,r.trans_url=t,r.send_constructor(D(o)),r.poll=new Z(e,i,t+n,o)},A.prototype.doCleanup=function(){var e=this;e.poll&&(e.poll.abort(),e.poll=null)};var N=x["xhr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",ot,n.XHRCorsObject)};N.prototype=new A,N.enabled=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)},N.roundTrips=2,N.need_body=!0;var $=x["xdr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",ot,n.XDRObject)};$.prototype=new A,$.enabled=function(){return!!t.XDomainRequest},$.roundTrips=2;var F=x["xhr-polling"]=function(e,t){this.run(e,t,"/xhr",ot,n.XHRCorsObject)};F.prototype=new A,F.enabled=N.enabled,F.roundTrips=2;var B=x["xdr-polling"]=function(e,t){this.run(e,t,"/xhr",ot,n.XDRObject)};B.prototype=new A,B.enabled=$.enabled,B.roundTrips=2;var L=function(){};L.prototype.i_constructor=function(e,t,i){var o=this;o.ri=e,o.origin=n.getOrigin(i),o.base_url=i,o.trans_url=t;var r=i+"/iframe.html";o.ri._options.devel&&(r+="?t="+ +new Date),o.window_id=n.random_string(8),r+="#"+o.window_id,o.iframeObj=n.createIframe(r,function(e){o.ri._didClose(1006,"Unable to load an iframe ("+e+")")}),o.onmessage_cb=n.bind(o.onmessage,o),n.attachMessage(o.onmessage_cb)},L.prototype.doCleanup=function(){var e=this;if(e.iframeObj){n.detachMessage(e.onmessage_cb);try{e.iframeObj.iframe.contentWindow&&e.postMessage("c")}catch(t){}e.iframeObj.cleanup(),e.iframeObj=null,e.onmessage_cb=e.iframeObj=null}},L.prototype.onmessage=function(e){var t=this;if(e.origin===t.origin){var n=e.data.slice(0,8),i=e.data.slice(8,9),o=e.data.slice(9);if(n===t.window_id)switch(i){case"s":t.iframeObj.loaded(),t.postMessage("s",p.stringify([x.version,t.protocol,t.trans_url,t.base_url]));break;case"t":t.ri._didMessage(o)}}},L.prototype.postMessage=function(e,t){var n=this;n.iframeObj.post(n.window_id+e+(t||""),n.origin)},L.prototype.doSend=function(e){this.postMessage("m",e)},L.enabled=function(){var e=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof t.postMessage||"object"==typeof t.postMessage)&&!e};var j,R=function(e,i){parent!==t?parent.postMessage(j+e+(i||""),"*"):n.log("Can't postMessage, no parent window.",e,i)},U=function(){};U.prototype._didClose=function(e,t){R("t",n.closeFrame(e,t))},U.prototype._didMessage=function(e){R("t",e)},U.prototype._doSend=function(e){this._transport.doSend(e)},U.prototype._doCleanup=function(){this._transport.doCleanup()},n.parent_origin=void 0,x.bootstrap_iframe=function(){var i;j=e.location.hash.slice(1);var o=function(e){if(e.source===parent&&("undefined"==typeof n.parent_origin&&(n.parent_origin=e.origin),e.origin===n.parent_origin)){var o=e.data.slice(0,8),r=e.data.slice(8,9),a=e.data.slice(9);if(o===j)switch(r){case"s":var s=p.parse(a),c=s[0],l=s[1],u=s[2],d=s[3];if(c!==x.version&&n.log('Incompatibile SockJS! Main site uses: "'+c+'", the iframe: "'+x.version+'".'),!n.flatUrl(u)||!n.flatUrl(d))return n.log("Only basic urls are supported in SockJS"),void 0;if(!n.isSameOriginUrl(u)||!n.isSameOriginUrl(d))return n.log("Can't connect to different domain from within an iframe. ("+p.stringify([t.location.href,u,d])+")"),void 0;i=new U,i._transport=new U[l](i,u,d);break;case"m":i._doSend(a);break;case"c":i&&i._doCleanup(),i=null}}};n.attachMessage(o),R("s")};var H=function(e,t){var i=this;n.delay(function(){i.doXhr(e,t)})};H.prototype=new r(["finish"]),H.prototype.doXhr=function(e,t){var i=this,o=(new Date).getTime(),r=new t("GET",e+"/info?cb="+n.random_string(10)),a=n.delay(8e3,function(){r.ontimeout()});r.onfinish=function(e,t){if(clearTimeout(a),a=null,200===e){var n=(new Date).getTime()-o,r=p.parse(t);"object"!=typeof r&&(r={}),i.emit("finish",r,n)}else i.emit("finish")},r.ontimeout=function(){r.close(),i.emit("finish")}};var z=function(t){var i=this,o=function(){var e=new L;e.protocol="w-iframe-info-receiver";var n=function(t){if("string"==typeof t&&"m"===t.substr(0,1)){var n=p.parse(t.substr(1)),o=n[0],r=n[1];i.emit("finish",o,r)}else i.emit("finish");e.doCleanup(),e=null},o={_options:{},_didClose:n,_didMessage:n};e.i_constructor(o,t,t)};e.body?o():n.attachEvent("load",o)};z.prototype=new r(["finish"]);var q=function(){var e=this;n.delay(function(){e.emit("finish",{},2e3)})};q.prototype=new r(["finish"]);var V=function(e){if(n.isSameOriginUrl(e))return new H(e,n.XHRLocalObject);switch(n.isXHRCorsCapable()){case 1:return new H(e,n.XHRLocalObject);case 2:return n.isSameOriginScheme(e)?new H(e,n.XDRObject):new q;case 3:return new z(e);default:return new q}},W=U["w-iframe-info-receiver"]=function(e,t,i){var o=new H(i,n.XHRLocalObject);o.onfinish=function(t,n){e._didMessage("m"+p.stringify([t,n])),e._didClose()}};W.prototype.doCleanup=function(){};var Y=x["iframe-eventsource"]=function(){var e=this;e.protocol="w-iframe-eventsource",e.i_constructor.apply(e,arguments)};Y.prototype=new L,Y.enabled=function(){return"EventSource"in t&&L.enabled()},Y.need_body=!0,Y.roundTrips=3;var Q=U["w-iframe-eventsource"]=function(e,t){this.run(e,t,"/eventsource",et,n.XHRLocalObject)};Q.prototype=new A;var J=x["iframe-xhr-polling"]=function(){var e=this;e.protocol="w-iframe-xhr-polling",e.i_constructor.apply(e,arguments)};J.prototype=new L,J.enabled=function(){return t.XMLHttpRequest&&L.enabled()},J.need_body=!0,J.roundTrips=3;var X=U["w-iframe-xhr-polling"]=function(e,t){this.run(e,t,"/xhr",ot,n.XHRLocalObject)};X.prototype=new A;var G=x["iframe-htmlfile"]=function(){var e=this;e.protocol="w-iframe-htmlfile",e.i_constructor.apply(e,arguments)};G.prototype=new L,G.enabled=function(){return L.enabled()},G.need_body=!0,G.roundTrips=3;var K=U["w-iframe-htmlfile"]=function(e,t){this.run(e,t,"/htmlfile",it,n.XHRLocalObject)};K.prototype=new A;var Z=function(e,t,n,i){var o=this;o.ri=e,o.Receiver=t,o.recv_url=n,o.AjaxObject=i,o._scheduleRecv()};Z.prototype._scheduleRecv=function(){var e=this,t=e.poll=new e.Receiver(e.recv_url,e.AjaxObject),n=0;t.onmessage=function(t){n+=1,e.ri._didMessage(t.data)},t.onclose=function(n){e.poll=t=t.onmessage=t.onclose=null,e.poll_is_closing||("permanent"===n.reason?e.ri._didClose(1006,"Polling error ("+n.reason+")"):e._scheduleRecv())}},Z.prototype.abort=function(){var e=this;e.poll_is_closing=!0,e.poll&&e.poll.abort()};var et=function(e){var t=this,i=new EventSource(e);i.onmessage=function(e){t.dispatchEvent(new o("message",{data:unescape(e.data)}))},t.es_close=i.onerror=function(e,r){var a=r?"user":2!==i.readyState?"network":"permanent";t.es_close=i.onmessage=i.onerror=null,i.close(),i=null,n.delay(200,function(){t.dispatchEvent(new o("close",{reason:a}))})}};et.prototype=new i,et.prototype.abort=function(){var e=this;e.es_close&&e.es_close({},!0)};var tt,nt=function(){if(void 0===tt)if("ActiveXObject"in t)try{tt=!!new ActiveXObject("htmlfile")}catch(e){}else tt=!1;return tt},it=function(e){var i=this;n.polluteGlobalNamespace(),i.id="a"+n.random_string(6,26),e+=(-1===e.indexOf("?")?"?":"&")+"c="+escape(s+"."+i.id);var r,a=nt()?n.createHtmlfile:n.createIframe;t[s][i.id]={start:function(){r.loaded()},message:function(e){i.dispatchEvent(new o("message",{data:e}))},stop:function(){i.iframe_close({},"network")}},i.iframe_close=function(e,n){r.cleanup(),i.iframe_close=r=null,delete t[s][i.id],i.dispatchEvent(new o("close",{reason:n}))},r=a(e,function(){i.iframe_close({},"permanent")})};it.prototype=new i,it.prototype.abort=function(){var e=this;e.iframe_close&&e.iframe_close({},"user")};var ot=function(e,t){var n=this,i=0;n.xo=new t("POST",e,null),n.xo.onchunk=function(e,t){if(200===e)for(;;){var r=t.slice(i),a=r.indexOf("\n");if(-1===a)break;i+=a+1;var s=r.slice(0,a);n.dispatchEvent(new o("message",{data:s}))}},n.xo.onfinish=function(e,t){n.xo.onchunk(e,t),n.xo=null;var i=200===e?"network":"permanent";n.dispatchEvent(new o("close",{reason:i}))}};return ot.prototype=new i,ot.prototype.abort=function(){var e=this;e.xo&&(e.xo.close(),e.dispatchEvent(new o("close",{reason:"user"})),e.xo=null)},x.getUtils=function(){return n},x.getIframeTransport=function(){return L},x}(),"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1),"function"==typeof define&&define.amd&&define("sockjs",[],function(){return n})}.call(this),function(){t.ClientStream=function(e,t){var n=this;n.options=h.extend({retry:!0},t),n._initCommon(),u.settings&&u.settings.public&&u.settings.public.DDP&&(e=u.settings.public.DDP),n.HEARTBEAT_TIMEOUT=6e4,n.rawUrl=e,n.socket=null,n.heartbeatTimer=null,"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("online",h.bind(n._online,n),!1),n._launchConnection()},h.extend(t.ClientStream.prototype,{send:function(e){var t=this;t.currentStatus.connected&&t.socket.send(e)},_changeUrl:function(e){var t=this;t.rawUrl=e},_connected:function(){var e=this;e.connectionTimer&&(clearTimeout(e.connectionTimer),e.connectionTimer=null),e.currentStatus.connected||(e.currentStatus.status="connected",e.currentStatus.connected=!0,e.currentStatus.retryCount=0,e.statusChanged(),h.each(e.eventCallbacks.reset,function(e){e()}))},_cleanup:function(){var e=this;e._clearConnectionAndHeartbeatTimers(),e.socket&&(e.socket.onmessage=e.socket.onclose=e.socket.onerror=e.socket.onheartbeat=function(){},e.socket.close(),e.socket=null)},_clearConnectionAndHeartbeatTimers:function(){var e=this;e.connectionTimer&&(clearTimeout(e.connectionTimer),e.connectionTimer=null),e.heartbeatTimer&&(clearTimeout(e.heartbeatTimer),e.heartbeatTimer=null)},_heartbeat_timeout:function(){var e=this;u._debug("Connection timeout. No heartbeat received."),e._lostConnection()},_heartbeat_received:function(){var e=this;e._forcedToDisconnect||(e.heartbeatTimer&&clearTimeout(e.heartbeatTimer),e.heartbeatTimer=setTimeout(h.bind(e._heartbeat_timeout,e),e.HEARTBEAT_TIMEOUT))},_sockjsProtocolsWhitelist:function(){var e=["xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"],t=navigator&&/iPhone|iPad|iPod/.test(navigator.userAgent)&&/OS 4_|OS 5_/.test(navigator.userAgent);return t||(e=["websocket"].concat(e)),e},_launchConnection:function(){var e=this;e._cleanup();var t=h.extend({protocols_whitelist:e._sockjsProtocolsWhitelist()},e.options._sockjsOptions);e.socket=new n(i(e.rawUrl),void 0,t),e.socket.onopen=function(){e._connected()},e.socket.onmessage=function(t){e._heartbeat_received(),e.currentStatus.connected&&h.each(e.eventCallbacks.message,function(e){e(t.data)
})},e.socket.onclose=function(){e._lostConnection()},e.socket.onerror=function(){u._debug("stream error",h.toArray(arguments),(new Date).toDateString())},e.socket.onheartbeat=function(){e._heartbeat_received()},e.connectionTimer&&clearTimeout(e.connectionTimer),e.connectionTimer=setTimeout(h.bind(e._lostConnection,e),e.CONNECT_TIMEOUT)}})}.call(this),function(){var e=function(e,t){return e.length>=t.length&&e.substring(0,t.length)===t},n=function(e,t){return e.length>=t.length&&e.substring(e.length-t.length)===t},r=function(t,i,o){i||(i="http");var r,a=t.match(/^ddp(i?)\+sockjs:\/\//),s=t.match(/^http(s?):\/\//);if(a){var c=t.substr(a[0].length);r="i"===a[1]?i:i+"s";var l=c.indexOf("/"),f=-1===l?c:c.substr(0,l),p=-1===l?"":c.substr(l);return f=f.replace(/\*/g,function(){return Math.floor(10*d.fraction())}),r+"://"+f+p}if(s){r=s[1]?i+"s":i;var h=t.substr(s[0].length);t=r+"://"+h}return-1!==t.indexOf("://")||e(t,"/")||(t=i+"://"+t),t=u._relativeToSiteRootUrl(t),n(t,"/")?t+o:t+"/"+o};i=function(e){return r(e,"http","sockjs")},o=function(e){var t=r(e,"ws","websocket");return t},t.toSockjsUrl=i,h.extend(t.ClientStream.prototype,{on:function(e,t){var n=this;if("message"!==e&&"reset"!==e)throw new Error("unknown event type: "+e);n.eventCallbacks[e]||(n.eventCallbacks[e]=[]),n.eventCallbacks[e].push(t)},_initCommon:function(){var e=this;e.CONNECT_TIMEOUT=1e4,e.eventCallbacks={},e._forcedToDisconnect=!1,e.currentStatus={status:"connecting",connected:!1,retryCount:0},e.statusListeners="undefined"!=typeof g&&new g.Dependency,e.statusChanged=function(){e.statusListeners&&e.statusListeners.changed()},e._retry=new m,e.connectionTimer=null},reconnect:function(e){var t=this;return e=e||{},e.url&&t._changeUrl(e.url),e._sockjsOptions&&(t.options._sockjsOptions=e._sockjsOptions),t.currentStatus.connected?((e._force||e.url)&&t._lostConnection(),void 0):("connecting"===t.currentStatus.status&&t._lostConnection(),t._retry.clear(),t.currentStatus.retryCount-=1,t._retryNow(),void 0)},disconnect:function(e){var t=this;e=e||{},t._forcedToDisconnect||(e._permanent&&(t._forcedToDisconnect=!0),t._cleanup(),t._retry.clear(),t.currentStatus={status:e._permanent?"failed":"offline",connected:!1,retryCount:0},e._permanent&&e._error&&(t.currentStatus.reason=e._error),t.statusChanged())},_lostConnection:function(){var e=this;e._cleanup(),e._retryLater()},_online:function(){"offline"!=this.currentStatus.status&&this.reconnect()},_retryLater:function(){var e=this,t=0;e.options.retry&&(t=e._retry.retryLater(e.currentStatus.retryCount,h.bind(e._retryNow,e))),e.currentStatus.status="waiting",e.currentStatus.connected=!1,e.currentStatus.retryTime=(new Date).getTime()+t,e.statusChanged()},_retryNow:function(){var e=this;e._forcedToDisconnect||(e.currentStatus.retryCount+=1,e.currentStatus.status="connecting",e.currentStatus.connected=!1,delete e.currentStatus.retryTime,e.statusChanged(),e._launchConnection())},status:function(){var e=this;return e.statusListeners&&e.statusListeners.depend(),e.currentStatus}})}.call(this),function(){e={},r=["pre1"],t.SUPPORTED_DDP_VERSIONS=r,a=function(e){this.isSimulation=e.isSimulation,this._unblock=e.unblock||function(){},this._calledUnblock=!1,this.userId=e.userId,this._setUserId=e.setUserId||function(){},this.connection=e.connection},h.extend(a.prototype,{unblock:function(){var e=this;e._calledUnblock=!0,e._unblock()},setUserId:function(e){var t=this;if(t._calledUnblock)throw new Error("Can't call setUserId in a method after calling unblock");t.userId=e,t._setUserId(e)}}),s=function(e){try{var t=p.parse(e)}catch(n){return u._debug("Discarding message with invalid JSON",e),null}return null===t||"object"!=typeof t?(u._debug("Discarding non-object DDP message",e),null):(h.has(t,"cleared")&&(h.has(t,"fields")||(t.fields={}),h.each(t.cleared,function(e){t.fields[e]=void 0}),delete t.cleared),h.each(["fields","params","result"],function(e){h.has(t,e)&&(t[e]=f._adjustTypesFromJSONValue(t[e]))}),t)},c=function(e){var t=f.clone(e);if(h.has(e,"fields")){var n=[];h.each(e.fields,function(e,i){void 0===e&&(n.push(i),delete t.fields[i])}),h.isEmpty(n)||(t.cleared=n),h.isEmpty(t.fields)&&delete t.fields}if(h.each(["fields","params","result"],function(e){h.has(t,e)&&(t[e]=f._adjustTypesToJSONValue(t[e]))}),e.id&&"string"!=typeof e.id)throw new Error("Message id is not a string");return p.stringify(t)},e._CurrentInvocation=new u.EnvironmentVariable}.call(this),function(){if(u.isServer)var n=Npm.require("path"),i=(Npm.require("fibers"),Npm.require(n.join("fibers","future")));var o=function(e,n){var i=this;n=h.extend({onConnected:function(){},onDDPVersionNegotiationFailure:function(e){u._debug(e)},reloadWithOutstanding:!1,supportedDDPVersions:r,retry:!0},n),i.onReconnect=null,i._stream="object"==typeof e?e:new t.ClientStream(e,{retry:n.retry,headers:n.headers,_sockjsOptions:n._sockjsOptions,_dontPrintErrors:n._dontPrintErrors}),i._lastSessionId=null,i._versionSuggestion=null,i._version=null,i._stores={},i._methodHandlers={},i._nextMethodId=1,i._supportedDDPVersions=n.supportedDDPVersions,i._methodInvokers={},i._outstandingMethodBlocks=[],i._documentsWrittenByStub={},i._serverDocuments={},i._afterUpdateCallbacks=[],i._messagesBufferedUntilQuiescence=[],i._methodsBlockingQuiescence={},i._subsBeingRevived={},i._resetStores=!1,i._updatesForUnknownStores={},i._retryMigrate=null,i._subscriptions={},i._userId=null,i._userIdDeps="undefined"!=typeof g&&new g.Dependency,u.isClient&&Package.reload&&!n.reloadWithOutstanding&&Package.reload.Reload._onMigrate(function(e){if(i._readyToMigrate())return[!0];if(i._retryMigrate)throw new Error("Two migrations in progress?");return i._retryMigrate=e,!1});var o=function(e){try{var t=s(e)}catch(o){return u._debug("Exception while parsing DDP",o),void 0}if(null===t||!t.msg)return t&&t.server_id||u._debug("discarding invalid livedata message",t),void 0;if("connected"===t.msg)i._version=i._versionSuggestion,n.onConnected(),i._livedata_connected(t);else if("failed"==t.msg)if(h.contains(i._supportedDDPVersions,t.version))i._versionSuggestion=t.version,i._stream.reconnect({_force:!0});else{var r="DDP version negotiation failed; server requested version "+t.version;i._stream.disconnect({_permanent:!0,_error:r}),n.onDDPVersionNegotiationFailure(r)}else h.include(["added","changed","removed","ready","updated"],t.msg)?i._livedata_data(t):"nosub"===t.msg?i._livedata_nosub(t):"result"===t.msg?i._livedata_result(t):"error"===t.msg?i._livedata_error(t):u._debug("discarding unknown livedata message type",t)},a=function(){var e={msg:"connect"};i._lastSessionId&&(e.session=i._lastSessionId),e.version=i._versionSuggestion||i._supportedDDPVersions[0],i._versionSuggestion=e.version,e.support=i._supportedDDPVersions,i._send(e),!h.isEmpty(i._outstandingMethodBlocks)&&h.isEmpty(i._outstandingMethodBlocks[0].methods)&&i._outstandingMethodBlocks.shift(),h.each(i._methodInvokers,function(e){e.sentMessage=!1}),i.onReconnect?i._callOnReconnectAndSendAppropriateOutstandingMethods():i._sendOutstandingMethods(),h.each(i._subscriptions,function(e,t){i._send({msg:"sub",id:t,name:e.name,params:e.params})})};u.isServer?(i._stream.on("message",u.bindEnvironment(o,u._debug)),i._stream.on("reset",u.bindEnvironment(a,u._debug))):(i._stream.on("message",o),i._stream.on("reset",a))},m=function(e){var t=this;t.methodId=e.methodId,t.sentMessage=!1,t._callback=e.callback,t._connection=e.connection,t._message=e.message,t._onResultReceived=e.onResultReceived||function(){},t._wait=e.wait,t._methodResult=null,t._dataVisible=!1,t._connection._methodInvokers[t.methodId]=t};h.extend(m.prototype,{sendMessage:function(){var e=this;if(e.gotResult())throw new Error("sendingMethod is called on method with result");e._dataVisible=!1,e.sentMessage=!0,e._wait&&(e._connection._methodsBlockingQuiescence[e.methodId]=!0),e._connection._send(e._message)},_maybeInvokeCallback:function(){var e=this;e._methodResult&&e._dataVisible&&(e._callback(e._methodResult[0],e._methodResult[1]),delete e._connection._methodInvokers[e.methodId],e._connection._outstandingMethodFinished())},receiveResult:function(e,t){var n=this;if(n.gotResult())throw new Error("Methods should only receive results once");n._methodResult=[e,t],n._onResultReceived(e,t),n._maybeInvokeCallback()},dataVisible:function(){var e=this;e._dataVisible=!0,e._maybeInvokeCallback()},gotResult:function(){var e=this;return!!e._methodResult}}),h.extend(o.prototype,{registerStore:function(e,t){var n=this;if(e in n._stores)return!1;var i={};h.each(["update","beginUpdate","endUpdate","saveOriginals","retrieveOriginals"],function(e){i[e]=function(){return t[e]?t[e].apply(t,arguments):void 0}}),n._stores[e]=i;var o=n._updatesForUnknownStores[e];return o&&(i.beginUpdate(o.length,!1),h.each(o,function(e){i.update(e)}),i.endUpdate(),delete n._updatesForUnknownStores[e]),!0},subscribe:function(e){var t=this,n=Array.prototype.slice.call(arguments,1),i={};if(n.length){var o=n[n.length-1];"function"==typeof o?i.onReady=n.pop():!o||"function"!=typeof o.onReady&&"function"!=typeof o.onError||(i=n.pop())}var r,a=h.find(t._subscriptions,function(t){return t.inactive&&t.name===e&&f.equals(t.params,n)});a?(r=a.id,a.inactive=!1,i.onReady&&(a.ready||(a.readyCallback=i.onReady)),i.onError&&(a.errorCallback=i.onError)):(r=d.id(),t._subscriptions[r]={id:r,name:e,params:n,inactive:!1,ready:!1,readyDeps:"undefined"!=typeof g&&new g.Dependency,readyCallback:i.onReady,errorCallback:i.onError},t._send({msg:"sub",id:r,name:e,params:n}));var s={stop:function(){h.has(t._subscriptions,r)&&(t._send({msg:"unsub",id:r}),delete t._subscriptions[r])},ready:function(){if(!h.has(t._subscriptions,r))return!1;var e=t._subscriptions[r];return e.readyDeps&&e.readyDeps.depend(),e.ready}};return g.active&&g.onInvalidate(function(){h.has(t._subscriptions,r)&&(t._subscriptions[r].inactive=!0),g.afterFlush(function(){h.has(t._subscriptions,r)&&t._subscriptions[r].inactive&&s.stop()})}),s},_subscribeAndWait:function(e,t,n){var o,r=this,a=new i,s=!1;return t=t||[],t.push({onReady:function(){s=!0,a["return"]()},onError:function(e){s?n&&n.onLateError&&n.onLateError(e):a["throw"](e)}}),o=r.subscribe.apply(r,[e].concat(t)),a.wait(),o},methods:function(e){var t=this;h.each(e,function(e,n){if(t._methodHandlers[n])throw new Error("A method named '"+n+"' is already defined");t._methodHandlers[n]=e})},call:function(e){var t=Array.prototype.slice.call(arguments,1);if(t.length&&"function"==typeof t[t.length-1])var n=t.pop();return this.apply(e,t,n)},apply:function(t,n,o,r){var s=this;r||"function"!=typeof o||(r=o,o={}),o=o||{},r&&(r=u.bindEnvironment(r,"delivering result of invoking '"+t+"'"));var c=function(){var e;return function(){return void 0===e&&(e=""+s._nextMethodId++),e}}(),l=e._CurrentInvocation.get(),d=l&&l.isSimulation,p=s._methodHandlers[t];if(p){var g=function(e){s.setUserId(e)},v=new a({isSimulation:!0,userId:s.userId(),setUserId:g});d||s._saveOriginals();try{var y=e._CurrentInvocation.withValue(v,function(){return u.isServer?u._noYieldsAllowed(function(){return p.apply(v,f.clone(n))}):p.apply(v,f.clone(n))})}catch(b){var _=b}d||s._retrieveAndStoreOriginals(c())}if(d){if(r)return r(_,y),void 0;if(_)throw _;return y}if(_&&!_.expected&&u._debug("Exception while simulating the effect of invoking '"+t+"'",_,_.stack),!r)if(u.isClient)r=function(){};else{var w=new i;r=w.resolver()}var k=new m({methodId:c(),callback:r,connection:s,onResultReceived:o.onResultReceived,wait:!!o.wait,message:{msg:"method",method:t,params:n,id:c()}});return o.wait?s._outstandingMethodBlocks.push({wait:!0,methods:[k]}):((h.isEmpty(s._outstandingMethodBlocks)||h.last(s._outstandingMethodBlocks).wait)&&s._outstandingMethodBlocks.push({wait:!1,methods:[]}),h.last(s._outstandingMethodBlocks).methods.push(k)),1===s._outstandingMethodBlocks.length&&k.sendMessage(),w?w.wait():void 0},_saveOriginals:function(){var e=this;h.each(e._stores,function(e){e.saveOriginals()})},_retrieveAndStoreOriginals:function(e){var t=this;if(t._documentsWrittenByStub[e])throw new Error("Duplicate methodId in _retrieveAndStoreOriginals");var n=[];h.each(t._stores,function(i,o){var r=i.retrieveOriginals();r&&r.forEach(function(i,r){n.push({collection:o,id:r}),h.has(t._serverDocuments,o)||(t._serverDocuments[o]=new v._IdMap);var a=t._serverDocuments[o].setDefault(r,{});a.writtenByStubs?a.writtenByStubs[e]=!0:(a.document=i,a.flushCallbacks=[],a.writtenByStubs={},a.writtenByStubs[e]=!0)})}),h.isEmpty(n)||(t._documentsWrittenByStub[e]=n)},_unsubscribeAll:function(){var e=this;h.each(h.clone(e._subscriptions),function(t,n){"meteor_autoupdate_clientVersions"!==t.name&&(e._send({msg:"unsub",id:n}),delete e._subscriptions[n])})},_send:function(e){var t=this;t._stream.send(c(e))},status:function(){var e=this;return e._stream.status.apply(e._stream,arguments)},reconnect:function(){var e=this;return e._stream.reconnect.apply(e._stream,arguments)},disconnect:function(){var e=this;return e._stream.disconnect.apply(e._stream,arguments)},close:function(){var e=this;return e._stream.disconnect({_permanent:!0})},userId:function(){var e=this;return e._userIdDeps&&e._userIdDeps.depend(),e._userId},setUserId:function(e){var t=this;t._userId!==e&&(t._userId=e,t._userIdDeps&&t._userIdDeps.changed())},_waitingForQuiescence:function(){var e=this;return!h.isEmpty(e._subsBeingRevived)||!h.isEmpty(e._methodsBlockingQuiescence)},_anyMethodsAreOutstanding:function(){var e=this;return h.any(h.pluck(e._methodInvokers,"sentMessage"))},_livedata_connected:function(e){var t=this;if(t._lastSessionId&&(t._resetStores=!0),"string"==typeof e.session){var n=t._lastSessionId===e.session;t._lastSessionId=e.session}n||(t._updatesForUnknownStores={},t._resetStores&&(t._documentsWrittenByStub={},t._serverDocuments={}),t._afterUpdateCallbacks=[],t._subsBeingRevived={},h.each(t._subscriptions,function(e,n){e.ready&&(t._subsBeingRevived[n]=!0)}),t._methodsBlockingQuiescence={},t._resetStores&&h.each(t._methodInvokers,function(e){e.gotResult()?t._afterUpdateCallbacks.push(h.bind(e.dataVisible,e)):e.sentMessage&&(t._methodsBlockingQuiescence[e.methodId]=!0)}),t._messagesBufferedUntilQuiescence=[],t._waitingForQuiescence()||(t._resetStores&&(h.each(t._stores,function(e){e.beginUpdate(0,!0),e.endUpdate()}),t._resetStores=!1),t._runAfterUpdateCallbacks()))},_processOneDataMessage:function(e,t){var n=this;n["_process_"+e.msg](e,t)},_livedata_data:function(e){var t=this,n={};if(t._waitingForQuiescence()){if(t._messagesBufferedUntilQuiescence.push(e),"nosub"===e.msg&&delete t._subsBeingRevived[e.id],h.each(e.subs||[],function(e){delete t._subsBeingRevived[e]}),h.each(e.methods||[],function(e){delete t._methodsBlockingQuiescence[e]}),t._waitingForQuiescence())return;h.each(t._messagesBufferedUntilQuiescence,function(e){t._processOneDataMessage(e,n)}),t._messagesBufferedUntilQuiescence=[]}else t._processOneDataMessage(e,n);(t._resetStores||!h.isEmpty(n))&&(h.each(t._stores,function(e,i){e.beginUpdate(h.has(n,i)?n[i].length:0,t._resetStores)}),t._resetStores=!1,h.each(n,function(e,n){var i=t._stores[n];i?h.each(e,function(e){i.update(e)}):(h.has(t._updatesForUnknownStores,n)||(t._updatesForUnknownStores[n]=[]),Array.prototype.push.apply(t._updatesForUnknownStores[n],e))}),h.each(t._stores,function(e){e.endUpdate()})),t._runAfterUpdateCallbacks()},_runAfterUpdateCallbacks:function(){var e=this,t=e._afterUpdateCallbacks;e._afterUpdateCallbacks=[],h.each(t,function(e){e()})},_pushUpdate:function(e,t,n){h.has(e,t)||(e[t]=[]),e[t].push(n)},_getServerDoc:function(e,t){var n=this;if(!h.has(n._serverDocuments,e))return null;var i=n._serverDocuments[e];return i.get(t)||null},_process_added:function(e,t){var n=this,i=v._idParse(e.id),o=n._getServerDoc(e.collection,i);if(o){if(void 0!==o.document)throw new Error("Server sent add for existing id: "+e.id);o.document=e.fields||{},o.document._id=i}else n._pushUpdate(t,e.collection,e)},_process_changed:function(e,t){var n=this,i=n._getServerDoc(e.collection,v._idParse(e.id));if(i){if(void 0===i.document)throw new Error("Server sent changed for nonexisting id: "+e.id);v._applyChanges(i.document,e.fields)}else n._pushUpdate(t,e.collection,e)},_process_removed:function(e,t){var n=this,i=n._getServerDoc(e.collection,v._idParse(e.id));if(i){if(void 0===i.document)throw new Error("Server sent removed for nonexisting id:"+e.id);i.document=void 0}else n._pushUpdate(t,e.collection,{msg:"removed",collection:e.collection,id:e.id})},_process_updated:function(e,t){var n=this;h.each(e.methods,function(e){h.each(n._documentsWrittenByStub[e],function(i){var o=n._getServerDoc(i.collection,i.id);if(!o)throw new Error("Lost serverDoc for "+p.stringify(i));if(!o.writtenByStubs[e])throw new Error("Doc "+p.stringify(i)+" not written by  method "+e);delete o.writtenByStubs[e],h.isEmpty(o.writtenByStubs)&&(n._pushUpdate(t,i.collection,{msg:"replace",id:v._idStringify(i.id),replace:o.document}),h.each(o.flushCallbacks,function(e){e()}),n._serverDocuments[i.collection].remove(i.id))}),delete n._documentsWrittenByStub[e];var i=n._methodInvokers[e];if(!i)throw new Error("No callback invoker for method "+e);n._runWhenAllServerDocsAreFlushed(h.bind(i.dataVisible,i))})},_process_ready:function(e){var t=this;h.each(e.subs,function(e){t._runWhenAllServerDocsAreFlushed(function(){var n=t._subscriptions[e];n&&(n.ready||(n.readyCallback&&n.readyCallback(),n.ready=!0,n.readyDeps&&n.readyDeps.changed()))})})},_runWhenAllServerDocsAreFlushed:function(e){var t=this,n=function(){t._afterUpdateCallbacks.push(e)},i=0,o=function(){--i,0===i&&n()};h.each(t._serverDocuments,function(e){e.forEach(function(e){var n=h.any(e.writtenByStubs,function(e,n){var i=t._methodInvokers[n];return i&&i.sentMessage});n&&(++i,e.flushCallbacks.push(o))})}),0===i&&n()},_livedata_nosub:function(e){var t=this;if(t._livedata_data(e),h.has(t._subscriptions,e.id)){var n=t._subscriptions[e.id].errorCallback;delete t._subscriptions[e.id],n&&e.error&&n(new u.Error(e.error.error,e.error.reason,e.error.details))}},_process_nosub:function(){},_livedata_result:function(e){var t=this;if(h.isEmpty(t._outstandingMethodBlocks))return u._debug("Received method result but no methods outstanding"),void 0;for(var n,i=t._outstandingMethodBlocks[0].methods,o=0;o<i.length&&(n=i[o],n.methodId!==e.id);o++);return n?(i.splice(o,1),h.has(e,"error")?n.receiveResult(new u.Error(e.error.error,e.error.reason,e.error.details)):n.receiveResult(void 0,e.result),void 0):(u._debug("Can't match method response to original method call",e),void 0)},_outstandingMethodFinished:function(){var e=this;if(!e._anyMethodsAreOutstanding()){if(!h.isEmpty(e._outstandingMethodBlocks)){var t=e._outstandingMethodBlocks.shift();if(!h.isEmpty(t.methods))throw new Error("No methods outstanding but nonempty block: "+p.stringify(t));h.isEmpty(e._outstandingMethodBlocks)||e._sendOutstandingMethods()}e._maybeMigrate()}},_sendOutstandingMethods:function(){var e=this;h.isEmpty(e._outstandingMethodBlocks)||h.each(e._outstandingMethodBlocks[0].methods,function(e){e.sendMessage()})},_livedata_error:function(e){u._debug("Received error from server: ",e.reason),e.offendingMessage&&u._debug("For: ",e.offendingMessage)},_callOnReconnectAndSendAppropriateOutstandingMethods:function(){var e=this,t=e._outstandingMethodBlocks;if(e._outstandingMethodBlocks=[],e.onReconnect(),!h.isEmpty(t)){if(h.isEmpty(e._outstandingMethodBlocks))return e._outstandingMethodBlocks=t,e._sendOutstandingMethods(),void 0;h.last(e._outstandingMethodBlocks).wait||t[0].wait||(h.each(t[0].methods,function(t){h.last(e._outstandingMethodBlocks).methods.push(t),1===e._outstandingMethodBlocks.length&&t.sendMessage()}),t.shift()),h.each(t,function(t){e._outstandingMethodBlocks.push(t)})}},_readyToMigrate:function(){var e=this;return h.isEmpty(e._methodInvokers)},_maybeMigrate:function(){var e=this;e._retryMigrate&&e._readyToMigrate()&&(e._retryMigrate(),e._retryMigrate=null)}}),t.Connection=o,e.connect=function(e,t){var n=new o(e,t);return l.push(n),n},l=[],e._allSubscriptionsReady=function(){return h.all(l,function(e){return h.all(e._subscriptions,function(e){return e.ready})})}}.call(this),function(){if(u.refresh=function(){},u.isClient){var t="/";"undefined"!=typeof __meteor_runtime_config__&&__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL&&(t=__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL);var n=new m,i=function(e){if(u._debug(e),Package.reload){var t=Package.reload.Reload._migrationData("livedata")||{},i=t.DDPVersionNegotiationFailures||0;++i,Package.reload.Reload._onMigrate("livedata",function(){return[!0,{DDPVersionNegotiationFailures:i}]}),n.retryLater(i,function(){Package.reload.Reload._reload()})}};u.connection=e.connect(t,{onDDPVersionNegotiationFailure:i}),h.each(["subscribe","methods","call","apply","status","reconnect","disconnect"],function(e){u[e]=h.bind(u.connection[e],u.connection)})}else u.connection=null;u.default_connection=u.connection,u.connect=e.connect}.call(this),"undefined"==typeof Package&&(Package={}),Package.livedata={DDP:e,LivedataTest:t}}(),function(){{var e;Package.meteor.Meteor,Package.logging.Log,Package.underscore._,Package.livedata.DDP,Package.ejson.EJSON}"undefined"==typeof Package&&(Package={}),Package["follower-livedata"]={Follower:e}}(),function(){Package.meteor.Meteor,Package.logging.Log,Package.underscore._,Package.livedata.DDP,Package.ejson.EJSON,Package["follower-livedata"].Follower;"undefined"==typeof Package&&(Package={}),Package["application-configuration"]={}}(),function(){var e,t=Package.meteor.Meteor,n=Package.random.Random,i=Package.ejson.EJSON,o=(Package.json.JSON,Package.underscore._),r=Package.minimongo.LocalCollection,a=(Package.minimongo.Minimongo,Package.logging.Log,Package.livedata.DDP),s=(Package.deps.Deps,Package.check.check),c=Package.check.Match;(function(){e=function(){var e=this;e.noConnCollections={}};var t=function(e,t){return e in t||(t[e]=new r(e)),t[e]};o.extend(e.prototype,{open:function(e,n){var i=this;return e?n?(n._mongo_livedata_collections||(n._mongo_livedata_collections={}),t(e,n._mongo_livedata_collections)):t(e,i.noConnCollections):new r}}),e=new e}).call(this),function(){t.Collection=function(i,a){var s=this;if(!(s instanceof t.Collection))throw new Error('use "new" to construct a Meteor.Collection');if(i||null===i||(t._debug("Warning: creating anonymous collection. It will not be saved or synchronized over the network. (Pass null for the collection name to turn off this warning.)"),i=null),null!==i&&"string"!=typeof i)throw new Error("First argument to new Meteor.Collection must be a string or null");switch(a&&a.methods&&(a={connection:a}),a&&a.manager&&!a.connection&&(a.connection=a.manager),a=o.extend({connection:void 0,idGeneration:"STRING",transform:null,_driver:void 0,_preventAutopublish:!1},a),a.idGeneration){case"MONGO":s._makeNewID=function(){return new t.Collection.ObjectID};break;case"STRING":default:s._makeNewID=function(){return n.id()}}if(s._transform=r.wrapTransform(a.transform),s._connection=i&&null!==a.connection?a.connection?a.connection:t.isClient?t.connection:t.server:null,a._driver||(a._driver=i&&s._connection===t.server&&"undefined"!=typeof MongoInternals&&MongoInternals.defaultRemoteCollectionDriver?MongoInternals.defaultRemoteCollectionDriver():e),s._collection=a._driver.open(i,s._connection),s._name=i,s._connection&&s._connection.registerStore){var c=s._connection.registerStore(i,{beginUpdate:function(e,t){(e>1||t)&&s._collection.pauseObservers(),t&&s._collection.remove({})},update:function(e){var t=r._idParse(e.id),n=s._collection.findOne(t);if("replace"===e.msg){var i=e.replace;return i?n?s._collection.update(t,i):s._collection.insert(i):n&&s._collection.remove(t),void 0}if("added"===e.msg){if(n)throw new Error("Expected not to find a document already present for an add");s._collection.insert(o.extend({_id:t},e.fields))}else if("removed"===e.msg){if(!n)throw new Error("Expected to find a document already present for removed");s._collection.remove(t)}else{if("changed"!==e.msg)throw new Error("I don't know how to deal with this message");if(!n)throw new Error("Expected to find a document to change");if(!o.isEmpty(e.fields)){var a={};o.each(e.fields,function(e,t){void 0===e?(a.$unset||(a.$unset={}),a.$unset[t]=1):(a.$set||(a.$set={}),a.$set[t]=e)}),s._collection.update(t,a)}}},endUpdate:function(){s._collection.resumeObservers()},saveOriginals:function(){s._collection.saveOriginals()},retrieveOriginals:function(){return s._collection.retrieveOriginals()}});if(!c)throw new Error("There is already a collection named '"+i+"'")}s._defineMutationMethods(),Package.autopublish&&!a._preventAutopublish&&s._connection&&s._connection.publish&&s._connection.publish(null,function(){return s.find()},{is_auto:!0})},o.extend(t.Collection.prototype,{_getFindSelector:function(e){return 0==e.length?{}:e[0]},_getFindOptions:function(e){var t=this;return e.length<2?{transform:t._transform}:o.extend({transform:t._transform},e[1])},find:function(){var e=this,t=o.toArray(arguments);return e._collection.find(e._getFindSelector(t),e._getFindOptions(t))},findOne:function(){var e=this,t=o.toArray(arguments);return e._collection.findOne(e._getFindSelector(t),e._getFindOptions(t))}}),t.Collection._publishCursor=function(e,t,n){var i=e.observeChanges({added:function(e,i){t.added(n,e,i)},changed:function(e,i){t.changed(n,e,i)},removed:function(e){t.removed(n,e)}});t.onStop(function(){i.stop()})},t.Collection._rewriteSelector=function(e){if(r._selectorIsId(e)&&(e={_id:e}),!e||"_id"in e&&!e._id)return{_id:n.id()};var i={};return o.each(e,function(e,n){e instanceof RegExp?i[n]=l(e):e&&e.$regex instanceof RegExp?(i[n]=l(e.$regex),void 0!==e.$options&&(i[n].$options=e.$options)):i[n]=o.contains(["$or","$and","$nor"],n)?o.map(e,function(e){return t.Collection._rewriteSelector(e)}):e}),i};var l=function(e){s(e,RegExp);var t={$regex:e.source},n="";return e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),n&&(t.$options=n),t},u=function(e,n){if(!r._selectorIsIdPerhapsAsObject(e))throw new t.Error(403,"Not permitted. Untrusted code may only "+n+" documents by ID.")};o.each(["insert","update","remove"],function(e){t.Collection.prototype[e]=function(){var n,i,r,s=this,c=o.toArray(arguments);if(c.length&&c[c.length-1]instanceof Function&&(n=c.pop()),"insert"===e){if(!c.length)throw new Error("insert requires an argument");if(c[0]=o.extend({},c[0]),"_id"in c[0]){if(i=c[0]._id,!i||!("string"==typeof i||i instanceof t.Collection.ObjectID))throw new Error("Meteor requires document _id fields to be non-empty strings or ObjectIDs")}else i=c[0]._id=s._makeNewID()}else if(c[0]=t.Collection._rewriteSelector(c[0]),"update"===e){var l=c[2]=o.clone(c[2])||{};if(l&&"function"!=typeof l&&l.upsert)if(l.insertedId){if(!("string"==typeof l.insertedId||l.insertedId instanceof t.Collection.ObjectID))throw new Error("insertedId must be string or ObjectID")}else l.insertedId=s._makeNewID()}var d,f=function(t){return"insert"===e?i:t};if(n&&(d=function(e,t){n(e,!e&&f(t))}),s._connection&&s._connection!==t.server){var p=a._CurrentInvocation.get(),h=p&&p.isSimulation;!t.isClient||d||h||(d=function(n){n&&t._debug(e+" failed: "+(n.reason||n.stack))}),h||"insert"===e||u(c[0],e),r=f(s._connection.apply(s._prefix+e,c,d))}else{c.push(d);try{var g=s._collection[e].apply(s._collection,c);r=f(g)}catch(m){if(n)return n(m),null;throw m}}return r}}),t.Collection.prototype.upsert=function(e,t,n,i){var r=this;return i||"function"!=typeof n||(i=n,n={}),r.update(e,t,o.extend({},n,{_returnObject:!0,upsert:!0}),i)},t.Collection.prototype._ensureIndex=function(e,t){var n=this;if(!n._collection._ensureIndex)throw new Error("Can only call _ensureIndex on server collections");n._collection._ensureIndex(e,t)},t.Collection.prototype._dropIndex=function(e){var t=this;if(!t._collection._dropIndex)throw new Error("Can only call _dropIndex on server collections");t._collection._dropIndex(e)},t.Collection.prototype._dropCollection=function(){var e=this;if(!e._collection.dropCollection)throw new Error("Can only call _dropCollection on server collections");e._collection.dropCollection()},t.Collection.prototype._createCappedCollection=function(e){var t=this;if(!t._collection._createCappedCollection)throw new Error("Can only call _createCappedCollection on server collections");t._collection._createCappedCollection(e)},t.Collection.ObjectID=r._ObjectID,function(){var e=function(e,t){var n=["insert","update","remove","fetch","transform"];o.each(o.keys(t),function(t){if(!o.contains(n,t))throw new Error(e+": Invalid key: "+t)});var i=this;if(i._restricted=!0,o.each(["insert","update","remove"],function(n){if(t[n]){if(!(t[n]instanceof Function))throw new Error(e+": Value for `"+n+"` must be a function");t[n].transform=void 0===t.transform?i._transform:r.wrapTransform(t.transform),i._validators[n][e].push(t[n])}}),t.update||t.remove||t.fetch){if(t.fetch&&!(t.fetch instanceof Array))throw new Error(e+": Value for `fetch` must be an array");i._updateFetch(t.fetch)}};t.Collection.prototype.allow=function(t){e.call(this,"allow",t)},t.Collection.prototype.deny=function(t){e.call(this,"deny",t)}}(),t.Collection.prototype._defineMutationMethods=function(){var e=this;if(e._restricted=!1,e._insecure=void 0,e._validators={insert:{allow:[],deny:[]},update:{allow:[],deny:[]},remove:{allow:[],deny:[]},upsert:{allow:[],deny:[]},fetch:[],fetchAllFields:!1},e._name&&(e._prefix="/"+e._name+"/",e._connection)){var n={};o.each(["insert","update","remove"],function(i){n[e._prefix+i]=function(){s(arguments,[c.Any]);try{if(this.isSimulation)return e._collection[i].apply(e._collection,o.toArray(arguments));if("insert"!==i&&u(arguments[0],i),e._restricted){if(0===e._validators[i].allow.length)throw new t.Error(403,"Access denied. No allow validators set on restricted collection for method '"+i+"'.");var n="_validated"+i.charAt(0).toUpperCase()+i.slice(1),r=[this.userId].concat(o.toArray(arguments));return e[n].apply(e,r)}if(e._isInsecure())return e._collection[i].apply(e._collection,o.toArray(arguments));throw new t.Error(403,"Access denied")}catch(a){throw"MongoError"===a.name||"MinimongoError"===a.name?new t.Error(409,a.toString()):a}}}),(t.isClient||e._connection===t.server)&&e._connection.methods(n)}},t.Collection.prototype._updateFetch=function(e){var t=this;t._validators.fetchAllFields||(e?t._validators.fetch=o.union(t._validators.fetch,e):(t._validators.fetchAllFields=!0,t._validators.fetch=null))},t.Collection.prototype._isInsecure=function(){var e=this;return void 0===e._insecure?!!Package.insecure:e._insecure};var d=function(e,t){var n=t;return e.transform&&(n=e.transform(i.clone(t))),n};t.Collection.prototype._validatedInsert=function(e,n){var i=this;if(o.any(i._validators.insert.deny,function(t){return t(e,d(t,n))}))throw new t.Error(403,"Access denied");if(o.all(i._validators.insert.allow,function(t){return!t(e,d(t,n))}))throw new t.Error(403,"Access denied");i._collection.insert.call(i._collection,n)};var f=function(e,t){return e.transform?e.transform(t):t};t.Collection.prototype._validatedUpdate=function(e,n,i,a){var s=this;if(a=a||{},!r._selectorIsIdPerhapsAsObject(n))throw new Error("validated update should be of a single ID");if(a.upsert)throw new t.Error(403,"Access denied. Upserts not allowed in a restricted collection.");var c=[];o.each(i,function(e,n){if("$"!==n.charAt(0))throw new t.Error(403,"Access denied. In a restricted collection you can only update documents, not replace them. Use a Mongo update operator, such as '$set'.");if(!o.has(p,n))throw new t.Error(403,"Access denied. Operator "+n+" not allowed in a restricted collection.");o.each(o.keys(e),function(e){-1!==e.indexOf(".")&&(e=e.substring(0,e.indexOf("."))),o.contains(c,e)||c.push(e)})});var l={transform:null};s._validators.fetchAllFields||(l.fields={},o.each(s._validators.fetch,function(e){l.fields[e]=1}));var u=s._collection.findOne(n,l);if(!u)return 0;var d;if(o.any(s._validators.update.deny,function(t){return d||(d=f(t,u)),t(e,d,c,i)}))throw new t.Error(403,"Access denied");if(o.all(s._validators.update.allow,function(t){return d||(d=f(t,u)),!t(e,d,c,i)
}))throw new t.Error(403,"Access denied");return s._collection.update.call(s._collection,n,i,a)};var p={$inc:1,$set:1,$unset:1,$addToSet:1,$pop:1,$pullAll:1,$pull:1,$pushAll:1,$push:1,$bit:1};t.Collection.prototype._validatedRemove=function(e,n){var i=this,r={transform:null};i._validators.fetchAllFields||(r.fields={},o.each(i._validators.fetch,function(e){r.fields[e]=1}));var a=i._collection.findOne(n,r);if(!a)return 0;if(o.any(i._validators.remove.deny,function(t){return t(e,f(t,a))}))throw new t.Error(403,"Access denied");if(o.all(i._validators.remove.allow,function(t){return!t(e,f(t,a))}))throw new t.Error(403,"Access denied");return i._collection.remove.call(i._collection,n)}}.call(this),"undefined"==typeof Package&&(Package={}),Package["mongo-livedata"]={}}(),function(){var e,t=Package.meteor.Meteor;(function(){"undefined"==typeof e&&(e={}),e.configurations=new t.Collection("meteor_accounts_loginServiceConfiguration",{_preventAutopublish:!0}),e.ConfigError=function(e){this.message=e},e.ConfigError.prototype=new Error,e.ConfigError.prototype.name="ServiceConfiguration.ConfigError"}).call(this),"undefined"==typeof Package&&(Package={}),Package["service-configuration"]={ServiceConfiguration:e}}(),function(){var e=Package.meteor.Meteor,t=Package.random.Random;(function(){if(window.localStorage){var n,i="_localstorage_test_"+t.id();try{window.localStorage.setItem(i,i),n=window.localStorage.getItem(i),window.localStorage.removeItem(i)}catch(o){}i===n&&(e._localStorage={getItem:function(e){return window.localStorage.getItem(e)},setItem:function(e,t){window.localStorage.setItem(e,t)},removeItem:function(e){window.localStorage.removeItem(e)}})}e._localStorage||(e._debug("You are running a browser with no localStorage or userData support. Logging in from one tab will not cause another tab to be logged in."),e._localStorage={_data:{},setItem:function(e,t){this._data[e]=t},removeItem:function(e){delete this._data[e]},getItem:function(e){var t=this._data[e];return void 0===t?null:t}})}).call(this),"undefined"==typeof Package&&(Package={}),Package.localstorage={}}(),function(){Package.meteor.Meteor;(function(){!function(e,t){function n(e){var t=e.length,n=ut.type(e);return ut.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e){var t=xt[e]={};return ut.each(e.match(ft)||[],function(e,n){t[n]=!0}),t}function o(e,n,i,o){if(ut.acceptData(e)){var r,a,s=ut.expando,c=e.nodeType,l=c?ut.cache:e,u=c?e[s]:e[s]&&s;if(u&&l[u]&&(o||l[u].data)||i!==t||"string"!=typeof n)return u||(u=c?e[s]=tt.pop()||ut.guid++:s),l[u]||(l[u]=c?{}:{toJSON:ut.noop}),("object"==typeof n||"function"==typeof n)&&(o?l[u]=ut.extend(l[u],n):l[u].data=ut.extend(l[u].data,n)),a=l[u],o||(a.data||(a.data={}),a=a.data),i!==t&&(a[ut.camelCase(n)]=i),"string"==typeof n?(r=a[n],null==r&&(r=a[ut.camelCase(n)])):r=a,r}}function r(e,t,n){if(ut.acceptData(e)){var i,o,r=e.nodeType,a=r?ut.cache:e,c=r?e[ut.expando]:ut.expando;if(a[c]){if(t&&(i=n?a[c]:a[c].data)){ut.isArray(t)?t=t.concat(ut.map(t,ut.camelCase)):t in i?t=[t]:(t=ut.camelCase(t),t=t in i?[t]:t.split(" ")),o=t.length;for(;o--;)delete i[t[o]];if(n?!s(i):!ut.isEmptyObject(i))return}(n||(delete a[c].data,s(a[c])))&&(r?ut.cleanData([e],!0):ut.support.deleteExpando||a!=a.window?delete a[c]:a[c]=null)}}}function a(e,n,i){if(i===t&&1===e.nodeType){var o="data-"+n.replace(Ct,"-$1").toLowerCase();if(i=e.getAttribute(o),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:Et.test(i)?ut.parseJSON(i):i}catch(r){}ut.data(e,n,i)}else i=t}return i}function s(e){var t;for(t in e)if(("data"!==t||!ut.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function c(){return!0}function l(){return!1}function u(){try{return X.activeElement}catch(e){}}function d(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function f(e,t,n){if(ut.isFunction(t))return ut.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return ut.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(Ht.test(t))return ut.filter(t,e,n);t=ut.filter(t,e)}return ut.grep(e,function(e){return ut.inArray(e,t)>=0!==n})}function p(e){var t=Wt.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function h(e,t){return ut.nodeName(e,"table")&&ut.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function g(e){return e.type=(null!==ut.find.attr(e,"type"))+"/"+e.type,e}function m(e){var t=rn.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function v(e,t){for(var n,i=0;null!=(n=e[i]);i++)ut._data(n,"globalEval",!t||ut._data(t[i],"globalEval"))}function y(e,t){if(1===t.nodeType&&ut.hasData(e)){var n,i,o,r=ut._data(e),a=ut._data(t,r),s=r.events;if(s){delete a.handle,a.events={};for(n in s)for(i=0,o=s[n].length;o>i;i++)ut.event.add(t,n,s[n][i])}a.data&&(a.data=ut.extend({},a.data))}}function b(e,t){var n,i,o;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!ut.support.noCloneEvent&&t[ut.expando]){o=ut._data(t);for(i in o.events)ut.removeEvent(t,i,o.handle);t.removeAttribute(ut.expando)}"script"===n&&t.text!==e.text?(g(t).text=e.text,m(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),ut.support.html5Clone&&e.innerHTML&&!ut.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&tn.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function _(e,n){var i,o,r=0,a=typeof e.getElementsByTagName!==Q?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==Q?e.querySelectorAll(n||"*"):t;if(!a)for(a=[],i=e.childNodes||e;null!=(o=i[r]);r++)!n||ut.nodeName(o,n)?a.push(o):ut.merge(a,_(o,n));return n===t||n&&ut.nodeName(e,n)?ut.merge([e],a):a}function w(e){tn.test(e.type)&&(e.defaultChecked=e.checked)}function k(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,o=xn.length;o--;)if(t=xn[o]+n,t in e)return t;return i}function T(e,t){return e=t||e,"none"===ut.css(e,"display")||!ut.contains(e.ownerDocument,e)}function S(e,t){for(var n,i,o,r=[],a=0,s=e.length;s>a;a++)i=e[a],i.style&&(r[a]=ut._data(i,"olddisplay"),n=i.style.display,t?(r[a]||"none"!==n||(i.style.display=""),""===i.style.display&&T(i)&&(r[a]=ut._data(i,"olddisplay",P(i.nodeName)))):r[a]||(o=T(i),(n&&"none"!==n||!o)&&ut._data(i,"olddisplay",o?n:ut.css(i,"display"))));for(a=0;s>a;a++)i=e[a],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?r[a]||"":"none"));return e}function x(e,t,n){var i=yn.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function E(e,t,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===t?1:0,a=0;4>r;r+=2)"margin"===n&&(a+=ut.css(e,n+Sn[r],!0,o)),i?("content"===n&&(a-=ut.css(e,"padding"+Sn[r],!0,o)),"margin"!==n&&(a-=ut.css(e,"border"+Sn[r]+"Width",!0,o))):(a+=ut.css(e,"padding"+Sn[r],!0,o),"padding"!==n&&(a+=ut.css(e,"border"+Sn[r]+"Width",!0,o)));return a}function C(e,t,n){var i=!0,o="width"===t?e.offsetWidth:e.offsetHeight,r=dn(e),a=ut.support.boxSizing&&"border-box"===ut.css(e,"boxSizing",!1,r);if(0>=o||null==o){if(o=fn(e,t,r),(0>o||null==o)&&(o=e.style[t]),bn.test(o))return o;i=a&&(ut.support.boxSizingReliable||o===e.style[t]),o=parseFloat(o)||0}return o+E(e,t,n||(a?"border":"content"),i,r)+"px"}function P(e){var t=X,n=wn[e];return n||(n=D(e,t),"none"!==n&&n||(un=(un||ut("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(un[0].contentWindow||un[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=D(e,t),un.detach()),wn[e]=n),n}function D(e,t){var n=ut(t.createElement(e)).appendTo(t.body),i=ut.css(n[0],"display");return n.remove(),i}function O(e,t,n,i){var o;if(ut.isArray(t))ut.each(t,function(t,o){n||Cn.test(e)?i(e,o):O(e+"["+("object"==typeof o?t:"")+"]",o,n,i)});else if(n||"object"!==ut.type(t))i(e,t);else for(o in t)O(e+"["+o+"]",t[o],n,i)}function M(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,r=t.toLowerCase().match(ft)||[];if(ut.isFunction(n))for(;i=r[o++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function I(e,t,n,i){function o(s){var c;return r[s]=!0,ut.each(e[s]||[],function(e,s){var l=s(t,n,i);return"string"!=typeof l||a||r[l]?a?!(c=l):void 0:(t.dataTypes.unshift(l),o(l),!1)}),c}var r={},a=e===qn;return o(t.dataTypes[0])||!r["*"]&&o("*")}function A(e,n){var i,o,r=ut.ajaxSettings.flatOptions||{};for(o in n)n[o]!==t&&((r[o]?e:i||(i={}))[o]=n[o]);return i&&ut.extend(!0,e,i),e}function N(e,n,i){for(var o,r,a,s,c=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),r===t&&(r=e.mimeType||n.getResponseHeader("Content-Type"));if(r)for(s in c)if(c[s]&&c[s].test(r)){l.unshift(s);break}if(l[0]in i)a=l[0];else{for(s in i){if(!l[0]||e.converters[s+" "+l[0]]){a=s;break}o||(o=s)}a=a||o}return a?(a!==l[0]&&l.unshift(a),i[a]):void 0}function $(e,t,n,i){var o,r,a,s,c,l={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(r=u.shift();r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!c&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=r,r=u.shift())if("*"===r)r=c;else if("*"!==c&&c!==r){if(a=l[c+" "+r]||l["* "+r],!a)for(o in l)if(s=o.split(" "),s[1]===r&&(a=l[c+" "+s[0]]||l["* "+s[0]])){a===!0?a=l[o]:l[o]!==!0&&(r=s[0],u.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+c+" to "+r}}}return{state:"success",data:t}}function F(){try{return new e.XMLHttpRequest}catch(t){}}function B(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function L(){return setTimeout(function(){Zn=t}),Zn=ut.now()}function j(e,t,n){for(var i,o=(ri[t]||[]).concat(ri["*"]),r=0,a=o.length;a>r;r++)if(i=o[r].call(n,t,e))return i}function R(e,t,n){var i,o,r=0,a=oi.length,s=ut.Deferred().always(function(){delete c.elem}),c=function(){if(o)return!1;for(var t=Zn||L(),n=Math.max(0,l.startTime+l.duration-t),i=n/l.duration||0,r=1-i,a=0,c=l.tweens.length;c>a;a++)l.tweens[a].run(r);return s.notifyWith(e,[l,r,n]),1>r&&c?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:ut.extend({},t),opts:ut.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Zn||L(),duration:n.duration,tweens:[],createTween:function(t,n){var i=ut.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var n=0,i=t?l.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),u=l.props;for(U(u,l.opts.specialEasing);a>r;r++)if(i=oi[r].call(l,e,u,l.opts))return i;return ut.map(u,j,l),ut.isFunction(l.opts.start)&&l.opts.start.call(e,l),ut.fx.timer(ut.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function U(e,t){var n,i,o,r,a;for(n in e)if(i=ut.camelCase(n),o=t[i],r=e[n],ut.isArray(r)&&(o=r[1],r=e[n]=r[0]),n!==i&&(e[i]=r,delete e[n]),a=ut.cssHooks[i],a&&"expand"in a){r=a.expand(r),delete e[i];for(n in r)n in e||(e[n]=r[n],t[n]=o)}else t[i]=o}function H(e,t,n){var i,o,r,a,s,c,l=this,u={},d=e.style,f=e.nodeType&&T(e),p=ut._data(e,"fxshow");n.queue||(s=ut._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,c=s.empty.fire,s.empty.fire=function(){s.unqueued||c()}),s.unqueued++,l.always(function(){l.always(function(){s.unqueued--,ut.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===ut.css(e,"display")&&"none"===ut.css(e,"float")&&(ut.support.inlineBlockNeedsLayout&&"inline"!==P(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",ut.support.shrinkWrapBlocks||l.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in t)if(o=t[i],ti.exec(o)){if(delete t[i],r=r||"toggle"===o,o===(f?"hide":"show"))continue;u[i]=p&&p[i]||ut.style(e,i)}if(!ut.isEmptyObject(u)){p?"hidden"in p&&(f=p.hidden):p=ut._data(e,"fxshow",{}),r&&(p.hidden=!f),f?ut(e).show():l.done(function(){ut(e).hide()}),l.done(function(){var t;ut._removeData(e,"fxshow");for(t in u)ut.style(e,t,u[t])});for(i in u)a=j(f?p[i]:0,i,l),i in p||(p[i]=a.start,f&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function z(e,t,n,i,o){return new z.prototype.init(e,t,n,i,o)}function q(e,t){var n,i={height:e},o=0;for(t=t?1:0;4>o;o+=2-t)n=Sn[o],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function V(e){return ut.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var W,Y,Q=typeof t,J=e.location,X=e.document,G=X.documentElement,K=e.jQuery,Z=e.$,et={},tt=[],nt="1.10.2",it=tt.concat,ot=tt.push,rt=tt.slice,at=tt.indexOf,st=et.toString,ct=et.hasOwnProperty,lt=nt.trim,ut=function(e,t){return new ut.fn.init(e,t,Y)},dt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ft=/\S+/g,pt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ht=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,gt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,mt=/^[\],:{}\s]*$/,vt=/(?:^|:|,)(?:\s*\[)+/g,yt=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,bt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,_t=/^-ms-/,wt=/-([\da-z])/gi,kt=function(e,t){return t.toUpperCase()},Tt=function(e){(X.addEventListener||"load"===e.type||"complete"===X.readyState)&&(St(),ut.ready())},St=function(){X.addEventListener?(X.removeEventListener("DOMContentLoaded",Tt,!1),e.removeEventListener("load",Tt,!1)):(X.detachEvent("onreadystatechange",Tt),e.detachEvent("onload",Tt))};ut.fn=ut.prototype={jquery:nt,constructor:ut,init:function(e,n,i){var o,r;if(!e)return this;if("string"==typeof e){if(o="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:ht.exec(e),!o||!o[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);if(o[1]){if(n=n instanceof ut?n[0]:n,ut.merge(this,ut.parseHTML(o[1],n&&n.nodeType?n.ownerDocument||n:X,!0)),gt.test(o[1])&&ut.isPlainObject(n))for(o in n)ut.isFunction(this[o])?this[o](n[o]):this.attr(o,n[o]);return this}if(r=X.getElementById(o[2]),r&&r.parentNode){if(r.id!==o[2])return i.find(e);this.length=1,this[0]=r}return this.context=X,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ut.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),ut.makeArray(e,this))},selector:"",length:0,toArray:function(){return rt.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=ut.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return ut.each(this,e,t)},ready:function(e){return ut.ready.promise().done(e),this},slice:function(){return this.pushStack(rt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(ut.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:ot,sort:[].sort,splice:[].splice},ut.fn.init.prototype=ut.fn,ut.extend=ut.fn.extend=function(){var e,n,i,o,r,a,s=arguments[0]||{},c=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[1]||{},c=2),"object"==typeof s||ut.isFunction(s)||(s={}),l===c&&(s=this,--c);l>c;c++)if(null!=(r=arguments[c]))for(o in r)e=s[o],i=r[o],s!==i&&(u&&i&&(ut.isPlainObject(i)||(n=ut.isArray(i)))?(n?(n=!1,a=e&&ut.isArray(e)?e:[]):a=e&&ut.isPlainObject(e)?e:{},s[o]=ut.extend(u,a,i)):i!==t&&(s[o]=i));return s},ut.extend({expando:"jQuery"+(nt+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===ut&&(e.$=Z),t&&e.jQuery===ut&&(e.jQuery=K),ut},isReady:!1,readyWait:1,holdReady:function(e){e?ut.readyWait++:ut.ready(!0)},ready:function(e){if(e===!0?!--ut.readyWait:!ut.isReady){if(!X.body)return setTimeout(ut.ready);ut.isReady=!0,e!==!0&&--ut.readyWait>0||(W.resolveWith(X,[ut]),ut.fn.trigger&&ut(X).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===ut.type(e)},isArray:Array.isArray||function(e){return"array"===ut.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?et[st.call(e)]||"object":typeof e},isPlainObject:function(e){var n;if(!e||"object"!==ut.type(e)||e.nodeType||ut.isWindow(e))return!1;try{if(e.constructor&&!ct.call(e,"constructor")&&!ct.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}if(ut.support.ownLast)for(n in e)return ct.call(e,n);for(n in e);return n===t||ct.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||X;var i=gt.exec(e),o=!n&&[];return i?[t.createElement(i[1])]:(i=ut.buildFragment([e],t,o),o&&ut(o).remove(),ut.merge([],i.childNodes))},parseJSON:function(t){return e.JSON&&e.JSON.parse?e.JSON.parse(t):null===t?t:"string"==typeof t&&(t=ut.trim(t),t&&mt.test(t.replace(yt,"@").replace(bt,"]").replace(vt,"")))?new Function("return "+t)():(ut.error("Invalid JSON: "+t),void 0)},parseXML:function(n){var i,o;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(o=new DOMParser,i=o.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(r){i=t}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||ut.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(t){t&&ut.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(_t,"ms-").replace(wt,kt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var o,r=0,a=e.length,s=n(e);if(i){if(s)for(;a>r&&(o=t.apply(e[r],i),o!==!1);r++);else for(r in e)if(o=t.apply(e[r],i),o===!1)break}else if(s)for(;a>r&&(o=t.call(e[r],r,e[r]),o!==!1);r++);else for(r in e)if(o=t.call(e[r],r,e[r]),o===!1)break;return e},trim:lt&&!lt.call("ï»¿Â ")?function(e){return null==e?"":lt.call(e)}:function(e){return null==e?"":(e+"").replace(pt,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?ut.merge(i,"string"==typeof e?[e]:e):ot.call(i,e)),i},inArray:function(e,t,n){var i;if(t){if(at)return at.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var i=n.length,o=e.length,r=0;if("number"==typeof i)for(;i>r;r++)e[o++]=n[r];else for(;n[r]!==t;)e[o++]=n[r++];return e.length=o,e},grep:function(e,t,n){var i,o=[],r=0,a=e.length;for(n=!!n;a>r;r++)i=!!t(e[r],r),n!==i&&o.push(e[r]);return o},map:function(e,t,i){var o,r=0,a=e.length,s=n(e),c=[];if(s)for(;a>r;r++)o=t(e[r],r,i),null!=o&&(c[c.length]=o);else for(r in e)o=t(e[r],r,i),null!=o&&(c[c.length]=o);return it.apply([],c)},guid:1,proxy:function(e,n){var i,o,r;return"string"==typeof n&&(r=e[n],n=e,e=r),ut.isFunction(e)?(i=rt.call(arguments,2),o=function(){return e.apply(n||this,i.concat(rt.call(arguments)))},o.guid=e.guid=e.guid||ut.guid++,o):t},access:function(e,n,i,o,r,a,s){var c=0,l=e.length,u=null==i;if("object"===ut.type(i)){r=!0;for(c in i)ut.access(e,n,c,i[c],!0,a,s)}else if(o!==t&&(r=!0,ut.isFunction(o)||(s=!0),u&&(s?(n.call(e,o),n=null):(u=n,n=function(e,t,n){return u.call(ut(e),n)})),n))for(;l>c;c++)n(e[c],i,s?o:o.call(e[c],c,n(e[c],i)));return r?e:u?n.call(e):l?n(e[0],i):a},now:function(){return(new Date).getTime()},swap:function(e,t,n,i){var o,r,a={};for(r in t)a[r]=e.style[r],e.style[r]=t[r];o=n.apply(e,i||[]);for(r in t)e.style[r]=a[r];return o}}),ut.ready.promise=function(t){if(!W)if(W=ut.Deferred(),"complete"===X.readyState)setTimeout(ut.ready);else if(X.addEventListener)X.addEventListener("DOMContentLoaded",Tt,!1),e.addEventListener("load",Tt,!1);else{X.attachEvent("onreadystatechange",Tt),e.attachEvent("onload",Tt);var n=!1;try{n=null==e.frameElement&&X.documentElement}catch(i){}n&&n.doScroll&&!function o(){if(!ut.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}St(),ut.ready()}}()}return W.promise(t)},ut.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){et["[object "+t+"]"]=t.toLowerCase()}),Y=ut(X),function(e,t){function n(e,t,n,i){var o,r,a,s,c,l,u,d,h,g;if((t?t.ownerDocument||t:R)!==I&&M(t),t=t||I,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(N&&!i){if(o=bt.exec(e))if(a=o[1]){if(9===s){if(r=t.getElementById(a),!r||!r.parentNode)return n;if(r.id===a)return n.push(r),n}else if(t.ownerDocument&&(r=t.ownerDocument.getElementById(a))&&L(t,r)&&r.id===a)return n.push(r),n}else{if(o[2])return et.apply(n,t.getElementsByTagName(e)),n;if((a=o[3])&&T.getElementsByClassName&&t.getElementsByClassName)return et.apply(n,t.getElementsByClassName(a)),n}if(T.qsa&&(!$||!$.test(e))){if(d=u=j,h=t,g=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=f(e),(u=t.getAttribute("id"))?d=u.replace(kt,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",c=l.length;c--;)l[c]=d+p(l[c]);h=pt.test(e)&&t.parentNode||t,g=l.join(",")}if(g)try{return et.apply(n,h.querySelectorAll(g)),n}catch(m){}finally{u||t.removeAttribute("id")}}}return w(e.replace(lt,"$1"),t,n,i)}function i(){function e(n,i){return t.push(n+=" ")>x.cacheLength&&delete e[t.shift()],e[n]=i}var t=[];return e}function o(e){return e[j]=!0,e}function r(e){var t=I.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t){for(var n=e.split("|"),i=e.length;i--;)x.attrHandle[n[i]]=t}function s(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||J)-(~e.sourceIndex||J);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function c(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return o(function(t){return t=+t,o(function(n,i){for(var o,r=e([],n.length,t),a=r.length;a--;)n[o=r[a]]&&(n[o]=!(i[o]=n[o]))})})}function d(){}function f(e,t){var i,o,r,a,s,c,l,u=q[e+" "];if(u)return t?0:u.slice(0);for(s=e,c=[],l=x.preFilter;s;){(!i||(o=dt.exec(s)))&&(o&&(s=s.slice(o[0].length)||s),c.push(r=[])),i=!1,(o=ft.exec(s))&&(i=o.shift(),r.push({value:i,type:o[0].replace(lt," ")}),s=s.slice(i.length));for(a in x.filter)!(o=vt[a].exec(s))||l[a]&&!(o=l[a](o))||(i=o.shift(),r.push({value:i,type:a,matches:o}),s=s.slice(i.length));if(!i)break}return t?s.length:s?n.error(e):q(e,c).slice(0)}function p(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function h(e,t,n){var i=t.dir,o=n&&"parentNode"===i,r=H++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,a){var s,c,l,u=U+" "+r;if(a){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||o)if(l=t[j]||(t[j]={}),(c=l[i])&&c[0]===u){if((s=c[1])===!0||s===S)return s===!0}else if(c=l[i]=[u],c[1]=e(t,n,a)||S,c[1]===!0)return!0}}function g(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function m(e,t,n,i,o){for(var r,a=[],s=0,c=e.length,l=null!=t;c>s;s++)(r=e[s])&&(!n||n(r,i,o))&&(a.push(r),l&&t.push(s));return a}function v(e,t,n,i,r,a){return i&&!i[j]&&(i=v(i)),r&&!r[j]&&(r=v(r,a)),o(function(o,a,s,c){var l,u,d,f=[],p=[],h=a.length,g=o||_(t||"*",s.nodeType?[s]:s,[]),v=!e||!o&&t?g:m(g,f,e,s,c),y=n?r||(o?e:h||i)?[]:a:v;if(n&&n(v,y,s,c),i)for(l=m(y,p),i(l,[],s,c),u=l.length;u--;)(d=l[u])&&(y[p[u]]=!(v[p[u]]=d));if(o){if(r||e){if(r){for(l=[],u=y.length;u--;)(d=y[u])&&l.push(v[u]=d);r(null,y=[],l,c)}for(u=y.length;u--;)(d=y[u])&&(l=r?nt.call(o,d):f[u])>-1&&(o[l]=!(a[l]=d))}}else y=m(y===a?y.splice(h,y.length):y),r?r(null,a,y,c):et.apply(a,y)})}function y(e){for(var t,n,i,o=e.length,r=x.relative[e[0].type],a=r||x.relative[" "],s=r?1:0,c=h(function(e){return e===t},a,!0),l=h(function(e){return nt.call(t,e)>-1},a,!0),u=[function(e,n,i){return!r&&(i||n!==D)||((t=n).nodeType?c(e,n,i):l(e,n,i))}];o>s;s++)if(n=x.relative[e[s].type])u=[h(g(u),n)];else{if(n=x.filter[e[s].type].apply(null,e[s].matches),n[j]){for(i=++s;o>i&&!x.relative[e[i].type];i++);return v(s>1&&g(u),s>1&&p(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(lt,"$1"),n,i>s&&y(e.slice(s,i)),o>i&&y(e=e.slice(i)),o>i&&p(e))}u.push(n)}return g(u)}function b(e,t){var i=0,r=t.length>0,a=e.length>0,s=function(o,s,c,l,u){var d,f,p,h=[],g=0,v="0",y=o&&[],b=null!=u,_=D,w=o||a&&x.find.TAG("*",u&&s.parentNode||s),k=U+=null==_?1:Math.random()||.1;for(b&&(D=s!==I&&s,S=i);null!=(d=w[v]);v++){if(a&&d){for(f=0;p=e[f++];)if(p(d,s,c)){l.push(d);break}b&&(U=k,S=++i)}r&&((d=!p&&d)&&g--,o&&y.push(d))}if(g+=v,r&&v!==g){for(f=0;p=t[f++];)p(y,h,s,c);if(o){if(g>0)for(;v--;)y[v]||h[v]||(h[v]=K.call(l));h=m(h)}et.apply(l,h),b&&!o&&h.length>0&&g+t.length>1&&n.uniqueSort(l)}return b&&(U=k,D=_),y};return r?o(s):s}function _(e,t,i){for(var o=0,r=t.length;r>o;o++)n(e,t[o],i);return i}function w(e,t,n,i){var o,r,a,s,c,l=f(e);if(!i&&1===l.length){if(r=l[0]=l[0].slice(0),r.length>2&&"ID"===(a=r[0]).type&&T.getById&&9===t.nodeType&&N&&x.relative[r[1].type]){if(t=(x.find.ID(a.matches[0].replace(Tt,St),t)||[])[0],!t)return n;e=e.slice(r.shift().value.length)}for(o=vt.needsContext.test(e)?0:r.length;o--&&(a=r[o],!x.relative[s=a.type]);)if((c=x.find[s])&&(i=c(a.matches[0].replace(Tt,St),pt.test(r[0].type)&&t.parentNode||t))){if(r.splice(o,1),e=i.length&&p(r),!e)return et.apply(n,i),n;break}}return P(e,l)(i,t,!N,n,pt.test(e)),n}var k,T,S,x,E,C,P,D,O,M,I,A,N,$,F,B,L,j="sizzle"+-new Date,R=e.document,U=0,H=0,z=i(),q=i(),V=i(),W=!1,Y=function(e,t){return e===t?(W=!0,0):0},Q=typeof t,J=1<<31,X={}.hasOwnProperty,G=[],K=G.pop,Z=G.push,et=G.push,tt=G.slice,nt=G.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},it="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ot="[\\x20\\t\\r\\n\\f]",rt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",at=rt.replace("w","w#"),st="\\["+ot+"*("+rt+")"+ot+"*(?:([*^$|!~]?=)"+ot+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+at+")|)|)"+ot+"*\\]",ct=":("+rt+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+st.replace(3,8)+")*)|.*)\\)|)",lt=new RegExp("^"+ot+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ot+"+$","g"),dt=new RegExp("^"+ot+"*,"+ot+"*"),ft=new RegExp("^"+ot+"*([>+~]|"+ot+")"+ot+"*"),pt=new RegExp(ot+"*[+~]"),ht=new RegExp("="+ot+"*([^\\]'\"]*)"+ot+"*\\]","g"),gt=new RegExp(ct),mt=new RegExp("^"+at+"$"),vt={ID:new RegExp("^#("+rt+")"),CLASS:new RegExp("^\\.("+rt+")"),TAG:new RegExp("^("+rt.replace("w","w*")+")"),ATTR:new RegExp("^"+st),PSEUDO:new RegExp("^"+ct),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ot+"*(even|odd|(([+-]|)(\\d*)n|)"+ot+"*(?:([+-]|)"+ot+"*(\\d+)|))"+ot+"*\\)|)","i"),bool:new RegExp("^(?:"+it+")$","i"),needsContext:new RegExp("^"+ot+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ot+"*((?:-\\d)?\\d*)"+ot+"*\\)|)(?=[^-]|$)","i")},yt=/^[^{]+\{\s*\[native \w/,bt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_t=/^(?:input|select|textarea|button)$/i,wt=/^h\d$/i,kt=/'|\\/g,Tt=new RegExp("\\\\([\\da-f]{1,6}"+ot+"?|("+ot+")|.)","ig"),St=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{et.apply(G=tt.call(R.childNodes),R.childNodes),G[R.childNodes.length].nodeType}catch(xt){et={apply:G.length?function(e,t){Z.apply(e,tt.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}C=n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},T=n.support={},M=n.setDocument=function(e){var t=e?e.ownerDocument||e:R,n=t.defaultView;return t!==I&&9===t.nodeType&&t.documentElement?(I=t,A=t.documentElement,N=!C(t),n&&n.attachEvent&&n!==n.top&&n.attachEvent("onbeforeunload",function(){M()}),T.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),T.getElementsByTagName=r(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),T.getElementsByClassName=r(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),T.getById=r(function(e){return A.appendChild(e).id=j,!t.getElementsByName||!t.getElementsByName(j).length}),T.getById?(x.find.ID=function(e,t){if(typeof t.getElementById!==Q&&N){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},x.filter.ID=function(e){var t=e.replace(Tt,St);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(Tt,St);return function(e){var n=typeof e.getAttributeNode!==Q&&e.getAttributeNode("id");return n&&n.value===t}}),x.find.TAG=T.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==Q?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},x.find.CLASS=T.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==Q&&N?t.getElementsByClassName(e):void 0},F=[],$=[],(T.qsa=yt.test(t.querySelectorAll))&&(r(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||$.push("\\["+ot+"*(?:value|"+it+")"),e.querySelectorAll(":checked").length||$.push(":checked")}),r(function(e){var n=t.createElement("input");n.setAttribute("type","hidden"),e.appendChild(n).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&$.push("[*^$]="+ot+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||$.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),$.push(",.*:")})),(T.matchesSelector=yt.test(B=A.webkitMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector||A.msMatchesSelector))&&r(function(e){T.disconnectedMatch=B.call(e,"div"),B.call(e,"[s!='']:x"),F.push("!=",ct)}),$=$.length&&new RegExp($.join("|")),F=F.length&&new RegExp(F.join("|")),L=yt.test(A.contains)||A.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Y=A.compareDocumentPosition?function(e,n){if(e===n)return W=!0,0;var i=n.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(n);return i?1&i||!T.sortDetached&&n.compareDocumentPosition(e)===i?e===t||L(R,e)?-1:n===t||L(R,n)?1:O?nt.call(O,e)-nt.call(O,n):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,n){var i,o=0,r=e.parentNode,a=n.parentNode,c=[e],l=[n];if(e===n)return W=!0,0;if(!r||!a)return e===t?-1:n===t?1:r?-1:a?1:O?nt.call(O,e)-nt.call(O,n):0;if(r===a)return s(e,n);for(i=e;i=i.parentNode;)c.unshift(i);for(i=n;i=i.parentNode;)l.unshift(i);for(;c[o]===l[o];)o++;return o?s(c[o],l[o]):c[o]===R?-1:l[o]===R?1:0},t):I},n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){if((e.ownerDocument||e)!==I&&M(e),t=t.replace(ht,"='$1']"),!(!T.matchesSelector||!N||F&&F.test(t)||$&&$.test(t)))try{var i=B.call(e,t);if(i||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(o){}return n(t,I,null,[e]).length>0},n.contains=function(e,t){return(e.ownerDocument||e)!==I&&M(e),L(e,t)},n.attr=function(e,n){(e.ownerDocument||e)!==I&&M(e);var i=x.attrHandle[n.toLowerCase()],o=i&&X.call(x.attrHandle,n.toLowerCase())?i(e,n,!N):t;return o===t?T.attributes||!N?e.getAttribute(n):(o=e.getAttributeNode(n))&&o.specified?o.value:null:o
},n.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},n.uniqueSort=function(e){var t,n=[],i=0,o=0;if(W=!T.detectDuplicates,O=!T.sortStable&&e.slice(0),e.sort(Y),W){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return e},E=n.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=E(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i];i++)n+=E(t);return n},x=n.selectors={cacheLength:50,createPseudo:o,match:vt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Tt,St),e[3]=(e[4]||e[5]||"").replace(Tt,St),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||n.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&n.error(e[0]),e},PSEUDO:function(e){var n,i=!e[5]&&e[2];return vt.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:i&&gt.test(i)&&(n=f(i,!0))&&(n=i.indexOf(")",i.length-n)-i.length)&&(e[0]=e[0].slice(0,n),e[2]=i.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Tt,St).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=new RegExp("(^|"+ot+")"+e+"("+ot+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Q&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(o){var r=n.attr(o,e);return null==r?"!="===t:t?(r+="","="===t?r===i:"!="===t?r!==i:"^="===t?i&&0===r.indexOf(i):"*="===t?i&&r.indexOf(i)>-1:"$="===t?i&&r.slice(-i.length)===i:"~="===t?(" "+r+" ").indexOf(i)>-1:"|="===t?r===i||r.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,o){var r="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,c){var l,u,d,f,p,h,g=r!==a?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!c&&!s;if(m){if(r){for(;g;){for(d=t;d=d[g];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&y){for(u=m[j]||(m[j]={}),l=u[e]||[],p=l[0]===U&&l[1],f=l[0]===U&&l[2],d=p&&m.childNodes[p];d=++p&&d&&d[g]||(f=p=0)||h.pop();)if(1===d.nodeType&&++f&&d===t){u[e]=[U,p,f];break}}else if(y&&(l=(t[j]||(t[j]={}))[e])&&l[0]===U)f=l[1];else for(;(d=++p&&d&&d[g]||(f=p=0)||h.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++f||(y&&((d[j]||(d[j]={}))[e]=[U,f]),d!==t)););return f-=o,f===i||f%i===0&&f/i>=0}}},PSEUDO:function(e,t){var i,r=x.pseudos[e]||x.setFilters[e.toLowerCase()]||n.error("unsupported pseudo: "+e);return r[j]?r(t):r.length>1?(i=[e,e,"",t],x.setFilters.hasOwnProperty(e.toLowerCase())?o(function(e,n){for(var i,o=r(e,t),a=o.length;a--;)i=nt.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,i)}):r}},pseudos:{not:o(function(e){var t=[],n=[],i=P(e.replace(lt,"$1"));return i[j]?o(function(e,t,n,o){for(var r,a=i(e,null,o,[]),s=e.length;s--;)(r=a[s])&&(e[s]=!(t[s]=r))}):function(e,o,r){return t[0]=e,i(t,null,r,n),!n.pop()}}),has:o(function(e){return function(t){return n(e,t).length>0}}),contains:o(function(e){return function(t){return(t.textContent||t.innerText||E(t)).indexOf(e)>-1}}),lang:o(function(e){return mt.test(e||"")||n.error("unsupported lang: "+e),e=e.replace(Tt,St).toLowerCase(),function(t){var n;do if(n=N?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===A},focus:function(e){return e===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return wt.test(e.nodeName)},input:function(e){return _t.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:u(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},x.pseudos.nth=x.pseudos.eq;for(k in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[k]=c(k);for(k in{submit:!0,reset:!0})x.pseudos[k]=l(k);d.prototype=x.filters=x.pseudos,x.setFilters=new d,P=n.compile=function(e,t){var n,i=[],o=[],r=V[e+" "];if(!r){for(t||(t=f(e)),n=t.length;n--;)r=y(t[n]),r[j]?i.push(r):o.push(r);r=V(e,b(o,i))}return r},T.sortStable=j.split("").sort(Y).join("")===j,T.detectDuplicates=W,M(),T.sortDetached=r(function(e){return 1&e.compareDocumentPosition(I.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),T.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||a(it,function(e,t,n){var i;return n?void 0:(i=e.getAttributeNode(t))&&i.specified?i.value:e[t]===!0?t.toLowerCase():null}),ut.find=n,ut.expr=n.selectors,ut.expr[":"]=ut.expr.pseudos,ut.unique=n.uniqueSort,ut.text=n.getText,ut.isXMLDoc=n.isXML,ut.contains=n.contains}(e);var xt={};ut.Callbacks=function(e){e="string"==typeof e?xt[e]||i(e):ut.extend({},e);var n,o,r,a,s,c,l=[],u=!e.once&&[],d=function(t){for(o=e.memory&&t,r=!0,s=c||0,c=0,a=l.length,n=!0;l&&a>s;s++)if(l[s].apply(t[0],t[1])===!1&&e.stopOnFalse){o=!1;break}n=!1,l&&(u?u.length&&d(u.shift()):o?l=[]:f.disable())},f={add:function(){if(l){var t=l.length;!function i(t){ut.each(t,function(t,n){var o=ut.type(n);"function"===o?e.unique&&f.has(n)||l.push(n):n&&n.length&&"string"!==o&&i(n)})}(arguments),n?a=l.length:o&&(c=t,d(o))}return this},remove:function(){return l&&ut.each(arguments,function(e,t){for(var i;(i=ut.inArray(t,l,i))>-1;)l.splice(i,1),n&&(a>=i&&a--,s>=i&&s--)}),this},has:function(e){return e?ut.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],a=0,this},disable:function(){return l=u=o=t,this},disabled:function(){return!l},lock:function(){return u=t,o||f.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||r&&!u||(t=t||[],t=[e,t.slice?t.slice():t],n?u.push(t):d(t)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!r}};return f},ut.extend({Deferred:function(e){var t=[["resolve","done",ut.Callbacks("once memory"),"resolved"],["reject","fail",ut.Callbacks("once memory"),"rejected"],["notify","progress",ut.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ut.Deferred(function(n){ut.each(t,function(t,r){var a=r[0],s=ut.isFunction(e[t])&&e[t];o[r[1]](function(){var e=s&&s.apply(this,arguments);e&&ut.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===i?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ut.extend(e,i):i}},o={};return i.pipe=i.then,ut.each(t,function(e,r){var a=r[2],s=r[3];i[r[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?i:this,arguments),this},o[r[0]+"With"]=a.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,i,o=0,r=rt.call(arguments),a=r.length,s=1!==a||e&&ut.isFunction(e.promise)?a:0,c=1===s?e:ut.Deferred(),l=function(e,n,i){return function(o){n[e]=this,i[e]=arguments.length>1?rt.call(arguments):o,i===t?c.notifyWith(n,i):--s||c.resolveWith(n,i)}};if(a>1)for(t=new Array(a),n=new Array(a),i=new Array(a);a>o;o++)r[o]&&ut.isFunction(r[o].promise)?r[o].promise().done(l(o,i,r)).fail(c.reject).progress(l(o,n,t)):--s;return s||c.resolveWith(i,r),c.promise()}}),ut.support=function(t){var n,i,o,r,a,s,c,l,u,d=X.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*")||[],i=d.getElementsByTagName("a")[0],!i||!i.style||!n.length)return t;r=X.createElement("select"),s=r.appendChild(X.createElement("option")),o=d.getElementsByTagName("input")[0],i.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==d.className,t.leadingWhitespace=3===d.firstChild.nodeType,t.tbody=!d.getElementsByTagName("tbody").length,t.htmlSerialize=!!d.getElementsByTagName("link").length,t.style=/top/.test(i.getAttribute("style")),t.hrefNormalized="/a"===i.getAttribute("href"),t.opacity=/^0.5/.test(i.style.opacity),t.cssFloat=!!i.style.cssFloat,t.checkOn=!!o.value,t.optSelected=s.selected,t.enctype=!!X.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==X.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,r.disabled=!0,t.optDisabled=!s.disabled;try{delete d.test}catch(f){t.deleteExpando=!1}o=X.createElement("input"),o.setAttribute("value",""),t.input=""===o.getAttribute("value"),o.value="t",o.setAttribute("type","radio"),t.radioValue="t"===o.value,o.setAttribute("checked","t"),o.setAttribute("name","t"),a=X.createDocumentFragment(),a.appendChild(o),t.appendChecked=o.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(u in{submit:!0,change:!0,focusin:!0})d.setAttribute(c="on"+u,"t"),t[u+"Bubbles"]=c in e||d.attributes[c].expando===!1;d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip;for(u in ut(t))break;return t.ownLast="0"!==u,ut(function(){var n,i,o,r="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=X.getElementsByTagName("body")[0];a&&(n=X.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=d.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",l=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",t.reliableHiddenOffsets=l&&0===o[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",ut.swap(a,null!=a.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===d.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,i=d.appendChild(X.createElement("div")),i.style.cssText=d.style.cssText=r,i.style.marginRight=i.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight)),typeof d.style.zoom!==Q&&(d.innerHTML="",d.style.cssText=r+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=d=o=i=null)}),n=r=a=s=i=o=null,t}({});var Et=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Ct=/([A-Z])/g;ut.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?ut.cache[e[ut.expando]]:e[ut.expando],!!e&&!s(e)},data:function(e,t,n){return o(e,t,n)},removeData:function(e,t){return r(e,t)},_data:function(e,t,n){return o(e,t,n,!0)},_removeData:function(e,t){return r(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&ut.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),ut.fn.extend({data:function(e,n){var i,o,r=null,s=0,c=this[0];if(e===t){if(this.length&&(r=ut.data(c),1===c.nodeType&&!ut._data(c,"parsedAttrs"))){for(i=c.attributes;s<i.length;s++)o=i[s].name,0===o.indexOf("data-")&&(o=ut.camelCase(o.slice(5)),a(c,o,r[o]));ut._data(c,"parsedAttrs",!0)}return r}return"object"==typeof e?this.each(function(){ut.data(this,e)}):arguments.length>1?this.each(function(){ut.data(this,e,n)}):c?a(c,e,ut.data(c,e)):null},removeData:function(e){return this.each(function(){ut.removeData(this,e)})}}),ut.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=ut._data(e,t),n&&(!i||ut.isArray(n)?i=ut._data(e,t,ut.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=ut.queue(e,t),i=n.length,o=n.shift(),r=ut._queueHooks(e,t),a=function(){ut.dequeue(e,t)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete r.stop,o.call(e,a,r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ut._data(e,n)||ut._data(e,n,{empty:ut.Callbacks("once memory").add(function(){ut._removeData(e,t+"queue"),ut._removeData(e,n)})})}}),ut.fn.extend({queue:function(e,n){var i=2;return"string"!=typeof e&&(n=e,e="fx",i--),arguments.length<i?ut.queue(this[0],e):n===t?this:this.each(function(){var t=ut.queue(this,e,n);ut._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&ut.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ut.dequeue(this,e)})},delay:function(e,t){return e=ut.fx?ut.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var i,o=1,r=ut.Deferred(),a=this,s=this.length,c=function(){--o||r.resolveWith(a,[a])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";s--;)i=ut._data(a[s],e+"queueHooks"),i&&i.empty&&(o++,i.empty.add(c));return c(),r.promise(n)}});var Pt,Dt,Ot=/[\t\r\n\f]/g,Mt=/\r/g,It=/^(?:input|select|textarea|button|object)$/i,At=/^(?:a|area)$/i,Nt=/^(?:checked|selected)$/i,$t=ut.support.getSetAttribute,Ft=ut.support.input;ut.fn.extend({attr:function(e,t){return ut.access(this,ut.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ut.removeAttr(this,e)})},prop:function(e,t){return ut.access(this,ut.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ut.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,i,o,r,a=0,s=this.length,c="string"==typeof e&&e;if(ut.isFunction(e))return this.each(function(t){ut(this).addClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(ft)||[];s>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Ot," "):" ")){for(r=0;o=t[r++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");n.className=ut.trim(i)}return this},removeClass:function(e){var t,n,i,o,r,a=0,s=this.length,c=0===arguments.length||"string"==typeof e&&e;if(ut.isFunction(e))return this.each(function(t){ut(this).removeClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(ft)||[];s>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Ot," "):"")){for(r=0;o=t[r++];)for(;i.indexOf(" "+o+" ")>=0;)i=i.replace(" "+o+" "," ");n.className=e?ut.trim(i):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):ut.isFunction(e)?this.each(function(n){ut(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,i=0,o=ut(this),r=e.match(ft)||[];t=r[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else(n===Q||"boolean"===n)&&(this.className&&ut._data(this,"__className__",this.className),this.className=this.className||e===!1?"":ut._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Ot," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,i,o,r=this[0];{if(arguments.length)return o=ut.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=o?e.call(this,n,ut(this).val()):e,null==r?r="":"number"==typeof r?r+="":ut.isArray(r)&&(r=ut.map(r,function(e){return null==e?"":e+""})),i=ut.valHooks[this.type]||ut.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,r,"value")!==t||(this.value=r))});if(r)return i=ut.valHooks[r.type]||ut.valHooks[r.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(r,"value"))!==t?n:(n=r.value,"string"==typeof n?n.replace(Mt,""):null==n?"":n)}}}),ut.extend({valHooks:{option:{get:function(e){var t=ut.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){for(var t,n,i=e.options,o=e.selectedIndex,r="select-one"===e.type||0>o,a=r?null:[],s=r?o+1:i.length,c=0>o?s:r?o:0;s>c;c++)if(n=i[c],!(!n.selected&&c!==o||(ut.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&ut.nodeName(n.parentNode,"optgroup"))){if(t=ut(n).val(),r)return t;a.push(t)}return a},set:function(e,t){for(var n,i,o=e.options,r=ut.makeArray(t),a=o.length;a--;)i=o[a],(i.selected=ut.inArray(ut(i).val(),r)>=0)&&(n=!0);return n||(e.selectedIndex=-1),r}}},attr:function(e,n,i){var o,r,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===Q?ut.prop(e,n,i):(1===a&&ut.isXMLDoc(e)||(n=n.toLowerCase(),o=ut.attrHooks[n]||(ut.expr.match.bool.test(n)?Dt:Pt)),i===t?o&&"get"in o&&null!==(r=o.get(e,n))?r:(r=ut.find.attr(e,n),null==r?t:r):null!==i?o&&"set"in o&&(r=o.set(e,i,n))!==t?r:(e.setAttribute(n,i+""),i):(ut.removeAttr(e,n),void 0))},removeAttr:function(e,t){var n,i,o=0,r=t&&t.match(ft);if(r&&1===e.nodeType)for(;n=r[o++];)i=ut.propFix[n]||n,ut.expr.match.bool.test(n)?Ft&&$t||!Nt.test(n)?e[i]=!1:e[ut.camelCase("default-"+n)]=e[i]=!1:ut.attr(e,n,""),e.removeAttribute($t?n:i)},attrHooks:{type:{set:function(e,t){if(!ut.support.radioValue&&"radio"===t&&ut.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,i){var o,r,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!ut.isXMLDoc(e),a&&(n=ut.propFix[n]||n,r=ut.propHooks[n]),i!==t?r&&"set"in r&&(o=r.set(e,i,n))!==t?o:e[n]=i:r&&"get"in r&&null!==(o=r.get(e,n))?o:e[n]},propHooks:{tabIndex:{get:function(e){var t=ut.find.attr(e,"tabindex");return t?parseInt(t,10):It.test(e.nodeName)||At.test(e.nodeName)&&e.href?0:-1}}}}),Dt={set:function(e,t,n){return t===!1?ut.removeAttr(e,n):Ft&&$t||!Nt.test(n)?e.setAttribute(!$t&&ut.propFix[n]||n,n):e[ut.camelCase("default-"+n)]=e[n]=!0,n}},ut.each(ut.expr.match.bool.source.match(/\w+/g),function(e,n){var i=ut.expr.attrHandle[n]||ut.find.attr;ut.expr.attrHandle[n]=Ft&&$t||!Nt.test(n)?function(e,n,o){var r=ut.expr.attrHandle[n],a=o?t:(ut.expr.attrHandle[n]=t)!=i(e,n,o)?n.toLowerCase():null;return ut.expr.attrHandle[n]=r,a}:function(e,n,i){return i?t:e[ut.camelCase("default-"+n)]?n.toLowerCase():null}}),Ft&&$t||(ut.attrHooks.value={set:function(e,t,n){return ut.nodeName(e,"input")?(e.defaultValue=t,void 0):Pt&&Pt.set(e,t,n)}}),$t||(Pt={set:function(e,n,i){var o=e.getAttributeNode(i);return o||e.setAttributeNode(o=e.ownerDocument.createAttribute(i)),o.value=n+="","value"===i||n===e.getAttribute(i)?n:t}},ut.expr.attrHandle.id=ut.expr.attrHandle.name=ut.expr.attrHandle.coords=function(e,n,i){var o;return i?t:(o=e.getAttributeNode(n))&&""!==o.value?o.value:null},ut.valHooks.button={get:function(e,n){var i=e.getAttributeNode(n);return i&&i.specified?i.value:t},set:Pt.set},ut.attrHooks.contenteditable={set:function(e,t,n){Pt.set(e,""===t?!1:t,n)}},ut.each(["width","height"],function(e,t){ut.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),ut.support.hrefNormalized||ut.each(["href","src"],function(e,t){ut.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ut.support.style||(ut.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),ut.support.optSelected||(ut.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),ut.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ut.propFix[this.toLowerCase()]=this}),ut.support.enctype||(ut.propFix.enctype="encoding"),ut.each(["radio","checkbox"],function(){ut.valHooks[this]={set:function(e,t){return ut.isArray(t)?e.checked=ut.inArray(ut(e).val(),t)>=0:void 0}},ut.support.checkOn||(ut.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Bt=/^(?:input|select|textarea)$/i,Lt=/^key/,jt=/^(?:mouse|contextmenu)|click/,Rt=/^(?:focusinfocus|focusoutblur)$/,Ut=/^([^.]*)(?:\.(.+)|)$/;ut.event={global:{},add:function(e,n,i,o,r){var a,s,c,l,u,d,f,p,h,g,m,v=ut._data(e);if(v){for(i.handler&&(l=i,i=l.handler,r=l.selector),i.guid||(i.guid=ut.guid++),(s=v.events)||(s=v.events={}),(d=v.handle)||(d=v.handle=function(e){return typeof ut===Q||e&&ut.event.triggered===e.type?t:ut.event.dispatch.apply(d.elem,arguments)},d.elem=e),n=(n||"").match(ft)||[""],c=n.length;c--;)a=Ut.exec(n[c])||[],h=m=a[1],g=(a[2]||"").split(".").sort(),h&&(u=ut.event.special[h]||{},h=(r?u.delegateType:u.bindType)||h,u=ut.event.special[h]||{},f=ut.extend({type:h,origType:m,data:o,handler:i,guid:i.guid,selector:r,needsContext:r&&ut.expr.match.needsContext.test(r),namespace:g.join(".")},l),(p=s[h])||(p=s[h]=[],p.delegateCount=0,u.setup&&u.setup.call(e,o,g,d)!==!1||(e.addEventListener?e.addEventListener(h,d,!1):e.attachEvent&&e.attachEvent("on"+h,d))),u.add&&(u.add.call(e,f),f.handler.guid||(f.handler.guid=i.guid)),r?p.splice(p.delegateCount++,0,f):p.push(f),ut.event.global[h]=!0);e=null}},remove:function(e,t,n,i,o){var r,a,s,c,l,u,d,f,p,h,g,m=ut.hasData(e)&&ut._data(e);if(m&&(u=m.events)){for(t=(t||"").match(ft)||[""],l=t.length;l--;)if(s=Ut.exec(t[l])||[],p=g=s[1],h=(s[2]||"").split(".").sort(),p){for(d=ut.event.special[p]||{},p=(i?d.delegateType:d.bindType)||p,f=u[p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),c=r=f.length;r--;)a=f[r],!o&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||i&&i!==a.selector&&("**"!==i||!a.selector)||(f.splice(r,1),a.selector&&f.delegateCount--,d.remove&&d.remove.call(e,a));c&&!f.length&&(d.teardown&&d.teardown.call(e,h,m.handle)!==!1||ut.removeEvent(e,p,m.handle),delete u[p])}else for(p in u)ut.event.remove(e,p+t[l],n,i,!0);ut.isEmptyObject(u)&&(delete m.handle,ut._removeData(e,"events"))}},trigger:function(n,i,o,r){var a,s,c,l,u,d,f,p=[o||X],h=ct.call(n,"type")?n.type:n,g=ct.call(n,"namespace")?n.namespace.split("."):[];if(c=d=o=o||X,3!==o.nodeType&&8!==o.nodeType&&!Rt.test(h+ut.event.triggered)&&(h.indexOf(".")>=0&&(g=h.split("."),h=g.shift(),g.sort()),s=h.indexOf(":")<0&&"on"+h,n=n[ut.expando]?n:new ut.Event(h,"object"==typeof n&&n),n.isTrigger=r?2:3,n.namespace=g.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=o),i=null==i?[n]:ut.makeArray(i,[n]),u=ut.event.special[h]||{},r||!u.trigger||u.trigger.apply(o,i)!==!1)){if(!r&&!u.noBubble&&!ut.isWindow(o)){for(l=u.delegateType||h,Rt.test(l+h)||(c=c.parentNode);c;c=c.parentNode)p.push(c),d=c;d===(o.ownerDocument||X)&&p.push(d.defaultView||d.parentWindow||e)}for(f=0;(c=p[f++])&&!n.isPropagationStopped();)n.type=f>1?l:u.bindType||h,a=(ut._data(c,"events")||{})[n.type]&&ut._data(c,"handle"),a&&a.apply(c,i),a=s&&c[s],a&&ut.acceptData(c)&&a.apply&&a.apply(c,i)===!1&&n.preventDefault();if(n.type=h,!r&&!n.isDefaultPrevented()&&(!u._default||u._default.apply(p.pop(),i)===!1)&&ut.acceptData(o)&&s&&o[h]&&!ut.isWindow(o)){d=o[s],d&&(o[s]=null),ut.event.triggered=h;try{o[h]()}catch(m){}ut.event.triggered=t,d&&(o[s]=d)}return n.result}},dispatch:function(e){e=ut.event.fix(e);var n,i,o,r,a,s=[],c=rt.call(arguments),l=(ut._data(this,"events")||{})[e.type]||[],u=ut.event.special[e.type]||{};if(c[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(s=ut.event.handlers.call(this,e,l),n=0;(r=s[n++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,a=0;(o=r.handlers[a++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,i=((ut.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,c),i!==t&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,n){var i,o,r,a,s=[],c=n.delegateCount,l=e.target;if(c&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(r=[],a=0;c>a;a++)o=n[a],i=o.selector+" ",r[i]===t&&(r[i]=o.needsContext?ut(i,this).index(l)>=0:ut.find(i,this,null,[l]).length),r[i]&&r.push(o);r.length&&s.push({elem:l,handlers:r})}return c<n.length&&s.push({elem:this,handlers:n.slice(c)}),s},fix:function(e){if(e[ut.expando])return e;var t,n,i,o=e.type,r=e,a=this.fixHooks[o];for(a||(this.fixHooks[o]=a=jt.test(o)?this.mouseHooks:Lt.test(o)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new ut.Event(r),t=i.length;t--;)n=i[t],e[n]=r[n];return e.target||(e.target=r.srcElement||X),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,r):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i,o,r,a=n.button,s=n.fromElement;return null==e.pageX&&null!=n.clientX&&(o=e.target.ownerDocument||X,r=o.documentElement,i=o.body,e.pageX=n.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=n.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?n.toElement:s),e.which||a===t||(e.which=1&a?1:2&a?3:4&a?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==u()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ut.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return ut.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var o=ut.extend(new ut.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?ut.event.trigger(o,null,t):ut.event.dispatch.call(t,o),o.isDefaultPrevented()&&n.preventDefault()}},ut.removeEvent=X.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&(typeof e[i]===Q&&(e[i]=null),e.detachEvent(i,n))},ut.Event=function(e,t){return this instanceof ut.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?c:l):this.type=e,t&&ut.extend(this,t),this.timeStamp=e&&e.timeStamp||ut.now(),this[ut.expando]=!0,void 0):new ut.Event(e,t)},ut.Event.prototype={isDefaultPrevented:l,isPropagationStopped:l,isImmediatePropagationStopped:l,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=c,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=c,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=c,this.stopPropagation()}},ut.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){ut.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,o=e.relatedTarget,r=e.handleObj;return(!o||o!==i&&!ut.contains(i,o))&&(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),ut.support.submitBubbles||(ut.event.special.submit={setup:function(){return ut.nodeName(this,"form")?!1:(ut.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,i=ut.nodeName(n,"input")||ut.nodeName(n,"button")?n.form:t;i&&!ut._data(i,"submitBubbles")&&(ut.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),ut._data(i,"submitBubbles",!0))}),void 0)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ut.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return ut.nodeName(this,"form")?!1:(ut.event.remove(this,"._submit"),void 0)}}),ut.support.changeBubbles||(ut.event.special.change={setup:function(){return Bt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ut.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ut.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ut.event.simulate("change",this,e,!0)})),!1):(ut.event.add(this,"beforeactivate._change",function(e){var t=e.target;Bt.test(t.nodeName)&&!ut._data(t,"changeBubbles")&&(ut.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ut.event.simulate("change",this.parentNode,e,!0)}),ut._data(t,"changeBubbles",!0))}),void 0)},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ut.event.remove(this,"._change"),!Bt.test(this.nodeName)}}),ut.support.focusinBubbles||ut.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,i=function(e){ut.event.simulate(t,e.target,ut.event.fix(e),!0)};ut.event.special[t]={setup:function(){0===n++&&X.addEventListener(e,i,!0)},teardown:function(){0===--n&&X.removeEventListener(e,i,!0)}}}),ut.fn.extend({on:function(e,n,i,o,r){var a,s;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=t);for(a in e)this.on(a,n,i,e[a],r);return this}if(null==i&&null==o?(o=n,i=n=t):null==o&&("string"==typeof n?(o=i,i=t):(o=i,i=n,n=t)),o===!1)o=l;else if(!o)return this;return 1===r&&(s=o,o=function(e){return ut().off(e),s.apply(this,arguments)},o.guid=s.guid||(s.guid=ut.guid++)),this.each(function(){ut.event.add(this,e,o,i,n)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)
},off:function(e,n,i){var o,r;if(e&&e.preventDefault&&e.handleObj)return o=e.handleObj,ut(e.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof e){for(r in e)this.off(r,n,e[r]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=t),i===!1&&(i=l),this.each(function(){ut.event.remove(this,e,i,n)})},trigger:function(e,t){return this.each(function(){ut.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?ut.event.trigger(e,t,n,!0):void 0}});var Ht=/^.[^:#\[\.,]*$/,zt=/^(?:parents|prev(?:Until|All))/,qt=ut.expr.match.needsContext,Vt={children:!0,contents:!0,next:!0,prev:!0};ut.fn.extend({find:function(e){var t,n=[],i=this,o=i.length;if("string"!=typeof e)return this.pushStack(ut(e).filter(function(){for(t=0;o>t;t++)if(ut.contains(i[t],this))return!0}));for(t=0;o>t;t++)ut.find(e,i[t],n);return n=this.pushStack(o>1?ut.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=ut(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(ut.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(f(this,e||[],!0))},filter:function(e){return this.pushStack(f(this,e||[],!1))},is:function(e){return!!f(this,"string"==typeof e&&qt.test(e)?ut(e):e||[],!1).length},closest:function(e,t){for(var n,i=0,o=this.length,r=[],a=qt.test(e)||"string"!=typeof e?ut(e,t||this.context):0;o>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&ut.find.matchesSelector(n,e))){n=r.push(n);break}return this.pushStack(r.length>1?ut.unique(r):r)},index:function(e){return e?"string"==typeof e?ut.inArray(this[0],ut(e)):ut.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?ut(e,t):ut.makeArray(e&&e.nodeType?[e]:e),i=ut.merge(this.get(),n);return this.pushStack(ut.unique(i))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ut.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ut.dir(e,"parentNode")},parentsUntil:function(e,t,n){return ut.dir(e,"parentNode",n)},next:function(e){return d(e,"nextSibling")},prev:function(e){return d(e,"previousSibling")},nextAll:function(e){return ut.dir(e,"nextSibling")},prevAll:function(e){return ut.dir(e,"previousSibling")},nextUntil:function(e,t,n){return ut.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return ut.dir(e,"previousSibling",n)},siblings:function(e){return ut.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ut.sibling(e.firstChild)},contents:function(e){return ut.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ut.merge([],e.childNodes)}},function(e,t){ut.fn[e]=function(n,i){var o=ut.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=ut.filter(i,o)),this.length>1&&(Vt[e]||(o=ut.unique(o)),zt.test(e)&&(o=o.reverse())),this.pushStack(o)}}),ut.extend({filter:function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?ut.find.matchesSelector(i,e)?[i]:[]:ut.find.matches(e,ut.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,i){for(var o=[],r=e[n];r&&9!==r.nodeType&&(i===t||1!==r.nodeType||!ut(r).is(i));)1===r.nodeType&&o.push(r),r=r[n];return o},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var Wt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Yt=/ jQuery\d+="(?:null|\d+)"/g,Qt=new RegExp("<(?:"+Wt+")[\\s/>]","i"),Jt=/^\s+/,Xt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Gt=/<([\w:]+)/,Kt=/<tbody/i,Zt=/<|&#?\w+;/,en=/<(?:script|style|link)/i,tn=/^(?:checkbox|radio)$/i,nn=/checked\s*(?:[^=]|=\s*.checked.)/i,on=/^$|\/(?:java|ecma)script/i,rn=/^true\/(.*)/,an=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,sn={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ut.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},cn=p(X),ln=cn.appendChild(X.createElement("div"));sn.optgroup=sn.option,sn.tbody=sn.tfoot=sn.colgroup=sn.caption=sn.thead,sn.th=sn.td,ut.fn.extend({text:function(e){return ut.access(this,function(e){return e===t?ut.text(this):this.empty().append((this[0]&&this[0].ownerDocument||X).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?ut.filter(e,this):this,o=0;null!=(n=i[o]);o++)t||1!==n.nodeType||ut.cleanData(_(n)),n.parentNode&&(t&&ut.contains(n.ownerDocument,n)&&v(_(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ut.cleanData(_(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ut.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return ut.clone(this,e,t)})},html:function(e){return ut.access(this,function(e){var n=this[0]||{},i=0,o=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(Yt,""):t;if(!("string"!=typeof e||en.test(e)||!ut.support.htmlSerialize&&Qt.test(e)||!ut.support.leadingWhitespace&&Jt.test(e)||sn[(Gt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Xt,"<$1></$2>");try{for(;o>i;i++)n=this[i]||{},1===n.nodeType&&(ut.cleanData(_(n,!1)),n.innerHTML=e);n=0}catch(r){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=ut.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var i=e[t++],o=e[t++];o&&(i&&i.parentNode!==o&&(i=this.nextSibling),ut(this).remove(),o.insertBefore(n,i))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=it.apply([],e);var i,o,r,a,s,c,l=0,u=this.length,d=this,f=u-1,p=e[0],h=ut.isFunction(p);if(h||!(1>=u||"string"!=typeof p||ut.support.checkClone)&&nn.test(p))return this.each(function(i){var o=d.eq(i);h&&(e[0]=p.call(this,i,o.html())),o.domManip(e,t,n)});if(u&&(c=ut.buildFragment(e,this[0].ownerDocument,!1,!n&&this),i=c.firstChild,1===c.childNodes.length&&(c=i),i)){for(a=ut.map(_(c,"script"),g),r=a.length;u>l;l++)o=c,l!==f&&(o=ut.clone(o,!0,!0),r&&ut.merge(a,_(o,"script"))),t.call(this[l],o,l);if(r)for(s=a[a.length-1].ownerDocument,ut.map(a,m),l=0;r>l;l++)o=a[l],on.test(o.type||"")&&!ut._data(o,"globalEval")&&ut.contains(s,o)&&(o.src?ut._evalUrl(o.src):ut.globalEval((o.text||o.textContent||o.innerHTML||"").replace(an,"")));c=i=null}return this}}),ut.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ut.fn[e]=function(e){for(var n,i=0,o=[],r=ut(e),a=r.length-1;a>=i;i++)n=i===a?this:this.clone(!0),ut(r[i])[t](n),ot.apply(o,n.get());return this.pushStack(o)}}),ut.extend({clone:function(e,t,n){var i,o,r,a,s,c=ut.contains(e.ownerDocument,e);if(ut.support.html5Clone||ut.isXMLDoc(e)||!Qt.test("<"+e.nodeName+">")?r=e.cloneNode(!0):(ln.innerHTML=e.outerHTML,ln.removeChild(r=ln.firstChild)),!(ut.support.noCloneEvent&&ut.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ut.isXMLDoc(e)))for(i=_(r),s=_(e),a=0;null!=(o=s[a]);++a)i[a]&&b(o,i[a]);if(t)if(n)for(s=s||_(e),i=i||_(r),a=0;null!=(o=s[a]);a++)y(o,i[a]);else y(e,r);return i=_(r,"script"),i.length>0&&v(i,!c&&_(e,"script")),i=s=o=null,r},buildFragment:function(e,t,n,i){for(var o,r,a,s,c,l,u,d=e.length,f=p(t),h=[],g=0;d>g;g++)if(r=e[g],r||0===r)if("object"===ut.type(r))ut.merge(h,r.nodeType?[r]:r);else if(Zt.test(r)){for(s=s||f.appendChild(t.createElement("div")),c=(Gt.exec(r)||["",""])[1].toLowerCase(),u=sn[c]||sn._default,s.innerHTML=u[1]+r.replace(Xt,"<$1></$2>")+u[2],o=u[0];o--;)s=s.lastChild;if(!ut.support.leadingWhitespace&&Jt.test(r)&&h.push(t.createTextNode(Jt.exec(r)[0])),!ut.support.tbody)for(r="table"!==c||Kt.test(r)?"<table>"!==u[1]||Kt.test(r)?0:s:s.firstChild,o=r&&r.childNodes.length;o--;)ut.nodeName(l=r.childNodes[o],"tbody")&&!l.childNodes.length&&r.removeChild(l);for(ut.merge(h,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=f.lastChild}else h.push(t.createTextNode(r));for(s&&f.removeChild(s),ut.support.appendChecked||ut.grep(_(h,"input"),w),g=0;r=h[g++];)if((!i||-1===ut.inArray(r,i))&&(a=ut.contains(r.ownerDocument,r),s=_(f.appendChild(r),"script"),a&&v(s),n))for(o=0;r=s[o++];)on.test(r.type||"")&&n.push(r);return s=null,f},cleanData:function(e,t){for(var n,i,o,r,a=0,s=ut.expando,c=ut.cache,l=ut.support.deleteExpando,u=ut.event.special;null!=(n=e[a]);a++)if((t||ut.acceptData(n))&&(o=n[s],r=o&&c[o])){if(r.events)for(i in r.events)u[i]?ut.event.remove(n,i):ut.removeEvent(n,i,r.handle);c[o]&&(delete c[o],l?delete n[s]:typeof n.removeAttribute!==Q?n.removeAttribute(s):n[s]=null,tt.push(o))}},_evalUrl:function(e){return ut.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),ut.fn.extend({wrapAll:function(e){if(ut.isFunction(e))return this.each(function(t){ut(this).wrapAll(e.call(this,t))});if(this[0]){var t=ut(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return ut.isFunction(e)?this.each(function(t){ut(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ut(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ut.isFunction(e);return this.each(function(n){ut(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ut.nodeName(this,"body")||ut(this).replaceWith(this.childNodes)}).end()}});var un,dn,fn,pn=/alpha\([^)]*\)/i,hn=/opacity\s*=\s*([^)]*)/,gn=/^(top|right|bottom|left)$/,mn=/^(none|table(?!-c[ea]).+)/,vn=/^margin/,yn=new RegExp("^("+dt+")(.*)$","i"),bn=new RegExp("^("+dt+")(?!px)[a-z%]+$","i"),_n=new RegExp("^([+-])=("+dt+")","i"),wn={BODY:"block"},kn={position:"absolute",visibility:"hidden",display:"block"},Tn={letterSpacing:0,fontWeight:400},Sn=["Top","Right","Bottom","Left"],xn=["Webkit","O","Moz","ms"];ut.fn.extend({css:function(e,n){return ut.access(this,function(e,n,i){var o,r,a={},s=0;if(ut.isArray(n)){for(r=dn(e),o=n.length;o>s;s++)a[n[s]]=ut.css(e,n[s],!1,r);return a}return i!==t?ut.style(e,n,i):ut.css(e,n)},e,n,arguments.length>1)},show:function(){return S(this,!0)},hide:function(){return S(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){T(this)?ut(this).show():ut(this).hide()})}}),ut.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=fn(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ut.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,i,o){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,s,c=ut.camelCase(n),l=e.style;if(n=ut.cssProps[c]||(ut.cssProps[c]=k(l,c)),s=ut.cssHooks[n]||ut.cssHooks[c],i===t)return s&&"get"in s&&(r=s.get(e,!1,o))!==t?r:l[n];if(a=typeof i,"string"===a&&(r=_n.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(ut.css(e,n)),a="number"),!(null==i||"number"===a&&isNaN(i)||("number"!==a||ut.cssNumber[c]||(i+="px"),ut.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(l[n]="inherit"),s&&"set"in s&&(i=s.set(e,i,o))===t)))try{l[n]=i}catch(u){}}},css:function(e,n,i,o){var r,a,s,c=ut.camelCase(n);return n=ut.cssProps[c]||(ut.cssProps[c]=k(e.style,c)),s=ut.cssHooks[n]||ut.cssHooks[c],s&&"get"in s&&(a=s.get(e,!0,i)),a===t&&(a=fn(e,n,o)),"normal"===a&&n in Tn&&(a=Tn[n]),""===i||i?(r=parseFloat(a),i===!0||ut.isNumeric(r)?r||0:a):a}}),e.getComputedStyle?(dn=function(t){return e.getComputedStyle(t,null)},fn=function(e,n,i){var o,r,a,s=i||dn(e),c=s?s.getPropertyValue(n)||s[n]:t,l=e.style;return s&&(""!==c||ut.contains(e.ownerDocument,e)||(c=ut.style(e,n)),bn.test(c)&&vn.test(n)&&(o=l.width,r=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=c,c=s.width,l.width=o,l.minWidth=r,l.maxWidth=a)),c}):X.documentElement.currentStyle&&(dn=function(e){return e.currentStyle},fn=function(e,n,i){var o,r,a,s=i||dn(e),c=s?s[n]:t,l=e.style;return null==c&&l&&l[n]&&(c=l[n]),bn.test(c)&&!gn.test(n)&&(o=l.left,r=e.runtimeStyle,a=r&&r.left,a&&(r.left=e.currentStyle.left),l.left="fontSize"===n?"1em":c,c=l.pixelLeft+"px",l.left=o,a&&(r.left=a)),""===c?"auto":c}),ut.each(["height","width"],function(e,t){ut.cssHooks[t]={get:function(e,n,i){return n?0===e.offsetWidth&&mn.test(ut.css(e,"display"))?ut.swap(e,kn,function(){return C(e,t,i)}):C(e,t,i):void 0},set:function(e,n,i){var o=i&&dn(e);return x(e,n,i?E(e,t,i,ut.support.boxSizing&&"border-box"===ut.css(e,"boxSizing",!1,o),o):0)}}}),ut.support.opacity||(ut.cssHooks.opacity={get:function(e,t){return hn.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,o=ut.isNumeric(t)?"alpha(opacity="+100*t+")":"",r=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===ut.trim(r.replace(pn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=pn.test(r)?r.replace(pn,o):r+" "+o)}}),ut(function(){ut.support.reliableMarginRight||(ut.cssHooks.marginRight={get:function(e,t){return t?ut.swap(e,{display:"inline-block"},fn,[e,"marginRight"]):void 0}}),!ut.support.pixelPosition&&ut.fn.position&&ut.each(["top","left"],function(e,t){ut.cssHooks[t]={get:function(e,n){return n?(n=fn(e,t),bn.test(n)?ut(e).position()[t]+"px":n):void 0}}})}),ut.expr&&ut.expr.filters&&(ut.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ut.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||ut.css(e,"display"))},ut.expr.filters.visible=function(e){return!ut.expr.filters.hidden(e)}),ut.each({margin:"",padding:"",border:"Width"},function(e,t){ut.cssHooks[e+t]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];4>i;i++)o[e+Sn[i]+t]=r[i]||r[i-2]||r[0];return o}},vn.test(e)||(ut.cssHooks[e+t].set=x)});var En=/%20/g,Cn=/\[\]$/,Pn=/\r?\n/g,Dn=/^(?:submit|button|image|reset|file)$/i,On=/^(?:input|select|textarea|keygen)/i;ut.fn.extend({serialize:function(){return ut.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ut.prop(this,"elements");return e?ut.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ut(this).is(":disabled")&&On.test(this.nodeName)&&!Dn.test(e)&&(this.checked||!tn.test(e))}).map(function(e,t){var n=ut(this).val();return null==n?null:ut.isArray(n)?ut.map(n,function(e){return{name:t.name,value:e.replace(Pn,"\r\n")}}):{name:t.name,value:n.replace(Pn,"\r\n")}}).get()}}),ut.param=function(e,n){var i,o=[],r=function(e,t){t=ut.isFunction(t)?t():null==t?"":t,o[o.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=ut.ajaxSettings&&ut.ajaxSettings.traditional),ut.isArray(e)||e.jquery&&!ut.isPlainObject(e))ut.each(e,function(){r(this.name,this.value)});else for(i in e)O(i,e[i],n,r);return o.join("&").replace(En,"+")},ut.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ut.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ut.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Mn,In,An=ut.now(),Nn=/\?/,$n=/#.*$/,Fn=/([?&])_=[^&]*/,Bn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ln=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,jn=/^(?:GET|HEAD)$/,Rn=/^\/\//,Un=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Hn=ut.fn.load,zn={},qn={},Vn="*/".concat("*");try{In=J.href}catch(Wn){In=X.createElement("a"),In.href="",In=In.href}Mn=Un.exec(In.toLowerCase())||[],ut.fn.load=function(e,n,i){if("string"!=typeof e&&Hn)return Hn.apply(this,arguments);var o,r,a,s=this,c=e.indexOf(" ");return c>=0&&(o=e.slice(c,e.length),e=e.slice(0,c)),ut.isFunction(n)?(i=n,n=t):n&&"object"==typeof n&&(a="POST"),s.length>0&&ut.ajax({url:e,type:a,dataType:"html",data:n}).done(function(e){r=arguments,s.html(o?ut("<div>").append(ut.parseHTML(e)).find(o):e)}).complete(i&&function(e,t){s.each(i,r||[e.responseText,t,e])}),this},ut.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ut.fn[t]=function(e){return this.on(t,e)}}),ut.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:In,type:"GET",isLocal:Ln.test(Mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ut.parseJSON,"text xml":ut.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?A(A(e,ut.ajaxSettings),t):A(ut.ajaxSettings,e)},ajaxPrefilter:M(zn),ajaxTransport:M(qn),ajax:function(e,n){function i(e,n,i,o){var r,d,y,b,w,T=n;2!==_&&(_=2,c&&clearTimeout(c),u=t,s=o||"",k.readyState=e>0?4:0,r=e>=200&&300>e||304===e,i&&(b=N(f,k,i)),b=$(f,b,k,r),r?(f.ifModified&&(w=k.getResponseHeader("Last-Modified"),w&&(ut.lastModified[a]=w),w=k.getResponseHeader("etag"),w&&(ut.etag[a]=w)),204===e||"HEAD"===f.type?T="nocontent":304===e?T="notmodified":(T=b.state,d=b.data,y=b.error,r=!y)):(y=T,(e||!T)&&(T="error",0>e&&(e=0))),k.status=e,k.statusText=(n||T)+"",r?g.resolveWith(p,[d,T,k]):g.rejectWith(p,[k,T,y]),k.statusCode(v),v=t,l&&h.trigger(r?"ajaxSuccess":"ajaxError",[k,f,r?d:y]),m.fireWith(p,[k,T]),l&&(h.trigger("ajaxComplete",[k,f]),--ut.active||ut.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var o,r,a,s,c,l,u,d,f=ut.ajaxSetup({},n),p=f.context||f,h=f.context&&(p.nodeType||p.jquery)?ut(p):ut.event,g=ut.Deferred(),m=ut.Callbacks("once memory"),v=f.statusCode||{},y={},b={},_=0,w="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!d)for(d={};t=Bn.exec(s);)d[t[1].toLowerCase()]=t[2];t=d[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return _||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return _||(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>_)for(t in e)v[t]=[v[t],e[t]];else k.always(e[k.status]);return this},abort:function(e){var t=e||w;return u&&u.abort(t),i(0,t),this}};if(g.promise(k).complete=m.add,k.success=k.done,k.error=k.fail,f.url=((e||f.url||In)+"").replace($n,"").replace(Rn,Mn[1]+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=ut.trim(f.dataType||"*").toLowerCase().match(ft)||[""],null==f.crossDomain&&(o=Un.exec(f.url.toLowerCase()),f.crossDomain=!(!o||o[1]===Mn[1]&&o[2]===Mn[2]&&(o[3]||("http:"===o[1]?"80":"443"))===(Mn[3]||("http:"===Mn[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=ut.param(f.data,f.traditional)),I(zn,f,n,k),2===_)return k;l=f.global,l&&0===ut.active++&&ut.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!jn.test(f.type),a=f.url,f.hasContent||(f.data&&(a=f.url+=(Nn.test(a)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=Fn.test(a)?a.replace(Fn,"$1_="+An++):a+(Nn.test(a)?"&":"?")+"_="+An++)),f.ifModified&&(ut.lastModified[a]&&k.setRequestHeader("If-Modified-Since",ut.lastModified[a]),ut.etag[a]&&k.setRequestHeader("If-None-Match",ut.etag[a])),(f.data&&f.hasContent&&f.contentType!==!1||n.contentType)&&k.setRequestHeader("Content-Type",f.contentType),k.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Vn+"; q=0.01":""):f.accepts["*"]);for(r in f.headers)k.setRequestHeader(r,f.headers[r]);if(f.beforeSend&&(f.beforeSend.call(p,k,f)===!1||2===_))return k.abort();w="abort";for(r in{success:1,error:1,complete:1})k[r](f[r]);if(u=I(qn,f,n,k)){k.readyState=1,l&&h.trigger("ajaxSend",[k,f]),f.async&&f.timeout>0&&(c=setTimeout(function(){k.abort("timeout")},f.timeout));try{_=1,u.send(y,i)}catch(T){if(!(2>_))throw T;i(-1,T)}}else i(-1,"No Transport");return k},getJSON:function(e,t,n){return ut.get(e,t,n,"json")},getScript:function(e,n){return ut.get(e,t,n,"script")}}),ut.each(["get","post"],function(e,n){ut[n]=function(e,i,o,r){return ut.isFunction(i)&&(r=r||o,o=i,i=t),ut.ajax({url:e,type:n,dataType:r,data:i,success:o})}}),ut.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return ut.globalEval(e),e}}}),ut.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ut.ajaxTransport("script",function(e){if(e.crossDomain){var n,i=X.head||ut("head")[0]||X.documentElement;return{send:function(t,o){n=X.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||o(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var Yn=[],Qn=/(=)\?(?=&|$)|\?\?/;ut.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Yn.pop()||ut.expando+"_"+An++;return this[e]=!0,e}}),ut.ajaxPrefilter("json jsonp",function(n,i,o){var r,a,s,c=n.jsonp!==!1&&(Qn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qn.test(n.data)&&"data");return c||"jsonp"===n.dataTypes[0]?(r=n.jsonpCallback=ut.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,c?n[c]=n[c].replace(Qn,"$1"+r):n.jsonp!==!1&&(n.url+=(Nn.test(n.url)?"&":"?")+n.jsonp+"="+r),n.converters["script json"]=function(){return s||ut.error(r+" was not called"),s[0]},n.dataTypes[0]="json",a=e[r],e[r]=function(){s=arguments},o.always(function(){e[r]=a,n[r]&&(n.jsonpCallback=i.jsonpCallback,Yn.push(r)),s&&ut.isFunction(a)&&a(s[0]),s=a=t}),"script"):void 0});var Jn,Xn,Gn=0,Kn=e.ActiveXObject&&function(){var e;for(e in Jn)Jn[e](t,!0)};ut.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&F()||B()}:F,Xn=ut.ajaxSettings.xhr(),ut.support.cors=!!Xn&&"withCredentials"in Xn,Xn=ut.support.ajax=!!Xn,Xn&&ut.ajaxTransport(function(n){if(!n.crossDomain||ut.support.cors){var i;return{send:function(o,r){var a,s,c=n.xhr();if(n.username?c.open(n.type,n.url,n.async,n.username,n.password):c.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)c[s]=n.xhrFields[s];n.mimeType&&c.overrideMimeType&&c.overrideMimeType(n.mimeType),n.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");try{for(s in o)c.setRequestHeader(s,o[s])}catch(l){}c.send(n.hasContent&&n.data||null),i=function(e,o){var s,l,u,d;try{if(i&&(o||4===c.readyState))if(i=t,a&&(c.onreadystatechange=ut.noop,Kn&&delete Jn[a]),o)4!==c.readyState&&c.abort();else{d={},s=c.status,l=c.getAllResponseHeaders(),"string"==typeof c.responseText&&(d.text=c.responseText);try{u=c.statusText}catch(f){u=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=d.text?200:404}}catch(p){o||r(-1,p)}d&&r(s,u,d,l)},n.async?4===c.readyState?setTimeout(i):(a=++Gn,Kn&&(Jn||(Jn={},ut(e).unload(Kn)),Jn[a]=i),c.onreadystatechange=i):i()},abort:function(){i&&i(t,!0)}}}});var Zn,ei,ti=/^(?:toggle|show|hide)$/,ni=new RegExp("^(?:([+-])=|)("+dt+")([a-z%]*)$","i"),ii=/queueHooks$/,oi=[H],ri={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),o=ni.exec(t),r=o&&o[3]||(ut.cssNumber[e]?"":"px"),a=(ut.cssNumber[e]||"px"!==r&&+i)&&ni.exec(ut.css(n.elem,e)),s=1,c=20;if(a&&a[3]!==r){r=r||a[3],o=o||[],a=+i||1;do s=s||".5",a/=s,ut.style(n.elem,e,a+r);while(s!==(s=n.cur()/i)&&1!==s&&--c)}return o&&(a=n.start=+a||+i||0,n.unit=r,n.end=o[1]?a+(o[1]+1)*o[2]:+o[2]),n}]};ut.Animation=ut.extend(R,{tweener:function(e,t){ut.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,o=e.length;o>i;i++)n=e[i],ri[n]=ri[n]||[],ri[n].unshift(t)},prefilter:function(e,t){t?oi.unshift(e):oi.push(e)}}),ut.Tween=z,z.prototype={constructor:z,init:function(e,t,n,i,o,r){this.elem=e,this.prop=n,this.easing=o||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(ut.cssNumber[n]?"":"px")},cur:function(){var e=z.propHooks[this.prop];return e&&e.get?e.get(this):z.propHooks._default.get(this)},run:function(e){var t,n=z.propHooks[this.prop];return this.pos=t=this.options.duration?ut.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):z.propHooks._default.set(this),this}},z.prototype.init.prototype=z.prototype,z.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ut.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){ut.fx.step[e.prop]?ut.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ut.cssProps[e.prop]]||ut.cssHooks[e.prop])?ut.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},z.propHooks.scrollTop=z.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ut.each(["toggle","show","hide"],function(e,t){var n=ut.fn[t];ut.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(q(t,!0),e,i,o)}}),ut.fn.extend({fadeTo:function(e,t,n,i){return this.filter(T).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=ut.isEmptyObject(e),r=ut.speed(t,n,i),a=function(){var t=R(this,ut.extend({},e),r);(o||ut._data(this,"finish"))&&t.stop(!0)};return a.finish=a,o||r.queue===!1?this.each(a):this.queue(r.queue,a)},stop:function(e,n,i){var o=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",r=ut.timers,a=ut._data(this);if(n)a[n]&&a[n].stop&&o(a[n]);else for(n in a)a[n]&&a[n].stop&&ii.test(n)&&o(a[n]);for(n=r.length;n--;)r[n].elem!==this||null!=e&&r[n].queue!==e||(r[n].anim.stop(i),t=!1,r.splice(n,1));(t||!i)&&ut.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ut._data(this),i=n[e+"queue"],o=n[e+"queueHooks"],r=ut.timers,a=i?i.length:0;for(n.finish=!0,ut.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;a>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),ut.each({slideDown:q("show"),slideUp:q("hide"),slideToggle:q("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ut.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),ut.speed=function(e,t,n){var i=e&&"object"==typeof e?ut.extend({},e):{complete:n||!n&&t||ut.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ut.isFunction(t)&&t};return i.duration=ut.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in ut.fx.speeds?ut.fx.speeds[i.duration]:ut.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){ut.isFunction(i.old)&&i.old.call(this),i.queue&&ut.dequeue(this,i.queue)},i},ut.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ut.timers=[],ut.fx=z.prototype.init,ut.fx.tick=function(){var e,n=ut.timers,i=0;for(Zn=ut.now();i<n.length;i++)e=n[i],e()||n[i]!==e||n.splice(i--,1);n.length||ut.fx.stop(),Zn=t},ut.fx.timer=function(e){e()&&ut.timers.push(e)&&ut.fx.start()},ut.fx.interval=13,ut.fx.start=function(){ei||(ei=setInterval(ut.fx.tick,ut.fx.interval))},ut.fx.stop=function(){clearInterval(ei),ei=null},ut.fx.speeds={slow:600,fast:200,_default:400},ut.fx.step={},ut.expr&&ut.expr.filters&&(ut.expr.filters.animated=function(e){return ut.grep(ut.timers,function(t){return e===t.elem}).length}),ut.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){ut.offset.setOffset(this,e,t)});var n,i,o={top:0,left:0},r=this[0],a=r&&r.ownerDocument;if(a)return n=a.documentElement,ut.contains(n,r)?(typeof r.getBoundingClientRect!==Q&&(o=r.getBoundingClientRect()),i=V(a),{top:o.top+(i.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(i.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o},ut.offset={setOffset:function(e,t,n){var i=ut.css(e,"position");"static"===i&&(e.style.position="relative");var o,r,a=ut(e),s=a.offset(),c=ut.css(e,"top"),l=ut.css(e,"left"),u=("absolute"===i||"fixed"===i)&&ut.inArray("auto",[c,l])>-1,d={},f={};u?(f=a.position(),o=f.top,r=f.left):(o=parseFloat(c)||0,r=parseFloat(l)||0),ut.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(d.top=t.top-s.top+o),null!=t.left&&(d.left=t.left-s.left+r),"using"in t?t.using.call(e,d):a.css(d)}},ut.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===ut.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ut.nodeName(e[0],"html")||(n=e.offset()),n.top+=ut.css(e[0],"borderTopWidth",!0),n.left+=ut.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-ut.css(i,"marginTop",!0),left:t.left-n.left-ut.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||G;e&&!ut.nodeName(e,"html")&&"static"===ut.css(e,"position");)e=e.offsetParent;return e||G})}}),ut.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var i=/Y/.test(n);ut.fn[e]=function(o){return ut.access(this,function(e,o,r){var a=V(e);return r===t?a?n in a?a[n]:a.document.documentElement[o]:e[o]:(a?a.scrollTo(i?ut(a).scrollLeft():r,i?r:ut(a).scrollTop()):e[o]=r,void 0)},e,o,arguments.length,null)}}),ut.each({Height:"height",Width:"width"},function(e,n){ut.each({padding:"inner"+e,content:n,"":"outer"+e},function(i,o){ut.fn[o]=function(o,r){var a=arguments.length&&(i||"boolean"!=typeof o),s=i||(o===!0||r===!0?"margin":"border");return ut.access(this,function(n,i,o){var r;return ut.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(r=n.documentElement,Math.max(n.body["scroll"+e],r["scroll"+e],n.body["offset"+e],r["offset"+e],r["client"+e])):o===t?ut.css(n,i,s):ut.style(n,i,o,s)},n,a?o:t,a,null)}})}),ut.fn.size=function(){return this.length},ut.fn.andSelf=ut.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=ut:(e.jQuery=e.$=ut,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ut}))}(window)}).call(this),"undefined"==typeof Package&&(Package={}),Package.jquery={}}(),function(){var e,t=(Package.meteor.Meteor,Package.underscore._);
(function(){e={};var n=function(e,n){if(!document.querySelectorAll)throw new Error("This browser doesn't support querySelectorAll.");var i=n;return h(n,"DomUtils_findAllBySelector_scope",function(n){var o=t.map(e.split(","),function(e){return n+" "+e}).join(",");return i.querySelectorAll(o)})},i=window.Sizzle||window.jQuery&&window.jQuery.find||n,o=document.createElement("div");o.innerHTML="   <link/><table></table><select><!----></select>";var r=document.createElement("div");r.innerHTML="<select><option selected>Foo</option></select>",r.firstChild.setAttribute("name","myname");var a={leadingWhitespaceKilled:3!==o.firstChild.nodeType,tbodyInsertion:o.getElementsByTagName("tbody").length>0,tagsLost:0===o.getElementsByTagName("link").length,commentsLost:!o.getElementsByTagName("select")[0].firstChild,selectValueMustBeFromAttribute:"Foo"!==r.firstChild.value,mustSetNameInCreateElement:r.firstChild.outerHTML&&-1===r.firstChild.outerHTML.indexOf("myname")},s={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};t.extend(s,{optgroup:s.option,tbody:s.thead,tfoot:s.thead,colgroup:s.thead,caption:s.thead,th:s.td}),a.tagsLost&&(s._default=[1,"div<div>","</div>"]);var c=/^\s+/,l=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,u=/<([\w:]+)/,d=/<tbody/i,f=/<|&#?\w+;/;e.htmlToFragment=function(e){var n=document,i=n.createDocumentFragment();if(e.length)if(f.test(e)){e=e.replace(l,"<$1></$2>");var o=u.exec(e),r=o?o[1].toLowerCase():"",p=s[r]||s._default,h=p[1]+e+p[2];a.commentsLost&&(h=h.replace(/<\s*(select|option)\b/gi,'<ins domutilsrealtagname="$1"'),h=h.replace(/<\/\s*(select|option)\b/gi,"</ins"));var g=n.createElement("div");g.innerHTML=h;for(var m=p[0];m--;)g=g.lastChild;if(a.tbodyInsertion&&!d.test(e)){var v=g.getElementsByTagName("tbody");t.each(v,function(e){e.firstChild||e.parentNode.removeChild(e)})}if(a.leadingWhitespaceKilled){var y=c.exec(e);y&&g.insertBefore(n.createTextNode(y[0]),g.firstChild)}if(a.commentsLost){var b=[];t.each(g.getElementsByTagName("ins"),function(e){e.getAttribute("domutilsrealtagname")&&b.push(e)}),t.each(b,function(e){var n=e.getAttribute("domutilsrealtagname");a.mustSetNameInCreateElement&&e.getAttribute("name")&&(n="<"+n+" name='"+t.escape(e.getAttribute("name"))+"'/>");var i=document.createElement(n);e.removeAttribute("domutilsrealtagname");for(var o=e.attributes,r=0;r<o.length;++r){var s=o.item(r);if(s.specified){var c=s.name.toLowerCase(),l=String(s.value);"selected"===c&&""===l&&(l="selected"),i.setAttribute(c,l)}}for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode.replaceChild(i,e)})}for(;g.firstChild;)i.appendChild(g.firstChild)}else i.appendChild(n.createTextNode(e));else;return i},e.fragmentToHtml=function(t){return t=t.cloneNode(!0),e.fragmentToContainer(t).innerHTML},e.fragmentToContainer=function(e){for(var t=document,n=e.firstChild;n&&1!==n.nodeType;)n=n.nextSibling;var i=t.createElement("div");if(n){var o=n.nodeName,r=s[o]||s._default;i.innerHTML=r[1]+r[2];for(var a=r[0];a--;)i=i.lastChild;i.appendChild(e)}else i.appendChild(e);return i},e.elementContains=function(e,t){return 1!==e.nodeType?!1:e===t?!1:e.compareDocumentPosition?16&e.compareDocumentPosition(t):(t=t.parentNode,t&&1===t.nodeType?e===t?!0:e.contains(t):!1)},e.findAll=function(t,n){if(11===t.nodeType){for(var o=t,r=e.fragmentToContainer(o),a=i(n,r);r.firstChild;)o.appendChild(r.firstChild);return a}return i(n,t)},e.find=function(t,n){var i=e.findAll(t,n);return i.length?i[0]:null};var p=function(t,n,i){return e.elementContains(t,n)?!1:e.compareElementIndex(n,t)<=0&&e.compareElementIndex(t,i)<=0};e.findAllClipped=function(n,i,o,r){for(;o!==r&&1!==o.nodeType;)o=o.nextSibling;for(;o!==r&&1!==r.nodeType;)r=r.previousSibling;if(1!==o.nodeType)return[];var a=e.findAll(n,i);return t.reject(a,function(e){return!p(e,o,r)})},e.findClipped=function(t,n,i,o){var r=e.findAllClipped(t,n,i,o);return r.length?r[0]:null};var h=function(e,t,n){var i=!1;e.getAttribute("id")||(e.setAttribute("id",t),i=!0);try{var o=e.getAttribute("id").replace(/'/g,"\\$&");return n("[id='"+o+"']")}finally{i&&e.removeAttribute("id")}},g=function(t,n,i,o,r){for(var a=i.split(","),s=0,c=a.length;c>s;s++){var l=h(t,"DomUtils_matchesSelector_target",function(a){var s,c=i.match(/\S.*?(?=\s*$)/)[0],l=c+a;return s=o?e.findClipped(n,l,o,r):e.find(n,l),s===t});if(l)return!0}return!1};e.matchesSelector=function(e,t,n){return g(e,t,n)},e.matchesSelectorClipped=function(e,t,n,i,o){return g(e,t,n,i,o)},e.compareElementIndex=function(e,t){if(e===t)return 0;if(e.compareDocumentPosition){var n=e.compareDocumentPosition(t);return 24&n?0:4&n?-1:1}return e.contains(t)||t.contains(e)?0:e.sourceIndex<t.sourceIndex?-1:1},e.wrapFragmentForContainer=function(e,n){if(n&&"TABLE"===n.nodeName&&t.any(e.childNodes,function(e){return"TR"===e.nodeName})){var i=document.createElement("TBODY");i.appendChild(e),e.appendChild(i)}},e.isInDocument=function(t){return t===document?!0:(1!==t.nodeType&&(t=t.parentNode),t&&1===t.nodeType?t===document.body?!0:e.elementContains(document.body,t):!1)},e.rangeToHtml=function(t,n){for(var i=document.createDocumentFragment(),o=t,r=n.nextSibling;o&&o!==r;o=o.nextSibling)i.appendChild(o.cloneNode(!0));return e.fragmentToHtml(i)},e.outerHtml=function(t){return e.rangeToHtml(t,t)},e.setElementValue=function(t,n){if(t.value=n,t.value!==n&&"SELECT"===t.nodeName)for(var i=e.findAll(t,"option"),o=0;o<i.length;++o)if(e.getElementValue(i[o])===n)return i[o].selected=!0,void 0},e.getElementValue=function(t){if(!a.selectValueMustBeFromAttribute)return t.value;if("OPTION"===t.nodeName){var n=t.attributes.value;return!n||n.specified?t.value:t.text}return"SELECT"===t.nodeName?t.selectedIndex<0?null:e.getElementValue(t.options[t.selectedIndex]):t.value}}).call(this),"undefined"==typeof Package&&(Package={}),Package.domutils={DomUtils:e}}(),function(){{var e;Package.meteor.Meteor}(function(){var t=function(){var e=document.createTextNode("");try{e.test=123}catch(t){}return 123!==e.test?!1:document.documentMode?!1:!0}(),n=function(e,n){if(t)return[e,n];if(3===e.nodeType){var i=document.createComment("IE");e.parentNode.insertBefore(i,e),e=i}if(3===n.nodeType){var i=document.createComment("IE");n.parentNode.insertBefore(i,n.nextSibling),n=i}return[e,n]};e=function(e,t,o,r){if(11===t.nodeType)o=t.lastChild,t=t.firstChild;else if(!t.parentNode)throw new Error("LiveRange start and end must have a parent");o=o||t,this.tag=e;var a=n(t,o);t=this._ensureTag(a[0]),o=this._ensureTag(a[1]);var s=i(t[e][0],!0,o,t,r),c=i(o[e][1],!1,t,o,r);this._insertEntries(t,0,s,[this]),this._insertEntries(o,1,c,[this])};var i=function(e,t,n,i,o){for(var r,a=t?n.parentNode.lastChild:i,s=t?!o:o,c=0,l=a;c<=e.length;c++){for(var u=e[c],d=u&&(t?u._end:u._start);l!==d&&l!==n;)l=l.previousSibling;if(d===n){if(r=c,s)break}else if(l===n){r=c;break}}return r};e.prototype._ensureTag=function(e){return this.tag in e||(e[this.tag]=[[],[]]),e};var o=function(){var e=document.createElement("DIV"),t=!1;try{e.test=12,delete e.test,t=!0}catch(n){}return t}();e._cleanNode=function(e,t,n){var i=t[e];!i||i[0].length+i[1].length&&!n||(o?delete t[e]:t.removeAttribute(e))},e.prototype.destroy=function(t){var n=this;if(t){if(this.visit(function(e,t){e&&(t._start=null,t._end=null)},function(t,i){if(!t)for(var o=i.firstChild;o;o=o.nextSibling)e._cleanNode(n.tag,o,!0)}),this._removeEntries(this._start,0,this._startIndex),this._removeEntries(this._end,1,0,this._endIndex+1),this._start!==this._end){for(var i=this._start.nextSibling;i!==this._end;i=i.nextSibling)e._cleanNode(n.tag,i,!0);this._start[n.tag]&&this._removeEntries(this._start,1),this._end[n.tag]&&this._removeEntries(this._end,0)}this._start=this._end=null}else this._removeEntries(this._start,0,this._startIndex,this._startIndex+1),this._removeEntries(this._end,1,this._endIndex,this._endIndex+1),this._start=this._end=null},e.prototype.firstNode=function(){return this._start},e.prototype.lastNode=function(){return this._end},e.prototype.containerNode=function(){return this._start.parentNode},e.prototype.visit=function(e,t){e=e||function(){},t=t||function(){};var n=this.tag,i=function(o,r,a){for(var s=a||0,c=r.nextSibling,l=o;l&&l!==c;l=l.nextSibling){var u=l[n]&&l[n][0];if(u&&s<u.length){var d=u[s],f=d._start,p=d._end;e(!0,d)!==!1&&i(f,p,s+1),e(!1,d),l=p}else t(!0,l)!==!1&&l.firstChild&&i(l.firstChild,l.lastChild),t(!1,l);s=0}};i(this._start,this._end,this._startIndex+1)},e.prototype._removeEntries=function(t,n,i,o){var r=t[this.tag][n];i=i||0,o=o||0===o?o:r.length;for(var a=r.splice(i,o-i),s=i;s<r.length;s++)n?r[s]._endIndex=s:r[s]._startIndex=s;return r.length||e._cleanNode(this.tag,t),a},e.prototype._insertEntries=function(e,t,n,i){var o=e[this.tag][t];Array.prototype.splice.apply(o,[n,0].concat(i));for(var r=n;r<o.length;r++)t?(o[r]._end=e,o[r]._endIndex=r):(o[r]._start=e,o[r]._startIndex=r)},e.prototype.replaceContents=function(e){if(!e.firstChild)throw new Error("replaceContents requires non-empty fragment");return this.operate(function(t,n){t.parentNode.insertBefore(e,t);for(var i=t.ownerDocument.createDocumentFragment(),o=t;;){var r=o.nextSibling;if(i.appendChild(o),o===n)break;if(o=r,!o)throw new Error("LiveRanges must begin and end on siblings in order")}return i})},e.prototype.operate=function(e){var t=this._start,i=this._end,o=this._removeEntries(t,0,0,this._startIndex+1),r=this._removeEntries(i,1,this._endIndex),a=t.parentNode,s=t.previousSibling,c=i.nextSibling,l=null;l=e(t,i);var u=s?s.nextSibling:a.firstChild,d=c?c.previousSibling:a.lastChild;if(!u||u===c)throw new Error("Ranges must contain at least one element");var f=n(u,d);return u=this._ensureTag(f[0]),d=this._ensureTag(f[1]),this._insertEntries(u,0,0,o),this._insertEntries(d,1,d[this.tag][1].length,r),l},e.transplantTag=function(e,t,n){if(n[e]){t[e]=n[e],n[e]=null;for(var i=t[e][0],o=t[e][1],r=0;r<i.length;r++)i[r]._start=t;for(var r=0;r<o.length;r++)o[r]._end=t}},e.transplantRange=function(e,t,n){n._ensureTag(e),t!==e&&n._ensureTag(t),n._insertEntries(e,0,0,n._start[n.tag][0].slice(0,n._startIndex+1)),n._insertEntries(t,1,0,n._end[n.tag][1].slice(n._endIndex))},e.prototype.insertBefore=function(e){var t=e.firstChild;t&&(this._start.parentNode.insertBefore(e,this._start),this._ensureTag(t),this._insertEntries(t,0,0,this._removeEntries(this._start,0,0,this._startIndex)))},e.prototype.insertAfter=function(e){var t=e.lastChild;t&&(this._end.parentNode.insertBefore(e,this._end.nextSibling),this._ensureTag(t),this._insertEntries(t,1,t[this.tag][1].length,this._removeEntries(this._end,1,this._endIndex+1)))},e.prototype.extract=function(){if(this._startIndex>0&&this._start[this.tag][0][this._startIndex-1]._end===this._end)return null;var e=this._start.previousSibling,t=this._end.nextSibling,n=this._start.parentNode;this._startIndex>0&&(this._ensureTag(t),this._insertEntries(t,0,0,this._removeEntries(this._start,0,0,this._startIndex))),this._endIndex<this._end[this.tag][1].length-1&&(this._ensureTag(e),this._insertEntries(e,1,e[this.tag][1].length,this._removeEntries(this._end,1,this._endIndex+1)));for(var i,o=document.createDocumentFragment();i=e?e.nextSibling:n.firstChild,i&&i!==t;)o.appendChild(i);return o},e.prototype.findParent=function(t){var n=r(this.tag,this._end,this._endIndex);return n?n:t?null:e.findRange(this.tag,this.containerNode())},e.findRange=function(t,n){var i=r(t,n);return i?i:n.parentNode?e.findRange(t,n.parentNode):null};var r=function(e,t,n){if("undefined"==typeof n&&(n=-1),t[e]&&n+1<t[e][1].length)return t[e][1][n+1];for(var i=t.nextSibling;i;){var n=0,o=i[e]&&i[e][0];if(o&&o.length){var r=o[0];i=r._end,n=r._endIndex+1}if(i[e]&&n<i[e][1].length)return i[e][1][n];i=i.nextSibling}return null}}).call(this),"undefined"==typeof Package&&(Package={}),Package.liverange={LiveRange:e}}(),function(){var e,t=(Package.meteor.Meteor,Package.underscore._),n=Package.domutils.DomUtils;(function(){var n,i=[],o=function(){return!1},r=function(){return!0},a=function(e){var t=e.stopPropagation,n=e.preventDefault;e.isPropagationStopped=o,e.isImmediatePropagationStopped=o,e.isDefaultPrevented=o,e.stopPropagation=function(){e.isPropagationStopped=r,t?t.call(e):e.cancelBubble=!0},e.preventDefault=function(){e.isDefaultPrevented=r,n?n.call(e):e.returnValue=!1},e.stopImmediatePropagation=function(){e.stopPropagation(),e.isImmediatePropagationStopped=r};var i=e.type;if(void 0===e.metaKey&&(e.metaKey=e.ctrlKey),/^key/.test(i))null==e.which&&(e.which=null!=e.charCode?e.charCode:e.keyCode);else if(/^(?:mouse|contextmenu)|click/.test(i)&&(!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),!e.which&&void 0!==e.button)){var a=e.button;e.which=1&a?1:2&a?3:4&a?2:0}return e},s=function(e){e=a(e),t.each(i,function(t){t.types[e.type]&&(!t._checkIECompliance||e.currentTarget["_uevents_test_eventtype_"+e.type])&&t.handler.call(null,e)})},c=function(){return n||(n=document.addEventListener?new e._impl.w3c(s):new e._impl.ie(s)),n},l={};e=function(e,t){this.handler=e,this.types={},this.impl=c(),this._checkIECompliance=t,i.push(this)},t.extend(e.prototype,{addType:function(e){this.types[e]||(this.types[e]=!0,l[e]=(l[e]||0)+1,1===l[e]&&this.impl.addType(e))},removeType:function(e){this.types[e]&&(delete this.types[e],l[e]--,l[e]||this.impl.removeType(e))},installHandler:function(e,n){1===e.nodeType&&(this.impl.installHandler(e,n),this._checkIECompliance&&(e["_uevents_test_eventtype_"+n]=e,e.firstChild&&t.each(e.getElementsByTagName("*"),function(e){e["_uevents_test_eventtype_"+n]=e})))},destroy:function(){var e=this;i=t.without(i,e),t.each(t.keys(e.types),function(t){e.removeType(t)})}})}).call(this),function(){var i=0,o=1,r=2;e._impl=e._impl||{},e._impl.w3c=function(e){this.deliver=e,this.typeCounts={},this.boundHandler=t.bind(this.handler,this),this.boundCapturer=t.bind(this.capturer,this),this.focusBlurMode="onfocusin"in document.createElement("DIV")?i:r,this.simulateMouseEnterLeave=!window.opera},t.extend(e._impl.w3c.prototype,{addType:function(e){this._listen(this._expandEventType(e))},removeType:function(e){this._unlisten(this._expandEventType(e))},installHandler:function(){},_expandEventType:function(e){var t=[e];return this.focusBlurMode===o?"focus"===e?t.push("focusin"):"blur"===e&&t.push("focusout"):this.focusBlurMode===r&&("focusin"===e?t.push("focus"):"focusout"===e&&t.push("blur")),this.simulateMouseEnterLeave&&("mouseenter"===e?t.push("mouseover"):"mouseleave"===e&&t.push("mouseout")),"tap"===e&&(t.push("touchmove"),t.push("touchend")),t},_listen:function(e){var n=this;t.each(e,function(e){1===(n.typeCounts[e]=(n.typeCounts[e]||0)+1)&&document.addEventListener(e,n.boundCapturer,!0)})},_unlisten:function(e){var n=this;t.each(e,function(e){--n.typeCounts[e]||document.removeEventListener(e,n.boundCapturer,!0)})},capturer:function(e){3===e.target.nodeType&&(e.target=e.target.parentNode);var n=e.type,i=e.bubbles,o=e.target;o.addEventListener(n,this.boundHandler,!1);var r;if(i){r=[];for(var a=o.parentNode;a;a=a.parentNode)a.addEventListener(n,this.boundHandler,!1),r.push(a)}setTimeout(function(){o.removeEventListener(n,this.boundHandler,!1),i&&t.each(r,function(e){e.removeEventListener(n,this.boundHandler,!1)})},0)},handler:function(e){var t=function(e,t,n,i,o){var r=document.createEvent("UIEvents");r.initUIEvent(e,n,i,window,o),r.synthetic=!0,t.dispatchEvent(r)};if(e.currentTarget===e.target&&(this.focusBlurMode===o?"focusin"===e.type?t("focus",e.target,!1):"focusout"===e.type&&t("blur",e.target,!1):this.focusBlurMode===r&&("focus"===e.type?t("focusin",e.target,!0):"blur"===e.type&&t("focusout",e.target,!0))),this.focusBlurMode===o){if(("focus"===e.type||"blur"===e.type)&&!e.synthetic)return}else if(this.focusBlurMode===r&&("focusin"===e.type||"focusout"===e.type)&&!e.synthetic)return;(!this.simulateMouseEnterLeave||"mouseenter"!==e.type&&"mouseleave"!==e.type||e.synthetic)&&(this.deliver(e),!this.simulateMouseEnterLeave||e.relatedTarget&&(e.currentTarget===e.relatedTarget||n.elementContains(e.currentTarget,e.relatedTarget))||("mouseover"===e.type?t("mouseenter",e.currentTarget,!1):"mouseout"===e.type&&t("mouseleave",e.currentTarget,!1)),"touchmove"===e.type&&(e.currentTarget._notTapping=!0),"touchend"===e.type&&(e.currentTarget._notTapping||t("tap",e.currentTarget,!0),delete e.currentTarget._notTapping))}})}.call(this),function(){e._impl=e._impl||{},e._impl.ie=function(e){var t=this;this.deliver=e,this.curriedHandler=function(){t.handler.call(this,t)},document.attachEvent("ondatasetcomplete",function(){var e=window.event,t=e&&e.srcElement;e.synthetic&&t&&"FORM"===t.nodeName&&e.returnValue!==!1&&t.submit()})},t.extend(e._impl.ie.prototype,{addType:function(){},removeType:function(){},installHandler:function(e,t){var n="on"+t;if(1===e.nodeType){this._install(e,n);for(var i=e.getElementsByTagName("*"),o=0,r=i.length;r>o;o++)this._install(i[o],n)}},_install:function(e,t){var n=[t];"onfocus"===t?n.push("onfocusin"):"onblur"===t?n.push("onfocusout"):"onchange"===t?("INPUT"!==e.nodeName||"checkbox"!==e.type&&"radio"!==e.type||(n=["onpropertychange"]),n.push("oncellchange")):"onsubmit"===t&&n.push("ondatasetcomplete");for(var i=0;i<n.length;i++)e[n[i]]=this.curriedHandler},handler:function(e){var t=function(e,t){var n=document.createEventObject();return n.synthetic=!0,t.fireEvent(e,n),n.returnValue},n=window.event,i=n.type,o=n.srcElement||document;if(n.target=o,1===this.nodeType){n.currentTarget=this;var r=this;if(r!==o||n.synthetic||("focusin"===i?t("onfocus",r):"focusout"===i?t("onblur",r):"change"===i?t("oncellchange",r):"propertychange"===i?"checked"===n.propertyName&&t("oncellchange",r):"submit"===i&&t("ondatasetcomplete",r)),("focus"===i||"blur"===n.type||"change"===n.type||"submit"===n.type)&&!n.synthetic)return"submit"===n.type&&(n.returnValue=!1),void 0;"cellchange"===i&&n.synthetic&&(i=n.type="change"),"datasetcomplete"===i&&n.synthetic&&(i=n.type="submit"),e.deliver(n)}}})}.call(this),"undefined"==typeof Package&&(Package={}),Package["universal-events"]={UniversalEventListener:e}}(),function(){var e,t,n,i,o,r,a,s=Package.meteor.Meteor,c=Package.underscore._,l=Package.random.Random,u=Package.domutils.DomUtils,d=Package.liverange.LiveRange,f=Package["universal-events"].UniversalEventListener,p=Package["ordered-dict"].OrderedDict,h=Package.deps.Deps,g=Package.ejson.EJSON;(function(){e={},t={};var a=function(){var e=null;return{get:function(){return e},withValue:function(t,n){var i=e;e=t;try{return n()}finally{e=i}}}}();n="_spark_"+l.id(),t.TAG=n,e._TAG=n;var s="data",m="isolate",v="events",y="watch",b="label",_="landmark",w="list",k="item",T=!1;t.setCheckIECompliance=function(e){T=e};var S={};e._addGlobalPreserve=function(e,t){S[e]=t};var x=function(e,t,i,o){var r=new d(n,t,i,o);return r.type=e,r},E=function(e,t){for(var i=d.findRange(n,t);i&&i.type!==e;)i=i.findParent();return i},C=function(e,t){do t=t.findParent();while(t&&t.type!==e);return t},P=function(e,t){for(var i=new d(n,e,t,!0),o=i;o;o=o.findParent())o.type===y&&o.notify();i.destroy()},D=!1,O=function(e){var t=D;D=!0;try{return e()}finally{D=t}};i=function(){this.annotations={},this._branchNotes={},this.currentBranch=this.newLabelStack(),this.landmarkRanges=[],this.pc=new A},c.extend(i.prototype,{annotate:function(e,t,n){if("function"!=typeof n){var i=n;n=function(e){e&&c.extend(e,i)}}var o=(t||"")+":"+l.id();return this.annotations[o]=function(e,i){if(!e||!t)return n(null),void 0;var o=x(t,e,i);n(o)},"<$"+o+">"+e+"</$"+o+">"},newLabelStack:function(){var e=[this._branchNotes];return{pushLabel:function(t){var n=e[e.length-1],i="_"+t;e.push(n[i]=n[i]||{})},popLabel:function(){e.pop()},getNotes:function(){var t=e[e.length-1];return t},mark:function(t){for(var n=e.length-1;n>=0&&!e[n][t];n--)e[n][t]=!0}}},materialize:function(e){var t=this,n=a.withValue(t,e);n=t.annotate(n);var i,o={},r=function(e){for(var t=e.firstChild;t;){var n=t.nextSibling;if(8===t.nodeType){var i=o[t.nodeValue];if(i===!1)throw new Error("Spark HTML fragments may only be used once. Second use in "+u.fragmentToHtml(e));i&&(o[t.nodeValue]=!1,u.wrapFragmentForContainer(i,t.parentNode),t.parentNode.replaceChild(i,t))}else 1===t.nodeType&&r(t);t=n}},s=[[]],l=[],d=/<(\/?)\$([^<>]+)>|<|[^<]+/g;d.lastIndex=0;for(var f;f=d.exec(n);){var p=!f[1],h=f[2],g=t.annotations[h];if(g===!1)throw new Error("Spark HTML fragments may be used only once. Second use of: "+u.fragmentToHtml(o[h]));if(g)if(p)l.push(h),s.push([]);else{var m=l.pop();if(m!==h)throw new Error("Range mismatch: "+m+" / "+h);var v=u.htmlToFragment(s.pop().join(""));if(r(v),v.firstChild||v.appendChild(document.createComment("empty")),g(v.firstChild,v.lastChild),t.annotations[h]=!1,!l.length){i=v;break}o[h]=v,s[s.length-1].push("<!--"+h+"-->")}else s[s.length-1].push(f[0])}return I(i,t.landmarkRanges),t.landmarkRanges=[],c.each(t.annotations,function(e){e&&e()}),t.annotations={},c.each(u.findAll(i,"[value], textarea, select"),function(e){e._sparkOriginalRenderedValue=[u.getElementValue(e)]}),c.each(u.findAll(i,"input[type=checkbox], input[type=radio]"),function(e){e._sparkOriginalRenderedChecked=[!!e.checked]}),i}});var M=function(e){return function(){var t=a.get(),n=c.toArray(arguments);return t?(n.push(t),e.apply(null,n)):n.pop()}},I=function(t,i){var o=new d(n,t),r=!1;o.finalize=function(){r=!0},h.afterFlush(function(){if(!r){if(!u.isInDocument(o.firstNode())){for(var t=o.firstNode();t.parentNode;)t=t.parentNode;if(!t._protect)return e.finalize(t),void 0}c.each(i,function(e){e.isPreservedConstant||e.rendered.call(e.landmark)});for(var n=o;n=C(_,n);)n.rendered.call(n.landmark);P(o.firstNode(),o.lastNode()),o.destroy()}})};e.render=function(e){var t=new i,n=t.materialize(e);return n};var A=function(){this.roots=[],this.regionPreservations=[]};c.extend(A.prototype,{addRoot:function(e,t,n,i){var o=this;o.roots.push({context:i,preserve:e,fromRange:t,toRange:n})},addConstantRegion:function(e,t){var n=this;n.regionPreservations.push({type:"region",fromStart:e.firstNode(),fromEnd:e.lastNode(),newRange:t})},computePreservations:function(e,t){var i=this,o=c.clone(i.regionPreservations),r=function(e,t,n,i,o){e=e||t.containerNode();var r=u.findAllClipped(e,i,t.firstNode(),t.lastNode());c.each(r,function(e){var t=n(e);t&&o(e,t)})};c.each(i.roots,function(e){e.fromNodesByLabel={},c.each(e.preserve,function(t,n){e.fromNodesByLabel[n]={},r(e.context,e.fromRange,t,n,function(t,i){e.fromNodesByLabel[n][i]=t})})});var a=new d(n,t.firstNode(),t.lastNode()),s=document.createDocumentFragment();s.appendChild(document.createComment(""));var l=a.replaceContents(s),f=new d(n,l);e.insertBefore(l),c.each(i.roots,function(e){c.each(e.preserve,function(t,n){r(e.context,e.toRange,t,n,function(t,i){var r=e.fromNodesByLabel[n][i];r&&(o.push({type:"node",from:r,to:t}),e.fromNodesByLabel[n][i]=null)})})});var p=f.extract();return f.destroy(),a.replaceContents(p),a.destroy(),o}});e.renderToRange=function(t,o){var a=t.firstNode();if(a&&a.parentNode){var s=new i,l=function(e,t){var n=s.newLabelStack();e.visit(function(e,i){i.type===b?e?n.pushLabel(i.label):n.popLabel():i.type===_&&e&&t(i,n.getNotes())})};l(t,function(e,t){t.originalRange=e});var f=u.findAllClipped(t.containerNode(),"input[type=radio]",t.firstNode(),t.lastNode());c.each(f,function(e){e._currentChecked=[!!e.checked]});var p=s.materialize(o);u.wrapFragmentForContainer(p,t.containerNode());var h=new d(n,p),g=s.pc;l(h,function(e,t){t.originalRange&&(e.constant&&g.addConstantRegion(t.originalRange,e),g.addRoot(e.preserve,t.originalRange,e))});for(var m=t;(m=m.findParent())&&m.firstNode().parentNode;)m.type===_,m&&g.addRoot(m.preserve,t,h,m.containerNode());g.addRoot(S,t,h);var v=g.computePreservations(t,h);h.destroy();var y={};O(function(){t.operate(function(t,n){e.finalize(t,n),r(t.parentNode,p,t.previousSibling,n.nextSibling,v,y)})}),c.each(y.regionPreservations,function(e){e.isPreservedConstant=!0})}},e.finalize=function(e,t){if(!e.parentNode&&11!==e.nodeType){var i=document.createDocumentFragment();i.appendChild(e),e=i,t=null}var o=new d(n,e,t);o.visit(function(e,t){e&&t.finalize&&t.finalize()}),o.destroy(!0)},e.setDataContext=M(function(e,t,n){return n.annotate(t,s,{data:e})}),e.getDataContext=function(e){var t=E(s,e);return t&&t.data};var N=null,$=function(){return N||(N=new f(function(e){if(!D){for(var t=[],n=E(v,e.currentTarget);n;)t.push(n),n=C(v,n);c.each(t,function(t){t.handler(e)})}},T)),N};e.attachEvents=M(function(t,n,i){var o=$(),r={};c.each(t,function(e,t){"function"==typeof e&&(e=[e]);var n=t.split(/,\s+/);c.each(n,function(t){var n=t.split(/\s+/);if(0!==n.length){var i=n.shift(),o=n.join(" ");r[i]=r[i]||[],c.each(e,function(e){r[i].push({selector:o,callback:e})})}})});var a=c.keys(r),s=function(e){c.each(a,function(t){for(var n=e.firstNode(),i=e.lastNode().nextSibling;n&&n!==i;n=n.nextSibling)o.installHandler(n,t)})};n=i.annotate(n,y,{notify:function(){s(this)}});var l=!1;return n=i.annotate(n,v,function(t){t&&(c.each(a,function(e){o.addType(e)}),s(t),t.finalize=function(){l=!0},t.handler=function(n){for(var i=r[n.type]||[],o=0;o<i.length;o++){if(l||n.isImmediatePropagationStopped())return;var a=i[o],s=a.callback,c=a.selector;if(c){if(!u.matchesSelectorClipped(n.currentTarget,t.containerNode(),c,t.firstNode(),t.lastNode()))continue}else if(n.currentTarget!==n.target)continue;var d=e.getDataContext(n.currentTarget)||{},f=C(_,t),p=f&&f.landmark,h=s.call(d,n,p);h===!1&&(n.stopImmediatePropagation(),n.preventDefault())}})})}),e.isolate=function(t){var n=a.get();if(!n)return t();var i,o,r=!0;return h.autorun(function(a){r?(o=n.annotate(t(),m,function(e){e?(i=e,i.finalize=function(){a.stop()}):a.stop()}),r=!1):e.renderToRange(i,t)}),o};var F=function(e,t){c.each(t,function(t,n){void 0===t?delete e[n]:e[n]=t})};o=Package.minimongo?Package.minimongo.LocalCollection._idStringify:function(e){return e},e.list=function(t,n,i){i=i||function(){return""};var r={},s={};c.each(["addedBefore","removed","movedBefore","changed"],function(e){s[e]=function(){return r[e].apply(null,arguments)}});var l=new p(o);c.extend(r,{addedBefore:function(e,t,n){var i=g.clone(t);i._id=e;var o={doc:i,liveRange:null};l.putBefore(e,o,n)}});var d,f=t.observeChanges(s),m=a.get(),v=m?c.bind(m.annotate,m):function(e){return e},y=function(e){return t.getTransform&&t.getTransform()?t.getTransform()(g.clone(e)):e},b="";l.empty()?b=i():l.forEach(function(e){b+=v(n(y(e.doc)),k,function(t){e.liveRange=t})});var T=!1,S=function(){f.stop(),T=!0};b=v(b,w,function(e){e?(d=e,d.finalize=S):S()}),m||S();var E=function(){for(var e=d;e=C(_,e);)e.rendered.call(e.landmark)},P=function(e){h.afterFlush(function(){T||O(e)})};return c.extend(r,{addedBefore:function(t,i,o){P(function(){var r=g.clone(i);r._id=t;var a=e.render(c.bind(n,null,y(r)));u.wrapFragmentForContainer(a,d.containerNode());var s=x(k,a);l.empty()?e.finalize(d.replaceContents(a)):null===o?l.lastValue().liveRange.insertAfter(a):l.get(o).liveRange.insertBefore(a),l.putBefore(t,{doc:r,liveRange:s},o)})},removed:function(t){P(function(){if(l.first()===l.last()){var n=e.render(i);u.wrapFragmentForContainer(n,d.containerNode()),e.finalize(d.replaceContents(n))}else e.finalize(l.get(t).liveRange.extract());l.remove(t),E()})},movedBefore:function(e,t){P(function(){var n=l.get(e).liveRange.extract();null===t?l.lastValue().liveRange.insertAfter(n):l.get(t).liveRange.insertBefore(n),l.moveBefore(e,t),E()})},changed:function(t,i){P(function(){var o=l.get(t);if(!o)throw new Error("Unknown id for changed: "+t);F(o.doc,i),e.renderToRange(o.liveRange,c.bind(n,null,y(o.doc)))})}}),b};var B=1;e.Landmark=function(){this.id=B++,this._range=null},c.extend(e.Landmark.prototype,{firstNode:function(){return this._range.firstNode()},lastNode:function(){return this._range.lastNode()},find:function(e){var t=this._range;return u.findClipped(t.containerNode(),e,t.firstNode(),t.lastNode())},findAll:function(e){var t=this._range;return u.findAllClipped(t.containerNode(),e,t.firstNode(),t.lastNode())},hasDom:function(){return!!this._range}}),e.UNIQUE_LABEL=["UNIQUE_LABEL"],e.labelBranch=function(t,n){var i=a.get();if(!i||null===t)return n();t===e.UNIQUE_LABEL&&(t=l.id()),i.currentBranch.pushLabel(t);var o=n(),r=i.currentBranch.getNotes().occupied;return i.currentBranch.popLabel(),r?i.annotate(o,b,{label:t}):o},e.createLandmark=function(t,n){var i=a.get();if(!i){var o=new e.Landmark;t.created&&t.created.call(o);var r=n(o);return t.destroyed&&t.destroyed.call(o),r}var s={};c.isArray(t.preserve)?c.each(t.preserve,function(e){s[e]=!0}):s=t.preserve||{};for(var l in s)"function"!=typeof s[l]&&(s[l]=function(){return!0});i.currentBranch.mark("occupied");var o,u=i.currentBranch.getNotes();if(u.originalRange){if(u.originalRange.superceded)throw new Error("Can't create second landmark in same branch");u.originalRange.superceded=!0,o=u.originalRange.landmark}else o=new e.Landmark,t.created&&h.nonreactive(function(){t.created.call(o)});u.landmark=o;var r=n(o);return i.annotate(r,_,function(e){return e?(c.extend(e,{preserve:s,constant:!!t.constant,rendered:t.rendered||function(){},destroyed:t.destroyed||function(){},landmark:o,finalize:function(){this.superceded||(this.landmark._range=null,this.destroyed.call(this.landmark))}}),o._range=e,i.landmarkRanges.push(e),i=null,void 0):(t.destroyed&&t.destroyed.call(o),void 0)})},t.getEnclosingLandmark=function(e){var t=E(_,e);return t?t.landmark:null}}).call(this),function(){r=function(e,t,i,o,s,l){var f=function(e,t){d.transplantTag(n,e,t)},p=new a(e,t,i,o),h=function(e,t,n,i){for(var o=t?t.nextSibling:e.firstChild;o&&o!==n;o=o.nextSibling)i(o)!==!1&&o.firstChild&&h(o,null,null,i)};l=l||{};var g=l.regionPreservations=l.regionPreservations||[],m=null;return h(t,null,null,function(e){var t=c.find(s,function(t){return"region"===t.type&&t.newRange.firstNode()===e})||c.find(s,function(t){return"node"===t.type&&t.to===e});if(t){var n="region"===t.type?t.fromStart:t.from;if(!m||u.compareElementIndex(m,n)<0)if("region"===t.type)p.match(t.fromStart,t.newRange.firstNode(),f,!0)&&(p.skipToSiblings(t.fromEnd,t.newRange.lastNode()),d.transplantRange(t.fromStart,t.fromEnd,t.newRange),g.push(t.newRange));else if("node"===t.type&&p.match(n,e,f))return m=n,(n.firstChild||e.firstChild)&&"TEXTAREA"!==n.nodeName&&"SELECT"!==n.nodeName&&r(n,e,null,null,s),!1}return!0}),p.finish(),l},a=function(e,t,n,i){this.tgtParent=e,this.srcParent=t,this.tgtBefore=n,this.tgtAfter=i,this.lastKeptTgtNode=null,this.lastKeptSrcNode=null},a.prototype.match=function(e,t,n,i){var o=this.lastKeptTgtNode,r=this.lastKeptSrcNode,s=e,c=t;if(!s!=!c)return!1;var l=!o,d=!s;if(!l){for(;!(o.parentNode===this.tgtParent||s&&u.elementContains(o.parentNode,s));)this._replaceNodes(o,null,r,null),o=o.parentNode,r=r.parentNode;if(this.lastKeptTgtNode=o,this.lastKeptSrcNode=r,!d&&(u.elementContains(r,c)||r.parentNode!==this.srcParent&&!u.elementContains(r.parentNode,c)))return!1}if(d)this._replaceNodes(o,null,r,null,this.tgtParent,this.srcParent);else{if(!i&&s.nodeName!==c.nodeName)return!1;for(var f=s.parentNode,p=c.parentNode;f!==(l?this.tgtParent:o.parentNode);f=f.parentNode,p=p.parentNode){if(p===(l?this.srcParent:r.parentNode))return!1;if(f.nodeName!==p.nodeName)return!1}if(p!==(l?this.srcParent:r.parentNode))return!1;for(var h=!0;;){if(h&&i||(1===s.nodeType&&a._copyAttributes(s,c),n&&n(s,c)),h=!1,(l?this.tgtParent:o.parentNode)===s.parentNode){this._replaceNodes(o,s,r,c);break}this._replaceNodes(null,s,null,c),s=s.parentNode,c=c.parentNode}}return this.lastKeptTgtNode=e,this.lastKeptSrcNode=t,!0},a.prototype.skipToSiblings=function(e,t){var n=this.lastKeptTgtNode,i=this.lastKeptSrcNode;return n&&n.parentNode===e.parentNode?i&&i.parentNode===t.parentNode?(this.lastKeptTgtNode=e,this.lastKeptSrcNode=t,!0):!1:!1},a.prototype.finish=function(){return this.match(null,null)
},a.prototype._replaceNodes=function(e,t,n,i,o,r){var a=o||(e||t).parentNode,s=r||(n||i).parentNode;a===this.tgtParent&&(e=e||this.tgtBefore,t=t||this.tgtAfter),s===this.srcParent&&(n=n||this.srcBefore,i=i||this.srcAfter);for(var c;(c=e?e.nextSibling:a.firstChild)&&c!==t;)a.removeChild(c);for(var l;(l=n?n.nextSibling:s.firstChild)&&l!==i;)a.insertBefore(l,t||null)},a._copyAttributes=function(e,t){var n=t.attributes,i=e.attributes,o=e===document.activeElement;e.style.cssText&&(e.style.cssText="");var r=!1,a=null;if("INPUT"===e.nodeName&&(r="radio"===e.type,r||"checkbox"===e.type)){var s=!!e._sparkOriginalRenderedChecked&&e._sparkOriginalRenderedChecked[0],c=!!t._sparkOriginalRenderedChecked&&t._sparkOriginalRenderedChecked[0],l=e._currentChecked?e._currentChecked[0]:e.checked;s===c?a=l:(a=c,e._sparkOriginalRenderedChecked=[a])}for(var d=i.length-1;d>=0;d--){var f=i[d];if(f.specified){var p=f.name;if(i[p]&&"id"!==p&&"type"!==p&&(!r||"name"!==p)&&"value"!==p&&"src"!==p){var h=e[p];(!h||"object"!=typeof h&&!/^jQuery/.test(p))&&e.removeAttributeNode(f)}}}if(e.mergeAttributes){var g=t._sparkOriginalRenderedValue;t.removeAttribute("_sparkOriginalRenderedValue"),e.mergeAttributes(t),g&&(t._sparkOriginalRenderedValue=g),t.name&&(e.name=t.name)}else for(var d=0,m=n.length;m>d;d++){var v=n.item(d);if(v.specified){var p=v.name.toLowerCase(),y=String(v.value);if("type"===p);else if("checked"===p);else if("style"===p)e.style.cssText=t.style.cssText;else if("class"===p)e.className=t.className;else if("value"===p);else if("src"===p)t.src!==e.src&&(e.src=t.src);else try{e.setAttribute(p,y)}catch(b){throw new Error("Error copying attribute '"+p+"': "+b)}}}var _=function(e){return e._sparkOriginalRenderedValue?e._sparkOriginalRenderedValue[0]:null},w=_(t),k=_(e),T=u.getElementValue(e);if("SELECT"===e.nodeName){for(;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.insertBefore(t.firstChild,null);u.setElementValue(e,T)}w===k||T!==w&&o||(T!==w&&u.setElementValue(e,w),e._sparkOriginalRenderedValue=[w]),null!==a&&(e.checked!==a&&(e.checked=a),e.defaultChecked=a,a?e.setAttribute("checked","checked"):e.removeAttribute("checked"))},t.Patcher=a}.call(this),function(){s.render=function(t){return e.render(function(){return e.isolate("function"==typeof t?t:function(){return String(t)})})},s.renderList=function(t,n,i){return e.render(function(){return e.list(t,function(t){var i=t._id?o(t._id):null;return e.labelBranch(i,function(){return e.isolate(c.bind(n,null,t))})},function(){return i?e.isolate(i):""})})}}.call(this),function(){e._labelFromIdOrName=function(e){var t=null;if(1===e.nodeType)if(e.getAttribute("id"))t="#"+e.getAttribute("id");else if(e.getAttribute("name"))for(t=e.getAttribute("name"),"INPUT"!==e.nodeName||"radio"!==e.type&&"checkbox"!==e.type||!e.value||(t=t+":"+e.value);e.parentNode&&1===e.parentNode.nodeType;){if(e=e.parentNode,e.id){t="#"+e.id+"/"+t;break}e.getAttribute("name")&&(t=e.getAttribute("name")+"/"+t)}return t}}.call(this),"undefined"==typeof Package&&(Package={}),Package.spark={Spark:e,SparkTest:t}}(),function(){var e,t=(Package.meteor.Meteor,Package.underscore._),n=Package.spark.Spark;(function(){e={},e.json_ast_to_func=function(t){return function(n,i){return e.evaluate(t,n,i)}};var i=Package.minimongo?Package.minimongo.LocalCollection._idStringify:function(e){return e};e._default_helpers={"with":function(e,t){return!e||e instanceof Array&&!e.length?t.inverse(this):t.fn(e)},each:function(e,o){var r=this;return e&&e.length>0?t.map(e,function(e){var t=e&&e._id&&i(e._id)||("string"==typeof e?e:null)||n.UNIQUE_LABEL;return n.labelBranch(t,function(){return o.fn(e)})}).join(""):n.labelBranch("else",function(){return o.inverse(r)})},"if":function(e,t){return!e||e instanceof Array&&!e.length?t.inverse(this):t.fn(this)},unless:function(e,t){return!e||e instanceof Array&&!e.length?t.fn(this):t.inverse(this)}},e.registerHelper=function(t,n){if(t in e._default_helpers)throw new Error("There is already a helper '"+t+"'");e._default_helpers[t]=n},e._escape=function(){var e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","&":"&amp;"},t=function(t){return e[t]};return function(e){return e.replace(/[&<>"'`]/g,t)}}(),e._defaultThis=function(){return this}(),e.evaluate=function(i,o,r){r=r||{};var a=t.extend({},e._default_helpers);t.extend(a,r.helpers||{});var s=r.partials||{},c=function(e,n){if("object"!=typeof n)return n;for(var i=0;i<n[0];i++){if(!e.parent)throw new Error("Too many '..' segments");e=e.parent}if(1===n.length)return e.data;var o=!1;""===n[1]&&(n=n.slice(),n.splice(1,1),o=!0);var r,s=e.data;if(0===n[0]&&a.hasOwnProperty(n[1])&&!o)r=a[n[1]];else{if(!r instanceof Object&&"undefined"!=typeof function(){}[n[1]]&&!o)throw new Error("Can't call a helper '"+n[1]+"' because it is a built-in function property in JavaScript");r=e.data&&e.data[n[1]]}for(var i=2;i<n.length;i++){if("function"==typeof r&&(r=r.call(s),s=r),void 0===r||null===r){r="";break}r=r[n[i]]}return"function"==typeof r?t.bind(r,s):r},l=function(e,n,i,o){i=i||{},n=n.slice(0);var r=n[n.length-1],a={};"object"!=typeof r||r instanceof Array||t.each(n.pop(),function(t,n){var i=c(e,t);a[n]="function"==typeof i?i():i});for(var s=function(t,n){for(var i=t.slice(1),o=0;o<i.length;o++)"function"==typeof i[o]&&(i[o]=i[o]());return n&&i.push(n),t[0].apply(e.data,i)},l=new Array(n.length),u=0;u<n.length;u++)l[u]=c(e,n[u]);if("function"!=typeof l[0])return l[0];if(o&&l.length>1){var d=l[1];"function"==typeof d&&(d=s(l.slice(1),{hash:a})),l=[l[0],d],i.hash={}}else i.hash=a;return s(l,i)},u=function(i,o,r){var a,c=[],d=function(e){return"string"==typeof e?e:null===e?"null":void 0===e?"":e.toString()},f=function(t,i){return function(o){return(o||e._defaultThis)===(i||e._defaultThis)?t(o):n.setDataContext(o,t(o))}},p=function(t){return t instanceof e.SafeString?t.toString():e._escape(d(t))},h=function(){return(r?r+".":"")+a},g=function(e,t){return n.labelBranch(e+"@"+h(),t)};return t.each(o,function(e,t){if(a=t,"string"==typeof e)c.push(e);else if("{"===e[0])c.push(g(e[1],function(){return p(l(i,e[1]))}));else if("!"===e[0])c.push(g(e[1],function(){return d(l(i,e[1]||""))}));else if("#"===e[0]){var n=h(),o=f(function(t){return u({parent:i,data:t},e[2],n)},i.data);o.fn=o,o.inverse=f(function(t){return u({parent:i,data:t},e[3]||[],n)},i.data);var r=g(e[1],function(){return d(l(i,e[1],o,!0))});c.push(r)}else{if(">"!==e[0])throw new Error("bad element in template");var m=e[1];if(!(m in s))throw new Error("No such template '"+m+"'");var r=g(m,function(){return d(s[m](i.data))});c.push(r)}}),c.join("")},d=(r.name||"")+"#";return u({data:o,parent:null},i,d)},e.SafeString=function(e){this.string=e},e.SafeString.prototype.toString=function(){return this.string.toString()}}).call(this),"undefined"==typeof Package&&(Package={}),Package.handlebars={Handlebars:e}}(),function(){var e,t,n,i,o,r,a,s,c,l,u,d=Package.meteor.Meteor,f=Package.underscore._,p=Package.deps.Deps,h=Package.random.Random,g=Package.livedata.DDP;(function(){e={},e._options={};var o=90,r=3600;t=6e5,n=1e4,e.config=function(t){d.isServer?__meteor_runtime_config__.accountsConfigCalled=!0:__meteor_runtime_config__.accountsConfigCalled||d._debug("Accounts.config was called on the client but not on the server; some configuration options may not take effect.");var n=["sendVerificationEmail","forbidClientAccountCreation","restrictCreationByEmailDomain","loginExpirationInDays"];f.each(f.keys(t),function(e){if(!f.contains(n,e))throw new Error("Accounts.config: Invalid key: "+e)}),f.each(n,function(n){if(n in t){if(n in e._options)throw new Error("Can't set `"+n+"` more than once");e._options[n]=t[n]}}),d.isServer&&maybeStopExpireTokensInterval()},d.isClient&&(e.connection=d.connection,"undefined"!=typeof __meteor_runtime_config__&&__meteor_runtime_config__.ACCOUNTS_CONNECTION_URL&&(e.connection=g.connect(__meteor_runtime_config__.ACCOUNTS_CONNECTION_URL))),d.users=new d.Collection("users",{_preventAutopublish:!0,connection:d.isClient?e.connection:d.connection}),d.startup(function(){var t=Package["service-configuration"].ServiceConfiguration;e.loginServiceConfiguration=t.configurations,e.ConfigError=t.ConfigError}),e.LoginCancelledError=function(e){this.message=e},e.LoginCancelledError.numericError=145546287,e.LoginCancelledError.prototype=new Error,e.LoginCancelledError.prototype.name="Accounts.LoginCancelledError",i=function(){return 24*(e._options.loginExpirationInDays||o)*60*60*1e3},e._tokenExpiration=function(e){return new Date(new Date(e).getTime()+i())},e._tokenExpiresSoon=function(e){var t=.1*i(),n=1e3*r;return t>n&&(t=n),new Date>new Date(e)-t}}).call(this),function(){o=!0;var t;t=window.location.hash.match(/^\#\/reset-password\/(.*)$/),t&&(o=!1,e._resetPasswordToken=t[1],window.location.hash=""),t=window.location.hash.match(/^\#\/verify-email\/(.*)$/),t&&(o=!1,e._verifyEmailToken=t[1],window.location.hash=""),t=window.location.hash.match(/^\#\/enroll-account\/(.*)$/),t&&(o=!1,e._enrollAccountToken=t[1],window.location.hash="")}.call(this),function(){d.userId=function(){return e.connection.userId()};var t=!1,n=new p.Dependency;e._setLoggingIn=function(e){t!==e&&(t=e,n.changed())},d.loggingIn=function(){return n.depend(),t},d.user=function(){var e=d.userId();return e?d.users.findOne(e):null},e.callLoginMethod=function(t){t=f.extend({methodName:"login",methodArguments:[],_suppressLoggingIn:!1},t),f.each(["validateResult","userCallback"],function(e){t[e]||(t[e]=function(){})});var n=f.once(t.userCallback),i=!1,o=function(t,o){e.connection.onReconnect=!t&&o&&o.token?function(){i=!0;var t=l();t&&(o={token:t,tokenExpires:u()}),o.tokenExpires||(o.tokenExpires=e._tokenExpiration(new Date)),e._tokenExpiresSoon(o.tokenExpires)?r():e.callLoginMethod({methodArguments:[{resume:o.token}],_suppressLoggingIn:!0,userCallback:function(e){var t=l();e&&t&&t===o.token&&r(),n(e)}})}:null},s=function(o,r){if(!i){if(e._setLoggingIn(!1),o||!r)return o=o||new Error("No result from call to "+t.methodName),n(o),void 0;try{t.validateResult(r)}catch(s){return n(s),void 0}a(r.id,r.token,r.tokenExpires),n()}};t._suppressLoggingIn||e._setLoggingIn(!0),e.connection.apply(t.methodName,t.methodArguments,{wait:!0,onResultReceived:o},s)},r=function(){c(),e.connection.setUserId(null),e.connection.onReconnect=null},a=function(t,n,i){s(t,n,i),e.connection.setUserId(t)},d.logout=function(t){e.connection.apply("logout",[],{wait:!0},function(e){e?t&&t(e):(r(),t&&t())})},d.logoutOtherClients=function(t){e.connection.apply("logoutOtherClients",[],{wait:!0},function(e,n){if(e)t&&t(e);else{var i=d.userId();s(i,n.token,n.tokenExpires),d.loginWithToken(n.token,function(e){e&&l()&&l().token===n.token&&r(),t&&t(e)})}})};var i=e.connection.subscribe("meteor.loginServiceConfiguration");e.loginServicesConfigured=function(){return i.ready()},Package.handlebars&&(Package.handlebars.Handlebars.registerHelper("currentUser",function(){return d.user()}),Package.handlebars.Handlebars.registerHelper("loggingIn",function(){return d.loggingIn()}))}.call(this),function(){var t;d.loginWithToken=function(t,n){e.callLoginMethod({methodArguments:[{resume:t}],userCallback:n})},e._enableAutoLogin=function(){o=!0,v()};var n="Meteor.loginToken",i="Meteor.loginTokenExpires",a="Meteor.userId";e._isolateLoginTokenForTest=function(){n+=h.id(),a+=h.id()},s=function(o,r,s){d._localStorage.setItem(a,o),d._localStorage.setItem(n,r),s||(s=e._tokenExpiration(new Date)),d._localStorage.setItem(i,s),t=r},c=function(){d._localStorage.removeItem(a),d._localStorage.removeItem(n),d._localStorage.removeItem(i),t=null},l=e._storedLoginToken=function(){return d._localStorage.getItem(n)},u=function(){return d._localStorage.getItem(i)};var f=function(){return d._localStorage.getItem(a)},p=function(){var t=d._localStorage.getItem(i);t&&e._tokenExpiresSoon(new Date(t))&&c()};if(o){p();var g=l();if(g){var m=f();m&&e.connection.setUserId(m),d.loginWithToken(g,function(e){e&&(d._debug("Error logging in with token: "+e),r())})}}t=g;var v=function(){if(o){var e=l();t!=e&&(e?d.loginWithToken(e,function(e){e&&r()}):d.logout()),t=e}};setInterval(v,3e3)}.call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-base"]={Accounts:e}}(),function(){var e,t=(Package.meteor.Meteor,Package.underscore._),n=Package.spark.Spark,i=Package.handlebars.Handlebars;(function(){e={};var o={},r=Package.minimongo?Package.minimongo.LocalCollection._idStringify:function(e){return e},a=function(){a=function(){};var e=i._default_helpers.each;i._default_helpers.each=function(i,o){var a=function(){return!i||i instanceof Array||i instanceof Object&&"observeChanges"in i};if(!a())throw new Error("{{#each}} only accepts arrays, cursors, or falsey values. You passed: "+i);return i&&"observeChanges"in i?n.list(i,function(e){return n.labelBranch(e&&e._id&&r(e._id)||n.UNIQUE_LABEL,function(){var i=n.isolate(t.bind(o.fn,null,e));return n.setDataContext(e,i)})},function(){return o.inverse?n.isolate(o.inverse):""}):e.call(this,i,o)},t.extend(i._default_helpers,{isolate:function(e){var t=this;return n.isolate(function(){return e.fn(t)})},constant:function(e){var t=this;return n.createLandmark({constant:!0},function(){return e.fn(t)})}})},s={},c=function(e){var t=s[e.id]||(s[e.id]={find:function(t){if(!e.hasDom())throw new Error("Template not in DOM");return e.find(t)},findAll:function(t){if(!e.hasDom())throw new Error("Template not in DOM");return e.findAll(t)}});return t.firstNode=e.hasDom()?e.firstNode():null,t.lastNode=e.hasDom()?e.lastNode():null,t},l={_tmpl_data:null,events:function(e){var n=this._tmpl_data.events=this._tmpl_data.events||{};t.each(e,function(e,t){n[t]=n[t]||[],n[t].push(e)})},preserve:function(e){var n=this._tmpl_data.preserve=this._tmpl_data.preserve||{};t.isArray(e)?t.each(e,function(e){n[e]=!0}):t.extend(n,e)},helpers:function(e){var t=this._tmpl_data.helpers=this._tmpl_data.helpers||{};for(var n in e)t[n]=e[n]}};e.__define__=function(r,u){if(a(),"__define__"===r)throw new Error("Sorry, '__define__' is a special name and cannot be used as the name of a template");var d=function(i){var a=r&&e[r]||{},f=a._tmpl_data||{},p=n.labelBranch("Template."+r,function(){var e=n.createLandmark({preserve:f.preserve||{},created:function(){var e=c(this);e.data=i,a.created&&a.created.call(e)},rendered:function(){var e=c(this);e.data=i,a.rendered&&a.rendered.call(e)},destroyed:function(){a.destroyed&&a.destroyed.call(c(this)),delete s[this.id]}},function(){var e=n.isolate(function(){return u(i,{helpers:t.extend({},d,f.helpers||{}),partials:o,name:r})}),s=function(e){var n={};return t.each(e,function(e,i){"function"==typeof e&&(e=[e]),n[i]=t.map(e,function(e){return function(t,n){return e.call(this,t,c(n))}})}),n},p=a.events!==l.events?a.events:f.events;return a.events&&(e=n.attachEvents(s(p),e)),e});return e=n.setDataContext(i,e)});return p};if(t.extend(d,i.helpers),r){if(e[r])throw new Error("There are multiple templates named '"+r+"'. Each template needs a unique name.");e[r]=d,t.extend(d,l),d._tmpl_data={},o[r]=d}return d}}).call(this),"undefined"==typeof Package&&(Package={}),Package.templating={Template:e}}(),function(){var e,t=Package.meteor.Meteor,n=Package.underscore._,i=Package.deps.Deps,o=Package.ejson.EJSON;(function(){var r=function(e){return void 0===e?"undefined":o.stringify(e)},a=function(e){return void 0===e||"undefined"===e?void 0:o.parse(e)};e=function(e){this.keys=e||{},this.keyDeps={},this.keyValueDeps={}},n.extend(e.prototype,{set:function(e,t){var i=this;t=r(t);var o="undefined";if(n.has(i.keys,e)&&(o=i.keys[e]),t!==o){i.keys[e]=t;var a=function(e){e&&e.changed()};a(i.keyDeps[e]),i.keyValueDeps[e]&&(a(i.keyValueDeps[e][o]),a(i.keyValueDeps[e][t]))}},setDefault:function(e,t){var n=this;void 0===n.keys[e]&&n.set(e,t)},get:function(e){var t=this;return t._ensureKey(e),t.keyDeps[e].depend(),a(t.keys[e])},equals:function(e,s){var c=this,l=Package["mongo-livedata"]&&t.Collection.ObjectID;if(!("string"==typeof s||"number"==typeof s||"boolean"==typeof s||"undefined"==typeof s||s instanceof Date||l&&s instanceof l||null===s))throw new Error("ReactiveDict.equals: value must be scalar");var u=r(s);if(i.active){c._ensureKey(e),n.has(c.keyValueDeps[e],u)||(c.keyValueDeps[e][u]=new i.Dependency);var d=c.keyValueDeps[e][u].depend();d&&i.onInvalidate(function(){c.keyValueDeps[e][u].hasDependents()||delete c.keyValueDeps[e][u]})}var f=void 0;return n.has(c.keys,e)&&(f=a(c.keys[e])),o.equals(f,s)},_ensureKey:function(e){var t=this;e in t.keyDeps||(t.keyDeps[e]=new i.Dependency,t.keyValueDeps[e]={})},getMigrationData:function(){return this.keys}})}).call(this),"undefined"==typeof Package&&(Package={}),Package["reactive-dict"]={ReactiveDict:e}}(),function(){{var e,t=(Package.meteor.Meteor,Package.underscore._,Package["reactive-dict"].ReactiveDict);Package.ejson.EJSON}(function(){var n={};if(Package.reload){var i=Package.reload.Reload._migrationData("session");i&&i.keys&&(n=i.keys)}e=new t(n),Package.reload&&Package.reload.Reload._onMigrate("session",function(){return[!0,{keys:e.keys}]})}).call(this),"undefined"==typeof Package&&(Package={}),Package.session={Session:e}}(),function(){var e=Package.meteor.Meteor,t=Package.underscore._,n=(Package.random.Random,Package.check.check,Package.check.Match,Package["accounts-base"].Accounts);(function(){n.oauth={};var i={};n.oauth.registerService=function(n){if(t.has(i,n))throw new Error("Duplicate service: "+n);i[n]=!0,e.server&&e.users._ensureIndex("services."+n+".id",{unique:1,sparse:1})},n.oauth.serviceNames=function(){return t.keys(i)}}).call(this),function(){n.oauth.tryLoginAfterPopupClosed=function(t,i){n.callLoginMethod({methodArguments:[{oauth:{credentialToken:t}}],userCallback:i&&function(t){t&&t instanceof e.Error&&t.error===n.LoginCancelledError.numericError?i(new n.LoginCancelledError(t.details)):i(t)}})},n.oauth.credentialRequestCompleteHandler=function(e){return function(t){t&&t instanceof Error?e&&e(t):n.oauth.tryLoginAfterPopupClosed(t,e)}}}.call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-oauth"]={}}(),function(){var e,t,n,i=(Package.meteor.Meteor,Package.random.Random),o=(Package.check.check,Package.check.Match,Package.underscore._);(function(){t=function(){function e(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function t(){return new e(null)}function n(e,t,n,i,o,r){for(var a=16383&t,s=t>>14;--r>=0;){var c=16383&this[e],l=this[e++]>>14,u=s*c+l*a;c=a*c+((16383&u)<<14)+n[i]+o,o=(c>>28)+(u>>14)+s*l,n[i++]=268435455&c}return o}function i(e){return Zt.charAt(e)}function o(e,t){var n=en[e.charCodeAt(t)];return null==n?-1:n}function r(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function a(e){this.t=1,this.s=0>e?-1:0,e>0?this[0]=e:-1>e?this[0]=e+DV:this.t=0}function s(e){var n=t();return n.fromInt(e),n}function c(t,n){var i;if(16==n)i=4;else if(8==n)i=3;else if(256==n)i=8;else if(2==n)i=1;else if(32==n)i=5;else{if(4!=n)return this.fromRadix(t,n),void 0;i=2}this.t=0,this.s=0;for(var r=t.length,a=!1,s=0;--r>=0;){var c=8==i?255&t[r]:o(t,r);0>c?"-"==t.charAt(r)&&(a=!0):(a=!1,0==s?this[this.t++]=c:s+i>this.DB?(this[this.t-1]|=(c&(1<<this.DB-s)-1)<<s,this[this.t++]=c>>this.DB-s):this[this.t-1]|=c<<s,s+=i,s>=this.DB&&(s-=this.DB))}8==i&&0!=(128&t[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),a&&e.ZERO.subTo(this,this)}function l(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function u(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,o=(1<<t)-1,r=!1,a="",s=this.t,c=this.DB-s*this.DB%t;if(s-->0)for(c<this.DB&&(n=this[s]>>c)>0&&(r=!0,a=i(n));s>=0;)t>c?(n=(this[s]&(1<<c)-1)<<t-c,n|=this[--s]>>(c+=this.DB-t)):(n=this[s]>>(c-=t)&o,0>=c&&(c+=this.DB,--s)),n>0&&(r=!0),r&&(a+=i(n));return r?a:"0"}function d(){var n=t();return e.ZERO.subTo(this,n),n}function f(){return this.s<0?this.negate():this}function p(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(t=n-e.t,0!=t)return t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0}function h(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function g(){return this.t<=0?0:this.DB*(this.t-1)+h(this[this.t-1]^this.s&this.DM)}function m(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function v(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function y(e,t){var n,i=e%this.DB,o=this.DB-i,r=(1<<o)-1,a=Math.floor(e/this.DB),s=this.s<<i&this.DM;for(n=this.t-1;n>=0;--n)t[n+a+1]=this[n]>>o|s,s=(this[n]&r)<<i;for(n=a-1;n>=0;--n)t[n]=0;t[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()}function b(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)return t.t=0,void 0;var i=e%this.DB,o=this.DB-i,r=(1<<i)-1;t[0]=this[n]>>i;for(var a=n+1;a<this.t;++a)t[a-n-1]|=(this[a]&r)<<o,t[a-n]=this[a]>>i;i>0&&(t[this.t-n-1]|=(this.s&r)<<o),t.t=this.t-n,t.clamp()}function _(e,t){for(var n=0,i=0,o=Math.min(e.t,this.t);o>n;)i+=this[n]-e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i-=e[n],t[n++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=0>i?-1:0,-1>i?t[n++]=this.DV+i:i>0&&(t[n++]=i),t.t=n,t.clamp()}function w(t,n){var i=this.abs(),o=t.abs(),r=i.t;for(n.t=r+o.t;--r>=0;)n[r]=0;for(r=0;r<o.t;++r)n[r+i.t]=i.am(0,o[r],n,r,0,i.t);n.s=0,n.clamp(),this.s!=t.s&&e.ZERO.subTo(n,n)}function k(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var i=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,i,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function T(n,i,o){var r=n.abs();if(!(r.t<=0)){var a=this.abs();if(a.t<r.t)return null!=i&&i.fromInt(0),null!=o&&this.copyTo(o),void 0;null==o&&(o=t());var s=t(),c=this.s,l=n.s,u=this.DB-h(r[r.t-1]);u>0?(r.lShiftTo(u,s),a.lShiftTo(u,o)):(r.copyTo(s),a.copyTo(o));var d=s.t,f=s[d-1];if(0!=f){var p=f*(1<<this.F1)+(d>1?s[d-2]>>this.F2:0),g=this.FV/p,m=(1<<this.F1)/p,v=1<<this.F2,y=o.t,b=y-d,_=null==i?t():i;for(s.dlShiftTo(b,_),o.compareTo(_)>=0&&(o[o.t++]=1,o.subTo(_,o)),e.ONE.dlShiftTo(d,_),_.subTo(s,s);s.t<d;)s[s.t++]=0;for(;--b>=0;){var w=o[--y]==f?this.DM:Math.floor(o[y]*g+(o[y-1]+v)*m);if((o[y]+=s.am(0,w,o,b,0,d))<w)for(s.dlShiftTo(b,_),o.subTo(_,o);o[y]<--w;)o.subTo(_,o)}null!=i&&(o.drShiftTo(d,i),c!=l&&e.ZERO.subTo(i,i)),o.t=d,o.clamp(),u>0&&o.rShiftTo(u,o),0>c&&e.ZERO.subTo(o,o)}}}function S(n){var i=t();return this.abs().divRemTo(n,null,i),this.s<0&&i.compareTo(e.ZERO)>0&&n.subTo(i,i),i}function x(e){this.m=e}function E(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function C(e){return e}function P(e){e.divRemTo(this.m,null,e)}function D(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function O(e,t){e.squareTo(t),this.reduce(t)}function M(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function I(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function A(n){var i=t();return n.abs().dlShiftTo(this.m.t,i),i.divRemTo(this.m,null,i),n.s<0&&i.compareTo(e.ZERO)>0&&this.m.subTo(i,i),i}function N(e){var n=t();return e.copyTo(n),this.reduce(n),n}function $(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],i=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,i,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function F(e,t){e.squareTo(t),this.reduce(t)}function B(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function L(){return 0==(this.t>0?1&this[0]:this.s)}function j(n,i){if(n>4294967295||1>n)return e.ONE;var o=t(),r=t(),a=i.convert(this),s=h(n)-1;for(a.copyTo(o);--s>=0;)if(i.sqrTo(o,r),(n&1<<s)>0)i.mulTo(r,a,o);else{var c=o;o=r,r=c}return i.revert(o)}function R(e,t){var n;return n=256>e||t.isEven()?new x(t):new I(t),this.exp(e,n)}function U(){var e=t();return this.copyTo(e),e}function H(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function z(){return 0==this.t?this.s:this[0]<<24>>24}function q(){return 0==this.t?this.s:this[0]<<16>>16}function V(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function W(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function Y(e){if(null==e&&(e=10),0==this.signum()||2>e||e>36)return"0";var n=this.chunkSize(e),i=Math.pow(e,n),o=s(i),r=t(),a=t(),c="";for(this.divRemTo(o,r,a);r.signum()>0;)c=(i+a.intValue()).toString(e).substr(1)+c,r.divRemTo(o,r,a);return a.intValue().toString(e)+c}function Q(t,n){this.fromInt(0),null==n&&(n=10);for(var i=this.chunkSize(n),r=Math.pow(n,i),a=!1,s=0,c=0,l=0;l<t.length;++l){var u=o(t,l);0>u?"-"==t.charAt(l)&&0==this.signum()&&(a=!0):(c=n*c+u,++s>=i&&(this.dMultiply(r),this.dAddOffset(c,0),s=0,c=0))}s>0&&(this.dMultiply(Math.pow(n,s)),this.dAddOffset(c,0)),a&&e.ZERO.subTo(this,this)}function J(t,n,i){if("number"==typeof n)if(2>t)this.fromInt(1);else for(this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(e.ONE.shiftLeft(t-1),it,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(e.ONE.shiftLeft(t-1),this);else{var o=new Array,r=7&t;o.length=(t>>3)+1,n.nextBytes(o),r>0?o[0]&=(1<<r)-1:o[0]=0,this.fromString(o,256)}}function X(){var e=this.t,t=new Array;t[0]=this.s;var n,i=this.DB-e*this.DB%8,o=0;if(e-->0)for(i<this.DB&&(n=this[e]>>i)!=(this.s&this.DM)>>i&&(t[o++]=n|this.s<<this.DB-i);e>=0;)8>i?(n=(this[e]&(1<<i)-1)<<8-i,n|=this[--e]>>(i+=this.DB-8)):(n=this[e]>>(i-=8)&255,0>=i&&(i+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==o&&(128&this.s)!=(128&n)&&++o,(o>0||n!=this.s)&&(t[o++]=n);return t}function G(e){return 0==this.compareTo(e)}function K(e){return this.compareTo(e)<0?this:e}function Z(e){return this.compareTo(e)>0?this:e}function et(e,t,n){var i,o,r=Math.min(e.t,this.t);for(i=0;r>i;++i)n[i]=t(this[i],e[i]);if(e.t<this.t){for(o=e.s&this.DM,i=r;i<this.t;++i)n[i]=t(this[i],o);n.t=this.t}else{for(o=this.s&this.DM,i=r;i<e.t;++i)n[i]=t(o,e[i]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()}function tt(e,t){return e&t}function nt(e){var n=t();return this.bitwiseTo(e,tt,n),n}function it(e,t){return e|t}function ot(e){var n=t();return this.bitwiseTo(e,it,n),n}function rt(e,t){return e^t}function at(e){var n=t();return this.bitwiseTo(e,rt,n),n}function st(e,t){return e&~t}function ct(e){var n=t();return this.bitwiseTo(e,st,n),n}function lt(){for(var e=t(),n=0;n<this.t;++n)e[n]=this.DM&~this[n];return e.t=this.t,e.s=~this.s,e}function ut(e){var n=t();return 0>e?this.rShiftTo(-e,n):this.lShiftTo(e,n),n}function dt(e){var n=t();return 0>e?this.lShiftTo(-e,n):this.rShiftTo(e,n),n}function ft(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function pt(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+ft(this[e]);return this.s<0?this.t*this.DB:-1}function ht(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function gt(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=ht(this[n]^t);return e}function mt(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)}function vt(t,n){var i=e.ONE.shiftLeft(t);return this.bitwiseTo(i,n,i),i}function yt(e){return this.changeBit(e,it)}function bt(e){return this.changeBit(e,st)}function _t(e){return this.changeBit(e,rt)}function wt(e,t){for(var n=0,i=0,o=Math.min(e.t,this.t);o>n;)i+=this[n]+e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i+=e[n],t[n++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=0>i?-1:0,i>0?t[n++]=i:-1>i&&(t[n++]=this.DV+i),t.t=n,t.clamp()}function kt(e){var n=t();return this.addTo(e,n),n}function Tt(e){var n=t();return this.subTo(e,n),n}function St(e){var n=t();return this.multiplyTo(e,n),n}function xt(e){var n=t();return this.divRemTo(e,n,null),n}function Et(e){var n=t();return this.divRemTo(e,null,n),n}function Ct(e){var n=t(),i=t();return this.divRemTo(e,n,i),new Array(n,i)}function Pt(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function Dt(e,t){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}function Ot(){}function Mt(e){return e}function It(e,t,n){e.multiplyTo(t,n)}function At(e,t){e.squareTo(t)}function Nt(e){return this.exp(e,new Ot)}function $t(e,t,n){var i=Math.min(this.t+e.t,t);for(n.s=0,n.t=i;i>0;)n[--i]=0;var o;for(o=n.t-this.t;o>i;++i)n[i+this.t]=this.am(0,e[i],n,i,0,this.t);for(o=Math.min(e.t,t);o>i;++i)this.am(0,e[i],n,i,0,t-i);n.clamp()}function Ft(e,t,n){--t;var i=n.t=this.t+e.t-t;for(n.s=0;--i>=0;)n[i]=0;for(i=Math.max(t-this.t,0);i<e.t;++i)n[this.t+i-t]=this.am(t-i,e[i],n,0,0,this.t+i-t);n.clamp(),n.drShiftTo(1,n)}function Bt(n){this.r2=t(),this.q3=t(),e.ONE.dlShiftTo(2*n.t,this.r2),this.mu=this.r2.divide(n),this.m=n}function Lt(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var n=t();return e.copyTo(n),this.reduce(n),n}function jt(e){return e}function Rt(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function Ut(e,t){e.squareTo(t),this.reduce(t)}function Ht(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function zt(e,n){var i,o,r=e.bitLength(),a=s(1);if(0>=r)return a;i=18>r?1:48>r?3:144>r?4:768>r?5:6,o=8>r?new x(n):n.isEven()?new Bt(n):new I(n);var c=new Array,l=3,u=i-1,d=(1<<i)-1;if(c[1]=o.convert(this),i>1){var f=t();for(o.sqrTo(c[1],f);d>=l;)c[l]=t(),o.mulTo(f,c[l-2],c[l]),l+=2}var p,g,m=e.t-1,v=!0,y=t();for(r=h(e[m])-1;m>=0;){for(r>=u?p=e[m]>>r-u&d:(p=(e[m]&(1<<r+1)-1)<<u-r,m>0&&(p|=e[m-1]>>this.DB+r-u)),l=i;0==(1&p);)p>>=1,--l;if((r-=l)<0&&(r+=this.DB,--m),v)c[p].copyTo(a),v=!1;else{for(;l>1;)o.sqrTo(a,y),o.sqrTo(y,a),l-=2;l>0?o.sqrTo(a,y):(g=a,a=y,y=g),o.mulTo(y,c[p],a)}for(;m>=0&&0==(e[m]&1<<r);)o.sqrTo(a,y),g=a,a=y,y=g,--r<0&&(r=this.DB-1,--m)}return o.revert(a)}function qt(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var i=t;t=n,n=i}var o=t.getLowestSetBit(),r=n.getLowestSetBit();if(0>r)return t;for(r>o&&(r=o),r>0&&(t.rShiftTo(r,t),n.rShiftTo(r,n));t.signum()>0;)(o=t.getLowestSetBit())>0&&t.rShiftTo(o,t),(o=n.getLowestSetBit())>0&&n.rShiftTo(o,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return r>0&&n.lShiftTo(r,n),n}function Vt(e){if(0>=e)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var i=this.t-1;i>=0;--i)n=(t*n+this[i])%e;return n}function Wt(t){var n=t.isEven();if(this.isEven()&&n||0==t.signum())return e.ZERO;for(var i=t.clone(),o=this.clone(),r=s(1),a=s(0),c=s(0),l=s(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),n?(r.isEven()&&a.isEven()||(r.addTo(this,r),a.subTo(t,a)),r.rShiftTo(1,r)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);for(;o.isEven();)o.rShiftTo(1,o),n?(c.isEven()&&l.isEven()||(c.addTo(this,c),l.subTo(t,l)),c.rShiftTo(1,c)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);i.compareTo(o)>=0?(i.subTo(o,i),n&&r.subTo(c,r),a.subTo(l,a)):(o.subTo(i,o),n&&c.subTo(r,c),l.subTo(a,l))}return 0!=o.compareTo(e.ONE)?e.ZERO:l.compareTo(t)>=0?l.subtract(t):l.signum()<0?(l.addTo(t,l),l.signum()<0?l.add(t):l):l}function Yt(e){var t,n=this.abs();if(1==n.t&&n[0]<=tn[tn.length-1]){for(t=0;t<tn.length;++t)if(n[0]==tn[t])return!0;
return!1}if(n.isEven())return!1;for(t=1;t<tn.length;){for(var i=tn[t],o=t+1;o<tn.length&&nn>i;)i*=tn[o++];for(i=n.modInt(i);o>t;)if(i%tn[t++]==0)return!1}return n.millerRabin(e)}function Qt(n){var i=this.subtract(e.ONE),o=i.getLowestSetBit();if(0>=o)return!1;var r=i.shiftRight(o);n=n+1>>1,n>tn.length&&(n=tn.length);for(var a=t(),s=0;n>s;++s){a.fromInt(tn[s]);var c=a.modPow(r,this);if(0!=c.compareTo(e.ONE)&&0!=c.compareTo(i)){for(var l=1;l++<o&&0!=c.compareTo(i);)if(c=c.modPowInt(2,this),0==c.compareTo(e.ONE))return!1;if(0!=c.compareTo(i))return!1}}return!0}var Jt;e.prototype.am=n,Jt=28,e.prototype.DB=Jt,e.prototype.DM=(1<<Jt)-1,e.prototype.DV=1<<Jt;var Xt=52;e.prototype.FV=Math.pow(2,Xt),e.prototype.F1=Xt-Jt,e.prototype.F2=2*Jt-Xt;var Gt,Kt,Zt="0123456789abcdefghijklmnopqrstuvwxyz",en=new Array;for(Gt="0".charCodeAt(0),Kt=0;9>=Kt;++Kt)en[Gt++]=Kt;for(Gt="a".charCodeAt(0),Kt=10;36>Kt;++Kt)en[Gt++]=Kt;for(Gt="A".charCodeAt(0),Kt=10;36>Kt;++Kt)en[Gt++]=Kt;x.prototype.convert=E,x.prototype.revert=C,x.prototype.reduce=P,x.prototype.mulTo=D,x.prototype.sqrTo=O,I.prototype.convert=A,I.prototype.revert=N,I.prototype.reduce=$,I.prototype.mulTo=B,I.prototype.sqrTo=F,e.prototype.copyTo=r,e.prototype.fromInt=a,e.prototype.fromString=c,e.prototype.clamp=l,e.prototype.dlShiftTo=m,e.prototype.drShiftTo=v,e.prototype.lShiftTo=y,e.prototype.rShiftTo=b,e.prototype.subTo=_,e.prototype.multiplyTo=w,e.prototype.squareTo=k,e.prototype.divRemTo=T,e.prototype.invDigit=M,e.prototype.isEven=L,e.prototype.exp=j,e.prototype.toString=u,e.prototype.negate=d,e.prototype.abs=f,e.prototype.compareTo=p,e.prototype.bitLength=g,e.prototype.mod=S,e.prototype.modPowInt=R,e.ZERO=s(0),e.ONE=s(1),Ot.prototype.convert=Mt,Ot.prototype.revert=Mt,Ot.prototype.mulTo=It,Ot.prototype.sqrTo=At,Bt.prototype.convert=Lt,Bt.prototype.revert=jt,Bt.prototype.reduce=Rt,Bt.prototype.mulTo=Ht,Bt.prototype.sqrTo=Ut;var tn=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],nn=(1<<26)/tn[tn.length-1];return e.prototype.chunkSize=V,e.prototype.toRadix=Y,e.prototype.fromRadix=Q,e.prototype.fromNumber=J,e.prototype.bitwiseTo=et,e.prototype.changeBit=vt,e.prototype.addTo=wt,e.prototype.dMultiply=Pt,e.prototype.dAddOffset=Dt,e.prototype.multiplyLowerTo=$t,e.prototype.multiplyUpperTo=Ft,e.prototype.modInt=Vt,e.prototype.millerRabin=Qt,e.prototype.clone=U,e.prototype.intValue=H,e.prototype.byteValue=z,e.prototype.shortValue=q,e.prototype.signum=W,e.prototype.toByteArray=X,e.prototype.equals=G,e.prototype.min=K,e.prototype.max=Z,e.prototype.and=nt,e.prototype.or=ot,e.prototype.xor=at,e.prototype.andNot=ct,e.prototype.not=lt,e.prototype.shiftLeft=ut,e.prototype.shiftRight=dt,e.prototype.getLowestSetBit=pt,e.prototype.bitCount=gt,e.prototype.testBit=mt,e.prototype.setBit=yt,e.prototype.clearBit=bt,e.prototype.flipBit=_t,e.prototype.add=kt,e.prototype.subtract=Tt,e.prototype.multiply=St,e.prototype.divide=xt,e.prototype.remainder=Et,e.prototype.divideAndRemainder=Ct,e.prototype.modPow=zt,e.prototype.modInverse=Wt,e.prototype.pow=Nt,e.prototype.gcd=qt,e.prototype.isProbablePrime=Yt,e}()}).call(this),function(){n=function(){function e(e){function t(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n}function n(e,t){return e>>>t|e<<32-t}function i(e,t){return e>>>t}function o(e,t,n){return e&t^~e&n}function r(e,t,n){return e&t^e&n^t&n}function a(e){return n(e,2)^n(e,13)^n(e,22)}function s(e){return n(e,6)^n(e,11)^n(e,25)}function c(e){return n(e,7)^n(e,18)^i(e,3)}function l(e){return n(e,17)^n(e,19)^i(e,10)}function u(e,n){var i,u,d,f,p,h,g,m,v,y,b,_,w=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),k=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),T=new Array(64);e[n>>5]|=128<<24-n%32,e[(n+64>>9<<4)+15]=n;for(var v=0;v<e.length;v+=16){i=k[0],u=k[1],d=k[2],f=k[3],p=k[4],h=k[5],g=k[6],m=k[7];for(var y=0;64>y;y++)T[y]=16>y?e[y+v]:t(t(t(l(T[y-2]),T[y-7]),c(T[y-15])),T[y-16]),b=t(t(t(t(m,s(p)),o(p,h,g)),w[y]),T[y]),_=t(a(i),r(i,u,d)),m=g,g=h,h=p,p=t(f,b),f=d,d=u,u=i,i=t(b,_);k[0]=t(i,k[0]),k[1]=t(u,k[1]),k[2]=t(d,k[2]),k[3]=t(f,k[3]),k[4]=t(p,k[4]),k[5]=t(h,k[5]),k[6]=t(g,k[6]),k[7]=t(m,k[7])}return k}function d(e){for(var t=Array(),n=(1<<h)-1,i=0;i<e.length*h;i+=h)t[i>>5]|=(e.charCodeAt(i/h)&n)<<24-i%32;return t}function f(e){for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);128>i?t+=String.fromCharCode(i):i>127&&2048>i?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}function p(e){for(var t=g?"0123456789ABCDEF":"0123456789abcdef",n="",i=0;i<4*e.length;i++)n+=t.charAt(e[i>>2]>>8*(3-i%4)+4&15)+t.charAt(e[i>>2]>>8*(3-i%4)&15);return n}var h=8,g=0;return e=f(e),p(u(d(e),e.length*h))}return e}()}.call(this),function(){e={},e.generateVerifier=function(e,n){var o=a(n),r=n&&n.identity||i.id(),s=n&&n.salt||i.id(),c=o.hash(s+o.hash(r+":"+e)),l=new t(c,16),u=o.g.modPow(l,o.N);return{identity:r,salt:s,verifier:u.toString(16)}},e.matchVerifier={identity:String,salt:String,verifier:String},e.Client=function(e,n){var i=this;i.params=a(n),i.password=e;var o,r,c=i.params.N,l=i.params.g;if(n&&n.a){if("string"==typeof n.a)o=new t(n.a,16);else{if(!(n.a instanceof t))throw new Error("Invalid parameter: a");o=n.a}if(r=l.modPow(o,c),0===r.mod(c))throw new Error("Invalid parameter: a: A mod N == 0.")}else for(;!r||0===r.mod(c);)o=s(),r=l.modPow(o,c);i.a=o,i.A=r,i.Astr=r.toString(16)},e.Client.prototype.startExchange=function(){var e=this;return{A:e.Astr}},e.Client.prototype.respondToChallenge=function(e){var n=this,i=n.params.N,o=n.params.g,r=n.params.k,a=n.params.hash;if(n.identity=e.identity,n.salt=e.salt,n.Bstr=e.B,n.B=new t(n.Bstr,16),0===n.B.mod(i))throw new Error("Server sent invalid key: B mod N == 0.");var s=new t(a(n.Astr+n.Bstr),16),c=new t(a(n.salt+a(n.identity+":"+n.password)),16),l=r.multiply(o.modPow(c,i)),u=n.a.add(s.multiply(c)),d=n.B.subtract(l).modPow(u,i),f=a(n.Astr+n.Bstr+d.toString(16)),p=a(n.Astr+f+d.toString(16));return n.S=d,n.HAMK=p,{M:f}},e.Client.prototype.verifyConfirmation=function(e){var t=this;return t.HAMK&&e.HAMK===t.HAMK},e.Server=function(e,n){var i=this;i.params=a(n),i.verifier=e;var o,r,c=i.params.N,l=i.params.g,u=i.params.k,d=new t(i.verifier.verifier,16);if(n&&n.b){if("string"==typeof n.b)o=new t(n.b,16);else{if(!(n.b instanceof t))throw new Error("Invalid parameter: b");o=n.b}if(r=u.multiply(d).add(l.modPow(o,c)).mod(c),0===r.mod(c))throw new Error("Invalid parameter: b: B mod N == 0.")}else for(;!r||0===r.mod(c);)o=s(),r=u.multiply(d).add(l.modPow(o,c)).mod(c);i.b=o,i.B=r,i.Bstr=r.toString(16)},e.Server.prototype.issueChallenge=function(e){var n=this;if(n.Astr=e.A,n.A=new t(n.Astr,16),0===n.A.mod(n.params.N))throw new Error("Client sent invalid key: A mod N == 0.");var i=n.params.N,o=n.params.hash,r=new t(o(n.Astr+n.Bstr),16),a=new t(n.verifier.verifier,16),s=n.A.multiply(a.modPow(r,i));return n.S=s.modPow(n.b,i),n.M=o(n.Astr+n.Bstr+n.S.toString(16)),n.HAMK=o(n.Astr+n.M+n.S.toString(16)),{identity:n.verifier.identity,salt:n.verifier.salt,B:n.Bstr}},e.Server.prototype.verifyResponse=function(e){var t=this;return e.M!==t.M?null:{HAMK:t.HAMK}};var r={hash:function(e){return n(e).toLowerCase()},N:new t("EEAF0AB9ADB38DD69C33F80AFA8FC5E86072618775FF3C0B9EA2314C9C256576D674DF7496EA81D3383B4813D692C6E0E0D5D8E250B98BE48E495C1D6089DAD15DC7D7B46154D6B6CE8EF4AD69B15D4982559B297BCF1885C529F566660E57EC68EDBC3C05726CC02FD4CBF4976EAA9AFD5138FE8376435B9FC61D2FC0EB06E3",16),g:new t("2")};r.k=new t(r.hash(r.N.toString(16)+r.g.toString(16)),16);var a=function(e){if(!e)return r;var n=o.extend({},r);return o.each(["N","g","k"],function(i){if(e[i])if("string"==typeof e[i])n[i]=new t(e[i],16);else{if(!(e[i]instanceof t))throw new Error("Invalid parameter: "+i);n[i]=e[i]}}),e.hash&&(n.hash=function(t){return e.hash(t).toLowerCase()}),!e.k&&(e.N||e.g||e.hash)&&(n.k=n.hash(n.N.toString(16)+n.g.toString(16))),n},s=function(){return new t(i.hexString(36),16)}}.call(this),"undefined"==typeof Package&&(Package={}),Package.srp={SRP:e}}(),function(){{var e=Package.meteor.Meteor,t=Package["accounts-base"].Accounts,n=Package.srp.SRP,i=Package.underscore._;Package.livedata.DDP}(function(){e.loginWithPassword=function(e,i,o){var r=new n.Client(i),a=r.startExchange();"string"==typeof e&&(e=-1===e.indexOf("@")?{username:e}:{email:e}),a.user=e,t._setLoggingIn(!0),t.connection.apply("beginPasswordExchange",[a],function(e,n){if(e||!n)return t._setLoggingIn(!1),e=e||new Error("No result from call to beginPasswordExchange"),o&&o(e),void 0;var i=r.respondToChallenge(n);t.callLoginMethod({methodArguments:[{srp:i}],validateResult:function(e){if(!r.verifyConfirmation({HAMK:e.HAMK}))throw new Error("Server is cheating!")},userCallback:o})})},t.createUser=function(e,o){if(e=i.clone(e),!e.password)throw new Error("Must set options.password");var r=n.generateVerifier(e.password);delete e.password,e.srp=r,t.callLoginMethod({methodName:"createUser",methodArguments:[e],userCallback:o})},t.changePassword=function(i,o,r){if(!e.user())return r&&r(new Error("Must be logged in to change password.")),void 0;var a=n.generateVerifier(o);if(i){var s=new n.Client(i),c=s.startExchange();c.user={id:e.user()._id},t.connection.apply("beginPasswordExchange",[c],function(e,n){if(e||!n)return r&&r(e||new Error("No result from call to beginPasswordExchange")),void 0;var i=s.respondToChallenge(n);i.srp=a,t.connection.apply("changePassword",[i],function(e,t){e||!t?r&&r(e||new Error("No result from changePassword.")):s.verifyConfirmation(t)?r&&r():r&&r(new Error("Old password verification failed."))})})}else t.connection.apply("changePassword",[{srp:a}],function(e,t){e||!t?r&&r(e||new Error("No result from changePassword.")):r&&r()})},t.forgotPassword=function(e,n){if(!e.email)throw new Error("Must pass options.email");t.connection.call("forgotPassword",e,n)},t.resetPassword=function(e,i,o){if(!e)throw new Error("Need to pass token");if(!i)throw new Error("Need to pass newPassword");var r=n.generateVerifier(i);t.callLoginMethod({methodName:"resetPassword",methodArguments:[e,r],userCallback:o})},t.verifyEmail=function(e,n){if(!e)throw new Error("Need to pass token");t.callLoginMethod({methodName:"verifyEmail",methodArguments:[e],userCallback:n})}}).call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-password"]={}}(),function(){var e,t,n,i,o,r,a,s,c=Package.meteor.Meteor,l=Package.deps.Deps,u=Package["service-configuration"].ServiceConfiguration,d=Package["accounts-base"].Accounts,f=Package.underscore._,p=Package.templating.Template,h=Package.handlebars.Handlebars,g=Package.spark.Spark,m=Package.session.Session;(function(){d.ui={},d.ui._options={requestPermissions:{},requestOfflineToken:{}},d.ui.config=function(e){var t=["passwordSignupFields","requestPermissions","requestOfflineToken"];if(f.each(f.keys(e),function(e){if(!f.contains(t,e))throw new Error("Accounts.ui.config: Invalid key: "+e)}),e.passwordSignupFields){if(!f.contains(["USERNAME_AND_EMAIL","USERNAME_AND_OPTIONAL_EMAIL","USERNAME_ONLY","EMAIL_ONLY"],e.passwordSignupFields))throw new Error("Accounts.ui.config: Invalid option for `passwordSignupFields`: "+e.passwordSignupFields);if(d.ui._options.passwordSignupFields)throw new Error("Accounts.ui.config: Can't set `passwordSignupFields` more than once");d.ui._options.passwordSignupFields=e.passwordSignupFields}e.requestPermissions&&f.each(e.requestPermissions,function(e,t){if(d.ui._options.requestPermissions[t])throw new Error("Accounts.ui.config: Can't set `requestPermissions` more than once for "+t);if(!(e instanceof Array))throw new Error("Accounts.ui.config: Value for `requestPermissions` must be an array");d.ui._options.requestPermissions[t]=e}),e.requestOfflineToken&&f.each(e.requestOfflineToken,function(e,t){if("google"!==t)throw new Error("Accounts.ui.config: `requestOfflineToken` only supported for Google login at the moment.");if(d.ui._options.requestOfflineToken[t])throw new Error("Accounts.ui.config: Can't set `requestOfflineToken` more than once for "+t);d.ui._options.requestOfflineToken[t]=e})},e=function(){return d.ui._options.passwordSignupFields||"EMAIL_ONLY"}}).call(this),function(){p.__define__("_loginButtons",Package.handlebars.Handlebars.json_ast_to_func(['<div id="login-buttons" class="login-buttons-dropdown-align-',["{",[[0,"align"]]],'">\n    ',["#",[[0,"if"],[0,"currentUser"]],["\n      ",["#",[[0,"if"],[0,"loggingIn"]],["\n        ","\n        ",["#",[[0,"if"],[0,"dropdown"]],["\n          ",[">","_loginButtonsLoggingIn"],"\n        "],['\n          <div class="login-buttons-with-only-one-button">\n            ',[">","_loginButtonsLoggingInSingleLoginButton"],"\n          </div>\n        "]],"\n      "],["\n        ",[">","_loginButtonsLoggedIn"],"\n      "]],"\n    "],["\n      ",[">","_loginButtonsLoggedOut"],"\n    "]],"\n  </div>"])),p.__define__("_loginButtonsLoggedIn",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"dropdown"]],["\n    ",[">","_loginButtonsLoggedInDropdown"],"\n  "],['\n    <div class="login-buttons-with-only-one-button">\n      ',[">","_loginButtonsLoggedInSingleLogoutButton"],"\n    </div>\n  "]]])),p.__define__("_loginButtonsLoggedOut",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"services"]],[" ","\n    ",["#",[[0,"if"],[0,"configurationLoaded"]],["\n      ",["#",[[0,"if"],[0,"dropdown"]],[" ","\n        ",[">","_loginButtonsLoggedOutDropdown"],"\n      "],["\n        ",["#",[[0,"with"],[0,"singleService"]],[" ",'\n          <div class="login-buttons-with-only-one-button">\n            ',["#",[[0,"if"],[0,"loggingIn"]],["\n              ",[">","_loginButtonsLoggingInSingleLoginButton"],"\n            "],["\n              ",[">","_loginButtonsLoggedOutSingleLoginButton"],"\n            "]],"\n          </div>\n        "]],"\n      "]],"\n    "]],"\n  "],['\n    <div class="no-services">No login services configured</div>\n  ']]])),p.__define__("_loginButtonsMessages",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"errorMessage"]],['\n    <div class="message error-message">',["{",[[0,"errorMessage"]]],"</div>\n  "]],"\n  ",["#",[[0,"if"],[0,"infoMessage"]],['\n    <div class="message info-message">',["{",[[0,"infoMessage"]]],"</div>\n  "]]])),p.__define__("_loginButtonsLoggingIn",Package.handlebars.Handlebars.json_ast_to_func([[">","_loginButtonsLoggingInPadding"],'\n  <div class="loading">&nbsp;</div>\n  ',[">","_loginButtonsLoggingInPadding"]])),p.__define__("_loginButtonsLoggingInPadding",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"unless"],[0,"dropdown"]],["\n    ",'\n    <div class="login-buttons-padding">\n      <div class="login-button single-login-button" style="visibility: hidden;" id="login-buttons-logout">&nbsp;</div>\n    </div>\n  '],["\n    ",'\n    <div class="login-buttons-padding" />\n  ']]]))}.call(this),function(){p.__define__("_loginButtonsLoggedOutSingleLoginButton",Package.handlebars.Handlebars.json_ast_to_func(['<div class="login-text-and-button">\n    <div class="login-button single-login-button ',["#",[[0,"unless"],[0,"configured"]],["configure-button"]],'"\n         id="login-buttons-',["{",[[0,"name"]]],'">\n      <div class="login-image" id="login-buttons-image-',["{",[[0,"name"]]],'"></div>\n      ',["#",[[0,"if"],[0,"configured"]],['\n        <span class="text-besides-image sign-in-text-',["{",[[0,"name"]]],'">Sign in with ',["{",[[0,"capitalizedName"]]],"</span>\n      "],['\n        <span class="text-besides-image configure-text-',["{",[[0,"name"]]],'">Configure ',["{",[[0,"capitalizedName"]]]," Login</span>\n      "]],"\n    </div>\n  </div>"])),p.__define__("_loginButtonsLoggingInSingleLoginButton",Package.handlebars.Handlebars.json_ast_to_func(['<div class="login-text-and-button">\n    ',[">","_loginButtonsLoggingIn"],"\n  </div>"])),p.__define__("_loginButtonsLoggedInSingleLogoutButton",Package.handlebars.Handlebars.json_ast_to_func(['<div class="login-text-and-button">\n    <div class="login-display-name">\n      ',["{",[[0,"displayName"]]],'\n    </div>\n    <div class="login-button single-login-button" id="login-buttons-logout">Sign Out</div>\n  </div>']))}.call(this),function(){p.__define__("_loginButtonsLoggedInDropdown",Package.handlebars.Handlebars.json_ast_to_func(['<div class="login-link-and-dropdown-list">\n    <a class="login-link-text" id="login-name-link">\n      ',["{",[[0,"displayName"]]]," â–¾\n    </a>\n\n    ",["#",[[0,"if"],[0,"dropdownVisible"]],['\n      <div id="login-dropdown-list" class="accounts-dialog">\n        <a class="login-close-text">Close</a>\n        <div class="login-close-text-clear"></div>\n\n        ',["#",[[0,"if"],[0,"inMessageOnlyFlow"]],["\n          ",[">","_loginButtonsMessages"],"\n        "],["\n          ",["#",[[0,"if"],[0,"inChangePasswordFlow"]],["\n            ",[">","_loginButtonsChangePassword"],"\n          "],["\n            ",[">","_loginButtonsLoggedInDropdownActions"],"\n          "]],"\n        "]],"\n      </div>\n    "]],"\n  </div>"])),p.__define__("_loginButtonsLoggedInDropdownActions",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"allowChangingPassword"]],['\n    <div class="login-button" id="login-buttons-open-change-password">\n      Change password\n    </div>\n  ']],'\n\n  <div class="login-button" id="login-buttons-logout">\n    Sign out\n  </div>\n\n  ',[">","_loginButtonsMessages"]])),p.__define__("_loginButtonsLoggedOutDropdown",Package.handlebars.Handlebars.json_ast_to_func(['<div class="login-link-and-dropdown-list ',["{",[[0,"additionalClasses"]]],'">\n    ',["#",[[0,"if"],[0,"dropdownVisible"]],["\n      ",'\n      <a class="login-link-text" id="login-sign-in-link">Sign in â–¾</a>\n      <div id="login-dropdown-list" class="accounts-dialog">\n        <a class="login-close-text">Close</a>\n        ',["#",[[0,"if"],[0,"loggingIn"]],["\n          ",[">","_loginButtonsLoggingIn"],"\n        "]],'\n        <div class="login-close-text-clear"></div>\n        ',[">","_loginButtonsLoggedOutAllServices"],"\n      </div>\n    "],["\n      ",["#",[[0,"if"],[0,"loggingIn"]],["\n        ","\n        ",[">","_loginButtonsLoggingIn"],"\n      "],['\n        <a class="login-link-text" id="login-sign-in-link">Sign in â–¾</a>\n      ']],"\n    "]],"\n  </div>"])),p.__define__("_loginButtonsLoggedOutAllServices",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"services"]],["\n    ",["#",[[0,"if"],[0,"isPasswordService"]],["\n      ",["#",[[0,"if"],[0,"hasOtherServices"]],[" ","\n        ",[">","_loginButtonsLoggedOutPasswordServiceSeparator"],"\n      "]],"\n      ",[">","_loginButtonsLoggedOutPasswordService"],"\n    "],["\n      ",[">","_loginButtonsLoggedOutSingleLoginButton"],"\n    "]],"\n  "]],"\n\n  ",["#",[[0,"unless"],[0,"hasPasswordService"]],["\n    ",[">","_loginButtonsMessages"],"\n  "]]])),p.__define__("_loginButtonsLoggedOutPasswordServiceSeparator",Package.handlebars.Handlebars.json_ast_to_func(['<div class="or">\n    <span class="hline">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\n    <span class="or-text">or</span>\n    <span class="hline">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\n  </div>'])),p.__define__("_loginButtonsLoggedOutPasswordService",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"inForgotPasswordFlow"]],["\n    ",[">","_forgotPasswordForm"],"\n  "],['\n    <div class="login-form login-password-form">\n      ',["#",[[0,"each"],[0,"fields"]],["\n        ",[">","_loginButtonsFormField"],"\n      "]],"\n\n      ",[">","_loginButtonsMessages"],'\n\n      <div class="login-button login-button-form-submit" id="login-buttons-password">\n        ',["#",[[0,"if"],[0,"inSignupFlow"]],["\n          Create account\n        "],["\n          Sign in\n        "]],"\n      </div>\n\n      ",["#",[[0,"if"],[0,"inLoginFlow"]],["\n        ",["#",[[0,"if"],[0,"showCreateAccountLink"]],['\n          <div class="additional-link-container">\n            <a id="signup-link" class="additional-link">Create account</a>\n          </div>\n        ']],"\n\n        ",["#",[[0,"if"],[0,"showForgotPasswordLink"]],['\n          <div class="additional-link-container">\n            <a id="forgot-password-link" class="additional-link">Forgot password</a>\n          </div>\n        ']],"\n      "]],"\n\n      ",["#",[[0,"if"],[0,"inSignupFlow"]],["\n        ",[">","_loginButtonsBackToLoginLink"],"\n      "]],"\n    </div>\n  "]]])),p.__define__("_forgotPasswordForm",Package.handlebars.Handlebars.json_ast_to_func(['<div class="login-form">\n    <div id="forgot-password-email-label-and-input"> ','\n      <label id="forgot-password-email-label" for="forgot-password-email">Email</label>\n      <input id="forgot-password-email" type="email"/>\n    </div>\n\n    ',[">","_loginButtonsMessages"],'\n\n    <div class="login-button login-button-form-submit" id="login-buttons-forgot-password">\n      Reset password\n    </div>\n\n    ',[">","_loginButtonsBackToLoginLink"],"\n  </div>"])),p.__define__("_loginButtonsBackToLoginLink",Package.handlebars.Handlebars.json_ast_to_func(['<div class="additional-link-container">\n    <a id="back-to-login-link" class="additional-link">Sign in</a>\n  </div>'])),p.__define__("_loginButtonsFormField",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"visible"]],['\n    <div id="login-',["{",[[0,"fieldName"]]],'-label-and-input">\n      <label id="login-',["{",[[0,"fieldName"]]],'-label" for="login-',["{",[[0,"fieldName"]]],'">\n        ',["{",[[0,"fieldLabel"]]],'\n      </label>\n      <input id="login-',["{",[[0,"fieldName"]]],'" type="',["{",[[0,"inputType"]]],'" />\n    </div>\n  ']]])),p.__define__("_loginButtonsChangePassword",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"fields"]],["\n    ",[">","_loginButtonsFormField"],"\n  "]],"\n\n  ",[">","_loginButtonsMessages"],'\n\n  <div class="login-button login-button-form-submit" id="login-buttons-do-change-password">\n    Change password\n  </div>']))}.call(this),function(){c.startup(function(){document.body.appendChild(g.render(p.__define__(null,Package.handlebars.Handlebars.json_ast_to_func([[">","_resetPasswordDialog"],"\n  ",[">","_enrollAccountDialog"],"\n  ",[">","_justVerifiedEmailDialog"],"\n  ",[">","_configureLoginServiceDialog"],"\n\n  <!-- if we're not showing a dropdown, we need some other place to show messages -->\n  ",[">","_loginButtonsMessagesDialog"]]))))}),p.__define__("_resetPasswordDialog",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"inResetPasswordFlow"]],['\n    <div class="hide-background"></div>\n\n    <div class="accounts-dialog accounts-centered-dialog">\n      <label id="reset-password-new-password-label" for="reset-password-new-password">\n        New password\n      </label>\n\n      <div class="reset-password-new-password-wrapper">\n        <input id="reset-password-new-password" type="password" />\n      </div>\n\n      ',[">","_loginButtonsMessages"],'\n\n      <div class="login-button login-button-form-submit" id="login-buttons-reset-password-button">\n        Set password\n      </div>\n\n      <a class="accounts-close" id="login-buttons-cancel-reset-password">&times;</a>\n    </div>\n  ']]])),p.__define__("_enrollAccountDialog",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"inEnrollAccountFlow"]],['\n    <div class="hide-background"></div>\n\n    <div class="accounts-dialog accounts-centered-dialog">\n      <label id="enroll-account-password-label" for="enroll-account-password">\n        Choose a password\n      </label>\n\n      <div class="enroll-account-password-wrapper">\n        <input id="enroll-account-password" type="password" />\n      </div>\n\n      ',[">","_loginButtonsMessages"],'\n\n      <div class="login-button login-button-form-submit" id="login-buttons-enroll-account-button">\n        Create account\n      </div>\n\n      <a class="accounts-close" id="login-buttons-cancel-enroll-account">&times;</a>\n    </div>\n  ']]])),p.__define__("_justVerifiedEmailDialog",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"visible"]],['\n    <div class="accounts-dialog accounts-centered-dialog">\n      Email verified\n      <div class="login-button" id="just-verified-dismiss-button">Dismiss</div>\n    </div>\n  ']]])),p.__define__("_configureLoginServiceDialog",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"visible"]],['\n    <div id="configure-login-service-dialog" class="accounts-dialog accounts-centered-dialog">\n      ',["!",[[0,"configurationSteps"]]],'\n\n      <p>\n        Now, copy over some details.\n      </p>\n      <p>\n        <table>\n          <colgroup>\n            <col span="1" class="configuration_labels">\n            <col span="1" class="configuration_inputs">\n          </colgroup>\n          ',["#",[[0,"each"],[0,"configurationFields"]],['\n            <tr>\n              <td>\n                <label for="configure-login-service-dialog-',["{",[[0,"property"]]],'">',["{",[[0,"label"]]],'</label>\n              </td>\n              <td>\n                <input id="configure-login-service-dialog-',["{",[[0,"property"]]],'" type="text" />\n              </td>\n            </tr>\n          ']],'\n        </table>\n      </p>\n      <div class="new-section">\n        <div class="login-button configure-login-service-dismiss-button">\n          I\'ll do this later\n        </div>\n        <a class="accounts-close configure-login-service-dismiss-button">&times;</a>\n\n        ',["#",[[0,"isolate"]],['\n          <div class="login-button login-button-configure ',["#",[[0,"if"],[0,"saveDisabled"]],["login-button-disabled"]],'"\n             id="configure-login-service-dialog-save-configuration">\n            Save Configuration\n          </div>\n        ']],"\n      </div>\n    </div>\n  "]]])),p.__define__("_loginButtonsMessagesDialog",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"visible"]],['\n    <div class="accounts-dialog accounts-centered-dialog" id="login-buttons-message-dialog">\n      ',[">","_loginButtonsMessages"],'\n      <div class="login-button" id="messages-dialog-dismiss-button">Dismiss</div>\n    </div>\n  ']]]))}.call(this),function(){var e=["dropdownVisible","inSignupFlow","inForgotPasswordFlow","inChangePasswordFlow","inMessageOnlyFlow","errorMessage","infoMessage","resetPasswordToken","enrollAccountToken","justVerifiedEmail","configureLoginServiceDialogVisible","configureLoginServiceDialogServiceName","configureLoginServiceDialogSaveDisabled"],t=function(t){if(!f.contains(e,t))throw new Error("Invalid key in loginButtonsSession: "+t)},n="Meteor.loginButtons.";d._loginButtonsSession={set:function(e,n){if(t(e),f.contains(["errorMessage","infoMessage"],e))throw new Error("Don't set errorMessage or infoMessage directly. Instead, use errorMessage() or infoMessage().");this._set(e,n)},_set:function(e,t){m.set(n+e,t)},get:function(e){return t(e),m.get(n+e)},closeDropdown:function(){this.set("inSignupFlow",!1),this.set("inForgotPasswordFlow",!1),this.set("inChangePasswordFlow",!1),this.set("inMessageOnlyFlow",!1),this.set("dropdownVisible",!1),this.resetMessages()},infoMessage:function(e){this._set("errorMessage",null),this._set("infoMessage",e),this.ensureMessageVisible()},errorMessage:function(e){this._set("errorMessage",e),this._set("infoMessage",null),this.ensureMessageVisible()},isMessageDialogVisible:function(){return this.get("resetPasswordToken")||this.get("enrollAccountToken")||this.get("justVerifiedEmail")},ensureMessageVisible:function(){this.isMessageDialogVisible()||this.set("dropdownVisible",!0)},resetMessages:function(){this._set("errorMessage",null),this._set("infoMessage",null)},configureService:function(e){this.set("configureLoginServiceDialogVisible",!0),this.set("configureLoginServiceDialogServiceName",e),this.set("configureLoginServiceDialogSaveDisabled",!0)}}}.call(this),function(){var l=d._loginButtonsSession;h.registerHelper("loginButtons",function(e){return"right"===e.hash.align?new h.SafeString(p._loginButtons({align:"right"})):new h.SafeString(p._loginButtons({align:"left"}))}),p._loginButtons.events({"click #login-buttons-logout":function(){c.logout(function(){l.closeDropdown()})}}),p._loginButtons.preserve({"input[id]":g._labelFromIdOrName}),t=function(){var e=c.user();return e?e.profile&&e.profile.name?e.profile.name:e.username?e.username:e.emails&&e.emails[0]&&e.emails[0].address?e.emails[0].address:"":""},n=function(){var e=Package["accounts-oauth"]?d.oauth.serviceNames():[];return e.sort(),i()&&e.push("password"),f.map(e,function(e){return{name:e}})},i=function(){return!!Package["accounts-password"]},o=function(){return i()||n().length>1},r=function(e){return e.length>=3?!0:(l.errorMessage("Username must be at least 3 characters long"),!1)},a=function(t){return"USERNAME_AND_OPTIONAL_EMAIL"===e()&&""===t?!0:-1!==t.indexOf("@")?!0:(l.errorMessage("Invalid email"),!1)},s=function(e){return e.length>=6?!0:(l.errorMessage("Password must be at least 6 characters long"),!1)},p._loginButtonsLoggedOut.dropdown=o,p._loginButtonsLoggedOut.services=n,p._loginButtonsLoggedOut.singleService=function(){var e=n();if(1!==e.length)throw new Error("Shouldn't be rendering this template with more than one configured service");return e[0]},p._loginButtonsLoggedOut.configurationLoaded=function(){return d.loginServicesConfigured()},p._loginButtonsLoggedIn.dropdown=o,p._loginButtonsLoggedInSingleLogoutButton.displayName=t,p._loginButtonsMessages.errorMessage=function(){return l.get("errorMessage")},p._loginButtonsMessages.infoMessage=function(){return l.get("infoMessage")},p._loginButtonsLoggingInPadding.dropdown=o}.call(this),function(){var e=d._loginButtonsSession;p._loginButtonsLoggedOutSingleLoginButton.events({"click .login-button":function(){var n=this.name;e.resetMessages();var i=function(t){t?t instanceof d.LoginCancelledError||(t instanceof u.ConfigError?e.configureService(n):e.errorMessage(t.reason||"Unknown error")):e.closeDropdown()},o=c["loginWith"+("meteor-developer"===n?"MeteorDeveloperAccount":t(n))],r={};d.ui._options.requestPermissions[n]&&(r.requestPermissions=d.ui._options.requestPermissions[n]),d.ui._options.requestOfflineToken[n]&&(r.requestOfflineToken=d.ui._options.requestOfflineToken[n]),o(r,i)}}),p._loginButtonsLoggedOutSingleLoginButton.configured=function(){return!!u.configurations.findOne({service:this.name})},p._loginButtonsLoggedOutSingleLoginButton.capitalizedName=function(){return"github"===this.name?"GitHub":"meteor-developer"===this.name?"Meteor":t(this.name)};var t=function(e){return e=null==e?"":String(e),e.charAt(0).toUpperCase()+e.slice(1)}}.call(this),function(){var o=d._loginButtonsSession;p._loginButtons.events({"click #login-name-link, click #login-sign-in-link":function(){o.set("dropdownVisible",!0),l.flush(),w()},"click .login-close-text":function(){o.closeDropdown()}}),p._loginButtonsLoggedInDropdown.events({"click #login-buttons-open-change-password":function(){o.resetMessages(),o.set("inChangePasswordFlow",!0)
}}),p._loginButtonsLoggedInDropdown.displayName=t,p._loginButtonsLoggedInDropdown.inChangePasswordFlow=function(){return o.get("inChangePasswordFlow")},p._loginButtonsLoggedInDropdown.inMessageOnlyFlow=function(){return o.get("inMessageOnlyFlow")},p._loginButtonsLoggedInDropdown.dropdownVisible=function(){return o.get("dropdownVisible")},p._loginButtonsLoggedInDropdownActions.allowChangingPassword=function(){var e=c.user();return e.username||e.emails&&e.emails[0]&&e.emails[0].address},p._loginButtonsLoggedOutDropdown.events({"click #login-buttons-password":function(){g()},"keypress #forgot-password-email":function(e){13===e.keyCode&&y()},"click #login-buttons-forgot-password":function(){y()},"click #signup-link":function(){o.resetMessages();{var e=h("login-username"),t=h("login-email"),n=h("login-username-or-email");u("login-password")}o.set("inSignupFlow",!0),o.set("inForgotPasswordFlow",!1),l.flush(),null!==e?document.getElementById("login-username").value=e:null!==t?document.getElementById("login-email").value=t:null!==n&&(-1===n.indexOf("@")?document.getElementById("login-username").value=n:document.getElementById("login-email").value=n);var i=document.getElementById("login-dropdown-list");i.style.display="none",i.offsetHeight,i.style.display="block"},"click #forgot-password-link":function(){o.resetMessages();var e=h("login-email"),t=h("login-username-or-email");o.set("inSignupFlow",!1),o.set("inForgotPasswordFlow",!0),l.flush(),null!==e?document.getElementById("forgot-password-email").value=e:null!==t&&-1!==t.indexOf("@")&&(document.getElementById("forgot-password-email").value=t)},"click #back-to-login-link":function(){o.resetMessages();var e=h("login-username"),t=h("login-email")||h("forgot-password-email");o.set("inSignupFlow",!1),o.set("inForgotPasswordFlow",!1),l.flush(),document.getElementById("login-username")&&(document.getElementById("login-username").value=e),document.getElementById("login-email")&&(document.getElementById("login-email").value=t),document.getElementById("login-username-or-email")&&(document.getElementById("login-username-or-email").value=t||e)},"keypress #login-username, keypress #login-email, keypress #login-username-or-email, keypress #login-password, keypress #login-password-again":function(e){13===e.keyCode&&g()}}),p._loginButtonsLoggedOutDropdown.additionalClasses=function(){return i()?o.get("inSignupFlow")?"login-form-create-account":o.get("inForgotPasswordFlow")?"login-form-forgot-password":"login-form-sign-in":!1},p._loginButtonsLoggedOutDropdown.dropdownVisible=function(){return o.get("dropdownVisible")},p._loginButtonsLoggedOutDropdown.hasPasswordService=i,p._loginButtonsLoggedOutAllServices.services=n,p._loginButtonsLoggedOutAllServices.isPasswordService=function(){return"password"===this.name},p._loginButtonsLoggedOutAllServices.hasOtherServices=function(){return n().length>1},p._loginButtonsLoggedOutAllServices.hasPasswordService=i,p._loginButtonsLoggedOutPasswordService.fields=function(){var t=[{fieldName:"username-or-email",fieldLabel:"Username or Email",visible:function(){return f.contains(["USERNAME_AND_EMAIL","USERNAME_AND_OPTIONAL_EMAIL"],e())}},{fieldName:"username",fieldLabel:"Username",visible:function(){return"USERNAME_ONLY"===e()}},{fieldName:"email",fieldLabel:"Email",inputType:"email",visible:function(){return"EMAIL_ONLY"===e()}},{fieldName:"password",fieldLabel:"Password",inputType:"password",visible:function(){return!0}}],n=[{fieldName:"username",fieldLabel:"Username",visible:function(){return f.contains(["USERNAME_AND_EMAIL","USERNAME_AND_OPTIONAL_EMAIL","USERNAME_ONLY"],e())}},{fieldName:"email",fieldLabel:"Email",inputType:"email",visible:function(){return f.contains(["USERNAME_AND_EMAIL","EMAIL_ONLY"],e())}},{fieldName:"email",fieldLabel:"Email (optional)",inputType:"email",visible:function(){return"USERNAME_AND_OPTIONAL_EMAIL"===e()}},{fieldName:"password",fieldLabel:"Password",inputType:"password",visible:function(){return!0}},{fieldName:"password-again",fieldLabel:"Password (again)",inputType:"password",visible:function(){return f.contains(["USERNAME_AND_OPTIONAL_EMAIL","USERNAME_ONLY"],e())}}];return o.get("inSignupFlow")?n:t},p._loginButtonsLoggedOutPasswordService.inForgotPasswordFlow=function(){return o.get("inForgotPasswordFlow")},p._loginButtonsLoggedOutPasswordService.inLoginFlow=function(){return!o.get("inSignupFlow")&&!o.get("inForgotPasswordFlow")},p._loginButtonsLoggedOutPasswordService.inSignupFlow=function(){return o.get("inSignupFlow")},p._loginButtonsLoggedOutPasswordService.showCreateAccountLink=function(){return!d._options.forbidClientAccountCreation},p._loginButtonsLoggedOutPasswordService.showForgotPasswordLink=function(){return f.contains(["USERNAME_AND_EMAIL","USERNAME_AND_OPTIONAL_EMAIL","EMAIL_ONLY"],e())},p._loginButtonsFormField.inputType=function(){return this.inputType||"text"},p._loginButtonsChangePassword.events({"keypress #login-old-password, keypress #login-password, keypress #login-password-again":function(e){13===e.keyCode&&b()},"click #login-buttons-do-change-password":function(){b()}}),p._loginButtonsChangePassword.fields=function(){return[{fieldName:"old-password",fieldLabel:"Current Password",inputType:"password",visible:function(){return!0}},{fieldName:"password",fieldLabel:"New Password",inputType:"password",visible:function(){return!0}},{fieldName:"password-again",fieldLabel:"New Password (again)",inputType:"password",visible:function(){return f.contains(["USERNAME_AND_OPTIONAL_EMAIL","USERNAME_ONLY"],e())}}]};var u=function(e){var t=document.getElementById(e);return t?t.value:null},h=function(e){var t=document.getElementById(e);return t?t.value.replace(/^\s*|\s*$/g,""):null},g=function(){o.get("inSignupFlow")?v():m()},m=function(){o.resetMessages();var e,t=h("login-username"),n=h("login-email"),i=h("login-username-or-email"),s=u("login-password");if(null!==t){if(!r(t))return;e={username:t}}else if(null!==n){if(!a(n))return;e={email:n}}else{if(null===i)throw new Error("Unexpected -- no element to use as a login user selector");if(!r(i))return;e=i}c.loginWithPassword(e,s,function(e){e?o.errorMessage(e.reason||"Unknown error"):o.closeDropdown()})},v=function(){o.resetMessages();var e={},t=h("login-username");if(null!==t){if(!r(t))return;e.username=t}var n=h("login-email");if(null!==n){if(!a(n))return;e.email=n}var i=u("login-password");s(i)&&(e.password=i,_()&&d.createUser(e,function(e){e?o.errorMessage(e.reason||"Unknown error"):o.closeDropdown()}))},y=function(){o.resetMessages();var e=h("forgot-password-email");-1!==e.indexOf("@")?d.forgotPassword({email:e},function(e){e?o.errorMessage(e.reason||"Unknown error"):o.infoMessage("Email sent")}):o.errorMessage("Invalid email")},b=function(){o.resetMessages();var e=u("login-old-password"),t=u("login-password");s(t)&&_()&&d.changePassword(e,t,function(e){e?o.errorMessage(e.reason||"Unknown error"):(o.set("inChangePasswordFlow",!1),o.set("inMessageOnlyFlow",!0),o.infoMessage("Password changed"))})},_=function(){var e=u("login-password-again");if(null!==e){var t=u("login-password");if(t!==e)return o.errorMessage("Passwords don't match"),!1}return!0},w=function(){for(var e=document.getElementById("login-dropdown-list").parentNode;"BODY"!==e.nodeName;e=e.parentNode)0===e.style.zIndex&&(e.style.zIndex=1)}}.call(this),function(){var e=d._loginButtonsSession;d._resetPasswordToken&&e.set("resetPasswordToken",d._resetPasswordToken),d._enrollAccountToken&&e.set("enrollAccountToken",d._enrollAccountToken),c.startup(function(){d._verifyEmailToken&&d.verifyEmail(d._verifyEmailToken,function(t){d._enableAutoLogin(),t||e.set("justVerifiedEmail",!0)})}),p._resetPasswordDialog.events({"click #login-buttons-reset-password-button":function(){t()},"keypress #reset-password-new-password":function(e){13===e.keyCode&&t()},"click #login-buttons-cancel-reset-password":function(){e.set("resetPasswordToken",null),d._enableAutoLogin()}});var t=function(){e.resetMessages();var t=document.getElementById("reset-password-new-password").value;s(t)&&d.resetPassword(e.get("resetPasswordToken"),t,function(t){t?e.errorMessage(t.reason||"Unknown error"):(e.set("resetPasswordToken",null),d._enableAutoLogin())})};p._resetPasswordDialog.inResetPasswordFlow=function(){return e.get("resetPasswordToken")},p._enrollAccountDialog.events({"click #login-buttons-enroll-account-button":function(){n()},"keypress #enroll-account-password":function(e){13===e.keyCode&&n()},"click #login-buttons-cancel-enroll-account":function(){e.set("enrollAccountToken",null),d._enableAutoLogin()}});var n=function(){e.resetMessages();var t=document.getElementById("enroll-account-password").value;s(t)&&d.resetPassword(e.get("enrollAccountToken"),t,function(t){t?e.errorMessage(t.reason||"Unknown error"):(e.set("enrollAccountToken",null),d._enableAutoLogin())})};p._enrollAccountDialog.inEnrollAccountFlow=function(){return e.get("enrollAccountToken")},p._justVerifiedEmailDialog.events({"click #just-verified-dismiss-button":function(){e.set("justVerifiedEmail",!1)}}),p._justVerifiedEmailDialog.visible=function(){return e.get("justVerifiedEmail")},p._loginButtonsMessagesDialog.events({"click #messages-dialog-dismiss-button":function(){e.resetMessages()}}),p._loginButtonsMessagesDialog.visible=function(){var t=e.get("infoMessage")||e.get("errorMessage");return!o()&&t},p._configureLoginServiceDialog.events({"click .configure-login-service-dismiss-button":function(){e.set("configureLoginServiceDialogVisible",!1)},"click #configure-login-service-dialog-save-configuration":function(){if(e.get("configureLoginServiceDialogVisible")&&!e.get("configureLoginServiceDialogSaveDisabled")){var t=e.get("configureLoginServiceDialogServiceName"),n={service:t};f.each(a(),function(e){n[e.property]=document.getElementById("configure-login-service-dialog-"+e.property).value.replace(/^\s*|\s*$/g,"")}),d.connection.call("configureLoginService",n,function(n){n?c._debug("Error configuring login service "+t,n):e.set("configureLoginServiceDialogVisible",!1)})}},"input, keyup input":function(e){0===e.target.id.indexOf("configure-login-service-dialog")&&i()}});var i=function(){var t=f.any(a(),function(e){return""===document.getElementById("configure-login-service-dialog-"+e.property).value});e.set("configureLoginServiceDialogSaveDisabled",t)},r=function(){var t=e.get("configureLoginServiceDialogServiceName");return p["configureLoginServiceDialogFor"+("meteor-developer"===t?"MeteorDeveloper":l(t))]},a=function(){var e=r();return e.fields()};p._configureLoginServiceDialog.configurationFields=function(){return a()},p._configureLoginServiceDialog.visible=function(){return e.get("configureLoginServiceDialogVisible")},p._configureLoginServiceDialog.configurationSteps=function(){return r()()},p._configureLoginServiceDialog.saveDisabled=function(){return e.get("configureLoginServiceDialogSaveDisabled")};var l=function(e){return e=null==e?"":String(e),e.charAt(0).toUpperCase()+e.slice(1)}}.call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-ui-unstyled"]={}}(),function(){Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.less={}}(),function(){Package.meteor.Meteor,Package["accounts-base"].Accounts;"undefined"==typeof Package&&(Package={}),Package["accounts-ui"]={}}(),function(){{var e;Package.meteor.Meteor}(function(){e={},e.showPopup=function(e,n,i){var o=t(e,i&&i.width||650,i&&i.height||331),r=setInterval(function(){try{var e=o.closed||void 0===o.closed}catch(t){return}e&&(clearInterval(r),n())},100)};var t=function(e,t,n){var i="undefined"!=typeof window.screenX?window.screenX:window.screenLeft,o="undefined"!=typeof window.screenY?window.screenY:window.screenTop,r="undefined"!=typeof window.outerWidth?window.outerWidth:document.body.clientWidth,a="undefined"!=typeof window.outerHeight?window.outerHeight:document.body.clientHeight-22,s=i+(r-t)/2,c=o+(a-n)/2,l="width="+t+",height="+n+",left="+s+",top="+c+",scrollbars=yes",u=window.open(e,"Login",l);return u.focus&&u.focus(),u};e.initiateLogin=function(t,n,i,o){e.showPopup(n,_.bind(i,null,t),o)}}).call(this),"undefined"==typeof Package&&(Package={}),Package.oauth={Oauth:e}}(),function(){Package.meteor.Meteor,Package["service-configuration"].ServiceConfiguration,Package.oauth.Oauth;"undefined"==typeof Package&&(Package={}),Package.oauth2={}}(),function(){var e,t,n,i,o,r,a=Package.meteor.Meteor,s=Package.underscore._;(function(){t=function(e,t){var n=160,i=function(e,t){return e.length>t?e.slice(0,t)+"...":e},o="failed ["+e+"]";return t&&(o+=" "+i(t.replace(/\n/g," "),n)),new Error(o)},n=function(e){var t=[];return s.each(e,function(e,n){t.length&&t.push("&"),t.push(i(n),"=",i(e))}),t.join("").replace(/%20/g,"+")},i=function(e){return encodeURIComponent(e).replace(/[!'()]/g,escape).replace(/\*/g,"%2A")},o=function(e,t,i,o){var r=e,a=t?t.slice(1):null;if("string"==typeof i&&(a=String(i)),o){a=a||"";var s=n(o);a&&s&&(a+="&"),a+=s}var c=r;return null!==a&&(c+="?"+a),c},r=function(e){var t=(e.headers["content-type"]||";").split(";")[0];if(s.include(["application/json","text/javascript"],t))try{e.data=JSON.parse(e.content)}catch(n){e.data=null}else e.data=null},e={},e.get=function(){return e.call.apply(this,["GET"].concat(s.toArray(arguments)))},e.post=function(){return e.call.apply(this,["POST"].concat(s.toArray(arguments)))},e.put=function(){return e.call.apply(this,["PUT"].concat(s.toArray(arguments)))},e.del=function(){return e.call.apply(this,["DELETE"].concat(s.toArray(arguments)))}}).call(this),function(){e.call=function(e,i,c,l){if(l||"function"!=typeof c||(l=c,c=null),c=c||{},"function"!=typeof l)throw new Error("Can't make a blocking HTTP call from the client; callback required.");e=(e||"").toUpperCase();var u={},d=c.content;c.data&&(d=JSON.stringify(c.data),u["Content-Type"]="application/json");var f,p;d||"GET"===e||"HEAD"===e?f=c.params:p=c.params;var h=/^(.*?)(\?.*)?$/.exec(i);if(i=o(h[1],h[2],c.query,f),c.followRedirects===!1)throw new Error("Option followRedirects:false not supported on client.");var g,m;if(c.auth){var v=c.auth.indexOf(":");if(0>v)throw new Error('auth option should be of the form "username:password"');g=c.auth.substring(0,v),m=c.auth.substring(v+1)}p&&(d=n(p)),s.extend(u,c.headers||{}),l=function(e){return function(t,n){t&&n&&(t.response=n),e(t,n)}}(l),l=s.once(l);try{var y;if("undefined"!=typeof XMLHttpRequest)y=new XMLHttpRequest;else{if("undefined"==typeof ActiveXObject)throw new Error("Can't create XMLHttpRequest");y=new ActiveXObject("Microsoft.XMLHttp")}y.open(e,i,!0,g,m);for(var b in u)y.setRequestHeader(b,u[b]);var _,w=!1;c.timeout&&(_=a.setTimeout(function(){w=!0,y.abort()},c.timeout)),y.onreadystatechange=function(){if(4===y.readyState)if(_&&a.clearTimeout(_),w)l(new Error("timeout"));else if(y.status){var e={};e.statusCode=y.status,e.content=y.responseText,e.headers={};var n=y.getAllResponseHeaders();""===n&&y.getResponseHeader("content-type")&&(n="content-type: "+y.getResponseHeader("content-type"));var i=n.split(/\r?\n/);s.each(i,function(t){var n=/^(.*?):(?:\s+)(.*)$/.exec(t);n&&3===n.length&&(e.headers[n[1].toLowerCase()]=n[2])}),r(e);var o=null;e.statusCode>=400&&(o=t(e.statusCode,e.content)),l(o,e)}else l(new Error("network"))},y.send(d)}catch(k){l(k)}}}.call(this),function(){a.http=e}.call(this),"undefined"==typeof Package&&(Package={}),Package.http={HTTP:e}}(),function(){{var e,t,n=Package.meteor.Meteor;Package.ejson.EJSON}(function(){e=function(e){var t=this;if(t.debug=e&&"undefined"!=typeof e.debug?e.debug:!1,t.plugins={loaded:!0},"undefined"!=typeof e&&"undefined"!=typeof e.plugins)for(var n in e.plugins)e.plugins[n]===!0&&(t.plugins[n]=!1);return t.url="file://",t.handshakeActivated=!1,t.messageQueue=[],t.invokes={},t.invokeCounter=0,t.eventCallbacks={},t.oneTimeEvents={deviceready:!0},t._ready=!1,t._readyDeps=new Deps.Dependency,t.isReady=function(){return t._readyDeps.depend(),t._ready},t.setReady=function(e){e!==t._ready&&(t._ready=e,t._readyDeps.changed())},t.addEventListener=function(e,n){if("function"!=typeof n)throw new Error("ERROR: Cordova.addEventListener expects callback as function");return"undefined"==typeof t.eventCallbacks[e]&&(t.eventCallbacks[e]=[],t.send({eventId:e})),t.eventCallbacks[e].push(n)},t.addInvokingCallback=function(e,n){return"undefined"==typeof t.invokes[e]&&(t.invokes[e]=[]),t.invokes[e].push(n)-1},t.call=function(e,n,i){if(i||"function"!=typeof n||(i=n,n=[]),i=i?i:function(){},"function"!=typeof i)throw new Error("MeteorCordova expects callback as a function");var o=t.invokeCounter++,r=[];n=n&&n.length?n:[],t.addInvokingCallback(o,i);for(var a=0;a<n.length;a++){var s=n[a];if("function"==typeof s){var c=t.addInvokingCallback(o,s);r.push({funcId:c})}else r.push({value:s})}t.send({invokeId:o,command:e,args:r})},t.send=function(e){if("undefined"!=typeof window&&window.parent&&t.handshakeActivated){try{JSON.stringify(e)}catch(n){throw new Error("Cant send type of message, Error: "+n)}window.parent.postMessage(e,t.url)}else t.messageQueue.push(e)},t.connection=function(e){if("undefined"!=typeof e.handshake){if(t.handshakeActivated=!0,t.send({handshake:e.handshake}),"undefined"!=typeof t.messageQueue)for(var n=0;n<t.messageQueue.length;n++)t.send(t.messageQueue[n]);t.messageQueue=[]}if("undefined"!=typeof e.eventId){var i=t.eventCallbacks[e.eventId];if("undefined"!=typeof i){for(var n=0;n<i.length;n++)try{i[n].apply(window,[e.payload])}catch(o){}t.oneTimeEvents[e.eventId]&&delete t.eventCallbacks[e.eventId]}}if("undefined"!=typeof e.invokeId&&"undefined"!=typeof e.funcId&&"undefined"!=typeof e.args){var r=t.invokes[e.invokeId];if("undefined"==typeof r)return;var a=r[e.funcId];if("undefined"==typeof a)return;var s=0,c=!1,l={remove:function(){s=e.funcId},removeAll:function(){c=!0}};if("function"!=typeof a)throw new Error("ERROR: Execute client callback "+e.invokeId+" funcId: "+e.funcId+" not a function");var u=[];for(var d in e.args)u.push(e.args[d]);try{a.apply(l,u)}catch(o){throw new Error("ERROR: Execute client callback "+e.invokeId+" funcId: "+e.funcId+" Error: "+o)}(e.funcId===s||c)&&(1===Object.keys(r).length||c?delete t.invokes[e.invokeId]:delete t.invokes[e.invokeId][e.funcId])}if(e.error)throw new Error("Client got error back "+e.error)},t.messageEventHandler=function(e){e.origin===t.url&&t.connection(e&&e.data)},"undefined"!=typeof window.addEventListener&&window.addEventListener("message",t.messageEventHandler,!1),t.addEventListener("deviceready",function(){t.setReady(!0);for(var e in t.plugins)t.plugins.hasOwnProperty(e)&&(t.plugins[e]=!0)}),t}}).call(this),function(){"undefined"==typeof e&&alert("wrong load order?");var i=function(){try{window.AudioContext=window.AudioContext||window.webkitAudioContext,t=new AudioContext}catch(e){return function(){}}return function(e,i,o){var r=t.createOscillator();r.type=i%4||0,r.connect(t.destination),r.noteOn(0),n.setTimeout(function(){r.noteOff(0),"function"==typeof o&&o()},e)}}();e.prototype.alert=function(e,t,n,i){var o=this;if(console.log(typeof t),"function"!=typeof t)throw new Error('Function "alert" expects a callback function');o.plugins.notification||o.plugins.dialogs?o.call("navigator.notification.alert",[e,t,n,i]):(window.alert(e),t())},e.prototype.confirm=function(e,t,n,i){var o=this;if("function"!=typeof t)throw new Error('Function "confirm" expects a callback function');o.plugins.notification||o.plugins.dialogs?o.call("navigator.notification.confirm",[e,t,n,i]):t(window.confirm(e)?1:2)},e.prototype.prompt=function(e,t,n,i,o){var r=this;if("function"!=typeof t)throw new Error('Function "prompt" expects a callback function');if(r.plugins.notification||r.plugins.dialogs)r.call("navigator.notification.prompt",[e,t,n,i,o]);else{var a=window.prompt(e,o);t({input1:a,buttonIndex:null===a||""===a?2:1})}},e.prototype.beep=function(e){var t=this;if(e=e||1,t.plugins.notification||t.plugins.dialogs)t.call("navigator.notification.beep",[e]);else{var n=function(e){i(100,3,function(){e>1&&n(e-1)})};n(e)}},e.prototype.vibrate=function(e){var t=this;t.plugins.notification||t.plugins.vibration?t.call("navigator.notification.vibrate",[e]):i(e,0)},e.prototype.close=function(){var e=this;e.call("navigator.app.exitApp")}}.call(this),"undefined"==typeof Package&&(Package={}),Package.cordova={Cordova:e}}(),function(){Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package["phonegap-push"]={}}(),function(){{var e,t,n;Package.meteor.Meteor}(function(){var t=function(e){for(var t in e)this[t]=e[t];this.setLocale(this.locale)};t.localeCache={},t.prototype={defaultLocale:"en",directory:"/locales",extension:".min.json",getLocale:function(){return this.locale},setLocale:function(e){e||(e=$("html").attr("lang")),e||(e=this.defaultLocale),this.locale=e,e in t.localeCache||this.getLocaleFileFromServer()},getLocaleFileFromServer:function(){e=null,$.ajax({url:this.directory+"/"+this.locale+this.extension,async:!1,success:function(t){e=t}}),t.localeCache[this.locale]=e},__:function(){var e=t.localeCache[this.locale][arguments[0]];return arguments.length>1&&(e=vsprintf(e,Array.prototype.slice.call(arguments,1))),e},__n:function(e,n){var i=t.localeCache[this.locale][e];return n=parseInt(n,10),i=0===n?i.zero:n>1?i.other:i.one,i=vsprintf(i,[n]),arguments.length>2&&(i=vsprintf(i,Array.prototype.slice.call(arguments,2))),i}}}).call(this),function(){!function(e){var i=Array.prototype.slice,o={dict:null,load:function(t){null!==this.dict?e.extend(this.dict,t):this.dict=t},_:function(e){return t=this.dict,t&&t.hasOwnProperty(e)&&(e=t[e]),n=i.call(arguments),n[0]=e,this.printf.apply(this,n)},printf:function(t,n){return arguments.length<2?t:(n=e.isArray(n)?n:i.call(arguments,1),t.replace(/([^%]|^)%(?:(\d+)\$)?s/g,function(e,t,i){return i?t+n[parseInt(i)-1]:t+n.shift()}).replace(/%%s/g,"%s"))}};e.fn._t=function(){return e(this).html(o._.apply(o,arguments))},e.i18n=o}(jQuery)}.call(this),function(){var e=function(){function t(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function n(e,t){for(var n=[];t>0;n[--t]=e);return n.join("")}var i=function(){return i.cache.hasOwnProperty(arguments[0])||(i.cache[arguments[0]]=i.parse(arguments[0])),i.format.call(null,i.cache[arguments[0]],arguments)};return i.format=function(i,o){var r,a,s,c,l,u,d,f=1,p=i.length,h="",g=[];for(a=0;p>a;a++)if(h=t(i[a]),"string"===h)g.push(i[a]);else if("array"===h){if(c=i[a],c[2])for(r=o[f],s=0;s<c[2].length;s++){if(!r.hasOwnProperty(c[2][s]))throw e('[sprintf] property "%s" does not exist',c[2][s]);r=r[c[2][s]]}else r=c[1]?o[c[1]]:o[f++];if(/[^s]/.test(c[8])&&"number"!=t(r))throw e("[sprintf] expecting number but found %s",t(r));switch(c[8]){case"b":r=r.toString(2);break;case"c":r=String.fromCharCode(r);break;case"d":r=parseInt(r,10);break;case"e":r=c[7]?r.toExponential(c[7]):r.toExponential();break;case"f":r=c[7]?parseFloat(r).toFixed(c[7]):parseFloat(r);break;case"o":r=r.toString(8);break;case"s":r=(r=String(r))&&c[7]?r.substring(0,c[7]):r;break;case"u":r=Math.abs(r);break;case"x":r=r.toString(16);break;case"X":r=r.toString(16).toUpperCase()}r=/[def]/.test(c[8])&&c[3]&&r>=0?"+"+r:r,u=c[4]?"0"==c[4]?"0":c[4].charAt(1):" ",d=c[6]-String(r).length,l=c[6]?n(u,d):"",g.push(c[5]?r+l:l+r)}return g.join("")},i.cache={},i.parse=function(e){for(var t=e,n=[],i=[],o=0;t;){if(null!==(n=/^[^\x25]+/.exec(t)))i.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(t)))i.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw"[sprintf] huh?";if(n[2]){o|=1;var r=[],a=n[2],s=[];if(null===(s=/^([a-z_][a-z_\d]*)/i.exec(a)))throw"[sprintf] huh?";for(r.push(s[1]);""!==(a=a.substring(s[0].length));)if(null!==(s=/^\.([a-z_][a-z_\d]*)/i.exec(a)))r.push(s[1]);else{if(null===(s=/^\[(\d+)\]/.exec(a)))throw"[sprintf] huh?";r.push(s[1])}n[2]=r}else o|=2;if(3===o)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";i.push(n)}t=t.substring(n[0].length)}return i},i}()}.call(this),"undefined"==typeof Package&&(Package={}),Package.language={}}(),function(){Package.meteor.Meteor;(function(){!function(){function e(t,n){if("function"==typeof t)return e("*",t);if("function"==typeof n)for(var o=new i(t),r=1;r<arguments.length;++r)e.callbacks.push(o.middleware(arguments[r]));else"string"==typeof t?e.show(t,n):e.start(t)}function t(t){h.pathname+h.search!=t.canonicalPath&&(e.stop(),t.unhandled=!0,window.location=t.canonicalPath)}function n(e,t){"/"==e[0]&&0!=e.indexOf(p)&&(e=p+e);var n=e.indexOf("?");this.canonicalPath=e,this.path=e.replace(p,"")||"/",this.title=document.title,this.state=t||{},this.state.path=e,this.querystring=~n?e.slice(n+1):"",this.pathname=~n?e.slice(0,n):e,this.params=[]}function i(e,t){t=t||{},this.path=e,this.method="GET",this.regexp=o(e,this.keys=[],t.sensitive,t.strict)}function o(e,t,n,i){return e instanceof RegExp?e:(e instanceof Array&&(e="("+e.join("|")+")"),e=e.concat(i?"":"/?").replace(/\/\(/g,"(?:/").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(e,n,i,o,r,a){return t.push({name:o,optional:!!a}),n=n||"",""+(a?"":n)+"(?:"+(a?n:"")+(i||"")+(r||i&&"([^/.]+?)"||"([^/]+?)")+")"+(a||"")}).replace(/([\/.])/g,"\\$1").replace(/\*/g,"(.*)"),new RegExp("^"+e+"$",n?"":"i"))}function r(t){if(t.state){var n=t.state.path;e.replace(n,t.state)}}function a(t){if(s(t)&&!(t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){for(var n=t.target||t.srcElement;n&&"A"!=n.nodeName;)n=n.parentNode;if(n&&"A"==n.nodeName){var i=n.href,o=n.pathname+n.search;if("/"!==o[0]&&(o="/"+o),!n.hash&&"#"!=n.getAttribute("href")&&c(i)){var r=o;o=o.replace(p,""),p&&r==o||(t.preventDefault?t.preventDefault():t.returnValue=!1,e.show(r))}}}}function s(e){return e=e||window.event,null==e.which?0==e.button:1==e.which}function c(e){var t=h.protocol+"//"+h.hostname;return h.port&&(t+=":"+h.port),0==e.indexOf(t)}function l(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function u(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)}var d,f=!0,p="",h=history.location||window.location;e.callbacks=[],e.base=function(e){return 0==arguments.length?p:(p=e,void 0)},e.start=function(t){t=t||{},d||(d=!0,!1===t.dispatch&&(f=!1),!1!==t.popstate&&l(window,"popstate",r),!1!==t.click&&l(document,"click",a),f&&e.replace(h.pathname+h.search,null,!0,f))},e.stop=function(){d=!1,u(document,"click",a),u(window,"popstate",r)},e.show=function(t,i,o){var r=new n(t,i);return!1!==o&&e.dispatch(r),r.unhandled||r.pushState(),r},e.replace=function(t,i,o,r){var a=new n(t,i);return a.init=o,null==r&&(r=!0),r&&e.dispatch(a),a.save(),a},e.dispatch=function(n){function i(){var r=e.callbacks[o++];return r?(r(n,i),void 0):t(n)}var o=0;i()},e.Context=n,n.prototype.pushState=function(){history.pushState(this.state,this.title,this.canonicalPath)},n.prototype.save=function(){history.replaceState(this.state,this.title,this.canonicalPath)},e.Route=i,i.prototype.middleware=function(e){var t=this;return function(n,i){return t.match(n.path,n.params)?e(n,i):(i(),void 0)}},i.prototype.match=function(e,t){var n=this.keys,i=e.indexOf("?"),o=~i?e.slice(0,i):e,r=this.regexp.exec(o);if(!r)return!1;for(var a=1,s=r.length;s>a;++a){var c=n[a-1],l="string"==typeof r[a]?decodeURIComponent(r[a]):r[a];c?t[c.name]=void 0!==t[c.name]?t[c.name]:l:t.push(l)}return!0},"undefined"==typeof module?window.page=e:module.exports=e}()}).call(this),"undefined"==typeof Package&&(Package={}),Package["page-js-ie-support"]={}}(),function(){Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.coffeescript={}}(),function(){Package.meteor.Meteor,Package["accounts-base"].Accounts;"undefined"==typeof Package&&(Package={}),Package["user-status"]={}}(),function(){var Meteor=Package.meteor.Meteor;(function(){!function(e,t){"use strict";function n(){if(!i.READY){i.event.determineEventTypes();for(var e in i.gestures)i.gestures.hasOwnProperty(e)&&i.detection.register(i.gestures[e]);i.event.onTouch(i.DOCUMENT,i.EVENT_MOVE,i.detection.detect),i.event.onTouch(i.DOCUMENT,i.EVENT_END,i.detection.detect),i.READY=!0}}var i=function(e,t){return new i.Instance(e,t||{})};i.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},i.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,i.HAS_TOUCHEVENTS="ontouchstart"in e,i.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,i.NO_MOUSEEVENTS=i.HAS_TOUCHEVENTS&&navigator.userAgent.match(i.MOBILE_REGEX),i.EVENT_TYPES={},i.DIRECTION_DOWN="down",i.DIRECTION_LEFT="left",i.DIRECTION_UP="up",i.DIRECTION_RIGHT="right",i.POINTER_MOUSE="mouse",i.POINTER_TOUCH="touch",i.POINTER_PEN="pen",i.EVENT_START="start",i.EVENT_MOVE="move",i.EVENT_END="end",i.DOCUMENT=document,i.plugins={},i.READY=!1,i.Instance=function(e,t){var o=this;return n(),this.element=e,this.enabled=!0,this.options=i.utils.extend(i.utils.extend({},i.defaults),t||{}),this.options.stop_browser_behavior&&i.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),i.event.onTouch(e,i.EVENT_START,function(e){o.enabled&&i.detection.startDetect(o,e)}),this},i.Instance.prototype={on:function(e,t){for(var n=e.split(" "),i=0;n.length>i;i++)this.element.addEventListener(n[i],t,!1);return this},off:function(e,t){for(var n=e.split(" "),i=0;n.length>i;i++)this.element.removeEventListener(n[i],t,!1);return this},trigger:function(e,t){var n=i.DOCUMENT.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t;var o=this.element;return i.utils.hasParent(t.target,o)&&(o=t.target),o.dispatchEvent(n),this},enable:function(e){return this.enabled=e,this}};var o=null,r=!1,a=!1;i.event={bindDom:function(e,t,n){for(var i=t.split(" "),o=0;i.length>o;o++)e.addEventListener(i[o],n,!1)},onTouch:function(e,t,n){var s=this;this.bindDom(e,i.EVENT_TYPES[t],function(c){var l=c.type.toLowerCase();if(!l.match(/mouse/)||!a){(l.match(/touch/)||l.match(/pointerdown/)||l.match(/mouse/)&&1===c.which)&&(r=!0),l.match(/touch|pointer/)&&(a=!0);var u=0;r&&(i.HAS_POINTEREVENTS&&t!=i.EVENT_END?u=i.PointerEvent.updatePointer(t,c):l.match(/touch/)?u=c.touches.length:a||(u=l.match(/up/)?0:1),u>0&&t==i.EVENT_END?t=i.EVENT_MOVE:u||(t=i.EVENT_END),u||null===o?o=c:c=o,n.call(i.detection,s.collectEventData(e,t,c)),i.HAS_POINTEREVENTS&&t==i.EVENT_END&&(u=i.PointerEvent.updatePointer(t,c))),u||(o=null,r=!1,a=!1,i.PointerEvent.reset())}})},determineEventTypes:function(){var e;e=i.HAS_POINTEREVENTS?i.PointerEvent.getEvents():i.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],i.EVENT_TYPES[i.EVENT_START]=e[0],i.EVENT_TYPES[i.EVENT_MOVE]=e[1],i.EVENT_TYPES[i.EVENT_END]=e[2]},getTouchList:function(e){return i.HAS_POINTEREVENTS?i.PointerEvent.getTouchList():e.touches?e.touches:[{identifier:1,pageX:e.pageX,pageY:e.pageY,target:e.target}]},collectEventData:function(e,t,n){var o=this.getTouchList(n,t),r=i.POINTER_TOUCH;return(n.type.match(/mouse/)||i.PointerEvent.matchType(i.POINTER_MOUSE,n))&&(r=i.POINTER_MOUSE),{center:i.utils.getCenter(o),timeStamp:(new Date).getTime(),target:n.target,touches:o,eventType:t,pointerType:r,srcEvent:n,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return i.detection.stopDetect()}}}},i.PointerEvent={pointers:{},getTouchList:function(){var e=this,t=[];return Object.keys(e.pointers).sort().forEach(function(n){t.push(e.pointers[n])}),t},updatePointer:function(e,t){return e==i.EVENT_END?this.pointers={}:(t.identifier=t.pointerId,this.pointers[t.pointerId]=t),Object.keys(this.pointers).length},matchType:function(e,t){if(!t.pointerType)return!1;var n={};return n[i.POINTER_MOUSE]=t.pointerType==t.MSPOINTER_TYPE_MOUSE||t.pointerType==i.POINTER_MOUSE,n[i.POINTER_TOUCH]=t.pointerType==t.MSPOINTER_TYPE_TOUCH||t.pointerType==i.POINTER_TOUCH,n[i.POINTER_PEN]=t.pointerType==t.MSPOINTER_TYPE_PEN||t.pointerType==i.POINTER_PEN,n[e]
},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},i.utils={extend:function(e,n,i){for(var o in n)e[o]!==t&&i||(e[o]=n[o]);return e},hasParent:function(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1},getCenter:function(e){for(var t=[],n=[],i=0,o=e.length;o>i;i++)t.push(e[i].pageX),n.push(e[i].pageY);return{pageX:(Math.min.apply(Math,t)+Math.max.apply(Math,t))/2,pageY:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2}},getVelocity:function(e,t,n){return{x:Math.abs(t/e)||0,y:Math.abs(n/e)||0}},getAngle:function(e,t){var n=t.pageY-e.pageY,i=t.pageX-e.pageX;return 180*Math.atan2(n,i)/Math.PI},getDirection:function(e,t){var n=Math.abs(e.pageX-t.pageX),o=Math.abs(e.pageY-t.pageY);return n>=o?e.pageX-t.pageX>0?i.DIRECTION_LEFT:i.DIRECTION_RIGHT:e.pageY-t.pageY>0?i.DIRECTION_UP:i.DIRECTION_DOWN},getDistance:function(e,t){var n=t.pageX-e.pageX,i=t.pageY-e.pageY;return Math.sqrt(n*n+i*i)},getScale:function(e,t){return e.length>=2&&t.length>=2?this.getDistance(t[0],t[1])/this.getDistance(e[0],e[1]):1},getRotation:function(e,t){return e.length>=2&&t.length>=2?this.getAngle(t[1],t[0])-this.getAngle(e[1],e[0]):0},isVertical:function(e){return e==i.DIRECTION_UP||e==i.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(e,t){var n,i=["webkit","khtml","moz","ms","o",""];if(t&&e.style){for(var o=0;i.length>o;o++)for(var r in t)t.hasOwnProperty(r)&&(n=r,i[o]&&(n=i[o]+n.substring(0,1).toUpperCase()+n.substring(1)),e.style[n]=t[r]);"none"==t.userSelect&&(e.onselectstart=function(){return!1})}}},i.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(e,t){this.current||(this.stopped=!1,this.current={inst:e,startEvent:i.utils.extend({},t),lastEvent:!1,name:""},this.detect(t))},detect:function(e){if(this.current&&!this.stopped){e=this.extendEventData(e);for(var t=this.current.inst.options,n=0,o=this.gestures.length;o>n;n++){var r=this.gestures[n];if(!this.stopped&&t[r.name]!==!1&&r.handler.call(r,e,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=e),e.eventType==i.EVENT_END&&!e.touches.length-1&&this.stopDetect(),e}},stopDetect:function(){this.previous=i.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(e){var t=this.current.startEvent;if(t&&(e.touches.length!=t.touches.length||e.touches===t.touches)){t.touches=[];for(var n=0,o=e.touches.length;o>n;n++)t.touches.push(i.utils.extend({},e.touches[n]))}var r=e.timeStamp-t.timeStamp,a=e.center.pageX-t.center.pageX,s=e.center.pageY-t.center.pageY,c=i.utils.getVelocity(r,a,s);return i.utils.extend(e,{deltaTime:r,deltaX:a,deltaY:s,velocityX:c.x,velocityY:c.y,distance:i.utils.getDistance(t.center,e.center),angle:i.utils.getAngle(t.center,e.center),direction:i.utils.getDirection(t.center,e.center),scale:i.utils.getScale(t.touches,e.touches),rotation:i.utils.getRotation(t.touches,e.touches),startEvent:t}),e},register:function(e){var n=e.defaults||{};return n[e.name]===t&&(n[e.name]=!0),i.utils.extend(i.defaults,n,!0),e.index=e.index||1e3,this.gestures.push(e),this.gestures.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}),this.gestures}},i.gestures=i.gestures||{},i.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(e,t){switch(e.eventType){case i.EVENT_START:clearTimeout(this.timer),i.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==i.detection.current.name&&t.trigger("hold",e)},t.options.hold_timeout);break;case i.EVENT_MOVE:e.distance>t.options.hold_threshold&&clearTimeout(this.timer);break;case i.EVENT_END:clearTimeout(this.timer)}}},i.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(e,t){if(e.eventType==i.EVENT_END){var n=i.detection.previous,o=!1;if(e.deltaTime>t.options.tap_max_touchtime||e.distance>t.options.tap_max_distance)return;n&&"tap"==n.name&&e.timeStamp-n.lastEvent.timeStamp<t.options.doubletap_interval&&e.distance<t.options.doubletap_distance&&(t.trigger("doubletap",e),o=!0),(!o||t.options.tap_always)&&(i.detection.current.name="tap",t.trigger(i.detection.current.name,e))}}},i.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(e,t){if(e.eventType==i.EVENT_END){if(t.options.swipe_max_touches>0&&e.touches.length>t.options.swipe_max_touches)return;(e.velocityX>t.options.swipe_velocity||e.velocityY>t.options.swipe_velocity)&&(t.trigger(this.name,e),t.trigger(this.name+e.direction,e))}}},i.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(e,n){if(i.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",e),this.triggered=!1,t;if(!(n.options.drag_max_touches>0&&e.touches.length>n.options.drag_max_touches))switch(e.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:if(e.distance<n.options.drag_min_distance&&i.detection.current.name!=this.name)return;i.detection.current.name=this.name,(i.detection.current.lastEvent.drag_locked_to_axis||n.options.drag_lock_to_axis&&n.options.drag_lock_min_distance<=e.distance)&&(e.drag_locked_to_axis=!0);var o=i.detection.current.lastEvent.direction;e.drag_locked_to_axis&&o!==e.direction&&(e.direction=i.utils.isVertical(o)?0>e.deltaY?i.DIRECTION_UP:i.DIRECTION_DOWN:0>e.deltaX?i.DIRECTION_LEFT:i.DIRECTION_RIGHT),this.triggered||(n.trigger(this.name+"start",e),this.triggered=!0),n.trigger(this.name,e),n.trigger(this.name+e.direction,e),(n.options.drag_block_vertical&&i.utils.isVertical(e.direction)||n.options.drag_block_horizontal&&!i.utils.isVertical(e.direction))&&e.preventDefault();break;case i.EVENT_END:this.triggered&&n.trigger(this.name+"end",e),this.triggered=!1}}},i.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(e,n){if(i.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",e),this.triggered=!1,t;if(!(2>e.touches.length))switch(n.options.transform_always_block&&e.preventDefault(),e.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:var o=Math.abs(1-e.scale),r=Math.abs(e.rotation);if(n.options.transform_min_scale>o&&n.options.transform_min_rotation>r)return;i.detection.current.name=this.name,this.triggered||(n.trigger(this.name+"start",e),this.triggered=!0),n.trigger(this.name,e),r>n.options.transform_min_rotation&&n.trigger("rotate",e),o>n.options.transform_min_scale&&(n.trigger("pinch",e),n.trigger("pinch"+(1>e.scale?"in":"out"),e));break;case i.EVENT_END:this.triggered&&n.trigger(this.name+"end",e),this.triggered=!1}}},i.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(e,n){return n.options.prevent_mouseevents&&e.pointerType==i.POINTER_MOUSE?(e.stopDetect(),t):(n.options.prevent_default&&e.preventDefault(),e.eventType==i.EVENT_START&&n.trigger(this.name,e),t)}},i.gestures.Release={name:"release",index:1/0,handler:function(e,t){e.eventType==i.EVENT_END&&t.trigger(this.name,e)}},"object"==typeof module&&"object"==typeof module.exports?module.exports=i:(e.Hammer=i,"function"==typeof e.define&&e.define.amd&&e.define("hammer",[],function(){return i}))}(this),function(e,t){"use strict";e!==t&&(Hammer.event.bindDom=function(n,i,o){e(n).on(i,function(e){var n=e.originalEvent||e;n.pageX===t&&(n.pageX=e.pageX,n.pageY=e.pageY),n.target||(n.target=e.target),n.which===t&&(n.which=n.button),n.preventDefault||(n.preventDefault=e.preventDefault),n.stopPropagation||(n.stopPropagation=e.stopPropagation),o.call(this,n)})},Hammer.Instance.prototype.on=function(t,n){return e(this.element).on(t,n)},Hammer.Instance.prototype.off=function(t,n){return e(this.element).off(t,n)},Hammer.Instance.prototype.trigger=function(t,n){var i=e(this.element);return i.has(n.target).length&&(i=e(n.target)),i.trigger({type:t,gesture:n})},e.fn.hammer=function(t){return this.each(function(){var n=e(this),i=n.data("hammer");i?i&&t&&Hammer.utils.extend(i.options,t):n.data("hammer",new Hammer(this,t||{}))})})}(window.jQuery||window.Zepto)}).call(this),function(){jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,n,i,o){return jQuery.easing[jQuery.easing.def](e,t,n,i,o)},easeInQuad:function(e,t,n,i,o){return i*(t/=o)*t+n},easeOutQuad:function(e,t,n,i,o){return-i*(t/=o)*(t-2)+n},easeInOutQuad:function(e,t,n,i,o){return(t/=o/2)<1?i/2*t*t+n:-i/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,i,o){return i*(t/=o)*t*t+n},easeOutCubic:function(e,t,n,i,o){return i*((t=t/o-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,i,o){return(t/=o/2)<1?i/2*t*t*t+n:i/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,i,o){return i*(t/=o)*t*t*t+n},easeOutQuart:function(e,t,n,i,o){return-i*((t=t/o-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,i,o){return(t/=o/2)<1?i/2*t*t*t*t+n:-i/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,i,o){return i*(t/=o)*t*t*t*t+n},easeOutQuint:function(e,t,n,i,o){return i*((t=t/o-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,i,o){return(t/=o/2)<1?i/2*t*t*t*t*t+n:i/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,i,o){return-i*Math.cos(t/o*(Math.PI/2))+i+n},easeOutSine:function(e,t,n,i,o){return i*Math.sin(t/o*(Math.PI/2))+n},easeInOutSine:function(e,t,n,i,o){return-i/2*(Math.cos(Math.PI*t/o)-1)+n},easeInExpo:function(e,t,n,i,o){return 0==t?n:i*Math.pow(2,10*(t/o-1))+n},easeOutExpo:function(e,t,n,i,o){return t==o?n+i:i*(-Math.pow(2,-10*t/o)+1)+n},easeInOutExpo:function(e,t,n,i,o){return 0==t?n:t==o?n+i:(t/=o/2)<1?i/2*Math.pow(2,10*(t-1))+n:i/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,i,o){return-i*(Math.sqrt(1-(t/=o)*t)-1)+n},easeOutCirc:function(e,t,n,i,o){return i*Math.sqrt(1-(t=t/o-1)*t)+n},easeInOutCirc:function(e,t,n,i,o){return(t/=o/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+n:i/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,i,o){var r=1.70158,a=0,s=i;if(0==t)return n;if(1==(t/=o))return n+i;if(a||(a=.3*o),s<Math.abs(i)){s=i;var r=a/4}else var r=a/(2*Math.PI)*Math.asin(i/s);return-(s*Math.pow(2,10*(t-=1))*Math.sin(2*(t*o-r)*Math.PI/a))+n},easeOutElastic:function(e,t,n,i,o){var r=1.70158,a=0,s=i;if(0==t)return n;if(1==(t/=o))return n+i;if(a||(a=.3*o),s<Math.abs(i)){s=i;var r=a/4}else var r=a/(2*Math.PI)*Math.asin(i/s);return s*Math.pow(2,-10*t)*Math.sin(2*(t*o-r)*Math.PI/a)+i+n},easeInOutElastic:function(e,t,n,i,o){var r=1.70158,a=0,s=i;if(0==t)return n;if(2==(t/=o/2))return n+i;if(a||(a=.3*o*1.5),s<Math.abs(i)){s=i;var r=a/4}else var r=a/(2*Math.PI)*Math.asin(i/s);return 1>t?-.5*s*Math.pow(2,10*(t-=1))*Math.sin(2*(t*o-r)*Math.PI/a)+n:s*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*o-r)*Math.PI/a)*.5+i+n},easeInBack:function(e,t,n,i,o,r){return void 0==r&&(r=1.70158),i*(t/=o)*t*((r+1)*t-r)+n},easeOutBack:function(e,t,n,i,o,r){return void 0==r&&(r=1.70158),i*((t=t/o-1)*t*((r+1)*t+r)+1)+n},easeInOutBack:function(e,t,n,i,o,r){return void 0==r&&(r=1.70158),(t/=o/2)<1?i/2*t*t*(((r*=1.525)+1)*t-r)+n:i/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+n},easeInBounce:function(e,t,n,i,o){return i-jQuery.easing.easeOutBounce(e,o-t,0,i,o)+n},easeOutBounce:function(e,t,n,i,o){return(t/=o)<1/2.75?7.5625*i*t*t+n:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+n:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+n:i*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(e,t,n,i,o){return o/2>t?.5*jQuery.easing.easeInBounce(e,2*t,0,i,o)+n:.5*jQuery.easing.easeOutBounce(e,2*t-o,0,i,o)+.5*i+n}})}.call(this),function(){function e(t){"use strict";var n,i=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=t,!t||!t.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return e.prototype.onClick.apply(i,arguments)},this.onMouse=function(){return e.prototype.onMouse.apply(i,arguments)},this.onTouchStart=function(){return e.prototype.onTouchStart.apply(i,arguments)},this.onTouchMove=function(){return e.prototype.onTouchMove.apply(i,arguments)},this.onTouchEnd=function(){return e.prototype.onTouchEnd.apply(i,arguments)},this.onTouchCancel=function(){return e.prototype.onTouchCancel.apply(i,arguments)},e.notNeeded(t)||(this.deviceIsAndroid&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,i){var o=Node.prototype.removeEventListener;"click"===e?o.call(t,e,n.hijacked||n,i):o.call(t,e,n,i)},t.addEventListener=function(e,n,i){var o=Node.prototype.addEventListener;"click"===e?o.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),i):o.call(t,e,n,i)}),"function"==typeof t.onclick&&(n=t.onclick,t.addEventListener("click",function(e){n(e)},!1),t.onclick=null))}e.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,e.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),e.prototype.deviceIsIOS4=e.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),e.prototype.deviceIsIOSWithBadTarget=e.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),e.prototype.needsClick=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===e.type||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){"use strict";var n,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){"use strict";return this.deviceIsAndroid&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){"use strict";var t;this.deviceIsIOS&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){"use strict";var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){"use strict";return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){"use strict";var t,n,i;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],this.deviceIsIOS){if(i=window.getSelection(),i.rangeCount&&!i.isCollapsed)return!0;if(!this.deviceIsIOS4){if(n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<200&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){"use strict";var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n?!0:!1},e.prototype.onTouchMove=function(e){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},e.prototype.findControl=function(e){"use strict";return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){"use strict";var t,n,i,o,r,a=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(r=e.changedTouches[0],a=document.elementFromPoint(r.pageX-window.pageXOffset,r.pageY-window.pageYOffset)||a,a.fastClickScrollParent=this.targetElement.fastClickScrollParent),i=a.tagName.toLowerCase(),"label"===i){if(t=this.findControl(a)){if(this.focus(a),this.deviceIsAndroid)return!1;a=t}}else if(this.needsFocus(a))return e.timeStamp-n>100||this.deviceIsIOS&&window.top!==window&&"input"===i?(this.targetElement=null,!1):(this.focus(a),this.deviceIsIOS4&&"select"===i||(this.targetElement=null,e.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(o=a.fastClickScrollParent,o&&o.fastClickLastScrollTop!==o.scrollTop)?!0:(this.needsClick(a)||(e.preventDefault(),this.sendClick(a,e)),!1)},e.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){"use strict";return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0:!0},e.prototype.onClick=function(e){"use strict";var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){"use strict";var e=this.layer;this.deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(t){"use strict";var n,i;if("undefined"==typeof window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!e.prototype.deviceIsAndroid)return!0;if(n=document.querySelector("meta[name=viewport]")){if(-1!==n.content.indexOf("user-scalable=no"))return!0;if(i>31&&window.innerWidth<=window.screen.width)return!0}}return"none"===t.style.msTouchAction?!0:!1},e.attach=function(t){"use strict";return new e(t)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}.call(this),function(){!function(e){function t(e){if(e in d.style)return e;var t=["Moz","Webkit","O","ms"],n=e.charAt(0).toUpperCase()+e.substr(1);if(e in d.style)return e;for(var i=0;i<t.length;++i){var o=t[i]+n;if(o in d.style)return o}}function n(){return d.style[f.transform]="",d.style[f.transform]="rotateY(90deg)",""!==d.style[f.transform]}function i(e){return"string"==typeof e&&this.parse(e),this}function o(e,t,n){t===!0?e.queue(n):t?e.queue(t,n):n()}function r(t){var n=[];return e.each(t,function(t){t=e.camelCase(t),t=e.transit.propertyMap[t]||e.cssProps[t]||t,t=c(t),-1===e.inArray(t,n)&&n.push(t)}),n}function a(t,n,i,o){var a=r(t);e.cssEase[i]&&(i=e.cssEase[i]);var s=""+u(n)+" "+i;parseInt(o,10)>0&&(s+=" "+u(o));var c=[];return e.each(a,function(e,t){c.push(t+" "+s)}),c.join(", ")}function s(t,n){n||(e.cssNumber[t]=!0),e.transit.propertyMap[t]=f.transform,e.cssHooks[t]={get:function(n){var i=e(n).css("transit:transform");return i.get(t)},set:function(n,i){var o=e(n).css("transit:transform");o.setFromString(t,i),e(n).css({"transit:transform":o})}}}function c(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function l(e,t){return"string"!=typeof e||e.match(/^[\-0-9\.]+$/)?""+e+t:e}function u(t){var n=t;return e.fx.speeds[n]&&(n=e.fx.speeds[n]),l(n,"ms")}e.transit={version:"0.9.9",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var d=document.createElement("div"),f={},p=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;f.transition=t("transition"),f.transitionDelay=t("transitionDelay"),f.transform=t("transform"),f.transformOrigin=t("transformOrigin"),f.transform3d=n();var h={transition:"transitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},g=f.transitionEnd=h[f.transition]||null;for(var m in f)f.hasOwnProperty(m)&&"undefined"==typeof e.support[m]&&(e.support[m]=f[m]);d=null,e.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},e.cssHooks["transit:transform"]={get:function(t){return e(t).data("transform")||new i},set:function(t,n){var o=n;o instanceof i||(o=new i(o)),t.style[f.transform]="WebkitTransform"!==f.transform||p?o.toString():o.toString(!0),e(t).data("transform",o)}},e.cssHooks.transform={set:e.cssHooks["transit:transform"].set},e.fn.jquery<"1.8"&&(e.cssHooks.transformOrigin={get:function(e){return e.style[f.transformOrigin]},set:function(e,t){e.style[f.transformOrigin]=t}},e.cssHooks.transition={get:function(e){return e.style[f.transition]},set:function(e,t){e.style[f.transition]=t}}),s("scale"),s("translate"),s("rotate"),s("rotateX"),s("rotateY"),s("rotate3d"),s("perspective"),s("skewX"),s("skewY"),s("x",!0),s("y",!0),i.prototype={setFromString:function(e,t){var n="string"==typeof t?t.split(","):t.constructor===Array?t:[t];n.unshift(e),i.prototype.set.apply(this,n)},set:function(e){var t=Array.prototype.slice.apply(arguments,[1]);this.setter[e]?this.setter[e].apply(this,t):this[e]=t.join(",")},get:function(e){return this.getter[e]?this.getter[e].apply(this):this[e]||0},setter:{rotate:function(e){this.rotate=l(e,"deg")},rotateX:function(e){this.rotateX=l(e,"deg")},rotateY:function(e){this.rotateY=l(e,"deg")},scale:function(e,t){void 0===t&&(t=e),this.scale=e+","+t},skewX:function(e){this.skewX=l(e,"deg")},skewY:function(e){this.skewY=l(e,"deg")},perspective:function(e){this.perspective=l(e,"px")},x:function(e){this.set("translate",e,null)},y:function(e){this.set("translate",null,e)},translate:function(e,t){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!==e&&void 0!==e&&(this._translateX=l(e,"px")),null!==t&&void 0!==t&&(this._translateY=l(t,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var e=(this.scale||"1,1").split(",");return e[0]&&(e[0]=parseFloat(e[0])),e[1]&&(e[1]=parseFloat(e[1])),e[0]===e[1]?e[0]:e},rotate3d:function(){for(var e=(this.rotate3d||"0,0,0,0deg").split(","),t=0;3>=t;++t)e[t]&&(e[t]=parseFloat(e[t]));return e[3]&&(e[3]=l(e[3],"deg")),e}},parse:function(e){var t=this;e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,n,i){t.setFromString(n,i)})},toString:function(e){var t=[];for(var n in this)if(this.hasOwnProperty(n)){if(!f.transform3d&&("rotateX"===n||"rotateY"===n||"perspective"===n||"transformOrigin"===n))continue;"_"!==n[0]&&(e&&"scale"===n?t.push(n+"3d("+this[n]+",1)"):e&&"translate"===n?t.push(n+"3d("+this[n]+",0)"):t.push(n+"("+this[n]+")"))}return t.join(" ")}},e.fn.transition=e.fn.transit=function(t,n,i,r){var s=this,c=0,l=!0;"function"==typeof n&&(r=n,n=void 0),"function"==typeof i&&(r=i,i=void 0),"undefined"!=typeof t.easing&&(i=t.easing,delete t.easing),"undefined"!=typeof t.duration&&(n=t.duration,delete t.duration),"undefined"!=typeof t.complete&&(r=t.complete,delete t.complete),"undefined"!=typeof t.queue&&(l=t.queue,delete t.queue),"undefined"!=typeof t.delay&&(c=t.delay,delete t.delay),"undefined"==typeof n&&(n=e.fx.speeds._default),"undefined"==typeof i&&(i=e.cssEase._default),n=u(n);var d=a(t,n,i,c),p=e.transit.enabled&&f.transition,h=p?parseInt(n,10)+parseInt(c,10):0;if(0===h){var m=function(e){s.css(t),r&&r.apply(s),e&&e()};return o(s,l,m),s}var v={},y=function(n){var i=!1,o=function(){i&&s.unbind(g,o),h>0&&s.each(function(){this.style[f.transition]=v[this]||null}),"function"==typeof r&&r.apply(s),"function"==typeof n&&n()};h>0&&g&&e.transit.useTransitionEnd?(i=!0,s.bind(g,o)):window.setTimeout(o,h),s.each(function(){h>0&&(this.style[f.transition]=d),e(this).css(t)})},b=function(e){this.offsetWidth,y(e)};return o(s,l,b),this},e.transit.getTransitionValue=a}(jQuery)}.call(this),function(){!function(){var e=!1;window.JQClass=function(){},JQClass.classes={},JQClass.extend=function t(n){function i(){!e&&this._init&&this._init.apply(this,arguments)}var o=this.prototype;e=!0;var r=new this;e=!1;for(var a in n)r[a]="function"==typeof n[a]&&"function"==typeof o[a]?function(e,t){return function(){var n=this._super;this._super=function(t){return o[e].apply(this,t)};var i=t.apply(this,arguments);return this._super=n,i}}(a,n[a]):n[a];return i.prototype=r,i.prototype.constructor=i,i.extend=t,i}}(),function($){function camelCase(e){return e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})}JQClass.classes.JQPlugin=JQClass.extend({name:"plugin",defaultOptions:{},regionalOptions:{},_getters:[],_getMarker:function(){return"is-"+this.name},_init:function(){$.extend(this.defaultOptions,this.regionalOptions&&this.regionalOptions[""]||{});var e=camelCase(this.name);$[e]=this,$.fn[e]=function(t){var n=Array.prototype.slice.call(arguments,1);return $[e]._isNotChained(t,n)?$[e][t].apply($[e],[this[0]].concat(n)):this.each(function(){if("string"==typeof t){if("_"===t[0]||!$[e][t])throw"Unknown method: "+t;$[e][t].apply($[e],[this].concat(n))}else $[e]._attach(this,t)})}},setDefaults:function(e){$.extend(this.defaultOptions,e||{})},_isNotChained:function(e,t){return"option"===e&&(0===t.length||1===t.length&&"string"==typeof t[0])?!0:$.inArray(e,this._getters)>-1},_attach:function(e,t){if(e=$(e),!e.hasClass(this._getMarker())){e.addClass(this._getMarker()),t=$.extend({},this.defaultOptions,this._getMetadata(e),t||{});var n=$.extend({name:this.name,elem:e,options:t},this._instSettings(e,t));e.data(this.name,n),this._postAttach(e,n),this.option(e,t)}},_instSettings:function(){return{}},_postAttach:function(){},_getMetadata:function(elem){try{var data=elem.data(this.name.toLowerCase())||"";data=data.replace(/'/g,'"'),data=data.replace(/([a-zA-Z0-9]+):/g,function(e,t,n){var i=data.substring(0,n).match(/"/g);return i&&i.length%2!==0?t+":":'"'+t+'":'}),data=$.parseJSON("{"+data+"}");for(var name in data){var value=data[name];"string"==typeof value&&value.match(/^new Date\((.*)\)$/)&&(data[name]=eval(value))}return data}catch(e){return{}}},_getInst:function(e){return $(e).data(this.name)||{}},option:function(e,t,n){e=$(e);var i=e.data(this.name);if(!t||"string"==typeof t&&null==n){var o=(i||{}).options;return o&&t?o[t]:o}if(e.hasClass(this._getMarker())){var o=t||{};"string"==typeof t&&(o={},o[t]=n),this._optionsChanged(e,i,o),$.extend(i.options,o)}},_optionsChanged:function(){},destroy:function(e){e=$(e),e.hasClass(this._getMarker())&&(this._preDestroy(e,this._getInst(e)),e.removeData(this.name).removeClass(this._getMarker()))},_preDestroy:function(){}}),$.JQPlugin={createPlugin:function(e,t){"object"==typeof e&&(t=e,e="JQPlugin"),e=camelCase(e);var n=camelCase(t.name);JQClass.classes[n]=JQClass.classes[e].extend(t),new JQClass.classes[n]}}}(jQuery)}.call(this),function(){!function(e){var t="countdown",n=0,i=1,o=2,r=3,a=4,s=5,c=6;e.JQPlugin.createPlugin({name:t,defaultOptions:{until:null,since:null,timezone:null,serverSync:null,format:"dHMS",layout:"",compact:!1,padZeroes:!1,significant:0,description:"",expiryUrl:"",expiryText:"",alwaysExpire:!1,onExpiry:null,onTick:null,tickInterval:1},regionalOptions:{"":{labels:["Years","Months","Weeks","Days","Hours","Minutes","Seconds"],labels1:["Year","Month","Week","Day","Hour","Minute","Second"],compactLabels:["y","m","w","d"],whichLabels:null,digits:["0","1","2","3","4","5","6","7","8","9"],timeSeparator:":",isRTL:!1}},_getters:["getTimes"],_rtlClass:t+"-rtl",_sectionClass:t+"-section",_amountClass:t+"-amount",_periodClass:t+"-period",_rowClass:t+"-row",_holdingClass:t+"-holding",_showClass:t+"-show",_descrClass:t+"-descr",_timerElems:[],_init:function(){function t(e){var s=1e12>e?o?performance.now()+performance.timing.navigationStart:i():e||i();s-a>=1e3&&(n._updateElems(),a=s),r(t)}var n=this;this._super(),this._serverSyncs=[];var i="function"==typeof Date.now?Date.now:function(){return(new Date).getTime()},o=window.performance&&"function"==typeof window.performance.now,r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null,a=0;!r||e.noRequestAnimationFrame?(e.noRequestAnimationFrame=null,setInterval(function(){n._updateElems()},980)):(a=window.animationStartTime||window.webkitAnimationStartTime||window.mozAnimationStartTime||window.oAnimationStartTime||window.msAnimationStartTime||i(),r(t))},UTCDate:function(e,t,n,i,o,r,a,s){"object"==typeof t&&t.constructor==Date&&(s=t.getMilliseconds(),a=t.getSeconds(),r=t.getMinutes(),o=t.getHours(),i=t.getDate(),n=t.getMonth(),t=t.getFullYear());var c=new Date;return c.setUTCFullYear(t),c.setUTCDate(1),c.setUTCMonth(n||0),c.setUTCDate(i||1),c.setUTCHours(o||0),c.setUTCMinutes((r||0)-(Math.abs(e)<30?60*e:e)),c.setUTCSeconds(a||0),c.setUTCMilliseconds(s||0),c},periodsToSeconds:function(e){return 31557600*e[0]+2629800*e[1]+604800*e[2]+86400*e[3]+3600*e[4]+60*e[5]+e[6]},_instSettings:function(){return{_periods:[0,0,0,0,0,0,0]}},_addElem:function(e){this._hasElem(e)||this._timerElems.push(e)},_hasElem:function(t){return e.inArray(t,this._timerElems)>-1},_removeElem:function(t){this._timerElems=e.map(this._timerElems,function(e){return e==t?null:e})},_updateElems:function(){for(var e=this._timerElems.length-1;e>=0;e--)this._updateCountdown(this._timerElems[e])
},_optionsChanged:function(t,n,i){i.layout&&(i.layout=i.layout.replace(/&lt;/g,"<").replace(/&gt;/g,">")),this._resetExtraLabels(n.options,i);var o=n.options.timezone!=i.timezone;e.extend(n.options,i),this._adjustSettings(t,n,null!=i.until||null!=i.since||o);var r=new Date;(n._since&&n._since<r||n._until&&n._until>r)&&this._addElem(t[0]),this._updateCountdown(t,n)},_updateCountdown:function(t,n){if(t=t.jquery?t:e(t),n=n||t.data(this.name)){if(t.html(this._generateHTML(n)).toggleClass(this._rtlClass,n.options.isRTL),e.isFunction(n.options.onTick)){var i="lap"!=n._hold?n._periods:this._calculatePeriods(n,n._show,n.options.significant,new Date);(1==n.options.tickInterval||this.periodsToSeconds(i)%n.options.tickInterval==0)&&n.options.onTick.apply(t[0],[i])}var o="pause"!=n._hold&&(n._since?n._now.getTime()<n._since.getTime():n._now.getTime()>=n._until.getTime());if(o&&!n._expiring){if(n._expiring=!0,this._hasElem(t[0])||n.options.alwaysExpire){if(this._removeElem(t[0]),e.isFunction(n.options.onExpiry)&&n.options.onExpiry.apply(t[0],[]),n.options.expiryText){var r=n.options.layout;n.options.layout=n.options.expiryText,this._updateCountdown(t[0],n),n.options.layout=r}n.options.expiryUrl&&(window.location=n.options.expiryUrl)}n._expiring=!1}else"pause"==n._hold&&this._removeElem(t[0])}},_resetExtraLabels:function(e,t){var n=!1;for(var i in t)if("whichLabels"!=i&&i.match(/[Ll]abels/)){n=!0;break}if(n)for(var i in e)i.match(/[Ll]abels[02-9]|compactLabels1/)&&(e[i]=null)},_adjustSettings:function(t,n,i){for(var o,r=0,a=null,s=0;s<this._serverSyncs.length;s++)if(this._serverSyncs[s][0]==n.options.serverSync){a=this._serverSyncs[s][1];break}if(null!=a)r=n.options.serverSync?a:0,o=new Date;else{var c=e.isFunction(n.options.serverSync)?n.options.serverSync.apply(t[0],[]):null;o=new Date,r=c?o.getTime()-c.getTime():0,this._serverSyncs.push([n.options.serverSync,r])}var l=n.options.timezone;l=null==l?-o.getTimezoneOffset():l,(i||!i&&null==n._until&&null==n._since)&&(n._since=n.options.since,null!=n._since&&(n._since=this.UTCDate(l,this._determineTime(n._since,null)),n._since&&r&&n._since.setMilliseconds(n._since.getMilliseconds()+r)),n._until=this.UTCDate(l,this._determineTime(n.options.until,o)),r&&n._until.setMilliseconds(n._until.getMilliseconds()+r)),n._show=this._determineShow(n)},_preDestroy:function(e){this._removeElem(e[0]),e.empty()},pause:function(e){this._hold(e,"pause")},lap:function(e){this._hold(e,"lap")},resume:function(e){this._hold(e,null)},toggle:function(t){var n=e.data(t,this.name)||{};this[n._hold?"resume":"pause"](t)},toggleLap:function(t){var n=e.data(t,this.name)||{};this[n._hold?"resume":"lap"](t)},_hold:function(t,n){var i=e.data(t,this.name);if(i){if("pause"==i._hold&&!n){i._periods=i._savePeriods;var o=i._since?"-":"+";i[i._since?"_since":"_until"]=this._determineTime(o+i._periods[0]+"y"+o+i._periods[1]+"o"+o+i._periods[2]+"w"+o+i._periods[3]+"d"+o+i._periods[4]+"h"+o+i._periods[5]+"m"+o+i._periods[6]+"s"),this._addElem(t)}i._hold=n,i._savePeriods="pause"==n?i._periods:null,e.data(t,this.name,i),this._updateCountdown(t,i)}},getTimes:function(t){var n=e.data(t,this.name);return n?"pause"==n._hold?n._savePeriods:n._hold?this._calculatePeriods(n,n._show,n.options.significant,new Date):n._periods:null},_determineTime:function(e,t){var n=this,i=function(e){var t=new Date;return t.setTime(t.getTime()+1e3*e),t},o=function(e){e=e.toLowerCase();for(var t=new Date,i=t.getFullYear(),o=t.getMonth(),r=t.getDate(),a=t.getHours(),s=t.getMinutes(),c=t.getSeconds(),l=/([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g,u=l.exec(e);u;){switch(u[2]||"s"){case"s":c+=parseInt(u[1],10);break;case"m":s+=parseInt(u[1],10);break;case"h":a+=parseInt(u[1],10);break;case"d":r+=parseInt(u[1],10);break;case"w":r+=7*parseInt(u[1],10);break;case"o":o+=parseInt(u[1],10),r=Math.min(r,n._getDaysInMonth(i,o));break;case"y":i+=parseInt(u[1],10),r=Math.min(r,n._getDaysInMonth(i,o))}u=l.exec(e)}return new Date(i,o,r,a,s,c,0)},r=null==e?t:"string"==typeof e?o(e):"number"==typeof e?i(e):e;return r&&r.setMilliseconds(0),r},_getDaysInMonth:function(e,t){return 32-new Date(e,t,32).getDate()},_normalLabels:function(e){return e},_generateHTML:function(t){t._periods=t._hold?t._periods:this._calculatePeriods(t,t._show,t.options.significant,new Date);for(var i=!1,o=0,r=t.options.significant,a=e.extend({},t._show),s=n;c>=s;s++)i|="?"==t._show[s]&&t._periods[s]>0,a[s]="?"!=t._show[s]||i?t._show[s]:null,o+=a[s]?1:0,r-=t._periods[s]>0?1:0;for(var l=[!1,!1,!1,!1,!1,!1,!1],s=c;s>=n;s--)t._show[s]&&(t._periods[s]?l[s]=!0:(l[s]=r>0,r--));t.options.compact?t.options.compactLabels:t.options.labels,t.options.whichLabels||this._normalLabels,t.options.padZeroes?2:1;return""},_buildLayout:function(t,l,u,d,f,p){for(var h=t.options[d?"compactLabels":"labels"],g=t.options.whichLabels||this._normalLabels,m=function(e){return(t.options[(d?"compactLabels":"labels")+g(t._periods[e])]||h)[e]},v=function(e,n){return t.options.digits[Math.floor(e/n)%10]},y={desc:t.options.description,sep:t.options.timeSeparator,yl:m(n),yn:this._minDigits(t,t._periods[n],1),ynn:this._minDigits(t,t._periods[n],2),ynnn:this._minDigits(t,t._periods[n],3),y1:v(t._periods[n],1),y10:v(t._periods[n],10),y100:v(t._periods[n],100),y1000:v(t._periods[n],1e3),ol:m(i),on:this._minDigits(t,t._periods[i],1),onn:this._minDigits(t,t._periods[i],2),onnn:this._minDigits(t,t._periods[i],3),o1:v(t._periods[i],1),o10:v(t._periods[i],10),o100:v(t._periods[i],100),o1000:v(t._periods[i],1e3),wl:m(o),wn:this._minDigits(t,t._periods[o],1),wnn:this._minDigits(t,t._periods[o],2),wnnn:this._minDigits(t,t._periods[o],3),w1:v(t._periods[o],1),w10:v(t._periods[o],10),w100:v(t._periods[o],100),w1000:v(t._periods[o],1e3),dl:m(r),dn:this._minDigits(t,t._periods[r],1),dnn:this._minDigits(t,t._periods[r],2),dnnn:this._minDigits(t,t._periods[r],3),d1:v(t._periods[r],1),d10:v(t._periods[r],10),d100:v(t._periods[r],100),d1000:v(t._periods[r],1e3),hl:m(a),hn:this._minDigits(t,t._periods[a],1),hnn:this._minDigits(t,t._periods[a],2),hnnn:this._minDigits(t,t._periods[a],3),h1:v(t._periods[a],1),h10:v(t._periods[a],10),h100:v(t._periods[a],100),h1000:v(t._periods[a],1e3),ml:m(s),mn:this._minDigits(t,t._periods[s],1),mnn:this._minDigits(t,t._periods[s],2),mnnn:this._minDigits(t,t._periods[s],3),m1:v(t._periods[s],1),m10:v(t._periods[s],10),m100:v(t._periods[s],100),m1000:v(t._periods[s],1e3),sl:m(c),sn:this._minDigits(t,t._periods[c],1),snn:this._minDigits(t,t._periods[c],2),snnn:this._minDigits(t,t._periods[c],3),s1:v(t._periods[c],1),s10:v(t._periods[c],10),s100:v(t._periods[c],100),s1000:v(t._periods[c],1e3)},b=u,_=n;c>=_;_++){var w="yowdhms".charAt(_),k=new RegExp("\\{"+w+"<\\}([\\s\\S]*)\\{"+w+">\\}","g");b=b.replace(k,!f&&l[_]||f&&p[_]?"$1":"")}return e.each(y,function(e,t){var n=new RegExp("\\{"+e+"\\}","g");b=b.replace(n,t)}),b},_minDigits:function(e,t,n){return t=""+t,t.length>=n?this._translateDigits(e,t):(t="0000000000"+t,this._translateDigits(e,t.substr(t.length-n)))},_translateDigits:function(e,t){return(""+t).replace(/[0-9]/g,function(t){return e.options.digits[t]})},_determineShow:function(e){var t=e.options.format,l=[];return l[n]=t.match("y")?"?":t.match("Y")?"!":null,l[i]=t.match("o")?"?":t.match("O")?"!":null,l[o]=t.match("w")?"?":t.match("W")?"!":null,l[r]=t.match("d")?"?":t.match("D")?"!":null,l[a]=t.match("h")?"?":t.match("H")?"!":null,l[s]=t.match("m")?"?":t.match("M")?"!":null,l[c]=t.match("s")?"?":t.match("S")?"!":null,l},_calculatePeriods:function(e,t,l,u){e._now=u,e._now.setMilliseconds(0);var d=new Date(e._now.getTime());e._since?u.getTime()<e._since.getTime()?e._now=u=d:u=e._since:(d.setTime(e._until.getTime()),u.getTime()>e._until.getTime()&&(e._now=u=d));var f=[0,0,0,0,0,0,0];if(t[n]||t[i]){var p=this._getDaysInMonth(u.getFullYear(),u.getMonth()),h=this._getDaysInMonth(d.getFullYear(),d.getMonth()),g=d.getDate()==u.getDate()||d.getDate()>=Math.min(p,h)&&u.getDate()>=Math.min(p,h),m=function(e){return 60*(60*e.getHours()+e.getMinutes())+e.getSeconds()},v=Math.max(0,12*(d.getFullYear()-u.getFullYear())+d.getMonth()-u.getMonth()+(d.getDate()<u.getDate()&&!g||g&&m(d)<m(u)?-1:0));f[n]=t[n]?Math.floor(v/12):0,f[i]=t[i]?v-12*f[n]:0,u=new Date(u.getTime());var y=u.getDate()==p,b=this._getDaysInMonth(u.getFullYear()+f[n],u.getMonth()+f[i]);u.getDate()>b&&u.setDate(b),u.setFullYear(u.getFullYear()+f[n]),u.setMonth(u.getMonth()+f[i]),y&&u.setDate(b)}var _=Math.floor((d.getTime()-u.getTime())/1e3),w=function(e,n){f[e]=t[e]?Math.floor(_/n):0,_-=f[e]*n};if(w(o,604800),w(r,86400),w(a,3600),w(s,60),w(c,1),_>0&&!e._since)for(var k=[1,12,4.3482,7,24,60,60],T=c,S=1,x=c;x>=n;x--)t[x]&&(f[T]>=S&&(f[T]=0,_=1),_>0&&(f[x]++,_=0,T=x,S=1)),S*=k[x];if(l)for(var x=n;c>=x;x++)l&&f[x]?l--:l||(f[x]=0);return f}})}(jQuery)}.call(this),"undefined"==typeof Package&&(Package={}),Package.youtap={}}(),function(){Package.meteor.Meteor;(function(){!function(e,t,n,i){e.fn.accordion=function(t){var n,o=e(this),r=(new Date).getTime(),a=[],s=arguments[0],c="string"==typeof s,l=[].slice.call(arguments,1);return o.each(function(){var u,d=e.isPlainObject(t)?e.extend(!0,{},e.fn.accordion.settings,t):e.extend({},e.fn.accordion.settings),f=d.className,p=d.namespace,h=d.selector,g=d.error,m="."+p,v="module-"+p,y=o.selector||"",b=e(this),_=b.find(h.title),w=b.find(h.content),k=this,T=b.data(v);u={initialize:function(){u.debug("Initializing accordion with bound events",b),_.on("click"+m,u.event.click),u.instantiate()},instantiate:function(){T=u,b.data(v,u)},destroy:function(){u.debug("Destroying previous accordion for",b),b.removeData(v),_.off(m)},event:{click:function(){u.verbose("Title clicked",this);var t=e(this),n=_.index(t);u.toggle(n)},resetStyle:function(){u.verbose("Resetting styles on element",this),e(this).attr("style","").removeAttr("style").children().attr("style","").removeAttr("style")}},toggle:function(e){u.debug("Toggling content content at index",e);var t=_.eq(e),n=t.next(w),i=n.is(":visible");i?d.collapsible?u.close(e):u.debug("Cannot close accordion content collapsing is disabled"):u.open(e)},open:function(t){var n=_.eq(t),i=n.next(w),o=n.siblings(h.title).filter("."+f.active),r=o.next(_),a=o.size()>0;i.is(":animated")||(u.debug("Opening accordion content",n),d.exclusive&&a&&(o.removeClass(f.active),r.stop().children().animate({opacity:0},d.duration,u.event.resetStyle).end().slideUp(d.duration,d.easing,function(){r.removeClass(f.active).attr("style","").removeAttr("style").children().attr("style","").removeAttr("style")})),n.addClass(f.active),i.stop().children().attr("style","").removeAttr("style").end().slideDown(d.duration,d.easing,function(){i.addClass(f.active).attr("style","").removeAttr("style"),e.proxy(d.onOpen,i)(),e.proxy(d.onChange,i)()}))},close:function(t){var n=_.eq(t),i=n.next(w);u.debug("Closing accordion content",i),n.removeClass(f.active),i.removeClass(f.active).show().stop().children().animate({opacity:0},d.duration,u.event.resetStyle).end().slideUp(d.duration,d.easing,function(){i.attr("style","").removeAttr("style"),e.proxy(d.onClose,i)(),e.proxy(d.onChange,i)()})},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,d,t);else{if(n===i)return d[t];d[t]=n}},internal:function(t,n){return u.debug("Changing internal",t,n),n===i?u[t]:(e.isPlainObject(t)?e.extend(!0,u,t):u[t]=n,void 0)},debug:function(){d.debug&&(d.performance?u.performance.log(arguments):(u.debug=Function.prototype.bind.call(console.info,console,d.name+":"),u.debug.apply(console,arguments)))},verbose:function(){d.verbose&&d.debug&&(d.performance?u.performance.log(arguments):(u.verbose=Function.prototype.bind.call(console.info,console,d.name+":"),u.verbose.apply(console,arguments)))},error:function(){u.error=Function.prototype.bind.call(console.error,console,d.name+":"),u.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;d.performance&&(t=(new Date).getTime(),i=r||t,n=t-i,r=t,a.push({Element:k,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(u.performance.timer),u.performance.timer=setTimeout(u.performance.display,100)},display:function(){var t=d.name+":",n=0;r=!1,clearTimeout(u.performance.timer),e.each(a,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",y&&(t+=" '"+y+"'"),(console.group!==i||console.table!==i)&&a.length>0&&(console.groupCollapsed(t),console.table?console.table(a):e.each(a,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),a=[]}},invoke:function(t,o,r){var a,s,c;return o=o||l,r=k||r,"string"==typeof t&&T!==i&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,o){var r=n!=a?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(T[r])&&n!=a)T=T[r];else{if(T[r]!==i)return s=T[r],!1;if(!e.isPlainObject(T[o])||n==a)return T[o]!==i?(s=T[o],!1):(u.error(g.method,t),!1);T=T[o]}})),e.isFunction(s)?c=s.apply(r,o):s!==i&&(c=s),e.isArray(n)?n.push(c):n!==i?n=[n,c]:c!==i&&(n=c),s}},c?(T===i&&u.initialize(),u.invoke(s)):(T!==i&&u.destroy(),u.initialize())}),n!==i?n:this},e.fn.accordion.settings={name:"Accordion",namespace:"accordion",debug:!0,verbose:!0,performance:!0,exclusive:!0,collapsible:!0,duration:500,easing:"easeInOutQuint",onOpen:function(){},onClose:function(){},onChange:function(){},error:{method:"The method you called is not defined"},className:{active:"active"},selector:{title:".title",content:".content"}},e.extend(e.easing,{easeInOutQuint:function(e,t,n,i,o){return(t/=o/2)<1?i/2*t*t*t*t*t+n:i/2*((t-=2)*t*t*t*t+2)+n}})}(jQuery,window,document)}).call(this),function(){!function(e,t,n,i){e.api=e.fn.api=function(n){var o,r,a=e.extend(!0,{},e.api.settings,n),s="function"!=typeof this?this:e("<div/>"),c=a.stateContext?e(a.stateContext):e(s),l="object"==typeof this?e(s):c,u=this,d=(new Date).getTime(),f=[],p=l.selector||"",h=a.namespace+"-module",g=a.className,m=a.metadata,v=a.error,y=l.data(h),b=arguments[0],_=y!==i&&"string"==typeof b,w=[].slice.call(arguments,1);return o={initialize:function(){var n,r,s,u,d,f,p=(new Date).getTime(),h={},y={};return a.serializeForm&&e(this).toJSON()!==i&&(h=o.get.formData(),o.debug("Adding form data to API Request",h),e.extend(!0,a.data,h)),n=e.proxy(a.beforeSend,l)(a),n===i||n?(u=o.get.url(o.get.templateURL()))?(s=e.Deferred().always(function(){a.stateContext&&c.removeClass(g.loading),e.proxy(a.complete,l)()}).done(function(t){o.debug("API request successful"),"json"==a.dataType?t.error!==i?e.proxy(a.failure,c)(t.error,a,l):e.isArray(t.errors)?e.proxy(a.failure,c)(t.errors[0],a,l):e.proxy(a.success,c)(t,a,l):e.proxy(a.success,c)(t,a,l)}).fail(function(t,n,r){var s,l=a.error[n]!==i?a.error[n]:r;if(t!==i)if(t.readyState!==i&&4==t.readyState){if(200!=t.status&&r!==i&&""!==r)o.error(u.statusMessage+r);else if("error"==n&&"json"==a.dataType)try{s=e.parseJSON(t.responseText),s&&s.error!==i&&(l=s.error)}catch(u){o.error(u.JSONParse)}c.removeClass(g.loading).addClass(g.error),a.errorLength>0&&setTimeout(function(){c.removeClass(g.error)},a.errorLength),o.debug("API Request error:",l),e.proxy(a.failure,c)(l,a,this)}else o.debug("Request Aborted (Most likely caused by page change)")}),e.extend(!0,y,a,{success:function(){},failure:function(){},complete:function(){},type:a.method||a.type,data:d,url:u,beforeSend:a.beforeXHR}),a.stateContext&&c.addClass(g.loading),a.progress&&(o.verbose("Adding progress events"),e.extend(!0,y,{xhr:function(){var n=new t.XMLHttpRequest;return n.upload.addEventListener("progress",function(t){var n;t.lengthComputable&&(n=Math.round(t.loaded/t.total*1e4)/100+"%",e.proxy(a.progress,c)(n,t))},!1),n.addEventListener("progress",function(t){var n;t.lengthComputable&&(n=Math.round(t.loaded/t.total*1e4)/100+"%",e.proxy(a.progress,c)(n,t))},!1),n}})),o.verbose("Creating AJAX request with settings: ",y),f=e.ajax(y).always(function(){r=a.loadingLength-((new Date).getTime()-p),a.loadingDelay=0>r?0:r}).done(function(e){var t=this;setTimeout(function(){s.resolveWith(t,[e])},a.loadingDelay)}).fail(function(e,t,n){var i=this;"abort"!=t?setTimeout(function(){s.rejectWith(i,[e,t,n])},a.loadingDelay):c.removeClass(g.error).removeClass(g.loading)}),a.stateContext&&l.data(m.promise,s).data(m.xhr,f),void 0):(o.error(v.missingURL),o.reset(),void 0):(o.error(v.beforeSend),o.reset(),void 0)},get:{formData:function(){return l.closest("form").toJSON()},templateURL:function(){var e,t=l.data(a.metadata.action)||a.action||!1;return t&&(o.debug("Creating url for: ",t),a.api[t]!==i?e=a.api[t]:o.error(v.missingAction)),a.url&&(e=a.url,o.debug("Getting url",e)),e},url:function(t,n){var r;return t&&(r=t.match(a.regExpTemplate),n=n||a.urlData,r&&(o.debug("Looking for URL variables",r),e.each(r,function(a,s){var c=s.substr(2,s.length-3),u=e.isPlainObject(n)&&n[c]!==i?n[c]:l.data(c)!==i?l.data(c):n[c];if(o.verbose("Looking for variable",c,l,l.data(c),n[c]),u===!1)o.debug("Removing variable from URL",r),t=t.replace("/"+s,"");else{if(u===i||!u)return o.error(v.missingParameter+c),t=!1,!1;t=t.replace(s,u)}}))),t}},reset:function(){l.data(m.promise,!1).data(m.xhr,!1),c.removeClass(g.error).removeClass(g.loading)},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,a,t);else{if(n===i)return a[t];a[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,o,t);else{if(n===i)return o[t];o[t]=n}},debug:function(){a.debug&&(a.performance?o.performance.log(arguments):(o.debug=Function.prototype.bind.call(console.info,console,a.name+":"),o.debug.apply(console,arguments)))},verbose:function(){a.verbose&&a.debug&&(a.performance?o.performance.log(arguments):(o.verbose=Function.prototype.bind.call(console.info,console,a.name+":"),o.verbose.apply(console,arguments)))},error:function(){o.error=Function.prototype.bind.call(console.error,console,a.name+":"),o.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;a.performance&&(t=(new Date).getTime(),i=d||t,n=t-i,d=t,f.push({Element:u,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(o.performance.timer),o.performance.timer=setTimeout(o.performance.display,100)},display:function(){var t=a.name+":",n=0;d=!1,clearTimeout(o.performance.timer),e.each(f,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",p&&(t+=" '"+p+"'"),(console.group!==i||console.table!==i)&&f.length>0&&(console.groupCollapsed(t),console.table?console.table(f):e.each(f,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),f=[]}},invoke:function(t,n,a){var s,c,l;return n=n||w,a=u||a,"string"==typeof t&&y!==i&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,r){var a=n!=s?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(y[r])&&n!=s)y=y[r];else{if(!e.isPlainObject(y[a])||n==s)return y[r]!==i?(c=y[r],!1):y[a]!==i?(c=y[a],!1):(o.error(v.method,t),!1);y=y[a]}})),e.isFunction(c)?l=c.apply(a,n):c!==i&&(l=c),e.isArray(r)?r.push(l):r!==i?r=[r,l]:l!==i&&(r=l),c}},_?(y===i&&o.initialize(),o.invoke(b)):(y!==i&&o.destroy(),o.initialize()),r!==i?r:this},e.fn.apiButton=function(t){return e(this).each(function(){var n,i=e(this),o=e(this).selector||"",r=e.isFunction(t)?e.extend(!0,{},e.api.settings,e.fn.apiButton.settings,{stateContext:this,success:t}):e.extend(!0,{},e.api.settings,e.fn.apiButton.settings,{stateContext:this},t);n={initialize:function(){r.context&&""!==o?e(r.context).on(o,"click."+r.namespace,n.click):i.on("click."+r.namespace,n.click)},click:function(){r.filter&&0!==e(this).filter(r.filter).size()||e.proxy(e.api,this)(r)}},n.initialize()}),this},e.api.settings={name:"API",namespace:"api",debug:!0,verbose:!0,performance:!0,api:{},beforeSend:function(e){return e},beforeXHR:function(){},success:function(){},complete:function(){},failure:function(){},progress:!1,error:{missingAction:"API action used but no url was defined",missingURL:"URL not specified for the API action",missingParameter:"Missing an essential URL parameter: ",timeout:"Your request timed out",error:"There was an error with your request",parseError:"There was an error parsing your request",JSONParse:"JSON could not be parsed during error handling",statusMessage:"Server gave an error: ",beforeSend:"The before send function has aborted the request",exitConditions:"API Request Aborted. Exit conditions met"},className:{loading:"loading",error:"error"},metadata:{action:"action",promise:"promise",xhr:"xhr"},regExpTemplate:/\{\$([A-z]+)\}/g,action:!1,url:!1,urlData:!1,serializeForm:!1,stateContext:!1,method:"get",data:{},dataType:"json",cache:!0,loadingLength:200,errorLength:2e3},e.fn.apiButton.settings={filter:".disabled, .loading",context:!1,stateContext:!1}}(jQuery,window,document)}.call(this),function(){!function(e,t,n,i){e.fn.colorize=function(t){var n=e.extend(!0,{},e.fn.colorize.settings,t),o=arguments||!1;return e(this).each(function(t){var r,a,s,c,l,u,d,f,p=e(this),h=e("<canvas />")[0],g=e("<canvas />")[0],m=e("<canvas />")[0],v=new Image,y=n.colors,b=(n.paths,n.namespace),_=n.error,w=p.data("module-"+b);return f={checkPreconditions:function(){return f.debug("Checking pre-conditions"),!e.isPlainObject(y)||e.isEmptyObject(y)?(f.error(_.undefinedColors),!1):!0},async:function(e){n.async?setTimeout(e,0):e()},getMetadata:function(){f.debug("Grabbing metadata"),c=p.data("image")||n.image||i,l=p.data("name")||n.name||t,u=n.width||p.width(),d=n.height||p.height(),(0===u||0===d)&&f.error(_.undefinedSize)},initialize:function(){f.debug("Initializing with colors",y),f.checkPreconditions()&&f.async(function(){f.getMetadata(),f.canvas.create(),f.draw.image(function(){f.draw.colors(),f.canvas.merge()}),p.data("module-"+b,f)})},redraw:function(){f.debug("Redrawing image"),f.async(function(){f.canvas.clear(),f.draw.colors(),f.canvas.merge()})},change:{color:function(e,t){return f.debug("Changing color",e),y[e]===i?(f.error(_.missingColor),!1):(y[e]=t,f.redraw(),void 0)}},canvas:{create:function(){f.debug("Creating canvases"),h.width=u,h.height=d,g.width=u,g.height=d,m.width=u,m.height=d,r=h.getContext("2d"),a=g.getContext("2d"),s=m.getContext("2d"),p.append(h),r=p.children("canvas")[0].getContext("2d")},clear:function(){f.debug("Clearing canvas"),s.fillStyle="#FFFFFF",s.fillRect(0,0,u,d)},merge:function(){return e.isFunction(r.blendOnto)?(r.putImageData(a.getImageData(0,0,u,d),0,0),s.blendOnto(r,"multiply"),void 0):(f.error(_.missingPlugin),void 0)}},draw:{image:function(e){f.debug("Drawing image"),e=e||function(){},c?(v.src=c,v.onload=function(){a.drawImage(v,0,0),e()}):(f.error(_.noImage),e())},colors:function(){f.debug("Drawing color overlays",y),e.each(y,function(e,t){n.onDraw(s,l,e,t)})}},debug:function(e,t){n.debug&&(t!==i?console.info(n.name+": "+e,t):console.info(n.name+": "+e))},error:function(e){console.warn(n.name+": "+e)},invoke:function(t,o,r){var a;return r=r||Array.prototype.slice.call(arguments,2),"string"==typeof t&&w!==i&&(t=t.split("."),e.each(t,function(t,i){return e.isPlainObject(w[i])?(w=w[i],!0):e.isFunction(w[i])?(a=w[i],!0):(f.error(n.error.method),!1)})),e.isFunction(a)?a.apply(o,r):!1}},w!==i&&o?("invoke"==o[0]&&(o=Array.prototype.slice.call(o,1)),f.invoke(o[0],this,Array.prototype.slice.call(o,1))):(f.initialize(),void 0)}),this},e.fn.colorize.settings={name:"Image Colorizer",debug:!0,namespace:"colorize",onDraw:function(){},async:!0,colors:{},metadata:{image:"image",name:"name"},error:{noImage:"No tracing image specified",undefinedColors:"No default colors specified.",missingColor:"Attempted to change color that does not exist",missingPlugin:"Blend onto plug-in must be included",undefinedHeight:"The width or height of image canvas could not be automatically determined. Please specify a height."}}}(jQuery,window,document)}.call(this),function(){!function(e,t,n,i){e.fn.form=function(t,o){var r,a=e(this),s=e.extend(!0,{},e.fn.form.settings,o),c=e.extend({},e.fn.form.settings.defaults,t),l=s.namespace,u=s.metadata,d=s.selector,f=s.className,p=s.error,h="."+l,g="module-"+l,m=a.selector||"",v=(new Date).getTime(),y=[],b=arguments[0],_="string"==typeof b,w=[].slice.call(arguments,1);return a.each(function(){var t,o=e(this),l=e(this).find(d.field),k=e(this).find(d.group),T=e(this).find(d.message),S=(e(this).find(d.prompt),e(this).find(d.submit)),x=[],E=this,C=o.data(g);t={initialize:function(){t.verbose("Initializing form validation",o,c,s),s.keyboardShortcuts&&l.on("keydown"+h,t.event.field.keydown),o.on("submit"+h,t.validate.form),l.on("blur"+h,t.event.field.blur),S.on("click"+h,t.submit),l.on(t.get.changeEvent()+h,t.event.field.change),t.instantiate()},instantiate:function(){t.verbose("Storing instance of module",t),C=t,o.data(g,t)},destroy:function(){t.verbose("Destroying previous module",C),o.off(h).removeData(g)},refresh:function(){t.verbose("Refreshing selector cache"),l=o.find(d.field)},submit:function(){t.verbose("Submitting form",o),o.submit()},event:{field:{keydown:function(n){var i=e(this),o=n.which,r={enter:13,escape:27};return o==r.escape&&(t.verbose("Escape key pressed blurring field"),i.blur()),!n.ctrlKey&&o==r.enter&&i.is(d.input)?(t.debug("Enter key pressed, submitting form"),S.addClass(f.down),i.one("keyup"+h,t.event.field.keyup),n.preventDefault(),!1):void 0},keyup:function(){t.verbose("Doing keyboard shortcut form submit"),S.removeClass(f.down),t.submit()},blur:function(){var n=e(this),i=n.closest(k);i.hasClass(f.error)?(t.debug("Revalidating field",n,t.get.validation(n)),t.validate.field(t.get.validation(n))):("blur"==s.on||"change"==s.on)&&t.validate.field(t.get.validation(n))},change:function(){var n=e(this),i=n.closest(k);("change"==s.on||i.hasClass(f.error)&&s.revalidate)&&(clearTimeout(t.timer),t.timer=setTimeout(function(){t.debug("Revalidating field",n,t.get.validation(n)),t.validate.field(t.get.validation(n))},s.delay))}}},get:{changeEvent:function(){return n.createElement("input").oninput!==i?"input":n.createElement("input").onpropertychange!==i?"propertychange":"keyup"},field:function(n){return t.verbose("Finding field with identifier",n),l.filter("#"+n).size()>0?l.filter("#"+n):l.filter('[name="'+n+'"]').size()>0?l.filter('[name="'+n+'"]'):l.filter("[data-"+u.validate+'="'+n+'"]').size()>0?l.filter("[data-"+u.validate+'="'+n+'"]'):e("<input/>")},validation:function(n){var i;return e.each(c,function(e,o){t.get.field(o.identifier).get(0)==n.get(0)&&(i=o)}),i||!1}},has:{field:function(e){return t.verbose("Checking for existence of a field with identifier",e),l.filter("#"+e).size()>0?!0:l.filter('[name="'+e+'"]').size()>0?!0:l.filter("[data-"+u.validate+'="'+e+'"]').size()>0?!0:!1}},add:{prompt:function(n,r){var a=t.get.field(n.identifier),c=a.closest(k),l=c.find(d.prompt),u=0!==l.size();t.verbose("Adding inline error",n),c.addClass(f.error),s.inline&&(u||(l=s.templates.prompt(r),l.appendTo(c)),l.html(r[0]),u||(s.transition&&e.fn.transition!==i&&o.transition("is supported")?(t.verbose("Displaying error with css transition",s.transition),l.transition(s.transition+" in",s.duration)):(t.verbose("Displaying error with fallback javascript animation"),l.fadeIn(s.duration))))},errors:function(e){t.debug("Adding form error messages",e),T.html(s.templates.error(e))}},remove:{prompt:function(n){var r=t.get.field(n.identifier),a=r.closest(k),c=a.find(d.prompt);a.removeClass(f.error),s.inline&&c.is(":visible")&&(t.verbose("Removing prompt for field",n),s.transition&&e.fn.transition!==i&&o.transition("is supported")?c.transition(s.transition+" out",s.duration,function(){c.remove()}):c.fadeOut(s.duration,function(){c.remove()}))}},validate:{form:function(n){var i=!0;return x=[],e.each(c,function(e,n){t.validate.field(n)||(i=!1)}),i?(t.debug("Form has no validation errors, submitting"),o.removeClass(f.error).addClass(f.success),e.proxy(s.onSuccess,this)(n),void 0):(t.debug("Form has errors"),o.addClass(f.error),s.inline||t.add.errors(x),e.proxy(s.onFailure,this)(x))},field:function(n){var o=t.get.field(n.identifier),r=!0,a=[];return n.rules!==i&&e.each(n.rules,function(e,i){t.has.field(n.identifier)&&!t.validate.rule(n,i)&&(t.debug("Field is invalid",n.identifier,i.type),a.push(i.prompt),r=!1)}),r?(t.remove.prompt(n,a),e.proxy(s.onValid,o)(),!0):(x=x.concat(a),t.add.prompt(n,a),e.proxy(s.onInvalid,o)(a),!1)},rule:function(n,r){var a,c,l=t.get.field(n.identifier),u=r.type,d=l.val()+"",f=/\[(.*?)\]/i,p=f.exec(u),h=!0;return p!==i&&null!==p?(a=""+p[1],c=u.replace(p[0],""),h=e.proxy(s.rules[c],o)(d,a)):h=e.proxy(s.rules[u],l)(d),h}},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,s,t);else{if(n===i)return s[t];s[t]=n}},internal:function(n,o){if(e.isPlainObject(n))e.extend(!0,t,n);else{if(o===i)return t[n];t[n]=o}},debug:function(){s.debug&&(s.performance?t.performance.log(arguments):(t.debug=Function.prototype.bind.call(console.info,console,s.name+":"),t.debug.apply(console,arguments)))},verbose:function(){s.verbose&&s.debug&&(s.performance?t.performance.log(arguments):(t.verbose=Function.prototype.bind.call(console.info,console,s.name+":"),t.verbose.apply(console,arguments)))},error:function(){t.error=Function.prototype.bind.call(console.error,console,s.name+":"),t.error.apply(console,arguments)},performance:{log:function(e){var n,i,o;s.performance&&(n=(new Date).getTime(),o=v||n,i=n-o,v=n,y.push({Element:E,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":i})),clearTimeout(t.performance.timer),t.performance.timer=setTimeout(t.performance.display,100)},display:function(){var n=s.name+":",o=0;v=!1,clearTimeout(t.performance.timer),e.each(y,function(e,t){o+=t["Execution Time"]}),n+=" "+o+"ms",m&&(n+=" '"+m+"'"),a.size()>1&&(n+=" ("+a.size()+")"),(console.group!==i||console.table!==i)&&y.length>0&&(console.groupCollapsed(n),console.table?console.table(y):e.each(y,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),y=[]}},invoke:function(n,o,a){var s,c,l;return o=o||w,a=E||a,"string"==typeof n&&C!==i&&(n=n.split(/[\. ]/),s=n.length-1,e.each(n,function(o,r){var a=o!=s?r+n[o+1].charAt(0).toUpperCase()+n[o+1].slice(1):n;if(e.isPlainObject(C[a])&&o!=s)C=C[a];else{if(C[a]!==i)return c=C[a],!1;if(!e.isPlainObject(C[r])||o==s)return C[r]!==i?(c=C[r],!1):(t.error(p.method,n),!1);C=C[r]}})),e.isFunction(c)?l=c.apply(a,o):c!==i&&(l=c),e.isArray(r)?r.push(l):r!==i?r=[r,l]:l!==i&&(r=l),c}},_?(C===i&&t.initialize(),t.invoke(b)):(C!==i&&t.destroy(),t.initialize())}),r!==i?r:this},e.fn.form.settings={name:"Form",namespace:"form",debug:!0,verbose:!0,performance:!0,keyboardShortcuts:!0,on:"submit",inline:!1,delay:200,revalidate:!0,transition:"scale",duration:150,onValid:function(){},onInvalid:function(){},onSuccess:function(){return!0},onFailure:function(){return!1},metadata:{validate:"validate"},selector:{message:".error.message",field:"input, textarea, select",group:".field",input:"input",prompt:".prompt",submit:".submit"},className:{error:"error",success:"success",down:"down",label:"ui label prompt"},error:{method:"The method you called is not defined."},templates:{error:function(t){var n='<ul class="list">';return e.each(t,function(e,t){n+="<li>"+t+"</li>"}),n+="</ul>",e(n)},prompt:function(t){return e("<div/>").addClass("ui red pointing prompt label").html(t[0])}},rules:{checked:function(){return e(this).filter(":checked").size()>0},empty:function(e){return!(e===i||""===e)},email:function(e){var t=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","i");return t.test(e)},length:function(e,t){return e!==i?e.length>=t:!1},not:function(e,t){return e!=t},contains:function(e,t){return t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),-1!==e.search(t)},is:function(e,t){return e==t},maxLength:function(e,t){return e!==i?e.length<=t:!1},match:function(t,n){var o,r=e(this);return r.find("#"+n).size()>0?o=r.find("#"+n).val():r.find("[name="+n+"]").size()>0?o=r.find("[name="+n+"]").val():r.find('[data-validate="'+n+'"]').size()>0&&(o=r.find('[data-validate="'+n+'"]').val()),o!==i?t.toString()==o.toString():!1},url:function(e){var t=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return t.test(e)}}}}(jQuery,window,document)}.call(this),function(){!function(e,t,n,i){e.fn.state=function(t){var n,o=e(this),r=e.extend(!0,{},e.fn.state.settings,t),a=o.selector||"",s=(new Date).getTime(),c=[],l=arguments[0],u="string"==typeof l,d=[].slice.call(arguments,1),f=r.error,p=r.metadata,h=r.className,g=r.namespace,m=r.states,v=r.text,y="."+g,b=g+"-module";
return o.each(function(){var g,_=e(this),w=this,k=_.data(b);g={initialize:function(){g.verbose("Initializing module"),r.automatic&&g.add.defaults(),r.context&&""!==a?(g.allows("hover")&&e(w,r.context).on(a,"mouseenter"+y,g.enable.hover).on(a,"mouseleave"+y,g.disable.hover),g.allows("down")&&e(w,r.context).on(a,"mousedown"+y,g.enable.down).on(a,"mouseup"+y,g.disable.down),g.allows("focus")&&e(w,r.context).on(a,"focus"+y,g.enable.focus).on(a,"blur"+y,g.disable.focus),e(r.context).on(a,"mouseenter"+y,g.change.text).on(a,"mouseleave"+y,g.reset.text).on(a,"click"+y,g.toggle.state)):(g.allows("hover")&&_.on("mouseenter"+y,g.enable.hover).on("mouseleave"+y,g.disable.hover),g.allows("down")&&_.on("mousedown"+y,g.enable.down).on("mouseup"+y,g.disable.down),g.allows("focus")&&_.on("focus"+y,g.enable.focus).on("blur"+y,g.disable.focus),_.on("mouseenter"+y,g.change.text).on("mouseleave"+y,g.reset.text).on("click"+y,g.toggle.state)),g.instantiate()},instantiate:function(){g.verbose("Storing instance of module",g),k=g,_.data(b,g)},destroy:function(){g.verbose("Destroying previous module",k),_.off(y).removeData(b)},refresh:function(){g.verbose("Refreshing selector cache"),_=e(w)},add:{defaults:function(){var n=t&&e.isPlainObject(t.states)?t.states:{};e.each(r.defaults,function(t,o){g.is[t]!==i&&g.is[t]()&&(g.verbose("Adding default states",t,w),e.extend(r.states,o,n))})}},is:{active:function(){return _.hasClass(h.active)},loading:function(){return _.hasClass(h.loading)},inactive:function(){return!_.hasClass(h.active)},enabled:function(){return!_.is(r.filter.active)},disabled:function(){return _.is(r.filter.active)},textEnabled:function(){return!_.is(r.filter.text)},button:function(){return _.is(".button:not(a, .submit)")},input:function(){return _.is("input")}},allow:function(e){g.debug("Now allowing state",e),m[e]=!0},disallow:function(e){g.debug("No longer allowing",e),m[e]=!1},allows:function(e){return m[e]||!1},enable:{state:function(e){g.allows(e)&&_.addClass(h[e])},focus:function(){_.addClass(h.focus)},hover:function(){_.addClass(h.hover)},down:function(){_.addClass(h.down)}},disable:{state:function(e){g.allows(e)&&_.removeClass(h[e])},focus:function(){_.removeClass(h.focus)},hover:function(){_.removeClass(h.hover)},down:function(){_.removeClass(h.down)}},toggle:{state:function(){var e=_.data(p.promise);g.allows("active")&&g.is.enabled()&&(g.refresh(),e!==i?g.listenTo(e):g.change.state())}},listenTo:function(t){g.debug("API request detected, waiting for state signal",t),t?(v.loading&&g.update.text(v.loading),e.when(t).then(function(){"resolved"==t.state()?(g.debug("API request succeeded"),r.activateTest=function(){return!0},r.deactivateTest=function(){return!0}):(g.debug("API request failed"),r.activateTest=function(){return!1},r.deactivateTest=function(){return!1}),g.change.state()})):(r.activateTest=function(){return!1},r.deactivateTest=function(){return!1})},change:{state:function(){g.debug("Determining state change direction"),g.is.inactive()?g.activate():g.deactivate(),r.sync&&g.sync(),e.proxy(r.onChange,w)()},text:function(){g.is.textEnabled()&&(g.is.active()?v.hover?(g.verbose("Changing text to hover text",v.hover),g.update.text(v.hover)):v.disable&&(g.verbose("Changing text to disable text",v.disable),g.update.text(v.disable)):v.hover?(g.verbose("Changing text to hover text",v.disable),g.update.text(v.hover)):v.enable&&(g.verbose("Changing text to enable text",v.enable),g.update.text(v.enable)))}},activate:function(){e.proxy(r.activateTest,w)()&&(g.debug("Setting state to active"),_.addClass(h.active),g.update.text(v.active)),e.proxy(r.onActivate,w)()},deactivate:function(){e.proxy(r.deactivateTest,w)()&&(g.debug("Setting state to inactive"),_.removeClass(h.active),g.update.text(v.inactive)),e.proxy(r.onDeactivate,w)()},sync:function(){g.verbose("Syncing other buttons to current state"),g.is.active()?o.not(_).state("activate"):o.not(_).state("deactivate")},get:{text:function(){return r.selector.text?_.find(r.selector.text).text():_.html()},textFor:function(e){return v[e]||!1}},flash:{text:function(e,t){var n=g.get.text();g.debug("Flashing text message",e,t),e=e||r.text.flash,t=t||r.flashDuration,g.update.text(e),setTimeout(function(){g.update.text(n)},t)}},reset:{text:function(){var e=v.active||_.data(p.storedText),t=v.inactive||_.data(p.storedText);g.is.textEnabled()&&(g.is.active()&&e?(g.verbose("Resetting active text",e),g.update.text(e)):t&&(g.verbose("Resetting inactive text",e),g.update.text(t)))}},update:{text:function(e){var t=g.get.text();e&&e!==t?(g.debug("Updating text",e),r.selector.text?_.data(p.storedText,e).find(r.selector.text).text(e):_.data(p.storedText,e).html(e)):g.debug("Text is already sane, ignoring update",e)}},setting:function(t,n){return g.debug("Changing setting",t,n),n===i?r[t]:(e.isPlainObject(t)?e.extend(!0,r,t):r[t]=n,void 0)},internal:function(t,n){return g.debug("Changing internal",t,n),n===i?g[t]:(e.isPlainObject(t)?e.extend(!0,g,t):g[t]=n,void 0)},debug:function(){r.debug&&(r.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,r.name+":"),g.debug.apply(console,arguments)))},verbose:function(){r.verbose&&r.debug&&(r.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,r.name+":"),g.verbose.apply(console,arguments)))},error:function(){g.error=Function.prototype.bind.call(console.error,console,r.name+":"),g.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;r.performance&&(t=(new Date).getTime(),i=s||t,n=t-i,s=t,c.push({Element:w,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,100)},display:function(){var t=r.name+":",n=0;s=!1,clearTimeout(g.performance.timer),e.each(c,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",a&&(t+=" '"+a+"'"),o.size()>1&&(t+=" ("+o.size()+")"),(console.group!==i||console.table!==i)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,o,r){var a,s,c;return o=o||d,r=w||r,"string"==typeof t&&k!==i&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,o){var r=n!=a?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(k[r])&&n!=a)k=k[r];else{if(k[r]!==i)return s=k[r],!1;if(!e.isPlainObject(k[o])||n==a)return k[o]!==i?(s=k[o],!1):(g.error(f.method,t),!1);k=k[o]}})),e.isFunction(s)?c=s.apply(r,o):s!==i&&(c=s),e.isArray(n)?n.push(c):n!==i?n=[n,c]:c!==i&&(n=c),s}},u?(k===i&&g.initialize(),g.invoke(l)):(k!==i&&g.destroy(),g.initialize())}),n!==i?n:this},e.fn.state.settings={name:"State",debug:!0,verbose:!0,namespace:"state",performance:!0,onActivate:function(){},onDeactivate:function(){},onChange:function(){},activateTest:function(){return!0},deactivateTest:function(){return!0},automatic:!0,sync:!1,flashDuration:3e3,filter:{text:".loading, .disabled",active:".disabled"},context:!1,error:{method:"The method you called is not defined."},metadata:{promise:"promise",storedText:"stored-text"},className:{focus:"focus",hover:"hover",down:"down",active:"active",loading:"loading"},selector:{text:!1},defaults:{input:{hover:!0,focus:!0,down:!0,loading:!1,active:!1},button:{hover:!0,focus:!1,down:!0,active:!0,loading:!0}},states:{hover:!0,focus:!0,down:!0,loading:!1,active:!1},text:{flash:!1,hover:!1,active:!1,inactive:!1,enable:!1,disable:!1}}}(jQuery,window,document)}.call(this),function(){!function(e,t,n,i){e.fn.chatroom=function(t){var n,o=e(this),r=o.selector||"",a=(new Date).getTime(),s=[],c=arguments[0],l="string"==typeof c,u=[].slice.call(arguments,1);return e(this).each(function(){var n,o,d,f,p,h,g,m=e.extend(!0,{},e.fn.chatroom.settings,t),v=m.className,y=m.namespace,b=m.selector,_=m.error,w=e(this),k=w.find(b.expandButton),T=w.find(b.userListButton),S=w.find(b.userList),x=(w.find(b.room),w.find(b.userCount)),E=w.find(b.log),C=(w.find(b.message),w.find(b.messageInput)),P=w.find(b.messageButton),D=w.data("module"),O=this,M="",I={};g={width:{log:E.width(),userList:S.outerWidth()},initialize:function(){return Pusher===i&&g.error(_.pusher),m.key===i||m.channelName===i?(g.error(_.key),!1):m.endpoint.message||m.endpoint.authentication?(h=new Pusher(m.key),Pusher.channel_auth_endpoint=m.endpoint.authentication,n=h.subscribe(m.channelName),n.bind("pusher:subscription_succeeded",g.user.list.create),n.bind("pusher:subscription_error",g.error),n.bind("pusher:member_added",g.user.joined),n.bind("pusher:member_removed",g.user.left),n.bind("update_messages",g.message.receive),e.each(m.customEvents,function(e,t){n.bind(e,t)}),T.on("click."+y,g.event.toggleUserList),k.on("click."+y,g.event.toggleExpand),C.on("keydown."+y,g.event.input.keydown).on("keyup."+y,g.event.input.keyup),P.on("mouseenter."+y,g.event.hover).on("mouseleave."+y,g.event.hover).on("click."+y,g.event.submit),E.animate({scrollTop:E.prop("scrollHeight")},400),w.data("module",g).addClass(v.loading),void 0):(g.error(_.endpoint),!1)},refresh:function(){T.removeClass(v.active),g.width={log:E.width(),userList:S.outerWidth()},T.hasClass(v.active)&&g.user.list.hide(),w.data("module",g)},user:{updateCount:function(){m.userCount&&(I=w.data("users"),f=0,e.each(I,function(){f++}),x.html(m.templates.userCount(f)))},joined:function(t){I=w.data("users"),"anonymous"!=t.id&&I[t.id]===i&&(I[t.id]=t.info,m.randomColor&&t.info.color===i&&(t.info.color=m.templates.color(t.id)),M=m.templates.userList(t.info),t.info.isAdmin?e(M).prependTo(S):e(M).appendTo(S),m.partingMessages&&(E.append(m.templates.joined(t.info)),g.message.scroll.test()),g.user.updateCount())},left:function(e){I=w.data("users"),e!==i&&"anonymous"!==e.id&&(delete I[e.id],w.data("users",I),S.find("[data-id="+e.id+"]").remove(),m.partingMessages&&(E.append(m.templates.left(e.info)),g.message.scroll.test()),g.user.updateCount())},list:{create:function(t){I={},t.each(function(e){"anonymous"!==e.id&&"undefined"!==e.id&&(m.randomColor&&e.info.color===i&&(e.info.color=m.templates.color(e.id)),M=e.info.isAdmin?m.templates.userList(e.info)+M:M+m.templates.userList(e.info),I[e.id]=e.info)}),w.data("users",I).data("user",I[t.me.id]).removeClass(v.loading),S.html(M),g.user.updateCount(),e.proxy(m.onJoin,S.children())()},show:function(){E.animate({width:g.width.log-g.width.userList},{duration:m.speed,easing:m.easing,complete:g.message.scroll.move})},hide:function(){E.stop().animate({width:g.width.log},{duration:m.speed,easing:m.easing,complete:g.message.scroll.move})}}},message:{scroll:{test:function(){p=E.prop("scrollHeight")-E.height(),Math.abs(E.scrollTop()-p)<m.scrollArea&&g.message.scroll.move()},move:function(){p=E.prop("scrollHeight")-E.height(),E.scrollTop(p)}},send:function(t){g.utils.emptyString(t)||e.api({url:m.endpoint.message,method:"POST",data:{message:{content:t,timestamp:(new Date).getTime()}}})},receive:function(e){d=e.data,I=w.data("users"),o=w.data("user"),I[d.userID]!==i&&(o===i||o.id!=d.userID)&&(d.user=I[d.userID],g.message.display(d))},display:function(t){E.append(m.templates.message(t)),g.message.scroll.test(),e.proxy(m.onMessage,E.children().last())()}},expand:function(){w.addClass(v.expand),e.proxy(m.onExpand,w)(),g.refresh()},contract:function(){w.removeClass(v.expand),e.proxy(m.onContract,w)(),g.refresh()},event:{input:{keydown:function(e){13==e.which&&P.addClass(v.down)},keyup:function(e){13==e.which&&(P.removeClass(v.down),g.event.submit())}},submit:function(){var e=C.val(),t=w.data("user");t===i||g.utils.emptyString(e)||(g.message.send(e),g.message.display({user:t,text:e}),g.message.scroll.move(),C.val(""))},toggleExpand:function(){w.hasClass(v.expand)?(k.removeClass(v.active),g.contract()):(k.addClass(v.active),g.expand())},toggleUserList:function(){E.is(":animated")||(T.hasClass(v.active)?(T.removeClass("active"),g.user.list.hide()):(T.addClass(v.active),g.user.list.show()))}},utils:{emptyString:function(e){return"string"==typeof e?-1==e.search(/\S/):!1}},setting:function(t,n){return n===i?m[t]:(e.isPlainObject(t)?e.extend(!0,m,t):m[t]=n,void 0)},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,g,t);else{if(n===i)return g[t];g[t]=n}},debug:function(){m.debug&&(m.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,m.name+":"),g.debug.apply(console,arguments)))},verbose:function(){m.verbose&&m.debug&&(m.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,m.name+":"),g.verbose.apply(console,arguments)))},error:function(){g.error=Function.prototype.bind.call(console.error,console,m.name+":"),g.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;m.performance&&(t=(new Date).getTime(),i=a||t,n=t-i,a=t,s.push({Element:O,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,100)},display:function(){var t=m.name+":",n=0;a=!1,clearTimeout(g.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",r&&(t+=" '"+r+"'"),(console.group!==i||console.table!==i)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,n,o){var r,a;return n=n||u,o=O||o,"string"==typeof t&&D!==i&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(n,o){e.isPlainObject(D[o])&&n!=r?D=D[o]:D[o]!==i?a=D[o]:g.error(_.method,t)})),e.isFunction(a)?a.apply(o,n):a||!1}},l?(D===i&&g.initialize(),g.invoke(c)):(D!==i&&g.destroy(),g.initialize())}),n?n:this},e.fn.chatroom.settings={name:"Chat",debug:!1,namespace:"chat",channel:"present-chat",onJoin:function(){},onMessage:function(){},onExpand:function(){},onContract:function(){},customEvents:{},partingMessages:!1,userCount:!0,randomColor:!0,speed:300,easing:"easeOutQuint",scrollArea:9999,endpoint:{message:!1,authentication:!1},error:{method:"The method you called is not defined",endpoint:"Please define a message and authentication endpoint.",key:"You must specify a pusher key and channel.",pusher:"You must include the Pusher library."},className:{expand:"expand",active:"active",hover:"hover",down:"down",loading:"loading"},selector:{userCount:".actions .message",userListButton:".actions .list.button",expandButton:".actions .expand.button",room:".room",userList:".room .list",log:".room .log",message:".room .log .message",author:".room log .message .author",messageInput:".talk input",messageButton:".talk .send.button"},templates:{userCount:function(e){return e+" users in chat"},color:function(){var e=["#000000","#333333","#666666","#999999","#CC9999","#CC6666","#CC3333","#993333","#663333","#CC6633","#CC9966","#CC9933","#999966","#CCCC66","#99CC66","#669933","#669966","#33A3CC","#336633","#33CCCC","#339999","#336666","#336699","#6666CC","#9966CC","#333399","#663366","#996699","#993366","#CC6699"];return e[Math.floor(Math.random()*e.length)]},message:function(e){var t="";return e.user.isAdmin?(e.user.color="#55356A",t+='<div class="admin message">',t+='<span class="quirky ui flag team"></span>'):t+='<div class="message">',t+="<p>",t+=e.user.color!==i?'<span class="author" style="color: '+e.user.color+';">'+e.user.name+"</span>: ":'<span class="author">'+e.user.name+"</span>: ",t+=""+e.text+" </p></div>"},joined:function(e){return typeof e.name!==i?'<div class="status">'+e.name+" has joined the chat.</div>":!1},left:function(e){return typeof e.name!==i?'<div class="status">'+e.name+" has left the chat.</div>":!1},userList:function(e){var t="";return e.isAdmin&&(e.color="#55356A"),t+='<div class="user" data-id="'+e.id+'"> <div class="image">   <img src="'+e.avatarURL+'"> </div>',t+=e.color!==i?' <p><a href="/users/'+e.id+'" target="_blank" style="color: '+e.color+';">'+e.name+"</a></p>":' <p><a href="/users/'+e.id+'" target="_blank">'+e.name+"</a></p>",t+="</div>"}}}}(jQuery,window,document)}.call(this),function(){!function(e,t,n,i){e.fn.checkbox=function(t){var n,o=e(this),r=o.selector||"",a=(new Date).getTime(),s=[],c=arguments[0],l="string"==typeof c,u=[].slice.call(arguments,1);return o.each(function(){var o,d=e.extend(!0,{},e.fn.checkbox.settings,t),f=d.className,p=d.namespace,h=d.error,g="."+p,m="module-"+p,v=e(this),y=e(this).next(d.selector.label).first(),b=e(this).find(d.selector.input),_=v.selector||"",w=v.data(m),k=this;o={initialize:function(){o.verbose("Initializing checkbox",d),d.context&&""!==_?(o.verbose("Adding delegated events"),e(k,d.context).on(_,"click"+g,o.toggle).on(_+" + "+d.selector.label,"click"+g,o.toggle)):(v.on("click"+g,o.toggle).data(m,o),y.on("click"+g,o.toggle)),o.instantiate()},instantiate:function(){o.verbose("Storing instance of module",o),w=o,v.data(m,o)},destroy:function(){o.verbose("Destroying previous module"),v.off(g).removeData(m)},is:{radio:function(){return v.hasClass(f.radio)},enabled:function(){return b.prop("checked")!==i&&b.prop("checked")},disabled:function(){return!o.is.enabled()}},can:{disable:function(){return"boolean"==typeof d.required?d.required:!o.is.radio()}},enable:function(){o.debug("Enabling checkbox",b),b.prop("checked",!0),e.proxy(d.onChange,b.get())(),e.proxy(d.onEnable,b.get())()},disable:function(){o.debug("Disabling checkbox"),b.prop("checked",!1),e.proxy(d.onChange,b.get())(),e.proxy(d.onDisable,b.get())()},toggle:function(){o.verbose("Determining new checkbox state"),o.is.disabled()?o.enable():o.is.enabled()&&o.can.disable()&&o.disable()},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,d,t);else{if(n===i)return d[t];d[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,o,t);else{if(n===i)return o[t];o[t]=n}},debug:function(){d.debug&&(d.performance?o.performance.log(arguments):(o.debug=Function.prototype.bind.call(console.info,console,d.name+":"),o.debug.apply(console,arguments)))},verbose:function(){d.verbose&&d.debug&&(d.performance?o.performance.log(arguments):(o.verbose=Function.prototype.bind.call(console.info,console,d.name+":"),o.verbose.apply(console,arguments)))},error:function(){o.error=Function.prototype.bind.call(console.error,console,d.name+":"),o.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;d.performance&&(t=(new Date).getTime(),i=a||t,n=t-i,a=t,s.push({Element:k,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(o.performance.timer),o.performance.timer=setTimeout(o.performance.display,100)},display:function(){var t=d.name+":",n=0;a=!1,clearTimeout(o.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",r&&(t+=" '"+r+"'"),(console.group!==i||console.table!==i)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,r,a){var s,c,l;return r=r||u,a=k||a,"string"==typeof t&&w!==i&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,r){var a=n!=s?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(w[a])&&n!=s)w=w[a];else{if(w[a]!==i)return c=w[a],!1;if(!e.isPlainObject(w[r])||n==s)return w[r]!==i?(c=w[r],!1):(o.error(h.method,t),!1);w=w[r]}})),e.isFunction(c)?l=c.apply(a,r):c!==i&&(l=c),e.isArray(n)?n.push(l):n!==i?n=[n,l]:l!==i&&(n=l),c}},l?(w===i&&o.initialize(),o.invoke(c)):(w!==i&&o.destroy(),o.initialize())}),n!==i?n:this},e.fn.checkbox.settings={name:"Checkbox",namespace:"checkbox",verbose:!0,debug:!0,performance:!0,context:!1,required:"auto",onChange:function(){},onEnable:function(){},onDisable:function(){},error:{method:"The method you called is not defined."},selector:{input:"input[type=checkbox], input[type=radio]",label:"label"},className:{radio:"radio"}}}(jQuery,window,document)}.call(this),function(){!function(e,t,n,i){e.fn.dimmer=function(t){var o,r=e(this),a=(new Date).getTime(),s=[],c=arguments[0],l="string"==typeof c,u=[].slice.call(arguments,1);return r.each(function(){var d,f,p,h=e.isPlainObject(t)?e.extend(!0,{},e.fn.dimmer.settings,t):e.extend({},e.fn.dimmer.settings),g=h.selector,m=h.namespace,v=h.className,y=h.error,b="."+m,_="module-"+m,w=r.selector||"",k="ontouchstart"in n.documentElement?"touchstart":"click",T=e(this),S=this,x=T.data(_);p={preinitialize:function(){p.is.dimmer()?(f=T.parent(),d=T):(f=T,d=p.has.dimmer()?f.children(g.dimmer).first():p.create())},initialize:function(){p.debug("Initializing dimmer",h),"hover"==h.on?f.on("mouseenter"+b,p.show).on("mouseleave"+b,p.hide):"click"==h.on&&f.on(k+b,p.toggle),p.is.page()&&(p.debug("Setting as a page dimmer",f),p.set.pageDimmer()),h.closable&&(p.verbose("Adding dimmer close event",d),d.on(k+b,p.event.click)),p.set.dimmable(),p.instantiate()},instantiate:function(){p.verbose("Storing instance of module",p),x=p,T.data(_,x)},destroy:function(){p.verbose("Destroying previous module",d),T.removeData(_),f.off(b),d.off(b)},event:{click:function(t){p.verbose("Determining if event occured on dimmer",t),(0===d.find(t.target).size()||e(t.target).is(g.content))&&(p.hide(),t.stopImmediatePropagation())}},addContent:function(t){var n=e(t).detach();p.debug("Add content to dimmer",n),n.parent()[0]!==d[0]&&d.append(n)},create:function(){return e(h.template.dimmer()).appendTo(f)},animate:{show:function(t){t=e.isFunction(t)?t:function(){},p.set.dimmed(),h.useCSS&&e.fn.transition!==i&&T.transition("is supported")?d.transition({animation:h.transition+" in",queue:!0,duration:p.get.duration(),complete:function(){p.set.active(),t()}}):(p.verbose("Showing dimmer animation with javascript"),d.stop().css({opacity:0,width:"100%",height:"100%"}).fadeTo(p.get.duration(),1,function(){d.removeAttr("style"),p.set.active(),t()}))},hide:function(t){t=e.isFunction(t)?t:function(){},h.useCSS&&e.fn.transition!==i&&T.transition("is supported")?(p.verbose("Hiding dimmer with css"),d.transition({animation:h.transition+" out",duration:p.get.duration(),queue:!0,complete:function(){p.remove.dimmed(),p.remove.active(),t()}})):(p.verbose("Hiding dimmer with javascript"),d.stop().fadeOut(p.get.duration(),function(){d.removeAttr("style"),p.remove.dimmed(),p.remove.active(),t()}))}},get:{dimmer:function(){return d},duration:function(){return"object"==typeof h.duration?p.is.active()?h.duration.hide:h.duration.show:h.duration}},has:{dimmer:function(){return T.children(g.dimmer).size()>0}},is:{active:function(){return d.hasClass(v.active)},animating:function(){return d.is(":animated")||d.hasClass(v.transition)},dimmer:function(){return T.is(g.dimmer)},dimmable:function(){return T.is(g.dimmable)},dimmed:function(){return f.hasClass(v.dimmed)},disabled:function(){return f.hasClass(v.disabled)},enabled:function(){return!p.is.disabled()},page:function(){return f.is("body")},pageDimmer:function(){return d.hasClass(v.pageDimmer)}},can:{show:function(){return!d.hasClass(v.disabled)}},set:{active:function(){p.set.dimmed(),d.removeClass(v.transition).addClass(v.active)},dimmable:function(){f.addClass(v.dimmable)},dimmed:function(){f.addClass(v.dimmed)},pageDimmer:function(){d.addClass(v.pageDimmer)},disabled:function(){d.addClass(v.disabled)}},remove:{active:function(){d.removeClass(v.transition).removeClass(v.active)},dimmed:function(){f.removeClass(v.dimmed)},disabled:function(){d.removeClass(v.disabled)}},show:function(t){t=e.isFunction(t)?t:function(){},p.debug("Showing dimmer",d,h),!p.is.active()&&p.is.enabled()?(p.animate.show(t),e.proxy(h.onShow,S)(),e.proxy(h.onChange,S)()):p.debug("Dimmer is already shown or disabled")},hide:function(t){t=e.isFunction(t)?t:function(){},p.is.active()||p.is.animating()?(p.debug("Hiding dimmer",d),p.animate.hide(t),e.proxy(h.onHide,S)(),e.proxy(h.onChange,S)()):p.debug("Dimmer is not visible")},toggle:function(){p.verbose("Toggling dimmer visibility",d),p.is.dimmed()?p.hide():p.show()},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,h,t);else{if(n===i)return h[t];h[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,p,t);else{if(n===i)return p[t];p[t]=n}},debug:function(){h.debug&&(h.performance?p.performance.log(arguments):(p.debug=Function.prototype.bind.call(console.info,console,h.name+":"),p.debug.apply(console,arguments)))},verbose:function(){h.verbose&&h.debug&&(h.performance?p.performance.log(arguments):(p.verbose=Function.prototype.bind.call(console.info,console,h.name+":"),p.verbose.apply(console,arguments)))},error:function(){p.error=Function.prototype.bind.call(console.error,console,h.name+":"),p.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;h.performance&&(t=(new Date).getTime(),i=a||t,n=t-i,a=t,s.push({Element:S,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(p.performance.timer),p.performance.timer=setTimeout(p.performance.display,100)},display:function(){var t=h.name+":",n=0;a=!1,clearTimeout(p.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",w&&(t+=" '"+w+"'"),r.size()>1&&(t+=" ("+r.size()+")"),(console.group!==i||console.table!==i)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,n,r){var a,s,c;return n=n||u,r=S||r,"string"==typeof t&&x!==i&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,o){var r=n!=a?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(x[r])&&n!=a)x=x[r];else{if(!e.isPlainObject(x[o])||n==a)return x[o]!==i?(s=x[o],!1):x[r]!==i?(s=x[r],!1):(p.error(y.method,t),!1);x=x[o]}})),e.isFunction(s)?c=s.apply(r,n):s!==i&&(c=s),e.isArray(o)?o.push(c):o!==i?o=[o,c]:c!==i&&(o=c),s}},p.preinitialize(),l?(x===i&&p.initialize(),p.invoke(c)):(x!==i&&p.destroy(),p.initialize())}),o!==i?o:this},e.fn.dimmer.settings={name:"Dimmer",namespace:"dimmer",debug:!0,verbose:!0,performance:!0,transition:"fade",useCSS:!0,on:!1,closable:!0,duration:{show:500,hide:500},onChange:function(){},onShow:function(){},onHide:function(){},error:{method:"The method you called is not defined."},selector:{dimmable:".ui.dimmable",dimmer:".ui.dimmer",content:".ui.dimmer > .content, .ui.dimmer > .content > .center"},template:{dimmer:function(){return e("<div />").attr("class","ui dimmer")}},className:{active:"active",dimmable:"ui dimmable",dimmed:"dimmed",disabled:"disabled",pageDimmer:"page",hide:"hide",show:"show",transition:"transition"}}}(jQuery,window,document)}.call(this),function(){!function(e,t,n,i){e.fn.dropdown=function(t){var o,r=e(this),a=e(n),s=r.selector||"",c="ontouchstart"in n.documentElement,l=(new Date).getTime(),u=[],d=arguments[0],f="string"==typeof d,p=[].slice.call(arguments,1);return r.each(function(){var n,h=e.isPlainObject(t)?e.extend(!0,{},e.fn.dropdown.settings,t):e.extend({},e.fn.dropdown.settings),g=h.className,m=h.metadata,v=h.namespace,y=h.selector,b=h.error,_="."+v,w="module-"+v,k=e(this),T=k.find(y.item),S=k.find(y.text),x=k.find(y.input),E=k.children(y.menu),C=this,P=k.data(w);n={initialize:function(){n.debug("Initializing dropdown",h),n.set.selected(),c&&n.bind.touchEvents(),n.bind.mouseEvents(),n.instantiate()},instantiate:function(){n.verbose("Storing instance of dropdown",n),P=n,k.data(w,n)},destroy:function(){n.verbose("Destroying previous dropdown for",k),T.off(_),k.off(_).removeData(w)},bind:{touchEvents:function(){n.debug("Touch device detected binding touch events"),k.on("touchstart"+_,n.event.test.toggle),T.on("touchstart"+_,n.event.item.mouseenter).on("touchstart"+_,n.event.item.click)},mouseEvents:function(){n.verbose("Mouse detected binding mouse events"),"click"==h.on?k.on("click"+_,n.event.test.toggle):"hover"==h.on?k.on("mouseenter"+_,n.delay.show).on("mouseleave"+_,n.delay.hide):k.on(h.on+_,n.toggle),T.on("mouseenter"+_,n.event.item.mouseenter).on("mouseleave"+_,n.event.item.mouseleave).on("click"+_,n.event.item.click)},intent:function(){n.verbose("Binding hide intent event to document"),c&&a.on("touchstart"+_,n.event.test.touch).on("touchmove"+_,n.event.test.touch),a.on("click"+_,n.event.test.hide)}},unbind:{intent:function(){n.verbose("Removing hide intent event from document"),c&&a.off("touchstart"+_),a.off("click"+_)}},event:{test:{toggle:function(e){n.determine.intent(e,n.toggle)&&e.preventDefault()},touch:function(e){n.determine.intent(e,function(){"touchstart"==e.type?n.timer=setTimeout(n.hide,h.delay.touch):"touchmove"==e.type&&clearTimeout(n.timer)}),e.stopPropagation()},hide:function(e){n.determine.intent(e,n.hide)}},item:{mouseenter:function(t){var i=e(this).find(y.menu),o=e(this).siblings(y.item).children(y.menu);i.size()>0&&(clearTimeout(n.itemTimer),n.itemTimer=setTimeout(function(){n.animate.hide(!1,o),n.verbose("Showing sub-menu",i),n.animate.show(!1,i)},2*h.delay.show),t.preventDefault())},mouseleave:function(){var t=e(this).find(y.menu);t.size()>0&&(clearTimeout(n.itemTimer),n.itemTimer=setTimeout(function(){n.verbose("Hiding sub-menu",t),n.animate.hide(!1,t)},h.delay.hide))},click:function(){var t=e(this),o=t.data(m.text)!==i?t.data(m.text):t.text(),r=t.data(m.value)!==i?t.data(m.value):o.toLowerCase();0===t.find(y.menu).size()&&(n.determine.selectAction(o,r),e.proxy(h.onChange,C)(r,o))}},resetStyle:function(){e(this).removeAttr("style")}},determine:{selectAction:function(t,i){n.verbose("Determining action",h.action),e.isFunction(n.action[h.action])?(n.verbose("Triggering preset action",h.action,t,i),n.action[h.action](t,i)):e.isFunction(h.action)?(n.verbose("Triggering user action",h.action,t,i),h.action(t,i)):n.error(b.action,h.action)},intent:function(t,i){return n.debug("Determining whether event occurred in dropdown",t.target),i=i||function(){},0===e(t.target).closest(E).size()?(n.verbose("Triggering event",i),i(),!0):(n.verbose("Event occurred in dropdown, canceling callback"),!1)}},action:{nothing:function(){},hide:function(){n.hide()},activate:function(e,t){t=t!==i?t:e,n.set.selected(t),n.set.value(t),n.hide()},auto:function(e,t){t=t!==i?t:e,n.set.selected(t),n.set.value(t),n.hide()},changeText:function(e,t){t=t!==i?t:e,n.set.selected(t),n.hide()},updateForm:function(e,t){t=t!==i?t:e,n.set.selected(t),n.set.value(t),n.hide()}},get:{text:function(){return S.text()},value:function(){return x.size()>0?x.val():k.data(m.value)},item:function(t){var o;return t=t!==i?t:n.get.value()!==i?n.get.value():n.get.text(),t!==i?T.each(function(){var n=e(this),r=n.data(m.text)!==i?n.data(m.text):n.text(),a=n.data(m.value)!==i?n.data(m.value):r.toLowerCase();return a==t||r==t?(o=e(this),!1):void 0}):t=n.get.text(),o||!1}},set:{text:function(e){n.debug("Changing text",e,S),S.removeClass(g.placeholder),S.text(e)},value:function(e){n.debug("Adding selected value to hidden input",e,x),x.size()>0?x.val(e):k.data(m.value,e)},active:function(){k.addClass(g.active)},visible:function(){k.addClass(g.visible)},selected:function(e){var t,o=n.get.item(e);o&&(n.debug("Setting selected menu item to",o),t=o.data(m.text)!==i?o.data(m.text):o.text(),T.removeClass(g.active),o.addClass(g.active),n.set.text(t))}},remove:{active:function(){k.removeClass(g.active)},visible:function(){k.removeClass(g.visible)}},is:{selection:function(){return k.hasClass(g.selection)},animated:function(e){return e?e.is(":animated")||e.transition("is animating"):E.is(":animated")||E.transition("is animating")},visible:function(e){return e?e.is(":visible"):E.is(":visible")},hidden:function(e){return e?e.is(":not(:visible)"):E.is(":not(:visible)")}},can:{click:function(){return c||"click"==h.on},show:function(){return!k.hasClass(g.disabled)}},animate:{show:function(t,o){var r=o||E;t=t||function(){},n.is.hidden(r)&&(n.verbose("Doing menu show animation",r),"none"==h.transition?t():e.fn.transition!==i&&k.transition("is supported")?r.transition({animation:h.transition+" in",duration:h.duration,complete:t,queue:!1}):"slide down"==h.transition?r.hide().clearQueue().children().clearQueue().css("opacity",0).delay(50).animate({opacity:1},h.duration,"easeOutQuad",n.event.resetStyle).end().slideDown(100,"easeOutQuad",function(){e.proxy(n.event.resetStyle,this)(),t()
}):"fade"==h.transition?r.hide().clearQueue().fadeIn(h.duration,function(){e.proxy(n.event.resetStyle,this)(),t()}):n.error(b.transition,h.transition))},hide:function(t,o){var r=o||E;t=t||function(){},n.is.visible(r)&&(n.verbose("Doing menu hide animation",r),e.fn.transition!==i&&k.transition("is supported")?r.transition({animation:h.transition+" out",duration:h.duration,complete:t,queue:!1}):"none"==h.transition?t():"slide down"==h.transition?r.show().clearQueue().children().clearQueue().css("opacity",1).animate({opacity:0},100,"easeOutQuad",n.event.resetStyle).end().delay(50).slideUp(100,"easeOutQuad",function(){e.proxy(n.event.resetStyle,this)(),t()}):"fade"==h.transition?r.show().clearQueue().fadeOut(150,function(){e.proxy(n.event.resetStyle,this)(),t()}):n.error(b.transition))}},show:function(){n.debug("Checking if dropdown can show"),n.is.hidden()&&(n.hideOthers(),n.set.active(),n.animate.show(function(){n.can.click()&&n.bind.intent(),n.set.visible()}),e.proxy(h.onShow,C)())},hide:function(){!n.is.animated()&&n.is.visible()&&(n.debug("Hiding dropdown"),n.can.click()&&n.unbind.intent(),n.remove.active(),n.animate.hide(n.remove.visible),e.proxy(h.onHide,C)())},delay:{show:function(){n.verbose("Delaying show event to ensure user intent"),clearTimeout(n.timer),n.timer=setTimeout(n.show,h.delay.show)},hide:function(){n.verbose("Delaying hide event to ensure user intent"),clearTimeout(n.timer),n.timer=setTimeout(n.hide,h.delay.hide)}},hideOthers:function(){n.verbose("Finding other dropdowns to hide"),r.not(k).has(y.menu+":visible").dropdown("hide")},toggle:function(){n.verbose("Toggling menu visibility"),n.is.hidden()?n.show():n.hide()},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,h,t);else{if(n===i)return h[t];h[t]=n}},internal:function(t,o){if(e.isPlainObject(t))e.extend(!0,n,t);else{if(o===i)return n[t];n[t]=o}},debug:function(){h.debug&&(h.performance?n.performance.log(arguments):(n.debug=Function.prototype.bind.call(console.info,console,h.name+":"),n.debug.apply(console,arguments)))},verbose:function(){h.verbose&&h.debug&&(h.performance?n.performance.log(arguments):(n.verbose=Function.prototype.bind.call(console.info,console,h.name+":"),n.verbose.apply(console,arguments)))},error:function(){n.error=Function.prototype.bind.call(console.error,console,h.name+":"),n.error.apply(console,arguments)},performance:{log:function(e){var t,i,o;h.performance&&(t=(new Date).getTime(),o=l||t,i=t-o,l=t,u.push({Element:C,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":i})),clearTimeout(n.performance.timer),n.performance.timer=setTimeout(n.performance.display,100)},display:function(){var t=h.name+":",o=0;l=!1,clearTimeout(n.performance.timer),e.each(u,function(e,t){o+=t["Execution Time"]}),t+=" "+o+"ms",s&&(t+=" '"+s+"'"),(console.group!==i||console.table!==i)&&u.length>0&&(console.groupCollapsed(t),console.table?console.table(u):e.each(u,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),u=[]}},invoke:function(t,r,a){var s,c,l;return r=r||p,a=C||a,"string"==typeof t&&P!==i&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(o,r){var a=o!=s?r+t[o+1].charAt(0).toUpperCase()+t[o+1].slice(1):t;if(e.isPlainObject(P[a])&&o!=s)P=P[a];else{if(P[a]!==i)return c=P[a],!1;if(!e.isPlainObject(P[r])||o==s)return P[r]!==i?(c=P[r],!1):(n.error(b.method,t),!1);P=P[r]}})),e.isFunction(c)?l=c.apply(a,r):c!==i&&(l=c),e.isArray(o)?o.push(l):o!==i?o=[o,l]:l!==i&&(o=l),c}},f?(P===i&&n.initialize(),n.invoke(d)):(P!==i&&n.destroy(),n.initialize())}),o?o:this},e.fn.dropdown.settings={name:"Dropdown",namespace:"dropdown",verbose:!0,debug:!0,performance:!0,on:"click",action:"activate",delay:{show:200,hide:300,touch:50},transition:"slide down",duration:250,onChange:function(){},onShow:function(){},onHide:function(){},error:{action:"You called a dropdown action that was not defined",method:"The method you called is not defined.",transition:"The requested transition was not found"},metadata:{text:"text",value:"value"},selector:{menu:".menu",item:".menu > .item",text:"> .text",input:'> input[type="hidden"]'},className:{active:"active",placeholder:"default",disabled:"disabled",visible:"visible",selection:"selection"}},e.extend(e.easing,{easeOutQuad:function(e,t,n,i,o){return-i*(t/=o)*(t-2)+n}})}(jQuery,window,document)}.call(this),function(){!function(e,t,n,i){e.fn.modal=function(o){var r,a=e(this),s=e(t),c=e(n),l=(new Date).getTime(),u=[],d=arguments[0],f="string"==typeof d,p=[].slice.call(arguments,1);return a.each(function(){var h,g,m,v,y,b,_=e.isPlainObject(o)?e.extend(!0,{},e.fn.modal.settings,o):e.extend({},e.fn.modal.settings),w=_.selector,k=_.className,T=_.namespace,S=_.error,x="."+T,E="module-"+T,C=a.selector||"",P=e(this),D=e(_.context),O=P.find(w.close),M=this,I=P.data(E);b={initialize:function(){return b.verbose("Initializing dimmer",D),typeof e.fn.dimmer===i?(b.error(S.dimmer),void 0):(v=D.dimmer({closable:!1,useCSS:b.is.modernBrowser(),show:.9*_.duration,hide:1.1*_.duration}).dimmer("add content",P),y=v.dimmer("get dimmer"),g=P.siblings(w.modal),h=g.add(P),b.verbose("Attaching close events",O),O.on("click"+x,b.event.close),s.on("resize"+x,function(){b.event.debounce(b.refresh,50)}),b.instantiate(),void 0)},instantiate:function(){b.verbose("Storing instance of modal"),I=b,P.data(E,I)},destroy:function(){b.verbose("Destroying previous modal"),P.removeData(E).off(x),O.off(x),D.dimmer("destroy")},refresh:function(){b.remove.scrolling(),b.cacheSizes(),b.set.type(),b.set.position()},attachEvents:function(t,n){var i=e(t);n=e.isFunction(b[n])?b[n]:b.toggle,i.size()>0?(b.debug("Attaching modal events to element",t,n),i.off(x).on("click"+x,n)):b.error(S.notFound)},event:{close:function(){b.verbose("Closing element pressed"),e(this).is(w.approve)?e.proxy(_.onApprove,M)()!==!1?b.hide():b.verbose("Approve callback returned false cancelling hide"):e(this).is(w.deny)?e.proxy(_.onDeny,M)()!==!1?b.hide():b.verbose("Deny callback returned false cancelling hide"):b.hide()},click:function(t){0===e(t.target).closest(w.modal).size()&&(b.debug("Dimmer clicked, hiding all modals"),b.hideAll(),t.stopImmediatePropagation())},debounce:function(e,t){clearTimeout(b.timer),b.timer=setTimeout(e,t)},keyboard:function(e){var t=e.which,n=27;t==n&&(_.closable?(b.debug("Escape key pressed hiding modal"),b.hide()):b.debug("Escape key pressed, but closable is set to false"),e.preventDefault())},resize:function(){v.dimmer("is active")&&b.refresh()}},toggle:function(){b.is.active()?b.hide():b.show()},show:function(t){t=e.isFunction(t)?t:function(){},b.showDimmer(),b.showModal(t)},showModal:function(t){t=e.isFunction(t)?t:function(){},b.is.active()?b.debug("Modal is already visible"):(b.cacheSizes(),b.set.position(),b.set.type(),g.filter(":visible").size()>0?(b.debug("Other modals visible, queueing show animation"),b.hideOthers(b.showModal)):(_.transition&&e.fn.transition!==i&&P.transition("is supported")?(b.debug("Showing modal with css animations"),P.transition(_.transition+" in",_.duration,function(){b.set.active(),t()})):(b.debug("Showing modal with javascript"),P.fadeIn(_.duration,_.easing,function(){b.set.active(),t()})),e.proxy(_.onShow,M)()))},showDimmer:function(){v.dimmer("is active")?b.debug("Dimmer already visible"):(b.debug("Showing dimmer"),v.dimmer("show"))},hide:function(t){t=e.isFunction(t)?t:function(){},b.hideDimmer(),b.hideModal(t)},hideDimmer:function(){v.dimmer("is active")?(b.debug("Hiding dimmer"),_.closable&&y.off("click"+x),v.dimmer("hide")):b.debug("Dimmer is not visible cannot hide")},hideModal:function(t){t=e.isFunction(t)?t:function(){},b.is.active()&&(b.debug("Hiding modal"),b.remove.keyboardShortcuts(),_.transition&&e.fn.transition!==i&&P.transition("is supported")?P.transition(_.transition+" out",_.duration,function(){b.remove.active(),b.restore.focus(),t()}):P.fadeOut(_.duration,_.easing,function(){b.remove.active(),b.restore.focus(),t()}),e.proxy(_.onHide,M)())},hideAll:function(t){t=e.isFunction(t)?t:function(){},h.is(":visible")&&(b.debug("Hiding all visible modals"),b.hideDimmer(),h.filter(":visible").modal("hide modal",t))},hideOthers:function(t){t=e.isFunction(t)?t:function(){},g.is(":visible")&&(b.debug("Hiding other modals"),g.filter(":visible").modal("hide modal",t))},add:{keyboardShortcuts:function(){b.verbose("Adding keyboard shortcuts"),c.on("keyup"+x,b.event.keyboard)}},save:{focus:function(){m=e(n.activeElement).blur()}},restore:{focus:function(){m&&m.size()>0&&m.focus()}},remove:{active:function(){P.removeClass(k.active)},keyboardShortcuts:function(){b.verbose("Removing keyboard shortcuts"),c.off("keyup"+x)},scrolling:function(){v.removeClass(k.scrolling),P.removeClass(k.scrolling)}},cacheSizes:function(){b.cache={height:P.outerHeight()+_.offset,contextHeight:"body"==_.context?e(t).height():v.height()},b.debug("Caching modal and container sizes",b.cache)},can:{fit:function(){return b.cache.height<b.cache.contextHeight}},is:{active:function(){return P.hasClass(k.active)},modernBrowser:function(){return"Microsoft Internet Explorer"!==navigator.appName}},set:{active:function(){b.add.keyboardShortcuts(),b.save.focus(),P.addClass(k.active),_.closable&&y.off("click"+x).on("click"+x,b.event.click)},scrolling:function(){v.addClass(k.scrolling),P.addClass(k.scrolling)},type:function(){b.can.fit()?(b.verbose("Modal fits on screen"),b.remove.scrolling()):(b.verbose("Modal cannot fit on screen setting to scrolling"),b.set.scrolling())},position:function(){b.verbose("Centering modal on page",b.cache,b.cache.height/2),b.can.fit()?P.css({top:"",marginTop:-(b.cache.height/2)}):P.css({marginTop:"1em",top:c.scrollTop()})}},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,_,t);else{if(n===i)return _[t];_[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,b,t);else{if(n===i)return b[t];b[t]=n}},debug:function(){_.debug&&(_.performance?b.performance.log(arguments):(b.debug=Function.prototype.bind.call(console.info,console,_.name+":"),b.debug.apply(console,arguments)))},verbose:function(){_.verbose&&_.debug&&(_.performance?b.performance.log(arguments):(b.verbose=Function.prototype.bind.call(console.info,console,_.name+":"),b.verbose.apply(console,arguments)))},error:function(){b.error=Function.prototype.bind.call(console.error,console,_.name+":"),b.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;_.performance&&(t=(new Date).getTime(),i=l||t,n=t-i,l=t,u.push({Element:M,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(b.performance.timer),b.performance.timer=setTimeout(b.performance.display,100)},display:function(){var t=_.name+":",n=0;l=!1,clearTimeout(b.performance.timer),e.each(u,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",C&&(t+=" '"+C+"'"),(console.group!==i||console.table!==i)&&u.length>0&&(console.groupCollapsed(t),console.table?console.table(u):e.each(u,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),u=[]}},invoke:function(t,n,o){var a,s,c;return n=n||p,o=M||o,"string"==typeof t&&I!==i&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,o){var r=n!=a?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(I[r])&&n!=a)I=I[r];else{if(I[r]!==i)return s=I[r],!1;if(!e.isPlainObject(I[o])||n==a)return I[o]!==i?(s=I[o],!1):(b.error(S.method,t),!1);I=I[o]}})),e.isFunction(s)?c=s.apply(o,n):s!==i&&(c=s),e.isArray(r)?r.push(c):r!==i?r=[r,c]:c!==i&&(r=c),s}},f?(I===i&&b.initialize(),b.invoke(d)):(I!==i&&b.destroy(),b.initialize())}),r!==i?r:this},e.fn.modal.settings={name:"Modal",namespace:"modal",debug:!0,verbose:!0,performance:!0,closable:!0,context:"body",duration:500,easing:"easeOutExpo",offset:0,transition:"scale",onShow:function(){},onHide:function(){},onApprove:function(){return!0},onDeny:function(){return!0},selector:{close:".close, .actions .button",approve:".actions .positive, .actions .approve",deny:".actions .negative, .actions .cancel",modal:".ui.modal"},error:{dimmer:"UI Dimmer, a required component is not included in this page",method:"The method you called is not defined."},className:{active:"active",scrolling:"scrolling"}}}(jQuery,window,document)}.call(this),function(){!function(e,t,n,i){e.fn.nag=function(n){var o,r=e(this),a=r.selector||"",s=(new Date).getTime(),c=[],l=arguments[0],u="string"==typeof l,d=[].slice.call(arguments,1);return e(this).each(function(){var f,p,h,g,m,v,y,b,_,w=e.extend(!0,{},e.fn.nag.settings,n),k=w.className,T=w.selector,S=w.error,x=w.namespace,E="."+x,C=x+"-module",P=e(this),D=P.find(T.close),O=e(w.context),M=this,I=P.data(C),A=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)};_={initialize:function(){_.verbose("Initializing element"),f=P.offset(),p=P.outerHeight(),h=O.outerWidth(),g=O.outerHeight(),m=O.offset(),P.data(C,_),D.on("click"+E,_.dismiss),w.context==t&&"fixed"==w.position&&P.addClass(k.fixed),w.sticky&&(_.verbose("Adding scroll events"),"absolute"==w.position?O.on("scroll"+E,_.event.scroll).on("resize"+E,_.event.scroll):e(t).on("scroll"+E,_.event.scroll).on("resize"+E,_.event.scroll),e.proxy(_.event.scroll,this)()),w.displayTime>0&&setTimeout(_.hide,w.displayTime),_.should.show()?P.is(":visible")||_.show():_.hide()},destroy:function(){_.verbose("Destroying instance"),P.removeData(C).off(E),w.sticky&&O.off(E)},refresh:function(){_.debug("Refreshing cached calculations"),f=P.offset(),p=P.outerHeight(),h=O.outerWidth(),g=O.outerHeight(),m=O.offset()},show:function(){_.debug("Showing nag",w.animation.show),"fade"==w.animation.show?P.fadeIn(w.duration,w.easing):P.slideDown(w.duration,w.easing)},hide:function(){_.debug("Showing nag",w.animation.hide),"fade"==w.animation.show?P.fadeIn(w.duration,w.easing):P.slideUp(w.duration,w.easing)},onHide:function(){_.debug("Removing nag",w.animation.hide),P.remove(),w.onHide&&w.onHide()},stick:function(){if(_.refresh(),"fixed"==w.position){var n=e(t).prop("pageYOffset")||e(t).scrollTop(),i=P.hasClass(k.bottom)?m.top+(g-p)-n:m.top-n;P.css({position:"fixed",top:i,left:m.left,width:h-w.scrollBarWidth})}else P.css({top:y})},unStick:function(){P.css({top:""})},dismiss:function(e){w.storageMethod&&_.storage.set(w.storedKey,w.storedValue),_.hide(),e.stopImmediatePropagation(),e.preventDefault()},should:{show:function(){return w.persist?(_.debug("Persistent nag is set, can show nag"),!0):_.storage.get(w.storedKey)!=w.storedValue?(_.debug("Stored value is not set, can show nag",_.storage.get(w.storedKey)),!0):(_.debug("Stored value is set, cannot show nag",_.storage.get(w.storedKey)),!1)},stick:function(){return v=O.prop("pageYOffset")||O.scrollTop(),y=P.hasClass(k.bottom)?g-P.outerHeight()+v:v,y>f.top?!0:"fixed"==w.position?!0:!1}},storage:{set:function(n,o){_.debug("Setting stored value",n,o,w.storageMethod),"local"==w.storageMethod&&t.store!==i?t.store.set(n,o):e.cookie!==i?e.cookie(n,o):_.error(S.noStorage)},get:function(n){return _.debug("Getting stored value",n,w.storageMethod),"local"==w.storageMethod&&t.store!==i?t.store.get(n):e.cookie!==i?e.cookie(n):(_.error(S.noStorage),void 0)}},event:{scroll:function(){b!==i&&clearTimeout(b),b=setTimeout(function(){_.should.stick()?A(_.stick):_.unStick()},w.lag)}},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,w,t);else{if(n===i)return w[t];w[t]=n}},internal:function(t,n){return _.debug("Changing internal",t,n),n===i?_[t]:(e.isPlainObject(t)?e.extend(!0,_,t):_[t]=n,void 0)},debug:function(){w.debug&&(w.performance?_.performance.log(arguments):(_.debug=Function.prototype.bind.call(console.info,console,w.name+":"),_.debug.apply(console,arguments)))},verbose:function(){w.verbose&&w.debug&&(w.performance?_.performance.log(arguments):(_.verbose=Function.prototype.bind.call(console.info,console,w.name+":"),_.verbose.apply(console,arguments)))},error:function(){_.error=Function.prototype.bind.call(console.error,console,w.name+":"),_.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;w.performance&&(t=(new Date).getTime(),i=s||t,n=t-i,s=t,c.push({Element:M,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(_.performance.timer),_.performance.timer=setTimeout(_.performance.display,100)},display:function(){var t=w.name+":",n=0;s=!1,clearTimeout(_.performance.timer),e.each(c,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",a&&(t+=" '"+a+"'"),r.size()>1&&(t+=" ("+r.size()+")"),(console.group!==i||console.table!==i)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,n,r){var a,s,c;return n=n||d,r=M||r,"string"==typeof t&&I!==i&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,o){var r=n!=a?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(I[r])&&n!=a)I=I[r];else{if(I[r]!==i)return s=I[r],!1;if(!e.isPlainObject(I[o])||n==a)return I[o]!==i?(s=I[o],!1):(_.error(S.method,t),!1);I=I[o]}})),e.isFunction(s)?c=s.apply(r,n):s!==i&&(c=s),e.isArray(o)?o.push(c):o!==i?o=[o,c]:c!==i&&(o=c),s}},u?(I===i&&_.initialize(),_.invoke(l)):(I!==i&&_.destroy(),_.initialize())}),o!==i?o:this},e.fn.nag.settings={name:"Nag",verbose:!0,debug:!0,performance:!0,namespace:"Nag",persist:!1,displayTime:0,animation:{show:"slide",hide:"slide"},position:"fixed",scrollBarWidth:18,storageMethod:"cookie",storedKey:"nag",storedValue:"dismiss",sticky:!1,lag:0,context:t,error:{noStorage:"Neither $.cookie or store is defined. A storage solution is required for storing state",method:"The method you called is not defined."},className:{bottom:"bottom",fixed:"fixed"},selector:{close:".icon.close"},speed:500,easing:"easeOutQuad",onHide:function(){}}}(jQuery,window,document)}.call(this),function(){!function(e,t,n,i){e.fn.popup=function(o){var r,a=e(this),s=e(n),c=a.selector||"",l=(new Date).getTime(),u=[],d=arguments[0],f="string"==typeof d,p=[].slice.call(arguments,1);return a.each(function(){var n,a=e.isPlainObject(o)?e.extend(!0,{},e.fn.popup.settings,o):e.extend({},e.fn.popup.settings),h=a.selector,g=a.className,m=a.error,v=a.metadata,y=a.namespace,b="."+a.namespace,_="module-"+y,w=e(this),k=e(a.context),T=a.target?e(a.target):w,S=e(t),x=a.inline?T.offsetParent():S,E=a.inline?T.next(a.selector.popup):S.children(a.selector.popup).last(),C=0,P=this,D=w.data(_);n={initialize:function(){n.debug("Initializing module",w),"click"==a.on?w.on("click",n.toggle):w.on(n.get.startEvent()+b,n.event.start).on(n.get.endEvent()+b,n.event.end),a.target&&n.debug("Target set to element",T),S.on("resize"+b,n.event.resize),n.instantiate()},instantiate:function(){n.verbose("Storing instance of module",n),D=n,w.data(_,D)},refresh:function(){a.inline?(E=T.next(h.popup),x=T.offsetParent()):E=S.children(h.popup).last()},destroy:function(){n.debug("Destroying previous module"),S.off(b),E.remove(),w.off(b).removeData(_)},event:{start:function(){n.timer=setTimeout(function(){n.is.hidden()&&n.show()},a.delay)},end:function(){clearTimeout(n.timer),n.is.visible()&&n.hide()},resize:function(){n.is.visible()&&n.set.position()}},create:function(){n.debug("Creating pop-up html");var t=w.data(v.html)||a.html,i=w.data(v.variation)||a.variation,o=w.data(v.title)||a.title,r=w.data(v.content)||w.attr("title")||a.content;t||r||o?(t||(t=a.template({title:o,content:r})),E=e("<div/>").addClass(g.popup).addClass(i).html(t),a.inline?(n.verbose("Inserting popup element inline",E),E.insertAfter(w)):(n.verbose("Appending popup element to body",E),E.appendTo(k)),e.proxy(a.onCreate,E)()):n.error(m.content)},toggle:function(){n.debug("Toggling pop-up"),n.is.hidden()?(n.hideAll(),n.show()):n.hide()},show:function(e){e=e||function(){},n.debug("Showing pop-up",a.transition),a.preserve||n.refresh(),n.exists()||n.create(),n.set.position(),n.animate.show(e)},hide:function(e){e=e||function(){},w.removeClass(g.visible),n.unbind.close(),n.is.visible()&&n.animate.hide(e)},hideAll:function(){e(h.popup).filter(":visible").popup("hide")},hideGracefully:function(t){0===e(t.target).closest(h.popup).size()&&n.hide()},exists:function(){return a.inline?0!==E.size():E.parent(k).size()},remove:function(){n.debug("Removing popup"),E.remove()},animate:{show:function(t){t=t||function(){},w.addClass(g.visible),a.transition&&e.fn.transition!==i&&w.transition("is supported")?E.transition(a.transition+" in",a.duration,function(){n.bind.close(),e.proxy(t,P)()}):E.stop().fadeIn(a.duration,a.easing,function(){n.bind.close(),e.proxy(t,P)()}),e.proxy(a.onShow,P)()},hide:function(t){t=t||function(){},n.debug("Hiding pop-up"),a.transition&&e.fn.transition!==i&&w.transition("is supported")?E.transition(a.transition+" out",a.duration,function(){n.reset(),t()}):E.stop().fadeOut(a.duration,a.easing,function(){n.reset(),t()}),e.proxy(a.onHide,P)()}},get:{startEvent:function(){return"hover"==a.on?"mouseenter":"focus"==a.on?"focus":void 0},endEvent:function(){return"hover"==a.on?"mouseleave":"focus"==a.on?"blur":void 0},offstagePosition:function(){var i={top:e(t).scrollTop(),bottom:e(t).scrollTop()+e(t).height(),left:0,right:e(t).width()},o={width:E.width(),height:E.outerHeight(),position:E.offset()},r={},a=[];return o.position&&(r={top:o.position.top<i.top,bottom:o.position.top+o.height>i.bottom,right:o.position.left+o.width>i.right,left:o.position.left<i.left}),n.verbose("Checking if outside viewable area",o.position),e.each(r,function(e,t){t&&a.push(e)}),a.length>0?a.join(" "):!1},nextPosition:function(e){switch(e){case"top left":e="bottom left";break;case"bottom left":e="top right";break;case"top right":e="bottom right";break;case"bottom right":e="top center";break;case"top center":e="bottom center";break;case"bottom center":e="right center";break;case"right center":e="left center";break;case"left center":e="top center"}return e}},set:{position:function(i,o){var r,s,c=(e(t).width(),e(t).height(),T.outerWidth()),l=T.outerHeight(),u=E.width(),d=E.outerHeight(),f=x.outerWidth(),p=x.outerHeight(),h=a.distanceAway,y=a.inline?T.position():T.offset();switch(i=i||w.data(v.position)||a.position,o=o||w.data(v.offset)||a.offset,a.inline&&("left center"==i||"right center"==i?(o+=parseInt(t.getComputedStyle(P).getPropertyValue("margin-top"),10),h+=-parseInt(t.getComputedStyle(P).getPropertyValue("margin-left"),10)):(o+=parseInt(t.getComputedStyle(P).getPropertyValue("margin-left"),10),h+=parseInt(t.getComputedStyle(P).getPropertyValue("margin-top"),10))),n.debug("Calculating offset for position",i),i){case"top left":r={bottom:p-y.top+h,right:f-y.left-o,top:"auto",left:"auto"};break;case"top center":r={bottom:p-y.top+h,left:y.left+c/2-u/2+o,top:"auto",right:"auto"};break;case"top right":r={top:"auto",bottom:p-y.top+h,left:y.left+c+o,right:"auto"};break;case"left center":r={top:y.top+l/2-d/2+o,right:f-y.left+h,left:"auto",bottom:"auto"};break;case"right center":r={top:y.top+l/2-d/2+o,left:y.left+c+h,bottom:"auto",right:"auto"};break;case"bottom left":r={top:y.top+l+h,right:f-y.left-o,left:"auto",bottom:"auto"};break;case"bottom center":r={top:y.top+l+h,left:y.left+c/2-u/2+o,bottom:"auto",right:"auto"};break;case"bottom right":r={top:y.top+l+h,left:y.left+c+o,bottom:"auto",right:"auto"}}return E.css(r).removeClass(g.position).addClass(i).addClass(g.loading),s=n.get.offstagePosition(),s?(n.debug("Element is outside boundaries",s),C<a.maxSearchDepth?(i=n.get.nextPosition(i),C++,n.debug("Trying new position",i),n.set.position(i)):(n.error(m.recursion),C=0,n.reset(),!1)):(n.debug("Position is on stage",i),C=0,!0)}},bind:{close:function(){"click"==a.on&&a.closable&&(n.verbose("Binding popup close event to document"),s.on("click"+b,n.hideGracefully))}},unbind:{close:function(){"click"==a.on&&a.closable&&(n.verbose("Removing close event from document"),s.off("click"+b))}},is:{visible:function(){return E.is(":visible")},hidden:function(){return!n.is.visible()}},reset:function(){E.attr("style","").removeAttr("style"),a.preserve||n.remove()},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,a,t);else{if(n===i)return a[t];a[t]=n}},internal:function(t,o){if(e.isPlainObject(t))e.extend(!0,n,t);else{if(o===i)return n[t];n[t]=o}},debug:function(){a.debug&&(a.performance?n.performance.log(arguments):(n.debug=Function.prototype.bind.call(console.info,console,a.name+":"),n.debug.apply(console,arguments)))},verbose:function(){a.verbose&&a.debug&&(a.performance?n.performance.log(arguments):(n.verbose=Function.prototype.bind.call(console.info,console,a.name+":"),n.verbose.apply(console,arguments)))},error:function(){n.error=Function.prototype.bind.call(console.error,console,a.name+":"),n.error.apply(console,arguments)},performance:{log:function(e){var t,i,o;a.performance&&(t=(new Date).getTime(),o=l||t,i=t-o,l=t,u.push({Element:P,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":i})),clearTimeout(n.performance.timer),n.performance.timer=setTimeout(n.performance.display,100)},display:function(){var t=a.name+":",o=0;l=!1,clearTimeout(n.performance.timer),e.each(u,function(e,t){o+=t["Execution Time"]}),t+=" "+o+"ms",c&&(t+=" '"+c+"'"),(console.group!==i||console.table!==i)&&u.length>0&&(console.groupCollapsed(t),console.table?console.table(u):e.each(u,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),u=[]}},invoke:function(t,o,a){var s,c,l;return o=o||p,a=P||a,"string"==typeof t&&D!==i&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(o,r){var a=o!=s?r+t[o+1].charAt(0).toUpperCase()+t[o+1].slice(1):t;if(e.isPlainObject(D[r])&&o!=s)D=D[r];else{if(!e.isPlainObject(D[a])||o==s)return D[r]!==i?(c=D[r],!1):D[a]!==i?(c=D[a],!1):(n.error(m.method,t),!1);D=D[a]}})),e.isFunction(c)?l=c.apply(a,o):c!==i&&(l=c),e.isArray(r)?r.push(l):r!==i?r=[r,l]:l!==i&&(r=l),c}},f?(D===i&&n.initialize(),n.invoke(d)):(D!==i&&n.destroy(),n.initialize())}),r!==i?r:this},e.fn.popup.settings={name:"Popup",debug:!0,verbose:!0,performance:!0,namespace:"popup",onCreate:function(){},onShow:function(){},onHide:function(){},variation:"",content:!1,html:!1,title:!1,on:"hover",target:!1,closable:!0,context:"body",position:"top center",delay:150,inline:!1,preserve:!1,duration:250,easing:"easeOutQuint",transition:"scale",distanceAway:0,offset:0,maxSearchDepth:10,error:{content:"Your popup has no content specified",method:"The method you called is not defined.",recursion:"Popup attempted to reposition element to fit, but could not find an adequate position."},metadata:{content:"content",html:"html",offset:"offset",position:"position",title:"title",variation:"variation"},className:{loading:"loading",popup:"ui popup",position:"top left center bottom right",visible:"visible"},selector:{popup:".ui.popup"},template:function(e){var t="";return typeof e!==i&&(typeof e.title!==i&&e.title&&(t+='<div class="header">'+e.title+'</div class="header">'),typeof e.content!==i&&e.content&&(t+='<div class="content">'+e.content+"</div>")),t}}}(jQuery,window,document)}.call(this),function(){!function(e,t,n,i){e.fn.rating=function(t){var n,o=e(this),r=o.selector||"",a=(new Date).getTime(),s=[],c=arguments[0],l="string"==typeof c,u=[].slice.call(arguments,1);return o.each(function(){var d,f=e.isPlainObject(t)?e.extend(!0,{},e.fn.rating.settings,t):e.extend({},e.fn.rating.settings),p=f.namespace,h=f.className,g=f.metadata,m=f.selector,v=f.error,y="."+p,b="module-"+p,_=this,w=e(this).data(b),k=e(this),T=k.find(m.icon);d={initialize:function(){d.verbose("Initializing rating module",f),f.interactive?d.enable():d.disable(),f.initialRating&&(d.debug("Setting initial rating"),d.setRating(f.initialRating)),k.data(g.rating)&&(d.debug("Rating found in metadata"),d.setRating(k.data(g.rating))),d.instantiate()},instantiate:function(){d.verbose("Instantiating module",f),w=d,k.data(b,d)},destroy:function(){d.verbose("Destroying previous instance",w),k.removeData(b),T.off(y)},event:{mouseenter:function(){var t=e(this);t.nextAll().removeClass(h.hover),k.addClass(h.hover),t.addClass(h.hover).prevAll().addClass(h.hover)},mouseleave:function(){k.removeClass(h.hover),T.removeClass(h.hover)},click:function(){var t=e(this),n=d.getRating(),i=T.index(t)+1;f.clearable&&n==i?d.clearRating():d.setRating(i)}},clearRating:function(){d.debug("Clearing current rating"),d.setRating(0)},getRating:function(){var e=T.filter("."+h.active).size();return d.verbose("Current rating retrieved",e),e},enable:function(){d.debug("Setting rating to interactive mode"),T.on("mouseenter"+y,d.event.mouseenter).on("mouseleave"+y,d.event.mouseleave).on("click"+y,d.event.click),k.removeClass(h.disabled)},disable:function(){d.debug("Setting rating to read-only mode"),T.off(y),k.addClass(h.disabled)},setRating:function(t){var n=t-1>=0?t-1:0,i=T.eq(n);k.removeClass(h.hover),T.removeClass(h.hover).removeClass(h.active),t>0&&(d.verbose("Setting current rating to",t),i.addClass(h.active).prevAll().addClass(h.active)),e.proxy(f.onRate,_)(t)},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,f,t);else{if(n===i)return f[t];f[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,d,t);else{if(n===i)return d[t];d[t]=n}},debug:function(){f.debug&&(f.performance?d.performance.log(arguments):(d.debug=Function.prototype.bind.call(console.info,console,f.name+":"),d.debug.apply(console,arguments)))},verbose:function(){f.verbose&&f.debug&&(f.performance?d.performance.log(arguments):(d.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),d.verbose.apply(console,arguments)))},error:function(){d.error=Function.prototype.bind.call(console.error,console,f.name+":"),d.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;f.performance&&(t=(new Date).getTime(),i=a||t,n=t-i,a=t,s.push({Element:_,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(d.performance.timer),d.performance.timer=setTimeout(d.performance.display,100)},display:function(){var t=f.name+":",n=0;a=!1,clearTimeout(d.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",r&&(t+=" '"+r+"'"),o.size()>1&&(t+=" ("+o.size()+")"),(console.group!==i||console.table!==i)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,o,r){var a,s,c;return o=o||u,r=_||r,"string"==typeof t&&w!==i&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,o){var r=n!=a?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(w[r])&&n!=a)w=w[r];else{if(w[r]!==i)return s=w[r],!1;if(!e.isPlainObject(w[o])||n==a)return w[o]!==i?(s=w[o],!1):(d.error(v.method,t),!1);w=w[o]}})),e.isFunction(s)?c=s.apply(r,o):s!==i&&(c=s),e.isArray(n)?n.push(c):n!==i?n=[n,c]:c!==i&&(n=c),s}},l?(w===i&&d.initialize(),d.invoke(c)):(w!==i&&d.destroy(),d.initialize())}),n!==i?n:this},e.fn.rating.settings={name:"Rating",namespace:"rating",verbose:!0,debug:!0,performance:!0,initialRating:0,interactive:!0,clearable:!1,onRate:function(){},error:{method:"The method you called is not defined"},metadata:{rating:"rating"},className:{active:"active",disabled:"disabled",hover:"hover",loading:"loading"},selector:{icon:".icon"}}}(jQuery,window,document)}.call(this),function(){!function(e,t,n,i){e.fn.search=function(n,o){var r,a=e(this),s=a.selector||"",c=(new Date).getTime(),l=[],u=arguments[0],d="string"==typeof u,f=[].slice.call(arguments,1);return e(this).each(function(){var p,h=e.extend(!0,{},e.fn.search.settings,o),g=h.className,m=h.selector,v=h.error,y=h.namespace,b="."+y,_=y+"-module",w=e(this),k=w.find(m.prompt),T=w.find(m.searchButton),S=w.find(m.results),x=(w.find(m.result),w.find(m.category),this),E=w.data(_);p={initialize:function(){p.verbose("Initializing module");var e=k[0],t=e.oninput!==i?"input":e.onpropertychange!==i?"propertychange":"keyup";k.on("focus"+b,p.event.focus).on("blur"+b,p.event.blur).on("keydown"+b,p.handleKeyboard),h.automatic&&k.on(t+b,p.search.throttle),T.on("click"+b,p.search.query),S.on("click"+b,m.result,p.results.select),p.instantiate()},instantiate:function(){p.verbose("Storing instance of module",p),E=p,w.data(_,p)
},destroy:function(){p.verbose("Destroying instance"),w.removeData(_)},event:{focus:function(){w.addClass(g.focus),p.results.show()},blur:function(){p.search.cancel(),w.removeClass(g.focus),p.results.hide()}},handleKeyboard:function(t){var n,i=w.find(m.result),o=w.find(m.category),r=t.which,a={backspace:8,enter:13,escape:27,upArrow:38,downArrow:40},s=g.active,c=i.index(i.filter("."+s)),l=i.size();if(r==a.escape&&(p.verbose("Escape key pressed, blurring search field"),k.trigger("blur")),S.filter(":visible").size()>0)if(r==a.enter){if(p.verbose("Enter key pressed, selecting active result"),i.filter("."+s).exists())return e.proxy(p.results.select,i.filter("."+s))(),t.preventDefault(),!1}else r==a.upArrow?(p.verbose("Up key pressed, changing active result"),n=0>c-1?c:c-1,o.removeClass(s),i.removeClass(s).eq(n).addClass(s).closest(o).addClass(s),t.preventDefault()):r==a.downArrow&&(p.verbose("Down key pressed, changing active result"),n=c+1>=l?c:c+1,o.removeClass(s),i.removeClass(s).eq(n).addClass(s).closest(o).addClass(s),t.preventDefault());else r==a.enter&&(p.verbose("Enter key pressed, executing query"),p.search.query(),T.addClass(g.down),k.one("keyup",function(){T.removeClass(g.down)}))},search:{cancel:function(){var e=w.data("xhr")||!1;e&&"resolved"!=e.state()&&(p.debug("Cancelling last search"),e.abort())},throttle:function(){var e=k.val(),t=e.length;clearTimeout(p.timer),t>=h.minCharacters?p.timer=setTimeout(p.search.query,h.searchThrottle):p.results.hide()},query:function(){var t=k.val(),i=p.search.cache.read(t);i?(p.debug("Reading result for '"+t+"' from cache"),p.results.add(i)):(p.debug("Querying for '"+t+"'"),"object"==typeof n?p.search.local(t):p.search.remote(t),e.proxy(h.onSearchQuery,w)(t))},local:function(t){var i,o=[],r=[],a=e.isArray(h.searchFields)?h.searchFields:[h.searchFields],s=new RegExp("(?:s|^)"+t,"i"),c=new RegExp(t,"i");w.addClass(g.loading),e.each(a,function(t,i){e.each(n,function(t,n){"string"==typeof n[i]&&-1==e.inArray(n,o)&&-1==e.inArray(n,r)&&(s.test(n[i])?o.push(n):c.test(n[i])&&r.push(n))})}),i=p.results.generate({results:e.merge(o,r)}),w.removeClass(g.loading),p.search.cache.write(t,i),p.results.add(i)},remote:function(t){var i,o={stateContext:w,url:n,urlData:{query:t},success:function(e){i=p.results.generate(e),p.search.cache.write(t,i),p.results.add(i)},failure:p.error};p.search.cancel(),p.debug("Executing search"),e.extend(!0,o,h.apiSettings),e.api(o)},cache:{read:function(e){var t=w.data("cache");return h.cache&&"object"==typeof t&&t[e]!==i?t[e]:!1},write:function(e,t){var n=w.data("cache")!==i?w.data("cache"):{};n[e]=t,w.data("cache",n)}}},results:{generate:function(t){p.debug("Generating html from response",t);var n=h.templates[h.type],i="";return e.isPlainObject(t.results)&&!e.isEmptyObject(t.results)||e.isArray(t.results)&&t.results.length>0?(h.maxResults>0&&(t.results=e.makeArray(t.results).slice(0,h.maxResults)),t.results.length>0&&(e.isFunction(n)?i=n(t):p.error(v.noTemplate,!1))):i=p.message(v.noResults,"empty"),e.proxy(h.onResults,w)(t),i},add:function(t){("default"==h.onResultsAdd||"default"==e.proxy(h.onResultsAdd,S)(t))&&S.html(t),p.results.show()},show:function(){0===S.filter(":visible").size()&&k.filter(":focus").size()>0&&""!==S.html()&&(S.stop().fadeIn(200),e.proxy(h.onResultsOpen,S)())},hide:function(){S.filter(":visible").size()>0&&(S.stop().fadeOut(200),e.proxy(h.onResultsClose,S)())},select:function(n){p.debug("Search result selected");var i=e(this),o=i.find(".title"),r=o.html();if("default"==h.onSelect||"default"==e.proxy(h.onSelect,this)(n)){var a=i.find("a[href]").eq(0),s=a.attr("href")||!1,c=a.attr("target")||!1;p.results.hide(),k.val(r),s&&("_blank"==c||n.ctrlKey?t.open(s):t.location.href=s)}}},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,h,t);else{if(n===i)return h[t];h[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,p,t);else{if(n===i)return p[t];p[t]=n}},debug:function(){h.debug&&(h.performance?p.performance.log(arguments):(p.debug=Function.prototype.bind.call(console.info,console,h.name+":"),p.debug.apply(console,arguments)))},verbose:function(){h.verbose&&h.debug&&(h.performance?p.performance.log(arguments):(p.verbose=Function.prototype.bind.call(console.info,console,h.name+":"),p.verbose.apply(console,arguments)))},error:function(){p.error=Function.prototype.bind.call(console.error,console,h.name+":"),p.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;h.performance&&(t=(new Date).getTime(),i=c||t,n=t-i,c=t,l.push({Element:x,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(p.performance.timer),p.performance.timer=setTimeout(p.performance.display,100)},display:function(){var t=h.name+":",n=0;c=!1,clearTimeout(p.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",s&&(t+=" '"+s+"'"),a.size()>1&&(t+=" ("+a.size()+")"),(console.group!==i||console.table!==i)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,o){var a,s,c;return n=n||f,o=x||o,"string"==typeof t&&E!==i&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,o){var r=n!=a?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(E[r])&&n!=a)E=E[r];else{if(E[r]!==i)return s=E[r],!1;if(!e.isPlainObject(E[o])||n==a)return E[o]!==i?(s=E[o],!1):(p.error(v.method,t),!1);E=E[o]}})),e.isFunction(s)?c=s.apply(o,n):s!==i&&(c=s),e.isArray(r)?r.push(c):r!==i?r=[r,c]:c!==i&&(r=c),s}},d?(E===i&&p.initialize(),p.invoke(u)):(E!==i&&p.destroy(),p.initialize())}),r!==i?r:this},e.fn.search.settings={name:"Search Module",namespace:"search",debug:!0,verbose:!0,performance:!0,onSelect:"default",onResultsAdd:"default",onSearchQuery:function(){},onResults:function(){},onResultsOpen:function(){},onResultsClose:function(){},automatic:"true",type:"simple",minCharacters:3,searchThrottle:300,maxResults:7,cache:!0,searchFields:["title","description"],apiSettings:{},className:{active:"active",down:"down",focus:"focus",empty:"empty",loading:"loading"},error:{noResults:"Your search returned no results",logging:"Error in debug logging, exiting.",noTemplate:"A valid template name was not specified.",serverError:"There was an issue with querying the server.",method:"The method you called is not defined."},selector:{prompt:".prompt",searchButton:".search.button",results:".results",category:".category",result:".result"},templates:{message:function(e,t){var n="";return e!==i&&t!==i&&(n+='<div class="message '+t+'">',n+="empty"==t?'<div class="header">No Results</div class="header"><div class="description">'+e+'</div class="description">':' <div class="description">'+e+"</div>",n+="</div>"),n},categories:function(t){var n="";return t.results!==i?(e.each(t.results,function(t,o){o.results!==i&&o.results.length>0&&(n+='<div class="category"><div class="name">'+o.name+"</div>",e.each(o.results,function(e,t){n+='<div class="result">',n+='<a href="'+t.url+'"></a>',t.image!==i&&(n+='<div class="image"> <img src="'+t.image+'"></div>'),n+='<div class="info">',t.price!==i&&(n+='<div class="price">'+t.price+"</div>"),t.title!==i&&(n+='<div class="title">'+t.title+"</div>"),t.description!==i&&(n+='<div class="description">'+t.description+"</div>"),n+="</div></div>"}),n+="</div>")}),t.resultPage&&(n+='<a href="'+t.resultPage.url+'" class="all">'+t.resultPage.text+"</a>"),n):!1},simple:function(t){var n="";return t.results!==i?(e.each(t.results,function(e,t){n+='<a class="result" href="'+t.url+'">',t.image!==i&&(n+='<div class="image"> <img src="'+t.image+'"></div>'),n+='<div class="info">',t.price!==i&&(n+='<div class="price">'+t.price+"</div>"),t.title!==i&&(n+='<div class="title">'+t.title+"</div>"),t.description!==i&&(n+='<div class="description">'+t.description+"</div>"),n+="</div></a>"}),t.resultPage&&(n+='<a href="'+t.resultPage.url+'" class="all">'+t.resultPage.text+"</a>"),n):!1}}}}(jQuery,window,document)}.call(this),function(){!function(e,t,n,i){e.fn.shape=function(t){var o,r=e(this),a=e("body"),s=(new Date).getTime(),c=[],l=arguments[0],u="string"==typeof l,d=[].slice.call(arguments,1);return r.each(function(){var f,p,h,g=r.selector||"",m=e.extend(!0,{},e.fn.shape.settings,t),v=m.namespace,y=m.selector,b=m.error,_=m.className,w="."+v,k="module-"+v,T=e(this),S=T.find(y.sides),x=T.find(y.side),E=!1,C=this,P=T.data(k);h={initialize:function(){h.verbose("Initializing module for",C),h.set.defaultSide(),h.instantiate()},instantiate:function(){h.verbose("Storing instance of module",h),P=h,T.data(k,P)},destroy:function(){h.verbose("Destroying previous module for",C),T.removeData(k).off(w)},refresh:function(){h.verbose("Refreshing selector cache for",C),T=e(C),S=e(this).find(y.shape),x=e(this).find(y.side)},repaint:function(){h.verbose("Forcing repaint event");{var e=S.get(0)||n.createElement("div");e.offsetWidth}},animate:function(t,n){h.verbose("Animating box with properties",t),n=n||function(e){h.verbose("Executing animation callback"),e!==i&&e.stopPropagation(),h.reset(),h.set.active()},e.proxy(m.beforeChange,p[0])(),h.get.transitionEvent()?(h.verbose("Starting CSS animation"),T.addClass(_.animating),h.repaint(),T.addClass(_.animating),f.addClass(_.hidden),S.css(t).one(h.get.transitionEvent(),n),h.set.duration(m.duration)):n()},queue:function(e){h.debug("Queueing animation of",e),S.one(h.get.transitionEvent(),function(){h.debug("Executing queued animation"),setTimeout(function(){T.shape(e)},0)})},reset:function(){h.verbose("Animating states reset"),T.removeClass(_.animating).attr("style","").removeAttr("style"),S.attr("style","").removeAttr("style"),x.attr("style","").removeAttr("style").removeClass(_.hidden),p.removeClass(_.animating).attr("style","").removeAttr("style")},is:{animating:function(){return T.hasClass(_.animating)}},set:{defaultSide:function(){f=T.find("."+m.className.active),p=f.next(y.side).size()>0?f.next(y.side):T.find(y.side).first(),E=!1,h.verbose("Active side set to",f),h.verbose("Next side set to",p)},duration:function(e){e=e||m.duration,e="number"==typeof e?e+"ms":e,h.verbose("Setting animation duration",e),S.add(x).css({"-webkit-transition-duration":e,"-moz-transition-duration":e,"-ms-transition-duration":e,"-o-transition-duration":e,"transition-duration":e})},stageSize:function(){var e=T.clone().addClass(_.loading),t=e.find("."+m.className.active),n=E?e.find(E):t.next(y.side).size()>0?t.next(y.side):e.find(y.side).first(),i={};t.removeClass(_.active),n.addClass(_.active),e.prependTo(a),i={width:n.outerWidth(),height:n.outerHeight()},e.remove(),T.css(i),h.verbose("Resizing stage to fit new content",i)},nextSide:function(e){E=e,p=T.find(e),0===p.size()&&h.error(b.side),h.verbose("Next side manually set to",p)},active:function(){h.verbose("Setting new side to active",p),x.removeClass(_.active),p.addClass(_.active),e.proxy(m.onChange,p[0])(),h.set.defaultSide()}},flip:{up:function(){h.debug("Flipping up",p),h.is.animating()?h.queue("flip up"):(h.set.stageSize(),h.stage.above(),h.animate(h.get.transform.up()))},down:function(){h.debug("Flipping down",p),h.is.animating()?h.queue("flip down"):(h.set.stageSize(),h.stage.below(),h.animate(h.get.transform.down()))},left:function(){h.debug("Flipping left",p),h.is.animating()?h.queue("flip left"):(h.set.stageSize(),h.stage.left(),h.animate(h.get.transform.left()))},right:function(){h.debug("Flipping right",p),h.is.animating()?h.queue("flip right"):(h.set.stageSize(),h.stage.right(),h.animate(h.get.transform.right()))},over:function(){h.debug("Flipping over",p),h.is.animating()?h.queue("flip over"):(h.set.stageSize(),h.stage.behind(),h.animate(h.get.transform.over()))},back:function(){h.debug("Flipping back",p),h.is.animating()?h.queue("flip back"):(h.set.stageSize(),h.stage.behind(),h.animate(h.get.transform.back()))}},get:{transform:{up:function(){var e={y:-((f.outerHeight()-p.outerHeight())/2),z:-(f.outerHeight()/2)};return{transform:"translateY("+e.y+"px) translateZ("+e.z+"px) rotateX(-90deg)"}},down:function(){var e={y:-((f.outerHeight()-p.outerHeight())/2),z:-(f.outerHeight()/2)};return{transform:"translateY("+e.y+"px) translateZ("+e.z+"px) rotateX(90deg)"}},left:function(){var e={x:-((f.outerWidth()-p.outerWidth())/2),z:-(f.outerWidth()/2)};return{transform:"translateX("+e.x+"px) translateZ("+e.z+"px) rotateY(90deg)"}},right:function(){var e={x:-((f.outerWidth()-p.outerWidth())/2),z:-(f.outerWidth()/2)};return{transform:"translateX("+e.x+"px) translateZ("+e.z+"px) rotateY(-90deg)"}},over:function(){var e={x:-((f.outerWidth()-p.outerWidth())/2)};return{transform:"translateX("+e.x+"px) rotateY(180deg)"}},back:function(){var e={x:-((f.outerWidth()-p.outerWidth())/2)};return{transform:"translateX("+e.x+"px) rotateY(-180deg)"}}},transitionEvent:function(){var e,t=n.createElement("element"),o={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in o)if(t.style[e]!==i)return o[e]},nextSide:function(){return f.next(y.side).size()>0?f.next(y.side):T.find(y.side).first()}},stage:{above:function(){var e={origin:(f.outerHeight()-p.outerHeight())/2,depth:{active:p.outerHeight()/2,next:f.outerHeight()/2}};h.verbose("Setting the initial animation position as above",p,e),f.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),p.addClass(_.animating).css({display:"block",top:e.origin+"px",transform:"rotateX(90deg) translateZ("+e.depth.next+"px)"})},below:function(){var e={origin:(f.outerHeight()-p.outerHeight())/2,depth:{active:p.outerHeight()/2,next:f.outerHeight()/2}};h.verbose("Setting the initial animation position as below",p,e),f.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),p.addClass(_.animating).css({display:"block",top:e.origin+"px",transform:"rotateX(-90deg) translateZ("+e.depth.next+"px)"})},left:function(){var e={origin:(f.outerWidth()-p.outerWidth())/2,depth:{active:p.outerWidth()/2,next:f.outerWidth()/2}};h.verbose("Setting the initial animation position as left",p,e),f.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),p.addClass(_.animating).css({display:"block",left:e.origin+"px",transform:"rotateY(-90deg) translateZ("+e.depth.next+"px)"})},right:function(){var e={origin:(f.outerWidth()-p.outerWidth())/2,depth:{active:p.outerWidth()/2,next:f.outerWidth()/2}};h.verbose("Setting the initial animation position as left",p,e),f.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),p.addClass(_.animating).css({display:"block",left:e.origin+"px",transform:"rotateY(90deg) translateZ("+e.depth.next+"px)"})},behind:function(){var e={origin:(f.outerWidth()-p.outerWidth())/2,depth:{active:p.outerWidth()/2,next:f.outerWidth()/2}};h.verbose("Setting the initial animation position as behind",p,e),f.css({transform:"rotateY(0deg)"}),p.addClass(_.animating).css({display:"block",left:e.origin+"px",transform:"rotateY(-180deg)"})}},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,m,t);else{if(n===i)return m[t];m[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,h,t);else{if(n===i)return h[t];h[t]=n}},debug:function(){m.debug&&(m.performance?h.performance.log(arguments):(h.debug=Function.prototype.bind.call(console.info,console,m.name+":"),h.debug.apply(console,arguments)))},verbose:function(){m.verbose&&m.debug&&(m.performance?h.performance.log(arguments):(h.verbose=Function.prototype.bind.call(console.info,console,m.name+":"),h.verbose.apply(console,arguments)))},error:function(){h.error=Function.prototype.bind.call(console.error,console,m.name+":"),h.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;m.performance&&(t=(new Date).getTime(),i=s||t,n=t-i,s=t,c.push({Element:C,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(h.performance.timer),h.performance.timer=setTimeout(h.performance.display,100)},display:function(){var t=m.name+":",n=0;s=!1,clearTimeout(h.performance.timer),e.each(c,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",g&&(t+=" '"+g+"'"),r.size()>1&&(t+=" ("+r.size()+")"),(console.group!==i||console.table!==i)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,n,r){var a,s,c;return n=n||d,r=C||r,"string"==typeof t&&P!==i&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,o){var r=n!=a?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(P[r])&&n!=a)P=P[r];else{if(P[r]!==i)return s=P[r],!1;if(!e.isPlainObject(P[o])||n==a)return P[o]!==i?(s=P[o],!1):(h.error(b.method,t),!1);P=P[o]}})),e.isFunction(s)?c=s.apply(r,n):s!==i&&(c=s),e.isArray(o)?o.push(c):o!==i?o=[o,c]:c!==i&&(o=c),s}},u?(P===i&&h.initialize(),h.invoke(l)):(P!==i&&h.destroy(),h.initialize())}),o!==i?o:this},e.fn.shape.settings={name:"Shape",debug:!0,verbose:!0,performance:!0,namespace:"shape",beforeChange:function(){},onChange:function(){},duration:700,error:{side:"You tried to switch to a side that does not exist.",method:"The method you called is not defined"},className:{animating:"animating",hidden:"hidden",loading:"loading",active:"active"},selector:{sides:".sides",side:".side"}}}(jQuery,window,document)}.call(this),function(){!function(e,t,n,i){e.fn.sidebar=function(t){var o,r=e(this),a=e("body"),s=e("head"),c=r.selector||"",l=(new Date).getTime(),u=[],d=arguments[0],f="string"==typeof d,p=[].slice.call(arguments,1);return r.each(function(){var h,g=e.isPlainObject(t)?e.extend(!0,{},e.fn.sidebar.settings,t):e.extend({},e.fn.sidebar.settings),m=g.selector,v=g.className,y=g.namespace,b=g.error,_="."+y,w="module-"+y,k=e(this),T=e("style[title="+y+"]"),S=this,x=k.data(w);h={initialize:function(){h.debug("Initializing sidebar",k),h.instantiate()},instantiate:function(){h.verbose("Storing instance of module",h),x=h,k.data(w,h)},destroy:function(){h.verbose("Destroying previous module for",k),k.off(_).removeData(w)},refresh:function(){h.verbose("Refreshing selector cache"),T=e("style[title="+y+"]")},attachEvents:function(t,n){var i=e(t);n=e.isFunction(h[n])?h[n]:h.toggle,i.size()>0?(h.debug("Attaching sidebar events to element",t,n),i.off(_).on("click"+_,n)):h.error(b.notFound)},show:function(t){t=e.isFunction(t)?t:function(){},h.debug("Showing sidebar",t),h.is.closed()?(g.overlay||(g.exclusive&&h.hideAll(),h.pushPage()),h.set.active(),t(),e.proxy(g.onChange,S)(),e.proxy(g.onShow,S)()):h.debug("Sidebar is already visible")},hide:function(t){t=e.isFunction(t)?t:function(){},h.debug("Hiding sidebar",t),h.is.open()&&(g.overlay||(h.pullPage(),h.remove.pushed()),h.remove.active(),t(),e.proxy(g.onChange,S)(),e.proxy(g.onHide,S)())},hideAll:function(){e(m.sidebar).filter(":visible").sidebar("hide")},toggle:function(){h.is.closed()?h.show():h.hide()},pushPage:function(){var e=h.get.direction(),t=h.is.vertical()?k.outerHeight():k.outerWidth();g.useCSS?(h.debug("Using CSS to animate body"),h.add.bodyCSS(e,t),h.set.pushed()):h.animatePage(e,t,h.set.pushed)},pullPage:function(){var e=h.get.direction();g.useCSS?(h.debug("Resetting body position css"),h.remove.bodyCSS()):(h.debug("Resetting body position using javascript"),h.animatePage(e,0)),h.remove.pushed()},animatePage:function(e,t){var n={};n["padding-"+e]=t,h.debug("Using javascript to animate body",n),a.animate(n,g.duration,h.set.pushed)},add:{bodyCSS:function(e,t){var n;e!==v.bottom&&(n='<style title="'+y+'">body.pushed {  margin-'+e+": "+t+"px !important;}</style>"),s.append(n),h.debug("Adding body css to head",T)}},remove:{bodyCSS:function(){h.debug("Removing body css styles",T),h.refresh(),T.remove()},active:function(){k.removeClass(v.active)},pushed:function(){h.verbose("Removing body push state",h.get.direction()),a.removeClass(v[h.get.direction()]).removeClass(v.pushed)}},set:{active:function(){k.addClass(v.active)},pushed:function(){h.verbose("Adding body push state",h.get.direction()),a.addClass(v[h.get.direction()]).addClass(v.pushed)}},get:{direction:function(){return k.hasClass(v.top)?v.top:k.hasClass(v.right)?v.right:k.hasClass(v.bottom)?v.bottom:v.left},transitionEvent:function(){var e,t=n.createElement("element"),o={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in o)if(t.style[e]!==i)return o[e]}},is:{open:function(){return k.is(":animated")||k.hasClass(v.active)},closed:function(){return!h.is.open()},vertical:function(){return k.hasClass(v.top)}},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,g,t);else{if(n===i)return g[t];g[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,h,t);else{if(n===i)return h[t];h[t]=n}},debug:function(){g.debug&&(g.performance?h.performance.log(arguments):(h.debug=Function.prototype.bind.call(console.info,console,g.name+":"),h.debug.apply(console,arguments)))},verbose:function(){g.verbose&&g.debug&&(g.performance?h.performance.log(arguments):(h.verbose=Function.prototype.bind.call(console.info,console,g.name+":"),h.verbose.apply(console,arguments)))},error:function(){h.error=Function.prototype.bind.call(console.error,console,g.name+":"),h.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;g.performance&&(t=(new Date).getTime(),i=l||t,n=t-i,l=t,u.push({Element:S,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(h.performance.timer),h.performance.timer=setTimeout(h.performance.display,100)},display:function(){var t=g.name+":",n=0;l=!1,clearTimeout(h.performance.timer),e.each(u,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",c&&(t+=" '"+c+"'"),r.size()>1&&(t+=" ("+r.size()+")"),(console.group!==i||console.table!==i)&&u.length>0&&(console.groupCollapsed(t),console.table?console.table(u):e.each(u,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),u=[]}},invoke:function(t,n,r){var a,s,c;return n=n||p,r=S||r,"string"==typeof t&&x!==i&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,o){var r=n!=a?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(x[r])&&n!=a)x=x[r];else{if(x[r]!==i)return s=x[r],!1;if(!e.isPlainObject(x[o])||n==a)return x[o]!==i?(s=x[o],!1):(h.error(b.method,t),!1);x=x[o]}})),e.isFunction(s)?c=s.apply(r,n):s!==i&&(c=s),e.isArray(o)?o.push(c):o!==i?o=[o,c]:c!==i&&(o=c),s}},f?(x===i&&h.initialize(),h.invoke(d)):(x!==i&&h.destroy(),h.initialize())}),o!==i?o:this},e.fn.sidebar.settings={name:"Sidebar",namespace:"sidebar",verbose:!0,debug:!0,performance:!0,useCSS:!0,exclusive:!0,overlay:!1,duration:300,onChange:function(){},onShow:function(){},onHide:function(){},className:{active:"active",pushed:"pushed",top:"top",left:"left",right:"right",bottom:"bottom"},selector:{sidebar:".ui.sidebar"},error:{method:"The method you called is not defined.",notFound:"There were no elements that matched the specified selector"}}}(jQuery,window,document)}.call(this),function(){!function(e,t,n,i){e.fn.tab=function(n){var o,r,a,s,c,l=e.extend(!0,{},e.fn.tab.settings,n),u=e(this),d=e(l.context).find(l.selector.tabs),f=u.selector||"",p={},h=!0,g=0,m=this,v=(new Date).getTime(),y=[],b=l.className,_=l.metadata,w=l.error,k="."+l.namespace,T="module-"+l.namespace,S=u.data(T),x=arguments[0],E=S!==i&&"string"==typeof x,C=[].slice.call(arguments,1);return s={initialize:function(){if(s.debug("Initializing Tabs",u),l.auto&&(s.verbose("Setting up automatic tab retrieval from server"),l.apiSettings={url:l.path+"/{$tab}"}),l.history){if(s.debug("Initializing page state"),e.address===i)return s.error(w.state),!1;if("html5"==l.historyType){if(s.debug("Using HTML5 to manage state"),l.path===!1)return s.error(w.path),!1;e.address.history(!0).state(l.path)}e.address.unbind("change").bind("change",s.event.history.change)}e.isWindow(m)||(s.debug("Attaching tab activation events to element",u),u.on("click"+k,s.event.click)),s.instantiate()},instantiate:function(){s.verbose("Storing instance of module",s),u.data(T,s)},destroy:function(){s.debug("Destroying tabs",u),u.removeData(T).off(k)},event:{click:function(t){var n=e(this).data(_.tab);n!==i?(l.history?(s.verbose("Updating page state",t),e.address.value(n)):(s.verbose("Changing tab without state management",t),s.changeTab(n)),t.preventDefault()):s.debug("No tab specified")},history:{change:function(t){var n=t.pathNames.join("/")||s.get.initialPath(),o=l.templates.determineTitle(n)||!1;s.debug("History change event",n,t),a=t,n!==i&&s.changeTab(n),o&&e.address.title(o)}}},refresh:function(){o&&(s.debug("Refreshing tab",o),s.changeTab(o))},cache:{read:function(e){return e!==i?p[e]:!1},add:function(e,t){e=e||o,s.debug("Adding cached content for",e),p[e]=t},remove:function(e){e=e||o,s.debug("Removing cached content for",e),delete p[e]}},set:{state:function(t){e.address.value(t)}},changeTab:function(n){var i=t.history&&t.history.pushState,c=i&&l.ignoreFirstLoad&&h,u=l.auto||e.isPlainObject(l.apiSettings),d=u&&!c?s.utilities.pathToArray(n):s.get.defaultPathArray(n);n=s.utilities.arrayToPath(d),s.deactivate.all(),e.each(d,function(t,i){var f,p,g,m=d.slice(0,t+1),v=s.utilities.arrayToPath(m),y=s.is.tab(v),b=t+1==d.length,_=s.get.tabElement(v);return s.verbose("Looking for tab",i),y?(s.verbose("Tab was found",i),o=v,r=s.utilities.filterArray(d,m),b?g=!0:(f=d.slice(0,t+2),p=s.utilities.arrayToPath(f),g=!s.is.tab(p),g&&s.verbose("Tab parameters found",f)),g&&u?(c?(s.debug("Ignoring remote content on first tab load",v),h=!1,s.cache.add(n,_.html()),s.activate.all(v),e.proxy(l.onTabInit,_)(v,r,a),e.proxy(l.onTabLoad,_)(v,r,a)):(s.activate.navigation(v),s.content.fetch(v,n)),!1):(s.debug("Opened local tab",v),s.activate.all(v),s.cache.read(v)||(s.cache.add(v,!0),s.debug("First time tab loaded calling tab init"),e.proxy(l.onTabInit,_)(v,r,a)),e.proxy(l.onTabLoad,_)(v,r,a),void 0)):(s.error(w.missingTab,i),!1)})},content:{fetch:function(t,n){var c,u,d=s.get.tabElement(t),f={dataType:"html",stateContext:d,success:function(i){s.cache.add(n,i),s.content.update(t,i),t==o?(s.debug("Content loaded",t),s.activate.tab(t)):s.debug("Content loaded in background",t),e.proxy(l.onTabInit,d)(t,r,a),e.proxy(l.onTabLoad,d)(t,r,a)},urlData:{tab:n}},p=d.data(_.promise)||!1,h=p&&"pending"===p.state();n=n||t,u=s.cache.read(n),l.cache&&u?(s.debug("Showing existing content",n),s.content.update(t,u),s.activate.tab(t),e.proxy(l.onTabLoad,d)(t,r,a)):h?(s.debug("Content is already loading",n),d.addClass(b.loading)):e.api!==i?(console.log(l.apiSettings),c=e.extend(!0,{headers:{"X-Remote":!0}},l.apiSettings,f),s.debug("Retrieving remote content",n,c),e.api(c)):s.error(w.api)},update:function(e,t){s.debug("Updating html for",e);var n=s.get.tabElement(e);n.html(t)}},activate:{all:function(e){s.activate.tab(e),s.activate.navigation(e)},tab:function(e){var t=s.get.tabElement(e);s.verbose("Showing tab content for",t),t.addClass(b.active)},navigation:function(e){var t=s.get.navElement(e);s.verbose("Activating tab navigation for",t,e),t.addClass(b.active)}},deactivate:{all:function(){s.deactivate.navigation(),s.deactivate.tabs()},navigation:function(){u.removeClass(b.active)},tabs:function(){d.removeClass(b.active+" "+b.loading)}},is:{tab:function(e){return e!==i?s.get.tabElement(e).size()>0:!1}},get:{initialPath:function(){return u.eq(0).data(_.tab)||d.eq(0).data(_.tab)},path:function(){return e.address.value()},defaultPathArray:function(e){return s.utilities.pathToArray(s.get.defaultPath(e))},defaultPath:function(e){var t=u.filter("[data-"+_.tab+'^="'+e+'/"]').eq(0),n=t.data(_.tab)||!1;if(n){if(s.debug("Found default tab",n),g<l.maxDepth)return g++,s.get.defaultPath(n);s.error(w.recursion)}else s.debug("No default tabs found for",e,d);return g=0,e},navElement:function(e){return e=e||o,u.filter("[data-"+_.tab+'="'+e+'"]')},tabElement:function(e){var t,n,i,r;return e=e||o,i=s.utilities.pathToArray(e),r=s.utilities.last(i),t=d.filter("[data-"+_.tab+'="'+r+'"]'),n=d.filter("[data-"+_.tab+'="'+e+'"]'),t.size()>0?t:n},tab:function(){return o}},utilities:{filterArray:function(t,n){return e.grep(t,function(t){return-1==e.inArray(t,n)})},last:function(t){return e.isArray(t)?t[t.length-1]:!1},pathToArray:function(e){return e===i&&(e=o),"string"==typeof e?e.split("/"):[e]},arrayToPath:function(t){return e.isArray(t)?t.join("/"):!1}},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,l,t);else{if(n===i)return l[t];l[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,s,t);else{if(n===i)return s[t];s[t]=n}},debug:function(){l.debug&&(l.performance?s.performance.log(arguments):(s.debug=Function.prototype.bind.call(console.info,console,l.name+":"),s.debug.apply(console,arguments)))},verbose:function(){l.verbose&&l.debug&&(l.performance?s.performance.log(arguments):(s.verbose=Function.prototype.bind.call(console.info,console,l.name+":"),s.verbose.apply(console,arguments)))},error:function(){s.error=Function.prototype.bind.call(console.error,console,l.name+":"),s.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;l.performance&&(t=(new Date).getTime(),i=v||t,n=t-i,v=t,y.push({Element:m,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(s.performance.timer),s.performance.timer=setTimeout(s.performance.display,100)},display:function(){var t=l.name+":",n=0;v=!1,clearTimeout(s.performance.timer),e.each(y,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",f&&(t+=" '"+f+"'"),(console.group!==i||console.table!==i)&&y.length>0&&(console.groupCollapsed(t),console.table?console.table(y):e.each(y,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),y=[]}},invoke:function(t,n,o){var r,a,l;return n=n||C,o=m||o,"string"==typeof t&&S!==i&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(n,o){var c=n!=r?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(S[o])&&n!=r)S=S[o];else{if(!e.isPlainObject(S[c])||n==r)return S[o]!==i?(a=S[o],!1):S[c]!==i?(a=S[c],!1):(s.error(w.method,t),!1);S=S[c]}})),e.isFunction(a)?l=a.apply(o,n):a!==i&&(l=a),e.isArray(c)?c.push(l):c!==i?c=[c,l]:l!==i&&(c=l),a}},E?(S===i&&s.initialize(),s.invoke(x)):(S!==i&&s.destroy(),s.initialize()),c!==i?c:this},e.tab=function(n){e(t).tab(n)},e.fn.tab.settings={name:"Tab",verbose:!0,debug:!0,performance:!0,namespace:"tab",onTabInit:function(){},onTabLoad:function(){},templates:{determineTitle:function(){}},auto:!1,history:!0,historyType:"hash",path:!1,context:"body",maxDepth:25,ignoreFirstLoad:!1,alwaysRefresh:!1,cache:!0,apiSettings:!1,error:{api:"You attempted to load content without API module",method:"The method you called is not defined",missingTab:"Tab cannot be found",noContent:"The tab you specified is missing a content url.",path:"History enabled, but no path was specified",recursion:"Max recursive depth reached",state:"The state library has not been initialized"},metadata:{tab:"tab",loaded:"loaded",promise:"promise"},className:{loading:"loading",active:"active"},selector:{tabs:".ui.tab"}}}(jQuery,window,document)}.call(this),function(){!function(e,t,n,i){e.fn.video=function(t){var n,o=e(this),r=o.selector||"",a=(new Date).getTime(),s=[],c=arguments[0],l="string"==typeof c,u=[].slice.call(arguments,1);return o.each(function(){var d,f=e.isPlainObject(t)?e.extend(!0,{},e.fn.video.settings,t):e.extend({},e.fn.video.settings),p=f.selector,h=f.className,g=f.error,m=f.metadata,v=f.namespace,y="."+v,b="module-"+v,_=e(this),w=_.find(p.placeholder),k=_.find(p.playButton),T=_.find(p.embed),S=this,x=_.data(b);d={initialize:function(){d.debug("Initializing video"),w.on("click"+y,d.play),k.on("click"+y,d.play),d.instantiate()},instantiate:function(){d.verbose("Storing instance of module",d),x=d,_.data(b,d)},destroy:function(){d.verbose("Destroying previous instance of video"),_.removeData(b).off(y),w.off(y),k.off(y)},change:function(e,t,n){d.debug("Changing video to ",e,t,n),_.data(m.source,e).data(m.id,t).data(m.url,n),f.onChange()},reset:function(){d.debug("Clearing video embed and showing placeholder"),_.removeClass(h.active),T.html(" "),w.show(),f.onReset()
},play:function(){d.debug("Playing video");var e=_.data(m.source)||!1,t=_.data(m.url)||!1,n=_.data(m.id)||!1;T.html(d.generate.html(e,n,t)),_.addClass(h.active),f.onPlay()},generate:{html:function(e,t,n){d.debug("Generating embed html");var i,o="auto"==f.width?_.width():f.width,r="auto"==f.height?_.height():f.height;return e&&t?"vimeo"==e?i='<iframe src="http://player.vimeo.com/video/'+t+"?="+d.generate.url(e)+'" width="'+o+'" height="'+r+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>':"youtube"==e&&(i='<iframe src="http://www.youtube.com/embed/'+t+"?="+d.generate.url(e)+'" width="'+o+'" height="'+r+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'):n?i='<iframe src="'+n+'" width="'+o+'" height="'+r+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>':d.error(g.noVideo),i},url:function(e){var t=f.api?1:0,n=f.autoplay?1:0,i=f.hd?1:0,o=f.showUI?1:0,r=f.showUI?0:1,a="";return"vimeo"==e&&(a="api="+t+"&amp;title="+o+"&amp;byline="+o+"&amp;portrait="+o+"&amp;autoplay="+n,f.color&&(a+="&amp;color="+f.color)),"ustream"==e?(a="autoplay="+n,f.color&&(a+="&amp;color="+f.color)):"youtube"==e&&(a="enablejsapi="+t+"&amp;autoplay="+n+"&amp;autohide="+r+"&amp;hq="+i+"&amp;modestbranding=1",f.color&&(a+="&amp;color="+f.color)),a}},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,f,t);else{if(n===i)return f[t];f[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,d,t);else{if(n===i)return d[t];d[t]=n}},debug:function(){f.debug&&(f.performance?d.performance.log(arguments):(d.debug=Function.prototype.bind.call(console.info,console,f.name+":"),d.debug.apply(console,arguments)))},verbose:function(){f.verbose&&f.debug&&(f.performance?d.performance.log(arguments):(d.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),d.verbose.apply(console,arguments)))},error:function(){d.error=Function.prototype.bind.call(console.error,console,f.name+":"),d.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;f.performance&&(t=(new Date).getTime(),i=a||t,n=t-i,a=t,s.push({Element:S,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(d.performance.timer),d.performance.timer=setTimeout(d.performance.display,100)},display:function(){var t=f.name+":",n=0;a=!1,clearTimeout(d.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",r&&(t+=" '"+r+"'"),o.size()>1&&(t+=" ("+o.size()+")"),(console.group!==i||console.table!==i)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,o,r){var a,s,c;return o=o||u,r=S||r,"string"==typeof t&&x!==i&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,o){var r=n!=a?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(x[r])&&n!=a)x=x[r];else{if(x[r]!==i)return s=x[r],!1;if(!e.isPlainObject(x[o])||n==a)return x[o]!==i?(s=x[o],!1):(d.error(g.method,t),!1);x=x[o]}})),e.isFunction(s)?c=s.apply(r,o):s!==i&&(c=s),e.isArray(n)?n.push(c):n!==i?n=[n,c]:c!==i&&(n=c),s}},l?(x===i&&d.initialize(),d.invoke(c)):(x!==i&&d.destroy(),d.initialize())}),n!==i?n:this},e.fn.video.settings={name:"Video",namespace:"video",debug:!0,verbose:!0,performance:!0,metadata:{source:"source",id:"id",url:"url"},onPlay:function(){},onReset:function(){},onChange:function(){},onPause:function(){},onStop:function(){},width:"auto",height:"auto",autoplay:!1,color:"#442359",hd:!0,showUI:!1,api:!0,error:{noVideo:"No video specified",method:"The method you called is not defined"},className:{active:"active"},selector:{embed:".embed",placeholder:".placeholder",playButton:".play"}}}(jQuery,window,document)}.call(this),"undefined"==typeof Package&&(Package={}),Package["semantic-ui"]={}}(),function(){Package.meteor.Meteor,Package.random.Random,Package["service-configuration"].ServiceConfiguration,Package.oauth.Oauth;"undefined"==typeof Package&&(Package={}),Package.oauth1={}}(),function(){Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package["handlebars-server"]={}}(),function(){Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.email={}}(),function(){Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.routepolicy={}}(),function(){var e,t=(Package.meteor.Meteor,Package.underscore._);(function(){e={_isCssLoaded:function(){return 0===document.styleSheets.length?!0:t.find(document.styleSheets,function(e){return e.cssText&&!e.cssRules?!e.cssText.match(/meteor-css-not-found-error/):!t.find(e.cssRules,function(e){return".meteor-css-not-found-error"===e.selectorText})})}}}).call(this),"undefined"==typeof Package&&(Package={}),Package.webapp={WebApp:e}}(),function(){{var e,t=Package.meteor.Meteor,n=Package["accounts-base"].Accounts,i=(Package.webapp.WebApp,Package.oauth.Oauth),o=Package.templating.Template;Package.random.Random,Package["service-configuration"].ServiceConfiguration,Package.spark.Spark}(function(){o.__define__("configureLoginServiceDialogForInstagram",Package.handlebars.Handlebars.json_ast_to_func(['<p>\n        Follow these steps to configure your Instagram client:\n    </p>\n    <ol>\n        <li>\n            Visit <a href="http://instagram.com/developer/clients/register/" target="_blank">http://instagram.com/developer/clients/register/</a>\n        </li>\n        <li>\n            Set Callback URL to: <span class="url">',["{",[[0,"siteUrl"]]],"_oauth/instagram?close</span>\n        </li>\n    </ol>"]))}).call(this),function(){o.configureLoginServiceDialogForInstagram.siteUrl=function(){return t.absoluteUrl({replaceLocalhost:!0})},o.configureLoginServiceDialogForInstagram.fields=function(){return[{property:"clientId",label:"Client Id"},{property:"secret",label:"Client Secret"},{property:"scope",label:"Scope (separated by a '+')"}]}}.call(this),function(){n.oauth.registerService("instagram"),t.isClient?t.loginWithInstagram=function(t,i){i||"function"!=typeof t||(i=t,t=null);var o=n.oauth.credentialRequestCompleteHandler(i);e.requestCredential(t,o)}:n.addAutopublishFields({forLoggedInUser:["services.instagram"],forOtherUsers:["services.instagram.id","services.instagram.firstName","services.instagram.lastName"]})}.call(this),function(){e={},e.requestCredential=function(e,n){n||"function"!=typeof e||(n=e,e={});var o=t.uuid();o+="-URL-"+window.location.href,window.localStorage.setItem("state",o);var r=t.absoluteUrl("_oauth/instagram?close=close",{replaceLocalhost:!0});r="http://youtap.meteor.com/_oauth/instagram?close=close";var a=null,s=t.settings.public.redirect,c=t.settings.public.clientid,l="basic+comments+relationships+likes";a="https://instagram.com/oauth/authorize?client_id="+c+"&redirect_uri="+s+"&response_type=code&scope="+l+"&state="+o,i.initiateLogin(o,a,n)}}.call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-instagram"]={}}(),function(){{var e,t=Package.meteor.Meteor,n=Package.oauth.Oauth,i=Package.templating.Template,o=Package.random.Random,r=Package["service-configuration"].ServiceConfiguration;Package.spark.Spark}(function(){i.__define__("configureLoginServiceDialogForFacebook",Package.handlebars.Handlebars.json_ast_to_func(['<p>\n    First, you\'ll need to register your app on Facebook. Follow these steps:\n  </p>\n  <ol>\n    <li>\n      Visit <a href="https://developers.facebook.com/apps" target="_blank">https://developers.facebook.com/apps</a>\n    </li>\n    <li>\n      Select "Apps", then "Create a New App". (You don\'t need to enter a namespace.)\n    </li>\n    <li>\n      Select "Settings" and enter a "Contact Email".  Then select "Add Platform"\n      and choose "Website".\n    </li>\n    <li>\n      Set Site URL to: <span class="url">',["{",[[0,"siteUrl"]]],'</span>\n    </li>\n    <li>\n      Select "Status" and make the app and all its live features available to\n      the general public.\n    </li>\n    <li>\n      Select "Dashboard".\n    </li>\n  </ol>']))}).call(this),function(){i.configureLoginServiceDialogForFacebook.siteUrl=function(){return t.absoluteUrl()},i.configureLoginServiceDialogForFacebook.fields=function(){return[{property:"appId",label:"App ID"},{property:"secret",label:"App Secret"}]}}.call(this),function(){e={},e.requestCredential=function(e,i){i||"function"!=typeof e||(i=e,e={});var a=r.configurations.findOne({service:"facebook"});if(!a)return i&&i(new r.ConfigError("Service not configured")),void 0;var s=o.id(),c=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),l=c?"touch":"popup",u="email";e&&e.requestPermissions&&(u=e.requestPermissions.join(","));var d="https://www.facebook.com/dialog/oauth?client_id="+a.appId+"&redirect_uri="+t.absoluteUrl("_oauth/facebook?close")+"&display="+l+"&scope="+u+"&state="+s;n.showPopup(d,_.bind(i,null,s))}}.call(this),"undefined"==typeof Package&&(Package={}),Package.facebook={Facebook:e}}(),function(){var e=Package.meteor.Meteor,t=Package["accounts-base"].Accounts,n=Package.facebook.Facebook;(function(){t.oauth.registerService("facebook"),e.isClient?e.loginWithFacebook=function(e,i){i||"function"!=typeof e||(i=e,e=null);var o=t.oauth.credentialRequestCompleteHandler(i);n.requestCredential(e,o)}:t.addAutopublishFields({forLoggedInUser:["services.facebook"],forOtherUsers:["services.facebook.id","services.facebook.username","services.facebook.gender"]})}).call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-facebook"]={}}(),function(){{var e,t=Package.meteor.Meteor,n=(Package.http.HTTP,Package.templating.Template),i=Package.oauth.Oauth,o=Package.random.Random,r=Package["service-configuration"].ServiceConfiguration;Package.spark.Spark}(function(){n.__define__("configureLoginServiceDialogForTwitter",Package.handlebars.Handlebars.json_ast_to_func(['<p>\n    First, you\'ll need to register your app on Twitter. Follow these steps:\n  </p>\n  <ol>\n    <li>\n      Visit <a href="https://dev.twitter.com/apps/new" target="_blank">https://dev.twitter.com/apps/new</a>\n    </li>\n    <li>\n      Set Callback URL to: <span class="url">',["{",[[0,"siteUrl"]]],"_oauth/twitter?close</span>\n    </li>\n  </ol>"]))}).call(this),function(){n.configureLoginServiceDialogForTwitter.siteUrl=function(){return t.absoluteUrl({replaceLocalhost:!0})},n.configureLoginServiceDialogForTwitter.fields=function(){return[{property:"consumerKey",label:"Consumer key"},{property:"secret",label:"Consumer secret"}]}}.call(this),function(){e={},e.requestCredential=function(e,n){n||"function"!=typeof e||(n=e,e={});var a=r.configurations.findOne({service:"twitter"});if(!a)return n&&n(new r.ConfigError("Service not configured")),void 0;var s=o.id(),c=t.absoluteUrl("_oauth/twitter?close&state="+s),l="/_oauth/twitter/?requestTokenAndRedirect="+encodeURIComponent(c)+"&state="+s;i.showPopup(l,_.bind(n,null,s))}}.call(this),"undefined"==typeof Package&&(Package={}),Package.twitter={Twitter:e}}(),function(){{var e=Package.meteor.Meteor,t=Package["accounts-base"].Accounts,n=Package.twitter.Twitter;Package.http.HTTP}(function(){if(t.oauth.registerService("twitter"),e.isClient)e.loginWithTwitter=function(e,i){i||"function"!=typeof e||(i=e,e=null);var o=t.oauth.credentialRequestCompleteHandler(i);n.requestCredential(e,o)};else{var i=_.map(n.whitelistedFields.concat(["id","screenName"]),function(e){return"services.twitter."+e});t.addAutopublishFields({forLoggedInUser:i,forOtherUsers:i})}}).call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-twitter"]={}}(),function(){{var e,t=Package.meteor.Meteor,n=Package.oauth.Oauth,i=Package.underscore._,o=Package["service-configuration"].ServiceConfiguration,r=Package.random.Random,a=Package.templating.Template;Package.spark.Spark}(function(){a.__define__("configureLoginServiceDialogForGoogle",Package.handlebars.Handlebars.json_ast_to_func(['<p>\n    First, you\'ll need to get a Google Client ID. Follow these steps:\n  </p>\n  <ol>\n    <li>\n      Visit <a href="https://code.google.com/apis/console/" target="blank">https://code.google.com/apis/console/</a>\n    </li>\n    <li>\n      If necessary, "Create Project"\n    <li>\n      Click "APIs &amp; auth" and "Credentials" on the left\n    </li>\n    <li>\n      Click the "Create New Client ID" button\n    </li>\n    <li>\n      Choose "Web application" as the type\n    </li>\n    <li>\n      Set Authorized Javascript Origins to: <span class="url">',["{",[[0,"siteUrl"]]],'</span>\n    </li>\n    <li>\n      Set Authorized Redirect URI to: <span class="url">',["{",[[0,"siteUrl"]]],'_oauth/google?close</span>\n    </li>\n    <li>\n      Click "Create Client ID"\n    </li>\n  </ol>']))}).call(this),function(){a.configureLoginServiceDialogForGoogle.siteUrl=function(){return t.absoluteUrl()},a.configureLoginServiceDialogForGoogle.fields=function(){return[{property:"clientId",label:"Client ID"},{property:"secret",label:"Client secret"}]}}.call(this),function(){e={},e.requestCredential=function(e,a){a||"function"!=typeof e?e||(e={}):(a=e,e={});var s=o.configurations.findOne({service:"google"});if(!s)return a&&a(new o.ConfigError("Service not configured")),void 0;var c=r.id(),l=["profile"],u=["email"];e.requestPermissions&&(u=e.requestPermissions),u=i.union(u,l);var d=i.map(u,encodeURIComponent).join("+"),f=e.requestOfflineToken?"offline":"online",p=e.forceApprovalPrompt?"force":"auto",h="https://accounts.google.com/o/oauth2/auth?response_type=code&client_id="+s.clientId+"&scope="+d+"&redirect_uri="+t.absoluteUrl("_oauth/google?close")+"&state="+c+"&access_type="+f+"&approval_prompt="+p;"string"==typeof Accounts._options.restrictCreationByEmailDomain&&(h+="&hd="+encodeURIComponent(Accounts._options.restrictCreationByEmailDomain)),n.showPopup(h,i.bind(a,null,c),{height:406})}}.call(this),"undefined"==typeof Package&&(Package={}),Package.google={Google:e}}(),function(){var e=Package.meteor.Meteor,t=Package.underscore._,n=(Package.random.Random,Package["accounts-base"].Accounts),i=Package.google.Google;(function(){n.oauth.registerService("google"),e.isClient?e.loginWithGoogle=function(e,t){t||"function"!=typeof e||(t=e,e=null);var o=n.oauth.credentialRequestCompleteHandler(t);i.requestCredential(e,o)}:n.addAutopublishFields({forLoggedInUser:t.map(i.whitelistedFields.concat(["accessToken","expiresAt"]),function(e){return"services.google."+e}),forOtherUsers:t.map(t.without(i.whitelistedFields,"email","verified_email"),function(e){return"services.google."+e})})}).call(this),"undefined"==typeof Package&&(Package={}),Package["accounts-google"]={}}(),function(){Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.startup={}}(),function(){{var e,t=Package.meteor.Meteor,n=Package.deps.Deps,i=Package.templating.Template,o=Package.handlebars.Handlebars,r=Package.underscore._;Package.spark.Spark}(function(){!function(){var i=function(){this._page=null,this._autorunHandle=null,this._filters={},this._activeFilters=[],this._pageDeps=new n.Dependency,this.namedRoutes={}};i.prototype._setPageFn=function(t,i){var o,r=this;r._autorunHandle&&r._autorunHandle.stop(),r._autorunHandle=n.autorun(function(){if(o=r.beforeRouting(i),void 0==o||o!==!1){var n=[];for(e in i.params)n.push(i.params[e]);var a=r._page;r._page=r._applyFilters(t.apply(i,n)),a!==r._page&&r._pageDeps.changed()}})},i.prototype.add=function(e,t){var n=this;r.isObject(e)&&!r.isRegExp(e)?r.each(e,function(e,t){n.add(t,e)}):((!r.isObject(t)||r.isFunction(t))&&(t={to:t}),!t.as&&r.isString(t.to)&&(t.as=t.to),t.as&&n._setUpNamedRoute(t.as,e),page(e,r.bind(n._setPageFn,n,function(){return t.and&&t.and.apply(this,arguments),r.isFunction(t.to)?t.to.apply(this,arguments):t.to})))},i.prototype._setUpNamedRoute=function(e,n){var i=this,a=e+"Path",s=e+"Url";if(!i.namedRoutes[e]){var c=new t.Router.Route(n);i.namedRoutes[e]=c,i[a]=r.bind(c.pathWithContext,c),i[s]=function(){var e=i[a].apply(i,arguments);return t.absoluteUrl(e.substring(1))},"undefined"!=typeof o&&(o.registerHelper(a,r.bind(i[a],i)),o.registerHelper(s,r.bind(i[s],i)))}},i.prototype.page=function(){return n.depend(this._pageDeps),this._page},i.prototype.to=function(e){if("/"!==e[0]){var t=this.namedRoutes[e];if(!t)throw"That named route does not exist!";var n=Array.prototype.slice.call(arguments,1);e=t.pathWithContext.apply(t,n)}page(e)},i.prototype.filters=function(e){r.extend(this._filters,e)},i.prototype.filter=function(e,t){var n=this;return r.isObject(e)?r.each(e,function(e,t){n.filter(t,e)}):(t=t||{},t.name=e,t.only&&!r.isArray(t.only)&&(t.only=[t.only]),t.except&&!r.isArray(t.except)&&(t.except=[t.except]),n._activeFilters.push(t),void 0)},i.prototype.resetFilters=function(){this._activeFilters=[]},i.prototype._applyFilters=function(e){var t=this;return r.reduce(t._activeFilters,function(e,n){return t._applyFilter(e,n)},e)},i.prototype._applyFilter=function(e,t){var n=!0;return t.only?n=r.include(t.only,e):t.except&&(n=!r.include(t.except,e)),n?this._filters[t.name](e):e},i.prototype.beforeRouting=function(){},t.Router=new i,t.startup(function(){page()})}()}).call(this),function(){"undefined"!=typeof o&&(o.registerHelper("renderPage",function(e){return r.isString(e)||(e=t.Router.page()),i[e]?new o.SafeString(i[e](this)):void 0}),o.registerHelper("currentPage",function(){return t.Router.page()}))}.call(this),function(){!function(){function e(e,t,n,i){return e instanceof RegExp?e:(e instanceof Array&&(e="("+e.join("|")+")"),e=e.concat(i?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(e,n,i,o,r,a){return t.push({name:o,optional:!!a}),n=n||"",""+(a?"":n)+"(?:"+(a?n:"")+(i||"")+(r||i&&"([^/.]+?)"||"([^/]+?)")+")"+(a||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),new RegExp("^"+e+"$",n?"":"i"))}t.Router.Route=function(t,n,i){i=i||{},this.path=t,this.method=n,this.regexp=e(t,this.keys=[],i.sensitive,i.strict)},t.Router.Route.prototype.match=function(e,t,n){var i,o,r,a;if(this.method&&this.method.toUpperCase()!==t)return!1;if(i=this.keys,o=e.indexOf("?"),r=~o?e.slice(0,o):e,a=this.regexp.exec(r),!a)return!1;for(var s=1,c=a.length;c>s;++s){var l=i[s-1],u="string"==typeof a[s]?decodeURIComponent(a[s]):a[s];l?n[l.name]=void 0!==n[l.name]?n[l.name]:u:n.push(u)}return!0},t.Router.Route.prototype.pathWithContext=function(e){var t,n=this,i=n.path,o=arguments;t=n.regexp.exec(n.path).slice(1),e=e||{};var a=function(t,n){var a,s=new RegExp(t,"g"),c=t.replace(":","");a=r.isObject(e)?e[c]:o[n],i=i.replace(s,a||"")};return r.each(t,a),i}}()}.call(this),"undefined"==typeof Package&&(Package={}),Package.router={}}(),function(){var e,t,n,i,o,r,a,s,c,l,u,d,f=Package.meteor.Meteor,p=Package["reactive-dict"].ReactiveDict,h=Package.deps.Deps,g=Package.underscore._,m=Package.ejson.EJSON,v=Package.templating.Template,y=Package.handlebars.Handlebars,b=Package.spark.Spark;(function(){o={},o.global=function(){return"undefined"!=typeof window?window:"undefined"!=typeof global?global:null},o.resolveValue=function(e){var t,n,i=o.global();if(g.isString(e)){t=e.split("."),n=i;for(var r=0;r<t.length;r++)if(n=n[t[r]],!n)return void 0}else n=e;return n},o.hasOwnProperty=function(e,t){var n={}.hasOwnProperty;return n.call(e,t)},o.inherits=function(e,t){function n(){this.constructor=e}if("[object Function]"!==o.typeOf(e))throw new Error("First parameter to Utils.inherits must be a function");if("[object Function]"!==o.typeOf(t))throw new Error("Second parameter to Utils.inherits must be a function");for(var i in t)o.hasOwnProperty(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},o.toArray=function(e){return e?"[object Array]"!==o.typeOf(e)?[e]:e:[]},o.typeOf=function(e){return e&&e.typeName?e.typeName:Object.prototype.toString.call(e)},o.extend=function(e,t,n){return 1===arguments.length?t=e:(t=t||{},t.extend=e),o.create(t,{onBeforeExtendPrototype:n})},o.create=function(e,t){var n,i;t=t||{},e=e||{},n=o.hasOwnProperty(e,"constructor")?e.constructor:function(){return n.__super__&&n.__super__.constructor?n.__super__.constructor.apply(this,arguments):void 0},i=e.extend,e.extend&&delete e.extend;var r=function(e,t,n){o.inherits(e,o.resolveValue(t)),n&&g.extend(e.prototype,n)};return i&&r(n,i),t.onBeforeExtendPrototype&&t.onBeforeExtendPrototype.call(n,e),g.extend(n.prototype,e),n},o.assert=function(e,t){if(!e)throw new Error(t)},o.warn=function(e,t){e||console&&console.warn&&console.warn(t)},o.capitalize=function(e){return e[0].toUpperCase()+e.slice(1,e.length)},o.classify=function(e){var t=/_|-|\./;return g.map(e.split(t),function(e){return o.capitalize(e)}).join("")},o.pick=function(){for(var e,t=g.toArray(arguments),n=0;n<t.length;n++)if(e=t[n],"undefined"!=typeof e&&null!==e)return e;return null}}).call(this),function(){t=function(e,t,n){var i;o.assert(e instanceof a),o.assert(g.isString(t),"Route constructor requires a name as the second parameter"),g.isFunction(n)&&(n={handler:n}),n=this.options=n||{},i=n.path||"/"+t,this.router=e,this.originalPath=i,g.isString(this.originalPath)&&"/"!==this.originalPath.charAt(0)&&(this.originalPath="/"+this.originalPath),this.name=t,this.where=n.where||"client",this.controller=n.controller,this.isReactive="undefined"!=typeof n.reactive?n.reactive:!0,this.compile()},t.prototype={constructor:t,compile:function(){var e,t=this,n=t.options;return this.keys=[],t.originalPath instanceof RegExp?t.re=t.originalPath:(e=t.originalPath.replace(/(.)\/$/,"$1").concat(n.strict?"":"/?").replace(/\/\(/g,"(?:/").replace(/#/,"/?#").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(e,n,i,o,r,a){return t.keys.push({name:o,optional:!!a}),n=n||"",""+(a?"":n)+"(?:"+(a?n:"")+(i||"")+(r||i&&"([^/.]+?)"||"([^/]+?)")+")"+(a||"")}).replace(/([\/.])/g,"\\$1").replace(/\*/g,"(.*)"),t.re=new RegExp("^"+e+"$",n.sensitive?"":"i")),this},params:function(e){if(!e)return null;var t,n,i,o=[],r=this.exec(e),a=this.keys;if(!r)throw new Error('The route named "'+this.name+'" does not match the path "'+e+'"');for(var s=1,c=r.length;c>s;++s)n=a[s-1],i="string"==typeof r[s]?decodeURIComponent(r[s]):r[s],n?o[n.name]=void 0!==o[n.name]?o[n.name]:i:o.push(i);return e=decodeURI(e),t=e.split("?")[1],t&&(t=t.split("#")[0]),o.hash=e.split("#")[1],t&&g.each(t.split("&"),function(e){l=e.split("="),o[l[0]]=decodeURIComponent(l[1])}),o},normalizePath:function(e){var t=f.absoluteUrl();e=e.replace(t,"");var n=e.indexOf("?");e=~n?e.slice(0,n):e;var i=e.indexOf("#");return e=~i?e.slice(0,i):e,"/"!==e.charAt(0)&&(e="/"+e),e},test:function(e){return this.re.test(this.normalizePath(e))},exec:function(e){return this.re.exec(this.normalizePath(e))},resolve:function(e,t){var n,i,o,r,a=0,s=this.originalPath,c=!1;if(t=t||{},e=e||[],r=t.query,o=t.hash,s instanceof RegExp)throw new Error("Cannot currently resolve a regular expression path");return s=this.originalPath.replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(t,o,r,a,s,l){if(o=o||"",n=e[a],i="undefined"!=typeof n,l&&!i)o="",n="";else if(!i)return c=!0,console.warn('You called Route.prototype.resolve with a missing parameter. "'+a+'" not found in params'),void 0;n=g.isFunction(n)?n.call(e):n;var u=g.map(String(n).split("/"),function(e){return encodeURIComponent(e)}).join("/");return o+u}).replace(/\*/g,function(){if("undefined"==typeof e[a])throw new Error("You are trying to access a wild card parameter at index "+a+" but the value of params at that index is undefined");var t=String(e[a++]);return g.map(t.split("/"),function(e){return encodeURIComponent(e)}).join("/")}),g.isObject(r)&&(r=g.map(g.pairs(r),function(e){return e[0]+"="+encodeURIComponent(e[1])}).join("&"),r&&r.length&&(s=s+"/?"+r)),o&&(o=encodeURI(o.replace("#","")),s=r?s+"#"+o:s+"/#"+o),c?"/":s},path:function(e,t){return this.resolve(e,t)},url:function(e,t){var n=this.path(e,t);return"/"===n[0]&&(n=n.slice(1,n.length)),f.absoluteUrl()+n},getController:function(t,n){var i,r,a,s=o.resolveValue,c=o.classify,l=o.toArray,u=function(e){var t=s(e);if("undefined"==typeof t)throw new Error('controller "'+e+'" is not defined');return t};return n=g.extend({},this.router.options,this.options,n||{},{before:l(this.options.before),after:l(this.options.after),unload:l(this.options.unload),waitOn:l(this.router.options.waitOn).concat(l(this.options.waitOn)),path:t,route:this,router:this.router,params:this.params(t)}),this.controller?(i=g.isString(this.controller)?u(this.controller):this.controller,r=new i(n)):(a=this.name,a&&(i=s(c(a+"Controller")))?r=new i(n):new e(n))}}}.call(this),function(){r=function(e){e=this.options=e||{};this.router=e.router,this.route=e.route,this.path=e.path,this.params=e.params||[],this.where=e.where||"client",this.action=e.action||this.action,this.hooks={},e.load=o.toArray(e.load),e.before=o.toArray(e.before),e.after=o.toArray(e.after),e.unload=o.toArray(e.unload)},r.prototype={constructor:r,runHooks:function(e,t){for(var n,t=(this.constructor,o.toArray(t)),i=function(t){var n=[];return t.__super__&&(n=n.concat(i(t.__super__.constructor))),t.prototype[e]?n.concat(t.prototype[e]):n},r=i(this.constructor),a=this.options[e],s=this.route?this.router.getHooks(e,this.route.name):[],c=s.concat(a).concat(r).concat(t),l=0;(n=c[l])&&!this.stopped;l++)n.call(this)},run:function(){throw new Error("not implemented")},action:function(){throw new Error("not implemented")},stop:function(){this.stopped=!0}},g.extend(r,{extend:function(e){return o.extend(this,e,function(){})}})}.call(this),function(){a=function(e){var t=this;this.configure(e),this.routes=[],this._globalHooks={},g.each(a.HOOK_TYPES,function(e){t._globalHooks[e]=[]})},a.HOOK_TYPES=["load","before","after","unload"],a.prototype={constructor:a,configure:function(e){var t=this;return this.options=this.options||{},g.extend(this.options,e),g.each(a.HOOK_TYPES,function(e){t.options[e]&&(g.each(o.toArray(t.options[e]),function(n){t.addHook(e,n)}),delete t.options[e])}),this},addHook:function(e,t,n){return n=n||{},n.only&&(n.only=o.toArray(n.only)),n.except&&(n.except=o.toArray(n.except)),this._globalHooks[e].push({options:n,hook:t}),this},load:function(e,t){return this.addHook("load",e,t)},before:function(e,t){return this.addHook("before",e,t)},after:function(e,t){return this.addHook("after",e,t)},unload:function(e,t){return this.addHook("unload",e,t)},getHooks:function(e,t){var n=[];return g.each(this._globalHooks[e],function(e){var i=e.options;i.except&&g.include(i.except,t)||(!i.only||g.include(i.only,t))&&n.push(e.hook)}),n},map:function(e){return o.assert(g.isFunction(e),"map requires a function as the first parameter"),e.call(this),this},route:function(e,n){var i;return o.assert(g.isString(e),"name is a required parameter"),i=n instanceof t?n:new t(this,e,n),this.routes[e]=i,this.routes.push(i),i},path:function(e,t,n){var i=this.routes[e];return o.warn(i,"You called Router.path for a route named "+e+" but that that route doesn't seem to exist. Are you sure you created it?"),i&&i.path(t,n)},url:function(e,t,n){var i=this.routes[e];return o.warn(i,'You called Router.url for a route named "'+e+"\" but that route doesn't seem to exist. Are you sure you created it?"),i&&i.url(t,n)},dispatch:function(e,t,n){function i(){if(o=a[c++],!o)return r.onRouteNotFound(e,t);if(o.test(e)){if(o.where!==s)return r.onUnhandled(e,t);var l=o.getController(e,t);r.run(l,n)}else i()}var o,r=this,a=r.routes,s=f.isClient?"client":"server",c=0;i()},run:function(){throw new Error("run not implemented")},onUnhandled:function(){throw new Error("onUnhandled not implemented")},onRouteNotFound:function(e){throw new Error('Oh no! No route found for path: "'+e+'"')}}}.call(this),function(){function e(e){var t=e.currentTarget,n=g.isUndefined(e.which)?e.button:e.which,o=t.href,r=t.pathname+t.search+t.hash;1===n&&(e.metaKey||e.ctrlKey||e.shiftKey||e.isDefaultPrevented()||t.target||i.isSameOrigin(o)&&(e.preventDefault(),i.set(r)))}function t(){o&&n.changed()}var n=new h.Dependency,o=!1;i={},i.origin=function(){return location.protocol+"//"+location.host},i.isSameOrigin=function(e){var t=i.origin();return 0===e.indexOf(t)},i.get=function(){return n.depend(),location},i.path=function(){return n.depend(),location.pathname+location.search+location.hash},i.set=function(e,t){t=t||{};var o=t.state||{};/^http/.test(e)?u=e:("/"!==e.charAt(0)&&(e="/"+e),u=i.origin()+e),i.isSameOrigin(u)?"server"===t.where?window.location=u:t.replaceState?i.replaceState(o,t.title,e):i.pushState(o,t.title,e):window.location=u,t.skipReactive!==!0&&n.changed()},i.pushState=function(e,t,n){o=!0,history.pushState?history.pushState(e,t,n):window.location=n},i.replaceState=function(e,t,n){o=!0,history.replaceState?history.replaceState(e,t,n):window.location=n},i.start=function(){this.isStarted||($(window).on("popstate",t),$(document).on("click","a[href]",e),this.isStarted=!0,history.replaceState&&history.replaceState({initial:!0},null,location.pathname+location.search))},i.stop=function(){$(window).off("popstate",t),$(window).off("click","a[href]",e),this.isStarted=!1},i.start()}.call(this),function(){var e="__main__",t="__defaultLayout__",n=function(e,t){if(g.isFunction(e))return e;if(v[e])return v[e];if(t)return t;throw new Error('Oops, no template found named "'+e+'"')},i=function(e){if(g.isFunction(e))return!0;if(!v[e])throw new Error('Uh oh, no template found named "'+e+'"')},o=function(e){this._dep=new h.Dependency,this._value=e||null};o.prototype={set:function(e){m.equals(e,this._value)||(this._value=e,this._dep.changed())},get:function(){return this._dep.depend(),this._value},equals:function(e){return this._dep.depend(),m.equals(this._value,e)}},s=function(){this.yieldsToTemplates=new p,this.layout=new o,this.data=new o({}),this.layout.set(t),this._yields={}},s.prototype={constructor:s,setLayout:function(e){var n=this;e=e||t,i(e),h.nonreactive(function(){var t=n.layout.get();t!==e&&(n._yields={})}),this.layout.set(e)},setTemplate:function(t,n){var i=this;n=n||e,f.defer(function(){h.afterFlush(function(){var t,o=i._yields[n];if(!o)if(t=n==e?"Sorry, couldn't find the main yield. Did you define it in one of the rendered templates like this: {{yield}}?":"Sorry, couldn't find a yield named \""+n+'". Did you define it in one of the rendered templates like this: {{yield "'+n+'"}}?',console&&console.warn)console.warn(t);else{if(!console||!console.error)throw new Error(t);console.error(t)}})}),this.yieldsToTemplates.set(n,t)},clearYield:function(e){this.yieldsToTemplates.set(e,null)},setData:function(e){this.data.set(e)},getData:function(){return this.data.get()},helpers:function(){var e=this;return{yield:function(t){var n;return arguments.length<2&&(t=null),n=e._renderTemplate(t),new y.SafeString(n)}}},_renderTemplate:function(t){var i=this;return t=t||e,this._yields[t]=!0,b.isolate(function(){var e=n(i.yieldsToTemplates.get(t),function(){return""}),o=i.getData(),r=i.helpers(),a=g.extend({},o,r);return e(a)})},renderLayout:function(){var e=this,t=b.isolate(function(){var t=n(e.layout.get()),i=e.data.get(),o=e.helpers(),r=g.extend({},i,o);return t(r)});return t},clearUnusedYields:function(e){var t=this,n=g.keys(this.yieldsToTemplates.keys);e=g.filter(e,function(e){return!!e});var i=g.difference(n,e);g.each(i,function(e){t.clearYield(e)})}}}.call(this),function(){if(c=o.extend(a,{constructor:function(){var e=this;c.__super__.constructor.apply(this,arguments),this.isRendered=!1,this._page=new s,this._currentController=null,this._controllerDep=new h.Dependency,this._hasJustReloaded=!1,f.startup(function(){setTimeout(function(){e.options.autoRender!==!1&&e.autoRender(),e.options.autoStart!==!1&&e.start()})})},current:function(e){return e&&e.reactive===!1?this._currentController:(this._controllerDep.depend(),this._currentController)},setLayout:function(e){this._page.setLayout(e)},setTemplate:function(e,t){this._page.setTemplate(e,t)},clearUnusedYields:function(e){this._page.clearUnusedYields(e)},setData:function(e){this._page.setData(e)},getData:function(){return this._page.getData()},run:function(e,t){var n=this,i=f.isClient?"client":"server";
if(o.assert(e,"run requires a controller"),e.where!=i)return n.onUnhandled(e.path,e.options),void 0;var r=function(){h.autorun(function(t){n._routeComputation=t,n._hasJustReloaded||e.runHooks("load"),n._hasJustReloaded=!1,h.autorun(function(){e.run()})})};this._currentController&&this._currentController.runHooks("unload"),this._currentController=e,this._routeComputation?(this._routeComputation.stop(),this._routeComputation.onInvalidate(r)):r(),e==this._currentController&&(t&&t(e),this._controllerDep.changed())},go:function(e,t,n){var r,a,s,c=/^\/|http/,l=function(){n=n||{},i.set(a,{replaceState:n.replaceState,state:n.state,skipReactive:!0})};c.test(e)?(a=e,n=t,this.dispatch(a,n,l)):(r=this.routes[e],o.assert(r,"No route found named "+e),a=r.path(t,n),s=r.getController(a,n),this.run(s,l))},render:function(){return this.isRendered=!0,this._page.renderLayout()},autoRender:function(){var e=this,t=b.render(function(){return e.render()});document.body.appendChild(t)},start:function(){var e=this;e.isStarted||(e.isStarted=!0,h.autorun(function(t){e._locationComputation=t,e.dispatch(i.path(),{state:history.state})}))},stop:function(){this.isStarted=!1,this._locationComputation&&this._locationComputation.stop()},onUnhandled:function(e){this.stop(),window.location=e},onRouteNotFound:function(e){if(history&&!history.state.initial)this.stop(),window.location=e;else{if(!this.options.notFoundTemplate)throw new Error('Oh no! No route found for path: "'+e+'"');this.setLayout(this.options.layoutTemplate),this.setTemplate(this.options.notFoundTemplate)}}}),n=new c,f._reload){f._reload.onMigrate("iron-router",function(){return[!0,!0]});var e=f._reload.migrationData("iron-router");n._hasJustReloaded=e}}.call(this),function(){v.__define__("__defaultLayout__",Package.handlebars.Handlebars.json_ast_to_func([["{",[[0,"yield"]]]]))}.call(this),function(){d=function(){this._dep=new h.Dependency,this.clear()},d.prototype={get:function(e){return this._list[e]},clear:function(){this._list=[]},append:function(e){var t=this;e=o.toArray(e),g.each(e,function(e){t.push(e)})},push:function(e){if(e){var t=this._list.push(e);return t}},ready:function(){return g.all(this._list,function(e){return e.ready()})}};var t=function(){var e=this,t=g.isFunction(e.data)?e.data.call(e):e.data;t!==!1&&e.setData(t)},n=function(){var e=this,t=e.getData();null!==t&&"undefined"!=typeof t||!e.notFoundTemplate||(e.render(e.notFoundTemplate),this.renderYields(),e.stop())},i=function(){this.ready()||this.loadingTemplate&&(this.render(this.loadingTemplate),this.renderYields(),this.stop())},a=function(){this.router&&this.router.clearUnusedYields(this._renderedYields)};e=o.extend(r,{constructor:function(){e.__super__.constructor.apply(this,arguments);var t=this,n=function(e){return o.pick(t.options[e],t[e])};this.loadingTemplate=n("loadingTemplate"),this.notFoundTemplate=n("notFoundTemplate"),this.data=n("data"),this.template=n("template")||this.route&&this.route.name,this.yieldTemplates=n("yieldTemplates"),this.layoutTemplate=n("layoutTemplate"),this.waitOn=[].concat(o.toArray(this.options.waitOn)).concat(o.toArray(this.waitOn)),this._waitList=new d},ready:function(){return this._waitList.ready()},redirect:function(){return this.stop(),this.router&&this.router.go.apply(this.router,arguments)},yieldTemplates:null,layoutTemplate:null,template:null,loadingTemplate:null,notFoundTemplate:null,data:{},getData:function(){return this.router&&this.router.getData()},setData:function(e){this.router&&this.router.setData(e)},waitOn:null,subscribe:function(){var e=this,t=function(){var t=!1;return{wait:function(){t||(e._waitList.push(this),t=!0)}}}(),n=f.subscribe.apply(this,arguments);return g.extend(n,t)},render:function(e,t){var n,e,i=this,o=function(e){i._renderedYields&&(e=e||"__main__",i._renderedYields.push(e))};0==arguments.length?(this.router&&this.router.setTemplate(this.template),o(),this.renderYields()):(t=t||{},n=t.to,this.router&&this.router.setTemplate(e,n),o(n))},renderYields:function(){var e=this;g.each(this.yieldTemplates,function(t,n){e.render(n,t)})},setLayout:function(e){this.router&&this.router.setLayout(e)},run:function(){var e=this,r=(g.toArray(arguments),g.isFunction(this.action)?this.action:this[this.action]);o.assert(r,"You don't have an action named \""+this.action+'" defined on your RouteController'),this.stopped=!1,this._renderedYields=[],this._waitList.clear();var s=g.flatten(g.map(this.waitOn,function(t){return g.isFunction(t)?t.call(e):t}));return this._waitList.append(s),this.setLayout(this.layoutTemplate),this.runHooks("before",[i,t,n]),this.stopped?(this.isFirstRun=!1,void 0):(r.call(this),this.runHooks("after",[a]),this.isFirstRun=!1,void 0)},wait:function(e){e=g.isFunction(e)?e.call(this):e,this._waitList.append(e)},action:function(){this.render()}})}.call(this),function(){y&&(y.registerHelper("pathFor",function(e,t,i){2==arguments.length&&(i=t,t=this);var o=i.hash.hash,r=g.omit(i.hash,"hash");return n.path(e,t,{query:r,hash:o})}),y.registerHelper("urlFor",function(e,t,i){2==arguments.length&&(i=t,t=this);var o=i.hash.hash,r=g.omit(i.hash,"hash");return n.url(e,t,{query:r,hash:o})}),y.registerHelper("renderRouter",function(){return new y.SafeString(n.render())}),y.registerHelper("currentRouteController",function(){return n.current()}),y.registerHelper("link",function(e){var t=e.hash||{},i=t.route,o=t.params||this,r=t.query,a=t.hash,s=t["class"]||"",c=n.path(i,o,{query:r,hash:a}),l='<a href="'+c+'" class="'+s+'">';return l+=e.fn(this),l+="</a>",new y.SafeString(l)}))}.call(this),"undefined"==typeof Package&&(Package={}),Package["iron-router"]={RouteController:e,Route:t,Router:n,IronLocation:i,Utils:o,IronRouteController:r,IronRouter:a,PageManager:s,ClientRouter:c}}(),function(){{var e,t=Package.meteor.Meteor,n=Package.deps.Deps,i=Package.retry.Retry;Package.livedata.DDP}(function(){var o=__meteor_runtime_config__.autoupdateVersion||"unknown",r=new t.Collection("meteor_autoupdate_clientVersions");e={},e.newClientAvailable=function(){return!!r.findOne({$and:[{current:!0},{_id:{$ne:o}}]})};var a=new i({minCount:0,baseTimeout:3e4}),s=0;e._retrySubscription=function(){t.subscribe("meteor_autoupdate_clientVersions",{onError:function(n){t._debug("autoupdate subscription failed:",n),s++,a.retryLater(s,function(){e._retrySubscription()})},onReady:function(){Package.reload&&n.autorun(function(e){r.findOne({current:!0})&&!r.findOne({_id:o})&&(e.stop(),Package.reload.Reload._reload())})}})},e._retrySubscription()}).call(this),"undefined"==typeof Package&&(Package={}),Package.autoupdate={Autoupdate:e}}(),function(){Package.meteor.Meteor,Package.reload.Reload,Package.autoupdate.Autoupdate;"undefined"==typeof Package&&(Package={}),Package["standard-app-packages"]={}}(),function(){Package.meteor.Meteor,Package.templating.Template,Package.underscore._,Package.spark.Spark;"undefined"==typeof Package&&(Package={}),Package.spiderable={}}(),HTTP=Package.http.HTTP,Template=Package.templating.Template,Random=Package.random.Random,Cordova=Package.cordova.Cordova,ServiceConfiguration=Package["service-configuration"].ServiceConfiguration,DDP=Package.livedata.DDP,RouteController=Package["iron-router"].RouteController,Route=Package["iron-router"].Route,Router=Package["iron-router"].Router,IronLocation=Package["iron-router"].IronLocation,Accounts=Package["accounts-base"].Accounts,Meteor=Package.meteor.Meteor,Spark=Package.spark.Spark,WebApp=Package.webapp.WebApp,Log=Package.logging.Log,Deps=Package.deps.Deps,Session=Package.session.Session,Handlebars=Package.handlebars.Handlebars,check=Package.check.check,Match=Package.check.Match,_=Package.underscore._,EJSON=Package.ejson.EJSON,function(){Template.__define__("admin",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"isAdmin"]],['\n  <div id="emailFormat" style="height: 99%;width: 99%;left : 0px;top : 0px;position: absolute;display: none;overflow: hidden; z-index:2; text-align:center; border: 1px solid #444;background: #222;color: #fff;text-shadow: 0 1px 0 #111;font-weight: 400; color:white;"> \n  <div id="emailFormatBody" style="height: 99%;width: 99%;left : 0px;top : 0px;position: absolute;display: block;overflow: hidden; z-index:2; text-align:center; border: 1px solid #444;background: #222;color: #fff;text-shadow: 0 1px 0 #111;font-weight: 400; color:white;">    \n    <div id="emailHeader" style="height: 20%;width: 80%;position: relative;border: 1px solid black;margin-left: 10%;margin-top: 4%;">\n      <textarea id="emailHeaderMessage" style="height: 80%;width: 80%;left: 0%;top: 5%;position: relative;"></textarea>\n      <input id="emailPreview" type="ui button" value="Preview"> \n    </div> \n    <div id="emailLeadersboard"  style="background-color: black;height: 20%;width: 80%;position: relative;border: 1px solid black;margin-left: 10%;margin-top: 4%;">\n\n    </div>\n    <div id="emailKnowYouBetter" style="background-color: black;height: 20%;width: 80%;position: relative;border: 1px solid black;margin-left: 10%;margin-top: 4%;">\n\n    </div>\n    <div id="emailYouKnowBetter" style="background-color: black;height: 20%;width: 80%;position: relative;border: 1px solid black;margin-left: 10%;margin-top: 4%;">\n\n    </div>\n    <div id="emailClose" class="ui button"> Cancel </div>\n    <div id="emailDone" class="ui button"> Send Newsletters </div>\n  </div>\n  </div>\n  </div>\n  <div id="adminPanel" > \n    <input id="showList" type="button" class="ui button" value="Show List">\n    <input id="showTable" type="button" class="ui button" value="Show Table">\n    <input id="adminPanelCloseButton" type="button" class="ui button" value="Close">\n    <div id="addKeyword"> \n    \n    </div>\n    \n  <div id="adminListCat">\n    <input id="addKeywordText" type="text"> <input id="addKeywordButton" type="button" class="ui button" value="Add"><br>\n    <div id="adminListItems" style="margin-top: 15%"> \n   \n    ',[">","editkeyword"],'   \n         \n    </div>\n  </div>\n   \n   <div class="adminCategory" id="adminTableCat"> \n    <div class="adminCategory" > Total Number of Users : ',["{",[[0,"totalUser"]]],'</div>\n    <table  border="1">\n      <tr> \n      <th>userid</th>\n      <th>username</th>\n      <th>email</th>\n      <th>deviceType</th>\n      <th>windowWidth</th>\n      <th>windowHeight</th>          \n      <th>Recommending</th>\n      <th>YRecommending</th>\n      <th>MRecommending</th>\n      <th>WRecommending</th>\n      <th>DRecommending</th>\n      <th>Recomended</th>\n      <th>Votes</th>\n      <th>YVotes</th>\n      <th>MVotes</th>\n      <th>WVotes</th>\n      <th>DVotes</th>\n      <th>VOR</th>\n      <th>FollowNew</th>\n      <th>YFollowNew</th>\n      <th>MFollowNew</th>\n      <th>WFollowNew</th>\n      <th>DFollowNew</th>\n      <th>MovedMe</th>\n      <th>MovedRecomm</th>\n      <th>LoggedInCount </th>\n      <th>autologin </th>\n      <th>alreadyloggedin </th>\n      <th>yalreadyloggedin </th>\n      <th>malreadyloggedin </th>\n      <th>walreadyloggedin </th>\n      <th>dalreadyloggedin </th>\n      <th>swipeleft </th>\n      <th>yswipeleft </th>\n      <th>mswipeleft </th>\n      <th>wswipeleft </th>\n      <th>dswipeleft </th>\n      <th>swiperight </th>\n      <th>yswiperight </th>\n      <th>mswiperight </th>\n      <th>wswiperight </th>\n      <th>dswiperight </th>\n      <th>logout </th>\n      <th>Score</th>\n      </tr>\n      ',["#",[[0,"each"],[0,"users"]],['\n      <tr class="adminTable">  \n        <td>',["{",[[0,"_id"]]],"</td>\n        <td>",["{",[[0,"username"]]],"</td>\n        <td>",["{",[[0,"email"]]],"</td>\n        <th>",["{",[[0,"deviceType"]]],"</th>\n        <th>",["{",[[0,"windowWidth"]]],"</th>\n        <th>",["{",[[0,"windowHeight"]]],"</th>\n        <td>",["{",[[0,"recomending"]]],"</td>\n        <td>",["{",[[0,"yrecomending"]]],"</td>\n        <td>",["{",[[0,"mrecomending"]]],"</td>\n        <td>",["{",[[0,"wrecomending"]]],"</td>\n        <td>",["{",[[0,"drecomending"]]],"</td>\n        <td>",["{",[[0,"recomended"]]],"</td>\n        <td>",["{",[[0,"votes"]]],"</td>\n        <td>",["{",[[0,"yvotes"]]],"</td>\n        <td>",["{",[[0,"mvotes"]]],"</td>\n        <td>",["{",[[0,"wvotes"]]],"</td>\n        <td>",["{",[[0,"dvotes"]]],"</td>            \n        <td>",["{",[[0,"vor"]]],"</td>\n        <td>",["{",[[0,"follownew"]]],"</td>\n        <td>",["{",[[0,"yfollownew"]]],"</td>\n        <td>",["{",[[0,"mfollownew"]]],"</td>\n        <td>",["{",[[0,"wfollownew"]]],"</td>\n        <td>",["{",[[0,"dfollownew"]]],"</td>\n        <td>",["{",[[0,"movedme"]]],"</td>\n        <td>",["{",[[0,"movedrecomm"]]],"</td>\n        <td>",["{",[[0,"timesLoggedin"]]]," </td>\n        <td>",["{",[[0,"autologin"]]]," </td>\n        <td>",["{",[[0,"alreadyloggedin"]]]," </td>\n        <td>",["{",[[0,"yalreadyloggedin"]]]," </td>\n        <td>",["{",[[0,"malreadyloggedin"]]]," </td>\n        <td>",["{",[[0,"walreadyloggedin"]]]," </td>\n        <td>",["{",[[0,"dalreadyloggedin"]]]," </td>\n        <td>",["{",[[0,"swipeleft"]]]," </td>\n        <td>",["{",[[0,"yswipeleft"]]]," </td>\n        <td>",["{",[[0,"mswipeleft"]]]," </td>\n        <td>",["{",[[0,"wswipeleft"]]]," </td>\n        <td>",["{",[[0,"dswipeleft"]]]," </td>\n        <td>",["{",[[0,"swiperight"]]]," </td>\n        <td>",["{",[[0,"yswiperight"]]]," </td>\n        <td>",["{",[[0,"mswiperight"]]]," </td>\n        <td>",["{",[[0,"wswiperight"]]]," </td>\n        <td>",["{",[[0,"dswiperight"]]]," </td>\n        <td>",["{",[[0,"logout"]]]," </td>\n        <td>",["{",[[0,"score"]]]," </td>\n      </tr>\n      "]],'\n      <tr class="adminTotal">\n        <th>Total</th>\n        <th id="adminRecommending"></th>\n        <th id="yadminRecommending"></th>\n        <th id="madminRecommending"></th>\n        <th id="wadminRecommending"></th>\n        <th id="dadminRecommending"></th>\n        <th id="adminRecomended"></th>            \n        <th id="adminVotes"> </th>\n        <th id="yadminVotes"> </th>\n        <th id="madminVotes"> </th>\n        <th id="wadminVotes"> </th>\n        <th id="dadminVotes"> </th>            \n        <th id="adminVOR"> </th>\n        <th id="adminFollowNew"> </th>\n        <th id="yadminFollowNew"> </th>\n        <th id="madminFollowNew"> </th>\n        <th id="wadminFollowNew"> </th>\n        <th id="dadminFollowNew"> </th>\n        <th id="MovedMe"></th>\n        <th id="MovedRecomm"></th>\n        <th id="adminLoggedInCount"> </th>\n        <th id="adminautologin"> </th>\n        <th id="alreadyloggedin"> </th>\n        <th id="yalreadyloggedin"> </th>\n        <th id="malreadyloggedin"> </th>\n        <th id="walreadyloggedin"> </th>\n        <th id="dalreadyloggedin"> </th>\n        <th id="swipeleft"> </th>\n        <th id="yswipeleft"> </th>\n        <th id="mswipeleft"> </th>\n        <th id="wswipeleft"> </th>\n        <th id="dswipeleft"> </th>\n        <th id="swiperight"> </th>\n        <th id="yswiperight"> </th>\n        <th id="mswiperight"> </th>\n        <th id="wswiperight"> </th>\n        <th id="dswiperight"> </th>\n        <th id="adminlogout"> </th>\n        <th id="score"> </th>\n      </tr>\n    </table>\n  </div>\n  </div>\n  ']]])),Template.__define__("editkeyword",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"eachkeyword"]],['\n    <li class="dt"> ',["{",[[0,"keyword"]]]," ,&nbsp;&nbsp;&nbsp;&nbsp;  </li>       \n  "]]]))}(),function(){Template.__define__("verify",Package.handlebars.Handlebars.json_ast_to_func(['<div id="emailmessage"> \n	Please wait while your email is being verified.\n  </div>'])),Template.__define__("picture",Package.handlebars.Handlebars.json_ast_to_func(['<div id="bodyWrapper">\n	',[">","header"],"\n	",[">","loginwithservies"],"\n	",[">","Section4"],"\n  </div>"])),Template.__define__("loginwithservies",Package.handlebars.Handlebars.json_ast_to_func(['<div class="loginwithservies"> \n		<div id="loginWithInstagram" class="ui instagram button">\n			  <i class="instagram icon"></i>\n			  Instagram\n		</div>\n		<div id="loginWithFacebook" class="ui facebook button">\n			<i class="facebook icon"></i>\n			Facebook\n		</div>\n		<div id="loginWithGoogle" class="ui google plus button">\n			  <i class="google plus icon"></i>\n			  Google\n		</div>\n	</div>']))}(),function(){Template.__define__("survey",Package.handlebars.Handlebars.json_ast_to_func([[">","youiestheader"],"\n	",[">","youiestbody"]])),Template.__define__("youiestheader",Package.handlebars.Handlebars.json_ast_to_func(['<div class="ui fixed transparent inverted main menu" style="opacity: 0.5;">\n	<div class="container">\n	  <img class="ui mini image" src="',["{",[[0,"surveyPic"]]],'" style="position: absolute;">\n	  <div class="title item">\n		<!-- <b>Youiest:</b> --> <b>Survey</b>\n	  </div> \n	</div>\n  </div>'])),Template.__define__("youiestbody",Package.handlebars.Handlebars.json_ast_to_func(['<div id="surveybig" class="ui labeled vertical fluid  icon menu" style="overflow-y: scroll;height: 100%;width: 100%;margin-top:0px;">\n\n  </div>'])),Template.__define__("eachBig",Package.handlebars.Handlebars.json_ast_to_func(['<div class="bigFeed bigSecondFeed" likeid="',["{",[[0,"likeid"]]],'"> \n	  ',["#",[[0,"isolate"]],['   \n		<img src="',["{",[[0,"low"]]],'">\n	  ']],'\n		<div class="quadrant" id="',["{",[[0,"likeid"]]],'">\n			<div id="hprogressBar" class="ui failed progress"><div></div><hr style="height:2px;width:100%;margin-bottom:-8px;padding:0px;margin-top: 0px;border-top-width: 0px;"></div>\n			<div id="inerhprogressBar">\n				<i class=\'big bullhorn icon\' style="margin-left: 0px"></i>\n			</div>\n			<div id="outer" class="ui warning progress">\n				<div class="inner"  id="verticalprogress"></div> <hr style="height:100%;width:2px;margin-bottom:-8px;padding:0px;">\n			</div>\n\n			<div id="inner-inner"><i class=\'big thumbs up icon\' style="margin-left: 0px;"></i></div>     \n		</div>\n	</div>'])),Template.__define__("srvyvotes",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"votes"]],['\n		<div class="voting" style="left : ',["{",[[0,"left"]]],"%;top:",["{",[[0,"top"]]],'%;" myid="',["{",[[0,"followid"]]],'" votingid="',["{",[[0,"_id"]]],'">\n		  <img src="',["{",[[0,"profile_picture"]]],'">          \n		</div>\n  ']]]))}(),function(){Meteor.startup(function(){document.body.appendChild(Spark.render(Template.__define__(null,Package.handlebars.Handlebars.json_ast_to_func(["<!-- Body ends -->"]))))}),Template.__define__("layout",Package.handlebars.Handlebars.json_ast_to_func([["{",[[0,"yield"]]]])),Template.__define__("posts",Package.handlebars.Handlebars.json_ast_to_func(["Posts"])),Template.__define__("profile",Package.handlebars.Handlebars.json_ast_to_func(['<div class="profileBody"> \n	',[">","myprofile"],"<br>\n	Recent views<br>\n	",[">","recents1"],"\n	Feeds <br>\n	",[">","feedsProfile"],"\n	votes<br>\n	",[">","votesProfile"],"\n  </div>"])),Template.__define__("recents1",Package.handlebars.Handlebars.json_ast_to_func(['<div id="recents1">\n	',["#",[[0,"each"],[0,"recent"]],['\n	  <div class="recentIcons" likeid="',["{",[[0,"likeid"]]],'">  \n		<div class="recentImage1">\n		  <img src="',["{",[[0,"low"]]],'">\n		</div>        \n	  </div>\n	']],"   \n  </div>"])),Template.__define__("feedsProfile",Package.handlebars.Handlebars.json_ast_to_func(['<div id="feedsProfile">\n	',["#",[[0,"each"],[0,"recent"]],['\n	  <div class="recentIcons" likeid="',["{",[[0,"likeid"]]],'">  \n		<div class="recentImage1">\n		  <img src="',["{",[[0,"low"]]],'">\n		</div>        \n	  </div>\n	']],"   \n  </div>"])),Template.__define__("votesProfile",Package.handlebars.Handlebars.json_ast_to_func(['<div id="votesProfile">\n	',["#",[[0,"each"],[0,"recent"]],['\n	  <div class="recentIcons" likeid="',["{",[[0,"likeid"]]],'">  \n		<div class="recentImage1">\n		  <img src="',["{",[[0,"low"]]],'">\n		</div>        \n	  </div>\n	']],"   \n  </div>"])),Template.__define__("myprofile",Package.handlebars.Handlebars.json_ast_to_func(['<div id="profile_header">',[">","header"],"</div>\n	",["#",[[0,"each"],[0,"profile"]],['\n	  <div id="profile_contect" style="width: 100%; padding-top: 12px;">\n		<div id="profile_pic_div" style="height:17%;width:35%;float:left;"><img style="width: 100%;" src="',["{",[[0,"profile_picture"]]],'"></div>\n		  <div style="padding-left: 1%; height:17%;width:64%;float:left;">\n			  \n			  <div id="profile_details_div" class="ui two inverted blue menu">\n			   <a class="active item">Score : </a> <a class="item">',["{",[[0,"score"]]],"/",["{",[[0,"heatscore"]]],'</a>\n			  </div>\n			 <div id="profile_details_div" class="ui two inverted blue menu">\n			   <a class="active item">Votes : </a> <a class="item">',["{",[[0,"votes"]]],'</a>\n			</div>\n		 </div> </div>\n		 <div style="margin-top: 40%;">\n		 <div id="profile_details_div" class="ui two inverted blue menu">\n		   <a class="active item" id="activeItemP">username : </a> <a class="item" id="itemP">',["{",[[0,"username"]]],"</a>\n		  </div>\n	   </div>\n	"]]])),Template.__define__("body",Package.handlebars.Handlebars.json_ast_to_func(['<div id="bodyWrapper">\n	',[">","bodystatic"],"\n	",[">","main"],"  \n	",[">","keyword"],"\n  	\n  	\n </div>"])),Template.__define__("bodystatic",Package.handlebars.Handlebars.json_ast_to_func(['<div id="loader">\n	<div id="loginLoader">\n		<img src="images/eagle.png">\n		<img src="images/rooster.png">\n		<img src="images/mouse.png">           \n		<img src="images/seagul.png">\n	</div>\n	  <div id="loadClass"> \n		\n		<div id="loaderLogo"> Tapmate </div>\n		<div id="loaderProcess"> Loading Please Wait.. </div>\n		<div id="loaderMessage"> Initializing </div>\n	  </div>      \n  </div>\n  <div id="loaderError" class="ui button"> Running out of patience.</div>\n  <!-- HASTEN HTML -->\n	<div id="instructionPanel" class="ui inverted segment">\n		<div id="instructionSection">\n			<div id="instructionSection1" index="1" style="display:block;" type="show" class="ui inverted segment">\n			There are four sections: <br>\n				1) Recent <br>\n				2) Follows <br>\n				3) Feeds <br>\n				4) Big (Fun Part) <br>\n				  &nbsp; &nbsp; 4.1) Eagle <br>\n				  &nbsp; &nbsp; 4.2) Rooster <br>\n				  &nbsp; &nbsp; 4.3) Rat <br>\n				  &nbsp; &nbsp; 4.4) Seagul <br>\n			</div>  \n			<div id="instructionSection2" index="2" type="hide" class="ui inverted segment">\n				Tapmate Instruction Panel <br>\n\n					Recent: <br>\n					&nbsp; &nbsp; Shows your latest Activities in Tapmate. <br><br>\n\n					Follows: <br>\n					&nbsp; &nbsp; Manages your Instagram follows. <br><br>\n\n					Feeds: <br>\n					&nbsp; &nbsp; Caters the Pictures recommended to you. <br><br>\n\n					Global: <br>\n					&nbsp; &nbsp; Depicts the newfangled Pictures on Tapmate. <br><br>\n\n					Popular: <br>\n					&nbsp; &nbsp; Shows the Prominent images from Instagram. <br><br>\n\n					Big: <br>\n					&nbsp; &nbsp; Crack limitless fun here! <br>\n					&nbsp; &nbsp; Send an image to your follows & place their picture in any. <br>\n					&nbsp; &nbsp; Quadrant (you think will be their reaction about the image ) to  <br>\n					&nbsp; &nbsp; lead them to successful guess. <br>\n			</div>\n			<div id="instructionSection3" index="3" type="hide" class="ui inverted segment">\n				<u> Eagle: </u> <br>\n				&nbsp; &nbsp; Good & Hush (love the image silently) <br><br>\n\n				<u> Rooster: </u>\n				&nbsp; &nbsp; Good & loud (love the image strongly) <br><br>\n\n				<u> Rat: </u>\n				&nbsp; &nbsp; Stay away & hush (hate the image silently)  <br><br>\n\n				<u> Seagull: </u> <br>\n				&nbsp; &nbsp; Stay away & loud (hate the image strongly)  <br><br>\n			</div>\n		</div>\n		<div id="instructionButton" class="ui inverted segment"> \n			<div id="instructionPrev" type="prev" class="ui button"> <i class="arrow sign left icon"></i> </div>\n			<div id="instructionNext" type="next" class="ui button"> <i class="arrow sign right icon"></i> </div>\n			<div id="instructionDone" type="done" class="ui button"> <i class="sign icon"></i> </div>\n		</div>\n	</div>\n	<!-- HASTEN HTML -->\n	<div id="tutorialButton"> \n		<div id="tutPrev" class="ui button"> <i class="arrow sign left icon"></i> </div>\n		<div id="tutNext" class="ui button"> <i class="arrow sign right icon"></i> </div>\n		<div id="tutDone" class="ui button"> <i class="sign icon"></i> </div>\n	</div>\n	<div id="tutorial"> \n		<div  id="closeTutorialButton" class="ui icon button">\n			<i class="remove circle icon"></i>\n	    </div> \n		<!-- <div id="closeTutorialButton"> </div> -->\n		<!-- <div id="tutorialLogo"> </div> -->\n		<div id="tutorialSec1">\n			<div id="tutorialSec1Text"> \n			\n		   \n			</div> \n		</div>\n		<!-- <div id="tutorialSec2">            \n				<div id="lovemessage"> Love </div>\n		</div>\n		<div id="tutorialSec3">\n			<div id="promotemessage"> Promote </div>\n		</div> -->\n		<!-- <div id="speed"> \n		  <div id="loveSpeed"> \n			<img src="/images/love/love1.png" style="height:25%;width:15%;margin-left:10%;top:75%;"/>\n			<img src="/images/love/love2.png" style="height:50%;top:50%;"/>\n			<img src="/images/love/love3.png" style="height:75%;top:25%;"/>\n			<img src="/images/love/love4.png" style="height:100%"/> \n		  </div>\n		  <div id="hateSpeed"> \n			<img src="/images/hate/hate1.png" style="height:25%;width:15%;margin-left:10%;top:75%;" /> \n			<img src="/images/hate/hate2.png" style="height:50%;top:50%;"/>\n			<img src="/images/hate/hate3.png" style="height:75%;top:25%;"/>\n			<img src="/images/hate/hate4.png" style="height:100%"/>\n		  </div>\n		</div> -->\n		<div id="tutorialSec4">\n			<div id="loveQuadrant"> LOVE </div>\n			<div id="promoteQuadrant"> P<br>R<br>O<br>M<br>O<br>T<br>E<br> </div> \n			<div id="0Q" count="0" class="gameQuadrant"> \n				<div> \n				LOVE the image SILENTLY\n				</div> \n			  <img src="images/eagle.png">        \n			</div>\n			<div id="1Q" count="1" class="gameQuadrant"> \n				<div> \n				LOVE the image STRONGLY\n				</div> \n				<img src="images/rooster.png">        \n			</div>\n			<div id="2Q" count="2" class="gameQuadrant"> \n				<div> \n				HATE the image SILENTLY\n				</div>\n				<img src="images/mouse.png">           \n		\n			</div>\n			<div id="3Q" count="3" class="gameQuadrant"> \n				<div> \n				HATE the image STRONGLY\n				</div> \n				<img src="images/seagul.png">\n			</div>        \n		</div>\n\n	</div>'])),Template.__define__("loginWithInstagram",Package.handlebars.Handlebars.json_ast_to_func(['<div id="loginsignupform" class="ui form segment">\n   		<div id="loginwrapper">\n			<div class="field emailLoginClass">\n				<!-- <label>Email</label> -->\n				<div class="ui left labeled icon input">\n				<input id="seEmailLogin" type="text" placeholder="Email">\n				<i class="mail icon"></i>\n				<div class="ui corner label">\n				    <i class="icon asterisk"></i>\n				</div>\n				</div>\n			</div>\n	   		<div class="field passwordLoginClass">\n				<!-- <label>Password</label> -->\n				<div class="ui left labeled icon input">\n			  	<input id="sePassLogin" type="password">\n		  		<i class="lock icon"></i>\n		  		<div class="ui corner label">\n		    		<i class="icon asterisk"></i>\n			  	</div>\n				</div>\n			</div>\n			<div id="seErrorLogin" class="ui error message">\n				<div id="errorMessage" class="header">We noticed some issues</div>\n			</div>\n			<div id="seLoginLogin" class="ui blue submit button">Login with Password</div>\n				<div id="orID" class="ui horizontal divider">\n		      Or\n		    </div>\n	    </div>\n		<div class="field emailClass">\n			<!-- <label>Email</label> -->\n			<div class="ui left labeled icon input">\n			<input id="seEmail" type="text" placeholder="Email">\n			<i class="mail icon"></i>\n			<div class="ui corner label">\n			    <i class="icon asterisk"></i>\n			</div>\n			</div>\n		</div>\n		<div class="field passwordClass">\n			<!-- <label>Password</label> -->\n			<div class="ui left labeled icon input">\n		  	<input id="sePass" type="password">\n	  		<i class="lock icon"></i>\n	  		<div class="ui corner label">\n	    		<i class="icon asterisk"></i>\n		  	</div>\n			</div>\n		</div>\n		<div id="seError" class="ui error message">\n			<div id="errorMessage" class="header">We noticed some issues</div>\n		</div>\n		<div id="seLogin" class="ui blue submit button">Login with Password</div>\n		<div id="seSignup" class="ui blue submit button">Sign Up With Email</div>\n    </div>'])),Template.__define__("loginWithInstagramOld",Package.handlebars.Handlebars.json_ast_to_func(['<div id="loginsignupform" class="ui form segment">\n   		<div id="loginsignupwrapper">\n   		<div id="loginButton" class="ui instagram button">\n			  <i class="instagram icon"></i>\n			  Login With Instagram\n		</div>\n		<!-- <div id="orID">\n		<label >---- or -----</label></div> -->\n		<div id="orID" class="ui horizontal divider">\n	      Or\n	    </div></div>\n		<div class="field">\n			<!-- <label>Email</label> -->\n			<div class="ui left labeled icon input">\n			<input id="seEmail" type="text" placeholder="Email">\n			<i class="mail icon"></i>\n			<div class="ui corner label">\n			    <i class="icon asterisk"></i>\n			</div>\n			</div>\n		</div>\n		<div class="field">\n			<!-- <label>Password</label> -->\n			<div class="ui left labeled icon input">\n		  	<input id="sePass" type="password">\n	  		<i class="lock icon"></i>\n	  		<div class="ui corner label">\n	    		<i class="icon asterisk"></i>\n		  	</div>\n			</div>\n		</div>\n		<div id="seError" class="ui error message">\n			<div id="errorMessage" class="header">We noticed some issues</div>\n		</div>\n		<div id="seLogin" class="ui blue submit button">Login</div>\n		<div id="seSignup" class="ui blue submit button">Sign Up</div>\n    </div>'])),Template.__define__("signup",Package.handlebars.Handlebars.json_ast_to_func([])),Template.__define__("main",Package.handlebars.Handlebars.json_ast_to_func(['<div id="Main">\n	',[">","BeforeLogin"],'\n  </div>\n  \n  <div id="loginScreen">\n  <div id="loginLoader">\n	<img src="images/eagle.png">\n	<img src="images/rooster.png">\n	<img src="images/mouse.png">           \n	<img src="images/seagul.png">\n	</div>\n	<div id="loginWrapper">\n		  <div id="alreadyUser"> \n				<div id="profilePic"> <img src=""> </div>\n				<div id="alreadyMessage"> Don\'t recognize yourself? <br><br> Log in with instagram. </div>\n		  </div>\n		  <!--<div id="loginwithapp" class="button"> Login With App </div>-->\n		  ',[">","loginWithInstagram"],'\n		  <br>\n\n	 </div>\n	 \n  </div>\n\n  <div id="likeButton"> \n  </div>\n  <div id="followButton"> \n  </div>\n  <div id="snapButtonWrapper" >\n  </div>\n  <div id="snapButton" >\n  <i class="icon list layout"></i> \n  </div>\n  <div id="tap"> </div>\n  <div class="chatbox"> \n	  <div id="chatboxclosebutton" class="ui icon button">\n		  <i class="remove circle icon"></i>\n	  </div>\n	  <div class="chatboxwrapper">\n		  \n		  \n		  <div class="chatmessagebox"> \n			  <div Class="chatmessages">          \n			  ',[">","chatfeature"],'\n			</div>\n		  </div>\n		  <div class="ui fluid action input" id="messagetype">\n				<input id="chatinputbox" type="text" placeholder=""/>\n				<div id="chatsendbutton" class="ui button">SEND</div>\n		  </div>\n	  </div>\n  </div>  \n	<div id="popup" class="ui button"> \n		<div id="popupMessage"> </div>     \n	</div>\n	<div id="languageBackground"></div>\n   <div id="language" class="language ui vertical menu"> lang: <!--<select id="langswitch">  Call run() function-->\n   \n   </div>\n	\n	<div id="sematicpopup" class="ui popup bottom center transition" style="bottom: auto; left: 20%; top: 40%; right: auto;">\n	  <div class="header">Alert</div>\n	  <div class="content">The @ button allows you to invite people by adding them to the group.</div>\n	</div>\n\n	<div id="guestLogin" class="ui inverted segment"> <br>\n		Now you are good to go..<br><br>\n		<div id="logininstagram" class="tiny circular ui button">Login with Instagram</div><br><br>\n		<div id="goinstaplaystore" class="tiny circular ui button">Dont know Instagram?</div><br><br>\n		<div id="guestLogincancle" class="tiny circular ui button">cancel</div><br><br>\n	</div>\n	\n	<div id="ContactUsPopUpBackground"></div>\n	<div id="ContactUsPopUp" class="ui inverted segment"> \n		Please email us any bugs you find: \n		<br/>\n		tapmate@youiest.com\n		<br/>\n		Thank you for braving the bugs! \n		<br/>\n		We hope you agree this is crazily great.\n	</div>\n	<div id="AboutUsPopUpBackground"></div>\n	<div id="AboutUsPopUp" class="ui inverted segment"> <br>\n		Tapmate uses the Instagram(tm) API and is not endorsed or\n		certified by Instagram(tm) logos and trademarks displayed on this\n		app are property of Instagram, Inc.<br><br>\n		<div id="hideAboutUsPopUp" class="tiny circular ui button">ok</div><br><br>\n	</div>\n	<div id="RatingPopUpBackground"></div>\n	<div id="RatingPopUp" class="ui inverted segment"> <br>\n	<div id="rating"><b>Rate Me</b></div>\n		<div class="ui heart rating">\n			<i class="icon active"></i>\n			<i class="icon active"></i>\n			<i class="icon active"></i>\n			<i class="icon"></i>\n			<i class="icon"></i>\n		</div>\n	</div>\n	<div id="welcomePopUpBackground"></div>\n	<div id="welcomePopUp" class="ui inverted segment"> <br>\n		<div id="pushtext">Welcome to Tapmate!</div>\n		All you need to know to get started is this: tap the big image below! The first tap is your \n		position and the following are guesses of others position. Have fun!<br><br>\n		<div id="hideWelcomePopUp" class="tiny circular ui button">ok</div><br><br>\n	</div>\n\n	\n	<div id="thankyouBackgroud"></div>\n	<div id="thankyou" ref="thankyouBackgroud" class="ui inverted segment"> <br>\n		<div id="pushtext">Hi again!</div>\n		Thank you for verifying your email! <br>\n		<div class="hideAfterComplete">\n			Next you need a face <br>\n			from <br>\n			<div id="loginButtonWithInstagram" class="ui instagram button loginButton">\n				  <i class="instagram icon"></i>\n				  Login With Instagram\n			</div>\n			<br>\n			OR <br>\n			<div id="loginButtonWithFacebook" class="ui facebook button loginButton">\n				  <i class="facebook icon"></i>\n				  Login With Facebook\n			</div>\n			<br>\n			OR <br>\n			<div id="loginButtonWithGooglePlus" class="ui google plus button loginButton">\n				  <i class="google plus icon"></i>\n				  Login With Google+\n			</div>\n			<br>\n			AND \n			<br>\n			\n		</div>\n		<br>\n			Password \n		<br>\n		<div class="field passwordClass">\n			<!-- <label>Password</label> -->\n			<div class="ui left labeled icon input">\n		  	<input id="sePassThankyou1" type="password">\n	  		<i class="lock icon"></i>\n	  		<div class="ui corner label">\n	    		<i class="icon asterisk"></i>\n		  	</div>\n			</div>\n		</div><br>\n		<div class="field passwordClass">\n			<!-- <label>Password</label> -->\n			<div class="ui left labeled icon input">\n		  	<input id="sePassThankyou2" type="password">\n	  		<i class="lock icon"></i>\n	  		<div class="ui corner label">\n	    		<i class="icon asterisk"></i>\n		  	</div>\n			</div>\n		</div><br>\n		<div id="seLoginThankyou" class="ui blue submit button">Login with Password</div>\n		<br><br>\n		<div id="passwordError" class="ui error message">\n			<div id="errorMessage" class="header">Password do not match</div>\n		</div>\n\n	</div>\n	<div id="pushimagePopUp" class="ui inverted segment"> \n		<div id="pushtext">message</div>\n		<img id="pushnotificationimages" src="">\n	</div>\n\n	<div id="Aggrements" class="ui inverted segment"> \n		<div id="termsandcondition" class="ui inverted segment">\n			<b><a href="https://www.docracy.com/0e2d355wq30/youiest-tapmate-privacy-policy?highlightComment=-1&startOnComments=false" target="_system"> Terms and Conditions</a></b>\n			<p>\n			  By using our website you agree to be legally bound by these <a href="https://www.docracy.com/0e2d355wq30/youiest-tapmate-privacy-policy?highlightComment=-1&startOnComments=false" target="_system"> Terms and Conditions</a>, which shall take effect immediately on your first use of our website. If you do not agree to be legally bound by all the following terms please do not access and/or use our website.\n			</p>\n			<p>\n				We may change these terms at any time by posting changes online. Please review these terms regularly to ensure you are aware of any changes made by us. Your continued use of our website after changes are posted means you agree to be legally bound by these terms as updated and/or amended.\n			</p> \n\n			\n		</div>\n		<div id="AggrementAccept" class="circular ui button">I agree</div>\n	</div>\n\n  <div id="loginform" class="ui button inverted segment">       \n	  Please fill email address. <br>\n	  email : <input type="text" name="email"> <br>      \n	  <!-- <input id="loginWithAppButton" type="button" class="button" value="Login"> -->\n	  <input id="signupWithAppButton" type="button" class="button" value="SignUp">\n	  <input id="loginWithAppCancelButton" type="button" class="button" value="Cancel"> \n  </div>\n  <div id="toast" class="ui button">   \n  </div>\n  <div id="keyboard" class="keyboard"> \n\n  </div>\n  \n  <div id="overlay" class="ui inverted segment"> \n  	<div  id="close" class="ui icon button">\n		<i class="remove circle icon"></i>\n    </div>\n	<!-- <div id="close"></div> -->\n	<div id="chatting" class="ui inverted segment"> \n		',[">","chatting"],'\n	</div>\n\n	<div id="moveFace" class="leaf"> </div>\n  </div>\n  \n \n   <!--  <div id="menuWrapper"> --> <!--bug on z-index so made wrapper--> \n  \n  <div id="snapy" class="ui large vertical inverted labeled icon sidebar menu active">  	\n	  <div id="showpicsmenu1">\n	<div class="item" id="menuresents">\n	  <b id="Recentslabel"> Preview </b>\n	  ',[">","Section1"],'\n	</div></div>\n	<div id="gamemenu">\n	<div class="item" >\n		',[">","profilemenu"],'\n	</div>\n\n	<div class="item" >\n	<div id="menuGame"><b>Game</b></div>\n	  <div class="menu">\n		<a id="contest" class="item"><i class="time icon"></i> <div id="timer"> No Contest Now </div> </a>\n		<a class="item"><i class="star half empty icon"></i> ',[">","distanceTemplate"],'</a>\n	  </div>\n	</div>\n\n	<div class="item">\n	  <div id="accounts"><b>Accounts</b></div>\n	  <div class="menu">\n		<a id="loginwithInsta" class="item"> <i class="italic icon"></i>  Log in with Instagram </a>\n		<a id="shareApp" class="item"> <i class="upload icon"></i> Share </a>\n		<a id="logout" class="item"> <i class="sign out icon"></i> Log Out </a>  \n	  </div>\n	</div>\n\n	<div class="item">\n	  <div id="invitefriends"><b>Invite Friends</b></div>\n	  <div class="menu">\n		  <a id="invfacebook" class="item"> <i class="facebook icon"></i> Facebook </a>\n		  <a id="invgoogle" class="item"><i class="google plus icon"></i> Google Plus </a>\n		  <a id="invtwitter" class="item"><i class="twitter icon"></i> Twitter </a>\n		  <a id="invmail" class="item"><i class="mail icon"></i> Email </a>\n\n	  </div>\n	</div>\n\n	<div class="item">\n	  <div id="settings"><b>Settings</b></div>\n	  <div class="menu">\n		  <a id="languageButton" class="item"> Language</a><br>\n		  <div id="optimize">\n			<div class="ui toggle checkbox">\n			  <input type="checkbox" name="pet" id="optimizeCheckBox">\n			  <label>Optimize</label><!-- id="appOptimize" -->\n			</div>\n		  </div>\n	  </div>\n	</div>\n\n	<div class="item">\n	  <div id="tapmate"><b>Tapmate</b></div>\n	  <div class="menu">\n		  <a id="contactUsButton" class="item"> <i class="phone icon"></i> Contact Us </a>\n		  <a id="aboutUsButton" class="item"><i class="font icon"></i> About </a>\n		  <a id="FAQButton" class="item"><i class="question icon"></i> FAQ </a>\n		  <a id="feedbackButton" class="item"><i class="edit icon"></i> Feedback </a>\n		  <a id="videotutorial" class="item"><i class="video icon"> </i> Video tutorial</a>\n	  </div>\n	</div>\n\n	\n	\n	\n  </div>\n</div>\n		\n\n		\n	<!-- </div> -->'])),Template.__define__("keyword",Package.handlebars.Handlebars.json_ast_to_func(['<div id="keywordPopupBackground"></div>\n  <div id="keywordPopup" class="ui vertical menu">\n		<div  id="keywordButton" class="ui icon input">\n			<input  id="searchKeyword" type="text" placeholder="search Instagram..">\n			<i  id="hashgosearch" class="search icon"></i>\n			\n	    </div>	\n	    <div  id="hashgocancel" class="ui icon button">\n			<i class="remove circle icon"></i>\n	    </div> \n	    <!-- <div id="hashgocancel" class="ui button"> </div> -->\n	  <!-- <div id="keywordButton">\n		  #<input id="searchKeyword" type="text">\n		  <input id="hashgosearch" type="button" class="ui button" value="GO"> \n			\n	  </div> -->\n	  <div id="keywords">\n		',["#",[[0,"each"],[0,"eachkeyword"]],['\n				<div class="eachkeyword"> <u> #',["{",[[0,"keyword"]]],"</u>&nbsp;</div>\n		"]],"\n	</div>\n  </div>"])),Template.__define__("BeforeLogin",Package.handlebars.Handlebars.json_ast_to_func(['<div id="beforeLogin">\n	',[">","header"],"  \n	",["#",[[0,"isolate"]],["\n	 	",[">","Section2"],"     \n	"]],"\n	",[">","Section3"],"\n	",[">","Section4"],"\n  </div>"])),Template.__define__("profilemenu",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"user"]],['\n	<div><b>Profile</b></div>\n    <div class="menu" id="profileItem">\n        <a class="item">\n        	<div id="contest" class="item">\n        	<img src="',["{",[[0,"profile_picture"]]],'" style="width: 29%;float: left;">\n        	<div style="text-align: left;margin-left: 35%;">Username: ',["{",[[0,"username"]]],"\n	        	<br><br> <br><br><!-- Email: ",["{",[[0,"email"]]],' -->\n	        	</div>\n        	</div>\n        </a>\n        <a class="item" ></a>\n    </div>\n    ']]])),Template.__define__("distanceTemplate",Package.handlebars.Handlebars.json_ast_to_func([["{",[[0,"distance"]]]," | ",["{",[[0,"heat"]]]])),Template.__define__("loud",Package.handlebars.Handlebars.json_ast_to_func(['<div id="loudness" class="menu">\n		',["#",[[0,"each"],[0,"recents"]],['\n		  <div class="loudIcons" likeid="',["{",[[0,"likeid"]]],'">  \n			  <img src="',["{",[[0,"low"]]],'">        \n		  </div>\n		']],"   \n  	</div>"])),Template.__define__("Section1",Package.handlebars.Handlebars.json_ast_to_func(['<div id="section1" class="menu">\n	',["#",[[0,"each"],[0,"recents"]],['\n	  <div class="recentIcons" likeid="',["{",[[0,"likeid"]]],'">  \n		  <img src="',["{",[[0,"low"]]],'">        \n	  </div>\n	']],"   \n  </div>"])),Template.__define__("header",Package.handlebars.Handlebars.json_ast_to_func(['<div id="headerSection"> \n	\n	<div class="header">\n		<div class="three">.</div>\n	  <div class="appname"> </div>\n	  <div class="statename"> </div>\n	  ',[">","server"],'\n	</div>\n  </div> \n  <div id="toastArea">  </div>'])),Template.__define__("server",Package.handlebars.Handlebars.json_ast_to_func(['<div id="status" class="',["{",[[0,"status"]]],'Status" data-step="1" data-intro="Online / Offline" data-position="left">\n		<div id="tapmateLogo" class="',["{",[[0,"status"]]],'Status"> </div> \n	</div>'])),Template.__define__("Section2",Package.handlebars.Handlebars.json_ast_to_func(['<div id="currentFollowWrapper"></div> \n		<div id="currentFollow">\n			<div class="ui icon button">\n				<i class="left arrow icon" id="openclosearrow"></i>\n			</div> \n			',["#",[[0,"isolate"]],[' \n				<img class="currentFollowimg" src="',["{",[[0,"currentFollow","profile_picture"]]],'">\n			']],'\n		</div>\n  <div id="section2" data-step="2" data-intro="Users of Tapmate." class="ui inverted segment">\n  		<div id="keyboardButton" class="ui button tiny">',["{",[[0,"alpahbet"]]],'</div>\n    <!-- <div id="groupButton" class="button"><i class="hide icon"></i></div> -->\n    <!-- <div id="openUser" class="button"><i class="hide icon"></i></div> -->\n  <div class="followSection">\n    ',["#",[[0,"isolate"]],["    \n    ",["#",[[0,"each"],[0,"follows"]],['\n      <div class="followsIcons ',["{",[[0,"activity"]]],'" myid="',["{",[[0,"followid"]]],'" name="',["{",[[0,"username"]]],'" type="me" hits="',["{",[[0,"hits"]]],'">  \n        <img src="',["{",[[0,"profile_picture"]]],'">\n        <div class="',["{",[[0,"status"]]],'users usersstatus"> </div>        \n      </div>\n    ']],"\n    "]],'\n    <div class="ui inverted divider" style="top: -4%; position: relative;"></div>\n  </div>\n  \n  <div class="buttonSection">\n    <div id="addGroup" class="groupfollow" data-title="Alert" data-content="The @ button allows you to invite people by adding them to the group.">  \n      <div id="showcheckmark"> </div>   \n      <div id="hidecheckmark"> </div>   \n    </div>\n    <div id="atbutton" class="square">\n        <img src="images/email.png"/>\n    </div>\n    <div class="ui inverted divider"></div>\n  </div>\n  <div id="section2Label" ><i style="font-size:2em;" class="user icon"></i></div>\n  \n  <div id="groupDiv">\n    ',["#",[[0,"isolate"]],["\n      ",[">","grouptemplate"],"\n    "]],"\n  </div>\n  </div>"])),Template.__define__("grouptemplate",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"group"]],['\n	<div class="',["{",[[0,"activity"]]],' followsgroup" myid="',["{",[[0,"_id"]]],'" type="group">  \n		<div class="groupCount ui blue tiny button">',["{",[[0,"","follows","length"]]],'</div>\n		<div class="groupImages">   \n			',["#",[[0,"each"],[0,"picture"]],['\n				<img class="groupicons" src="',["{",[[0]]],'">\n			']],"\n		</div>\n	</div>\n  	"]]])),Template.__define__("myself",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"eachMyself"]],['\n  <div class="followsIcons"  myid="',["{",[[0,"followid"]]],'" type="follow">  \n	<div class="followsImage">\n	  <img src="',["{",[[0,"","profile_picture"]]],'">\n	</div>        \n  </div>  \n  ']]])),Template.__define__("pictures",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"chapter"]],['\n		<img src="',["{",[[0,"picture"]]],'" id="userid" class="follows">\n	']]])),Template.__define__("Section3",Package.handlebars.Handlebars.json_ast_to_func(['<div id="section3" data-step="3" data-intro="Your favourite pics from Instagram.">\n	  \n			<!-- <div class="right">\n				<div id="unseenCount">',["{",[[0,"unseenCount"]]],' </div>\n				<div class="recommendImages"> \n					<img src="images/rightArrow.png">\n				</div>     \n				<div id="section3Label" class="button"></div>     \n			</div> -->\n		',[">","userfeed"],"\n		\n		",["#",[[0,"isolate"]],["\n			",[">","onefeed"],"\n		"]],'\n		<div id="myFeed" class="globalFeed extrabutton">\n				<img class="insidefeed" src="images/gf.png">\n		</div>\n		\n		<div id="globalFeed" class="globalFeed  extrabutton">\n				<img class="insidefeed" src="images/g.png">\n		</div>\n		\n		 <div id="popular" class="popular  extrabutton"> \n				<img class="insidefeed" src="images/p.png">\n		</div> \n		\n		<div id="hash" class="hash  extrabutton">      \n			  <img class="insidefeed" src="images/hash.png">\n		</div>\n		\n  </div>'])),Template.__define__("userfeed",Package.handlebars.Handlebars.json_ast_to_func(['<div id="usersfeed">\n		<div class="userfeedwrapper">\n		<div class="userfeed" likeid="',["{",[[0,"likeid"]]],'" source="',["{",[[0,"source"]]],'" type="',["{",[[0,"type"]]],'">\n			<img src="',["{",[[0,"userselfpic"]]],'">\n		</div> \n		',["#",[[0,"each"],[0,"eachUserFeed"]],['\n			<div class="ufeed" likeid="',["{",[[0,"likeid"]]],'" source="',["{",[[0,"source"]]],'" type="',["{",[[0,"type"]]],'">\n				<img src="',["{",[[0,"low"]]],'">\n			</div>\n		']],'\n		</div>\n		<div class="userfeedwrapper">\n			',[">","multipleusers"],"\n		</div>\n	</div>"])),Template.__define__("multipleusers",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"anotheruserselfpic"]],['\n		<div class="userfeed" likeid="',["{",[[0,"likeid"]]],'" source="',["{",[[0,"source"]]],'" type="',["{",[[0,"type"]]],'">\n			<img src="',["{",[[0,"anotheruserselfpic"]]],'">\n		</div> \n		']],"\n		",["#",[[0,"each"],[0,"anotherUserFeed"]],['\n			<div class="ufeed" likeid="',["{",[[0,"likeid"]]],'" source="',["{",[[0,"source"]]],'" type="',["{",[[0,"type"]]],'">\n				<img src="',["{",[[0,"low"]]],'">\n			</div>\n		']]])),Template.__define__("nothing",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"anotheruserselfpic"]],['\n		<div class="userfeed" likeid="',["{",[[0,"likeid"]]],'" source="',["{",[[0,"source"]]],'" type="',["{",[[0,"type"]]],'">\n			<img src="',["{",[[0,"anotheruserselfpic"]]],'">\n		</div> \n		']],"\n		",["#",[[0,"each"],[0,"anotherUserFeed"]],['\n			<div class="feed" likeid="',["{",[[0,"likeid"]]],'" source="',["{",[[0,"source"]]],'" type="',["{",[[0,"type"]]],'">\n				<img src="',["{",[[0,"low"]]],'">\n			</div>\n		']]])),Template.__define__("preload",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"eachfeed"]],['\n		<div class="feed" likeid="',["{",[[0,"likeid"]]],'" source="',["{",[[0,"source"]]],'" type="',["{",[[0,"type"]]],'">		  \n			<img src="',["{",[[0,"low"]]],'">					\n		</div>\n	  ']]])),Template.__define__("onetwo",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"eachfeed"]],['\n		<div class="feed" likeid="',["{",[[0,"likeid"]]],'" source="',["{",[[0,"source"]]],'" type="',["{",[[0,"type"]]],'">		  \n			<img src="',["{",[[0,"low"]]],'">					\n		</div>\n	  ']]])),Template.__define__("onethree",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"eachfeed"]],['\n		<div class="feed" likeid="',["{",[[0,"likeid"]]],'" source="',["{",[[0,"source"]]],'" type="',["{",[[0,"type"]]],'">\n			<img src="',["{",[[0,"low"]]],'">\n		</div>\n	  ']]])),Template.__define__("onefeed",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"eachfeed"]],['\n		<div class="feed" likeid="',["{",[[0,"likeid"]]],'" source="',["{",[[0,"source"]]],'" type="',["{",[[0,"type"]]],'">\n			<img src="',["{",[[0,"low"]]],'">\n		</div>\n	  ']]])),Template.__define__("oneglobal",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"eachfeed"]],['\n		<div class="feed" likeid="',["{",[[0,"likeid"]]],'" source="',["{",[[0,"source"]]],'" type="',["{",[[0,"type"]]],'" style="background-color: #FEC739;">\n			<img src="',["{",[[0,"low"]]],'">\n		</div>\n	  ']]])),Template.__define__("onepopular",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"eachfeed"]],['\n		<div class="feed" likeid="',["{",[[0,"likeid"]]],'" source="',["{",[[0,"source"]]],'" type="',["{",[[0,"type"]]],'" style="background-color: #5FC486;">		  \n			<img src="',["{",[[0,"low"]]],'">					\n		</div>\n	  ']]])),Template.__define__("onehash",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"eachfeed"]],['\n		<div class="feed" likeid="',["{",[[0,"likeid"]]],'" source="',["{",[[0,"source"]]],'" type="',["{",[[0,"type"]]],'" style="background-color: #3C7DFF;">		  \n			<img src="',["{",[[0,"low"]]],'">					\n		</div>\n	  ']]])),Template.__define__("static",Package.handlebars.Handlebars.json_ast_to_func(['<div id="myFeed" class="globalFeed">\n			<img class="insidefeed" src="images/gf.png">\n	</div>\n	<div id="globalFeed" class="globalFeed">\n			<img class="insidefeed" src="images/g.png">\n	</div>\n	 <div id="popular" class="popular"> \n			<img class="insidefeed" src="images/p.png">\n	</div> \n	<div id="hash" class="hash">      \n		  <img class="insidefeed" src="images/hash.png">\n	</div>'])),Template.__define__("search",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"search"]],['\n		<div class="feed" likeid="',["{",[[0,"likeid"]]],'" source="search">\n		  <div class="feedImages"> \n			<img src="',["{",[[0,"low"]]],'">\n		  </div>          \n		</div>\n	  ']]])),Template.__define__("popular",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"feeds"]],['\n		<div class="feed" likeid="',["{",[[0,"likeid"]]],'" source="popular">\n		  <div class="feedImages"> \n			<img src="',["{",[[0,"low"]]],'">\n		  </div>          \n		</div>\n	  ']]])),Template.__define__("globalfeed",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"feeds"]],['\n		<div class="feed" likeid="',["{",[[0,"likeid"]]],'"  source="globalfeed">\n		  <div class="feedImages"> \n			<img src="',["{",[[0,"low"]]],'">\n		  </div>          \n		</div>\n	  ']]])),Template.__define__("recommendingtemplate",Package.handlebars.Handlebars.json_ast_to_func(['<!-- <div class="right">\n	<div id="unseenCount">',["{",[[0,"unseenCount"]]],' </div>\n	<div class="recommendImages"> \n	<img src="images/rightArrow.png">\n	  </div>          \n		</div> -->\n	  ',[">","unseen"],"\n	  \n	  ",[">","seen"]])),Template.__define__("seen",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"recomm"]],['\n		<div class="recommend feed seen" likeid="',["{",[[0,"likeid"]]],'"  source="recommseen">\n		  <div class="recommendImages"> \n			<img src="',["{",[[0,"low"]]],'">\n		  </div>\n		</div>\n	  ']]])),Template.__define__("unseen",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"recomm"]],['\n		<div class="recommend feed unseen" likeid="',["{",[[0,"likeid"]]],'"  source="recommunseen">\n		  <div class="recommendImages"> \n			<img src="',["{",[[0,"low"]]],'">\n		  </div>\n		</div>\n	  ']]])),Template.__define__("feedtemplate",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"feeds"]],['\n		<div class="feed" vote="',["{",[[0,"voting"]]],'" likeid="',["{",[[0,"likeid"]]],'" source="like">\n		  <div class="feedImages"> \n			<img src="',["{",[[0,"low"]]],'">\n		  </div>          \n		</div>\n	  ']]])),Template.__define__("Section4",Package.handlebars.Handlebars.json_ast_to_func(['<div id="wrapperSec">\n	\n	<div id="section4" data-step="4" data-intro="Fun part." data-position=\'top\'>      \n	  ',[">","bigImage"],"\n	</div> \n	\n	",[">","myselfBig"],"\n\n\n	",[">","recommending"],"\n	",[">","recommended"],"\n	",[">","vote"],"\n	",[">","groupvote"],"        \n  </div>"])),Template.__define__("recommended",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"recents"]],['\n		<div class="recomm" type="ed" style="left : ',["{",[[0,"left"]]],"%;top:",["{",[[0,"top"]]],'%;" whoid="',["{",[[0,"whoid"]]],'" recomid="',["{",[[0,"_id"]]],'">          \n		  <!-- <div > -->\n			  <img class="receiver" src="',["{",[[0,"who"]]],'">\n		  <!-- </div>\n		  <div > -->\n				<img class="sender" src="',["{",[[0,"profile_picture"]]],'">\n		  <!-- </div> -->\n		</div>\n	']]])),Template.__define__("recommending",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"recents"]],['\n		<div class="recomm" style="left : ',["{",[[0,"left"]]],"%;top:",["{",[[0,"top"]]],'%;" whoid="',["{",[[0,"whoid"]]],'" type="ing" recomid="',["{",[[0,"_id"]]],'">          \n		  <!-- <div> -->\n			  <img class="receiver" src="',["{",[[0,"who"]]],'">\n		  <!-- </div>\n		  <div> -->\n				<img class="sender" src="',["{",[[0,"profile_picture"]]],'">\n		  <!-- </div> -->\n		</div>\n	']],"\n	",["#",[[0,"each"],[0,"recentstwo"]],['\n		<div class="recomm" style="left : ',["{",[[0,"left"]]],"%;top:",["{",[[0,"top"]]],'%;" whoid="',["{",[[0,"whoid"]]],'" type="ing" recomid="',["{",[[0,"_id"]]],'">          \n		  <!-- <div> -->\n			  <img class="receiver" src="',["{",[[0,"who"]]],'">\n		 <!--  </div>\n		  <div> -->\n				<img class="sender" src="',["{",[[0,"profile_picture"]]],'">\n		  <!-- </div> -->\n		</div>\n	']]])),Template.__define__("vote",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"votes"]],['\n		\n		  <img class="voting" style="left : ',["{",[[0,"left"]]],"%;top:",["{",[[0,"top"]]],'%;" myid="',["{",[[0,"followid"]]],'" votingid="',["{",[[0,"_id"]]],'" src="',["{",[[0,"profile_picture"]]],'">    \n	']]])),Template.__define__("groupvote",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"votes"]],['\n		<div class="grouping" style="left : ',["{",[[0,"left"]]],"%;top:",["{",[[0,"top"]]],'%;" myid="',["{",[[0,"followid"]]],'" votingid="',["{",[[0,"_id"]]],'">\n			',["#",[[0,"each"],[0,"picture"]],['\n				<img src="',["{",[[0]]],'">\n			']],"\n		</div>\n	"]]])),Template.__define__("bigImage",Package.handlebars.Handlebars.json_ast_to_func(['<div class="bigFeed" id="carousel"> \n	  ',["#",[[0,"isolate"]],['   \n	  	<img id="high" src="',["{",[[0,"high","std"]]],'">\n		<img id="low" src="',["{",[[0,"low","low"]]],'">\n	  ']],'\n		<div id="quadrant">\n		 \n			<!-- <div id="loveQuadrant"> LOVE </div>\n			<div id="promoteQuadrant"> P<br>R<br>O<br>M<br>O<br>T<br>E<br> </div>  -->\n			<!-- <div id="loveQuadrant"><input type="range" name="points" id="points" value="50" min="0" max="100" style="width: 95%;"></div> -->\n			<div id="hprogressBar" class="ui failed progress">\n				<div></div>\n				<hr style="height:2px;width:100%;margin-bottom:-8px;padding:0px;margin-top: 0px;border-top-width: 0px;" />\n			</div>\n			<div id="inerhprogressBar">\n				<i class=\'big bullhorn icon\' style="margin-left: 0px"></i>\n			</div>\n			<div id="outer" class="ui warning progress">\n				<div class="inner"  id="verticalprogress"></div> \n				<hr style="height:100%;width:2px;margin-bottom:-8px;padding:0px;" />\n			</div>\n\n			<div id="inner-inner" >\n				<i class=\'big thumbs up icon\' style="margin-left: 0px;"></i>\n			</div>      \n			<div id="inerhprogressBar">\n				<i class=\'big bullhorn icon\' style="margin-left: 0px"> </i>\n			</div>\n			<!-- <div id="fifth" class="mainQuadrant" <img src="images/eagle.png"></div>\n			<div id="sixth" class="mainQuadrant" ><img src="images/rooster.png"></div>\n			<div id="seventh" class="mainQuadrant" ><img src="images/mouse.png"></div> \n			<div id="eight" class="mainQuadrant"><img src="images/seagul.png"></div> -->\n\n  \n\n		</div>\n	</div>'])),Template.__define__("myselfBig",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"recents"]],['\n	  <div class="recent littleBig" style="left : ',["{",[[0,"left"]]],"%;top:",["{",[[0,"top"]]],'%">\n		<img src="',["{",[[0,"profile_picture"]]],'"> \n	  </div>\n  ']]])),Template.__define__("chatting",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"if"],[0,"recommending"]],['   \n  <textarea name="header">\n  	',["{",[[0,"recommending","top"]]],"@",["{",[[0,"recommending","followusername"]]],["{",[[0,"recommending","left"]]],'@youiest \n  </textarea> \n  <input type="button" id="send" value="Send">  \n  ']],"\n  ",["#",[[0,"if"],[0,"recommended"]],["\n	  ",["#",[[0,"each"],[0,"eachcomment"]],["\n		  ",["{",[[0,"comment"]]],"\n		  <br>\n	  "]],"  \n  "]],"\n  ",["#",[[0,"if"],[0,"creator"]],['\n		  <div id="creatorProfile" type="creator" myid="',["{",[[0,"creator","clientid"]]],'"> \n			  <img src="',["{",[[0,"creator","profile_picture"]]],'">\n			  ',["{",[[0,"creator","username"]]],'<br>              \n			((Double Tap User to Follow))\n		  </div>\n		  <br>\n		  <div id="sharePic" style="float: right;"><i class="huge upload icon"></i></div>\n		  <div id="sharePicInsta" style="float: right;"><i class="huge italic icon"></i></div>\n  ']]])),Template.__define__("chatfeature",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"each"],[0,"chat"]],['\n	  <div class="ui feed segment">\n		<div class="label ',["{",[[0,"position"]]],'float">\n		  <img src="',["{",[[0,"pic"]]],'">\n		</div>\n		<div class="content ',["{",[[0,"position"]]],'float">\n		  <div class="date">\n		   \n		  </div>\n		  <div class="summary" myid="',["{",[[0,"_id"]]],'">\n			 ',["{",[[0,"message"]]],"\n		  </div>\n	  </div>\n	</div>\n   "]]]))
}(),function(){function e(){var e=Session.get("clientid");if(App.isAdmin(e)){$("#adminPanel").show(),$("#gamemenu").append('<div class="item" id="admin"> Admin </div>'),$("#admin").append('<div class="menu" id="adminCategory"> </div>');var n=$("#adminCategory");$(n).append('<a id="admin" class="menu"><i class="adn icon"></i> Admin Panel </a><br><br>'),$(n).append('<a id="emails" class="menu"><i class="mail icon"></i> Email </a><br><br>'),$(n).append('<a id="startContest" class="menu"> Start Contest </a><br><br>'),$("#admin").hammer().on("tap",function(){$("#adminPanel").show()}),$("#adminPanelCloseButton").hammer().on("tap",function(){$("#adminPanel").hide()}),$("#emails").hammer().on("tap",t)}else $("#admin").remove(),$("#emails").remove()}function t(){$("#emailFormat").show(),$("#emailDone").hammer().on("tap",function(){$(this).remove(),$("#emailFormat").hide();var e=$("#emailHeader").html();Meteor.call("sendNewsLetters",e,function(){toast(i18n.__("batchstarted"))})}),App.leadersboard(),App.knowsYouBetter(Session.get("clientid")),App.youKnowsBetter(Session.get("clientid"))}function n(e){return"625237041"==Session.get("clientid")||"363620479"==e||"487690035"==e?!0:!1}function i(e){return window.localStorage.getItem(e)}function o(){$("#emailLeadersboard").html(""),$("#emailLeadersboard").append("<div style='height:10%;width:100%;position:relative;'> leadersboard </div>");var e=Me.find({},{sort:{score:-1},limit:3}),t="<div style='height:90%;width:100%;position:relative;'> ";e.forEach(function(e){t+=c(e.username,e.profile_picture,e.score)}),t+="</div>",$("#emailLeadersboard").append(t)}function r(e){$("#emailKnowYouBetter").html(""),$("#emailKnowYouBetter").append("<div style='height:10%;width:100%;position:relative;'> Who knows you better? </div>");var t=Feed.find({followid:e},{sort:{distance:-1},limit:3}),n="<div style='height:90%;width:100%;position:relative;'> ";t.forEach(function(e){n+=c(e.whousername,e.who,e.distance)}),n+="</div>",$("#emailKnowYouBetter").append(n)}function a(e){$("#emailYouKnowBetter").html(""),$("#emailYouKnowBetter").append("<div style='height:10%;width:100%;position:relative;'> Whom you know better? </div>");var t=Feed.find({whoid:e},{sort:{distance:-1},limit:3}),n="<div style='height:90%;width:100%;position:relative;'> ";t.forEach(function(e){n+=App.createString(e.followusername,e.profile_picture,e.distance)}),n+="</div>",$("#emailYouKnowBetter").append(n)}function s(){var e=$("#emailHeaderMessage").val();$("#emailHeaderMessage").remove(),$(this).remove(),$("#emailHeader").html(e)}function c(e,t,n){return'<div style="width: 30%;position: relative;float: left;margin-left: 2%;margin-top: 1%;height: 90%;"> <a href="http://instagram.com/'+e+'"> <img style="width: 100%;height: 80%;" src="'+t+'"></a><div> '+n+" </div></div>"}Router.map(function(){this.route("admin",{path:"/admin",template:"admin",data:function(){Session.set("clientid",i("clientid")),Meteor.documentReady()}})}),void 0===window.App&&(App={}),App.setAdminParameters=e,App.onEmailSend=t,App.isAdmin=n,App.leadersboard=o,App.knowsYouBetter=r,App.youKnowsBetter=a,App.onClickEmailPreview=s,App.createString=c,Template.admin.totalUser=function(){return Me.find({}).count()},Template.admin.users=function(){return Me.find({},{sort:{dalreadyloggedin:-1}})},Template.admin.rendered=function(){$("#adminPanel").show(),$("#admin").hammer().off("tap"),$("#admin").hammer().on("tap",function(){$("#adminPanel").show()}),$("#showList").hammer().off("tap"),$("#showList").hammer().on("tap",function(){$("#adminTableCat").hide(),$("#adminListCat").css({display:"block"})}),$("#showTable").hammer().off("tap"),$("#showTable").hammer().on("tap",function(){$("#adminListCat").hide(),$("#adminTableCat").css({display:"block"})}),$("#adminPanelCloseButton").hammer().off("tap"),$("#adminPanelCloseButton").hammer().on("tap",function(){$("#adminPanel").hide()}),$("#addKeywordButton").hammer().off("tap"),$("#addKeywordButton").hammer().on("tap",function(){var e=null;e=$("#addKeywordText").val(),e&&(SponserKeyword.insert({keyword:e,date:new Date}),$("#addKeywordText").val(""))}),$("#emailClose").hammer().off("tap"),$("#emailClose").hammer().on("tap",function(){$("#emailFormat").hide()});var e=$(".adminTotal th"),t=[];$(".adminTable").each(function(e,n){for(var i=$(n).children("td"),o=3,r=i.length;r>o;o++)t[o]||(t[o]=0),t[o]+=Number($(i[o]).text())});for(var n=0,i=t.length;i>n;n++)$(e[n]).text(t[n])},Template.admin.isAdmin=function(){var e=Session.get("clientid");return console.log(e),"625237041"==e||"363620479"==e||"487690035"==e?!0:!1},Template.editkeyword.eachkeyword=function(){try{return SponserKeyword.find({},{sort:{date:-1}})}catch(e){console.log(e),ErrorUpdate.insert({error:e,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.editkeyword.eachkeyword"})}},Template.editkeyword.eachkeyword=function(){try{return SponserKeyword.find({})}catch(e){console.log(e),ErrorUpdate.insert({error:e,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.editkeyword.eachkeyword"})}},Template.editkeyword.events({"click li":function(){SponserKeyword.remove({_id:this._id})}})}(),function(){Router.map(function(){this.route("picture",{path:"/picture/:id",template:"picture",data:function(){var e=this.params;e.id&&(guestFlag=!0,Session.set("clientid","guest"),Session.set("actionFollow",null),Session.set("currentBig",e.id),Meteor.call("guestFeed",e.id),Meteor.subscribe("votes",Session.get("currentBig")),Meteor.subscribe("media",Session.get("currentBig")),Meteor.subscribe("recommtwo",Session.get("currentBig"),Session.get("clientid")),Meteor.suscribeMeteor("guest"))}}),this.route("email",{path:"/email/:id",template:"verify",data:function(){var e=this.params;console.log(e.id+" but guest user");var t=e.id;t&&(window.localStorage.setItem("emailtoken",t),Meteor.call("verifyPicture",t,function(e,t){t&&(console.log(t),toast("you have been added in the group"),window.localStorage.setItem("clientid",t.clientid),window.localStorage.setItem("likeid",t.likeid),window.location.href="/"),e&&(console.log(e),$("#emailmessage").html("Failed"))}))}}),this.route("verify",{path:"/verify/:id",template:"verify",data:function(){var e=this.params;console.log(e.id+" but email");var t=e.id;t&&Meteor.call("verifyemails",t,function(e,t){t&&(console.log(t),$("#emailmessage").html(t)),e&&(console.log(e),$("#emailmessage").html("Failed"))})}})}),Template.loginwithservies.rendered=function(){$("#loginWithInstagram").hammer().off("tap"),$("#loginWithInstagram").hammer().on("tap",loginWithInstagram),$("#loginWithFacebook").hammer().off("tap"),$("#loginWithFacebook").hammer().on("tap",loginWithFacebook),$("#loginWithGoogle").hammer().off("tap"),$("#loginWithGoogle").hammer().on("tap",loginWithGoogle)}}(),function(){function e(e,t){return window.localStorage.setItem(e,t)}function t(e){return window.localStorage.getItem(e)}function n(e){g=$(this);var n=e.gesture.center.pageX,o=e.gesture.center.pageY,a=$(e.currentTarget).offset(),c=($("#surveybig"),$(this).height()),l=$("body").width(),u=($(".quadrant").height(),n/l*100),d=o/c*100;d=o-a.top;d=d/c*100,u=Math.round(u),d=Math.round(d);var f=$(this).attr("likeid");s(u,$("#hprogressBar"),d,$("#outer"),f),Session.set("currentBig",f);var p=Session.get("clientid"),h=null;h=p.match("survey")?"/images/face.jpg":t("profile_picture"),voteFlag=!1;var m=(new Date).getTime();d+=40;{var v={checked:!1,place:"",profile_picture:h,followid:Session.get("clientid"),likeid:f,left:u,top:d,date:m},y=Votes.findOne({likeid:f,followid:Session.get("clientid")});$(".voting")}if(y){var b=$(".voting[votingid='"+y._id+"']");0==b.length?(Votes.update({_id:y._id},{$set:{left:v.left,top:v.top,date:v.date}}),i(this)):(Votes.update({_id:y._id},{$set:{left:v.left,top:v.top,date:v.date}}),b.css({left:u+"%",top:v.top-40+"%"}));var _=App.checkQuadrant(u,d);App.bug("place "+_)}else currentMoveVote=Votes.insert(v),i(this,v);g=g.next(".bigFeed"),setTimeout(r,2e3)}function i(e,t){var n=($(e).children(".voting"),null);Meteor.call("getVotes",Session.get("currentBig"),function(i,r){if(r){t&&r.push(t);for(var a=0,s=r.length;s>a;a++)n=r[a],(Session.get("mainSurvey")!=n.followid||n.followid==Session.get("clientid"))&&$(e).append(o(n.left,n.top-40,"%",n.profile_picture,n._id))}})}function o(e,t,n,i,o){return'<div class="voting" votingid="'+o+'" style="left : '+e+n+";top:"+t+n+';">  <img src="'+i+'">  </div>'}function r(){bigsurveyHeight=$(".quadrant").height(),m+=bigsurveyHeight,document.getElementById("surveybig").scrollTop=m}function a(e,t){return 0!=$(".bigFeed[likeid='"+e+"']").length?null:'<div class="bigFeed bigSecondFeed medium ui image" likeid='+e+' style="margin-top:50px;"> <img src='+t+'><div class="quadrant secondquadrant" id='+e+'><div id="hprogressBar" class="ui failed progress"><div></div><hr style="height:2px;width:100%;margin-bottom:-8px;padding:0px;margin-top: 0px;border-top-width: 0px;" /></div><div id="inerhprogressBar"><i class="big bullhorn icon"style="margin-left: 0px"/></div><div id="outer" class="ui warning progress"><div class="inner"  id="verticalprogress"></div> <hr style="height:100%;width:2px;margin-bottom:-8px;padding:0px;" /></div><div id="inner-inner" onmousedown :return false;><i class="big thumbs up icon" style="margin-left: 0px;"onmousedown :return false;/></div></div>'}function s(e,t,n,i,o){var r="div#"+o,a=$(r).children("#hprogressBar"),s=e+5;$(r).find("div#inerhprogressBar").transition({left:s+"%"},500),$(a).find("div").transition({width:s+"%"},500),promoteper=100-n,cursorlove=n,$(r).find("#inner-inner").css("top",cursorlove+"%"),$("#inner-inner").transition({top:cursorlove+"%"}),$(r).find("#verticalprogress").css("height",promoteper+"%"),$(r).find("#outer").transition({opacity:"0.0"},500,"linear").transition({opacity:"1.0"},100,"linear"),$(r).find(".inner").transition({opacity:"0.0"},500,"linear").transition({opacity:"1.0"},100,"linear"),$(r).find("div#hprogressBar").transition({opacity:"0.0"},500,"linear").transition({opacity:"1.0"},100,"linear"),$(a).find("div").transition({opacity:"0.0"},500,"linear").transition({opacity:"1.0"},100,"linear"),$(r).find("div#inerhprogressBar").transition({opacity:"0.0"},1,"linear").transition({opacity:"1.0"},100,"linear"),$(r).find("#inner-inner").transition({opacity:"0.0"},500,"linear").transition({opacity:"1.0"},100,"linear")}function c(e){var t=g,n=$(t).offset(),i=e.gesture.center.pageY,o=i-n.top;if(bigtop=Math.round(o)-5,promoteper=100-(bigtop-63),100>=promoteper){$("#verticalprogress").css("height",promoteper+"%");var r=100-(promoteper+2);$("#inner-inner").css("top",r+"%"),console.log(r+"/"+t)}}function l(){}function u(e){e.preventDefault(),e.gesture&&e.gesture.preventDefault(),$("#inner-inner").css({height:"65px",width:"78px","font-size":"2em"}),$("#outer").transition({opacity:"1.0"},500,"linear")}function d(e){e.preventDefault(),e.gesture&&e.gesture.preventDefault();var t=e.gesture.center.pageX,n=$("#surveybig").width(),i=t/n*100;percent=Math.round(i),90>=i&&($("#inerhprogressBar").css("left",percent+"%"),$("#hprogressBar").find("div").css("width",percent+"%"))}function f(){}function p(){event.preventDefault(),event.gesture&&event.gesture.preventDefault(),$("#inerhprogressBar").css({height:"57px",width:"65px","font-size":"x-large",top:"84%"})}var h=null;window.App||(App={}),Router.map(function(){this.route("survey",{path:"/survey/:user",template:"survey",data:function(){h=t("clientid"),h||(h=t("survey")),h||(h="survey"+Random.id()),console.log(h),Session.set("clientid",h),e("survey",h),Meteor.documentReady(),Meteor.suscribeMeteor(h);var i=this.params,o=i.user;Meteor.call("getUserIdFromUsername",o,function(e,t){t&&(Meteor.subscribe("votesimgs",t._id),mainSurvey=t._id,Session.set("mainSurvey",t._id),Session.set("surveyPic",t.profile_picture),Meteor.call("getsurvey",mainSurvey,function(e,t){if(e&&console.log("err"+e),t){$("#surveybig").html("");for(var i=0;i<=t.length;i++)t[i]&&t[i].likeid&&t[i].low&&($("#surveybig").append(a(t[i].likeid,t[i].low)),Meteor.subscribe("votes",t[i].likeid)),Meteor.subscribe("votes",$(".bigFeed:first").attr("likeid"));$(".bigFeed").hammer().off("tap"),$(".bigFeed").hammer().on("tap",n),$("#hprogressBar").hammer().on("touch",p),$("#hprogressBar").hammer().on("release",f),$("#hprogressBar").hammer().on("drag",d),$("#outer").hammer().on("touch",u),$("#outer").hammer().on("release",l),$("#outer").hammer().on("drag",c),$("#inner-inner").hammer().on("touch",u),$("#inner-inner").hammer().on("release",l),$("#inner-inner").hammer().on("drag",c),$("#inerhprogressBar").hammer().on("touch",p),$("#inerhprogressBar").hammer().on("release",f),$("#inerhprogressBar").hammer().on("drag",d)}})),Meteor.subscribe("votesimgs",t._id)})}})}),Deps.autorun(function(){Session.get("chatid")&&Meteor.subscribe("votes",$(".bigFeed:first").attr("likeid"))});var g=null,m=0;Template.eachBig.perbig=function(){return Votes.find({followid:Session.get("mainSurvey")})},Template.eachBig.rendered=function(){firstTimeLoginFlag&&(g=$(".bigFeed:first"),firstTimeLoginFlag=!1),$(".bigFeed").hammer().off("tap"),$(".bigFeed").hammer().on("tap",n)},Template.youiestheader.surveyPic=function(){return Session.get("surveyPic")},Template.srvyvotes.votes=function(){try{return Votes.find({likeid:Session.get("currentBig")})}catch(e){console.log(e),ErrorUpdate.insert({error:e,date:new Date,side:"client","function":"Template.srvyvotes.votes"})}}}(),function(){function e(){var e=!1;Package.reload.Reload._reload=function(){if(!e){e=!0;var t=function(){};t()}}}function t(e,t){return window.localStorage.setItem(e,t)}function n(e){return window.localStorage.getItem(e)}function i(){for(var e=0;e<arguments.length;e++)console.log(arguments[e])}function o(e){return"625237041"==e||"363620479"==e||"487690035"==e?(r(),void 0):(Meteor.subscribe("follows",Session.get("clientid")),Meteor.subscribe("me",Session.get("clientid")),Meteor.subscribe("commentsent",Session.get("clientid")),Meteor.subscribe("keyword"),Meteor.subscribe("onefeed",Session.get("clientid")),Meteor.subscribe("onerecent",Session.get("clientid")),Meteor.subscribe("followsgroup",Session.get("clientid")),Meteor.subscribe("usersession",Session.get("clientid")),Meteor.subscribe("usersvotetapmate",Session.get("clientid")),void 0)}function r(){Meteor.subscribe("follows",Session.get("clientid")),Meteor.subscribe("me",-2),Meteor.subscribe("commentsent",Session.get("clientid")),Meteor.subscribe("keyword"),Meteor.subscribe("onefeed",Session.get("clientid")),Meteor.subscribe("onerecent",Session.get("clientid")),Meteor.subscribe("followsgroup",Session.get("clientid")),Meteor.subscribe("usersession",Session.get("clientid")),Meteor.subscribe("usersvotetapmate",Session.get("clientid"))}function a(){try{Ci=window.localStorage.getItem("state"),clientid=window.localStorage.getItem("clientid"),Ci&&(yn(Ci,vn),window.localStorage.setItem("state",""),nn("Login in process.")),Ci||clientid||(l(),Meteor.loginWithInstagram({requestPermissions:"basic",requestOfflineToken:!0},vn))}catch(e){console.log(e),ErrorUpdate.insert({error:e,date:new Date,side:"client","function":"loginOnceReady"})}}function s(){var e=$("#seEmailLogin").val(),n=$("#sePassLogin").val();Meteor.call("loginWithHashRepublic",e,n,function(n,i){i&&(t("email",e),t("clientid",e),Session.set("clientid",e),t("welcomeAlert",!0),t("profile_picture",i.instagramFace),Ot())})}function c(e){$("#"+e).show(),$("#"+$("#"+e).attr("ref")).show()}function l(){return!0}function u(){ln(),Meteor.call("tryToMerge",zi,function(){})}function d(){console.log("onLoginWithTapmate");var e=$("#seEmail").val(),t=$("#sePassThankyou1").val(),n=$("#sePassThankyou2").val();t==n?t?($("#passwordError").css("display","none"),Meteor.call("verifyHashEmailToken",fi,t,f),Meteor.loginWithPassword(e,t,m),qi=e):($("#passwordError").css("display","block"),$("#passwordError div").html("Please enter a password.")):($("#passwordError").css("display","block"),$("#passwordError div").html("Password do not match."))}function f(e,t){console.log("commonClose"),t?(alert("Thanks! Now return to the app."),window.close()):alert("something's not right")}function p(){console.log("welcomeAlertPopup");var e=n("welcomeAlert");console.log(e),e||($("#welcomePopUp").show(),$("#welcomePopUpBackground").show())}function h(){{var e=$("#seEmail").val();$("#sePass").val()}console.log("onSignUpWithTapmate"),on(e)?(t("email",e),t("clientid",e),Session.set("clientid",e),t("profile_picture","/images/face.jpg"),p(),t("welcomeAlert",!0),Ot(),Meteor.call("verifyHashEmail",e,function(){})):g("not a valid email")}function g(e){$("#errorMessage").html(e),$("#seError").css("display","block")}function m(e){e?(g(e.reason),$("#passwordError").css("display","block"),$("#passwordError div").html(e.reason)):(t("clientid",qi),$("#welcomePopUp").show(),$("#welcomePopUpBackground").show(),Ot())}function v(){$("#loginScreen").show(),$("#Main").hide(),Di={},language={},jt(),Fn(so,co,lo,uo),setTimeout(ii,50),setTimeout(Ot,60),setTimeout(Cn,70),setTimeout(si,80),setTimeout(k,90),setTimeout(xn,100),setTimeout(Wn,110),setTimeout(ei,120),setTimeout(dt,150)}function y(){Meteor.status().connected&&z(this._id)}function b(){var e=$(this).attr("myid");Chat.remove({_id:e})}function w(){(new Date).getTime();if(Mi)return window.localStorage.setItem("database","{}"),window.localStorage.setItem("language",""),void 0;Wi||(Wi={});(new Date).getTime();S("Follows"),S("Feed"),S("SponserKeyword"),S("FollowsGroup"),S("UsersVote"),T()}function k(){Ii=(new Date).getTime()}function T(){Ai=(new Date).getTime();var e=((new Date).getTime()-Ii)/1e3,t={clientid:Session.get("clientid"),username:Session.get("username"),InDate:Ii,OutDate:Ai,sessionTime:e,width:$(window).width(),height:$(window).height()};UserSession.insert(t)}function S(e){var t=((new Date).getTime(),window[e].find({}));Wi[e]=new Array,t.forEach(function(t){Wi[e].push(t._id),t.cache=!0,window.localStorage.setItem(t._id,EJSON.stringify(t))}),window.localStorage.setItem("database",EJSON.stringify(Wi))}function x(){Wi=window.localStorage.getItem("database"),Wi=EJSON.parse(Wi),E("Follows"),E("Feed"),E("SponserKeyword"),E("FollowsGroup"),E("UsersVote")}function E(e){var t=((new Date).getTime(),[]);if(Wi){var n=Wi[e];if(n){var i=null;if(n){for(var o=0,r=n.length;r>o;o++)if(n[o]&&window[e]){var a=window[e]._collection.findOne({_id:n[o]});a||(t.push(n[o]),i=window.localStorage.getItem(n[o]),i=EJSON.parse(i),window[e]._collection.insert(i))}"Feed"==e&&C(t)}}}}function C(e){Meteor.call("checkOldCollection",e,Session.get("clientid"),function(e,t){if(t)for(var n=0,i=t.length;i>n;n++)Feed._collection.update({_id:t[n]},{$set:{display:"n",date:(new Date).getTime()}})})}function P(){(new Date).getTime();try{J(),Session.set("currentBig",$(this).attr("likeid")),xt(),oi()}catch(e){console.log(e),ErrorUpdate.insert({error:e,clientid:Session.get("clientid"),date:new Date,side:"client","function":"tapOnRecentIcons"})}}function D(){var e=((new Date).getTime(),this);$(".statename").html("(Chat Mode)").css({"font-size":"48%","float":"right",top:"57%",left:"0%"}),$(".chatbox").show(),$("#chatinputbox").attr("placeholder",Di.__("chathere"));var t=$(e).attr("myid"),n=$(e).attr("type");if("group"==n)return FollowsGroup.remove({_id:t}),void 0;if(t){Session.set("chatid",t);var i=Follows.findOne({followid:t});i&&Session.set("senderpic",i.profile_picture)}}function O(){console.log("close chat box"),$(".statename").html("").css({"font-size":"48%","float":"right",top:"57%",left:"0%"}),$(".chatbox").hide()}function M(){var e=((new Date).getTime(),$("#chatinputbox").val());if(console.log(e),e){var t=I();Chat.insert({clientid:Session.get("clientid"),chatid:Session.get("chatid"),message:e,position:"right",date:t,status:"client"}),Chat.insert({chatid:Session.get("clientid"),clientid:Session.get("chatid"),message:e,position:"left",date:t,status:"client"})}$("#chatinputbox").val("")}function I(){Yi=new Date;var e=new Date(Date.UTC(Yi.getUTCFullYear(),Yi.getUTCMonth()-1,Yi.getUTCDay(),0,0,0,0));return e.getTime()}function A(e,t,n,i){console.log(t);(new Date).getTime();clearTimeout(ji);var o=this,r=$(o).attr("myid");if(t&&(r=t),console.log(r),r==Session.get("userid"))return $(".statename").html("").css({"font-size":"48%","float":"right",top:"57%",left:"0%"}),Session.set("userid",null),Session.set("userselfpic",""),void 0;if(r!=Session.get("clientid")){var a=null;a=$(this).children("img").attr("src"),console.log(a),n&&(a=n),t||$(".statename").html("(User's Feeds)").css({"font-size":"48%","float":"right",top:"57%",left:"0%"}),i||Session.set("userid",r),Session.set("userselfpic",a),Meteor.call("usersVotesAdd",Session.get("clientid"),r),Meteor.subscribe("usersvote",-1,-1),Meteor.subscribe("usersvote",Session.get("clientid"),r)}}function N(){(new Date).getTime();Ji=!0,Qi=$(this).addClass("activeGroup").attr("myid"),Session.set("groupflag",!0),$("#showcheckmark").hide(),$("#hidecheckmark").show(),B(Qi,"activeGroup")}function F(){(new Date).getTime();en("Group Selected"),$(".active").removeClass("active"),$("#keyboard").hide("hide");var e=$(this).attr("myid");Session.set("activeFollows",e),B(e,"active"),si(),setTimeout(function(){return Ji?(Ji=!1,void 0):(ri(),$(".currentFollowimg").attr("src","./images/group.png"),void 0)},2e3)}function B(e,t){var n=((new Date).getTime(),FollowsGroup.findOne({_id:e}));if(n){var i=n.follows;if(i)for(var o=0,r=i.length;r>o;o++)$(".followsIcons[myid='"+i[o]+"']").addClass(t)}}function L(){var e=$(this).attr("myid");FollowsGroup.remove({_id:e})}function j(){(new Date).getTime();if(Session.get("groupflag")){var e=[],t=[],n=null,i=0;$(".activeGroup").each(function(o,r){if(n=$(r).attr("myid"),n!=Session.get("clientid")){e.push(n);var a=Follows.findOne({followid:n});a&&(t[t.length]=a.profile_picture,i++)}}),Session.set("groupflag",!1),$("#showcheckmark").show(),$("#hidecheckmark").hide(),$(".activeGroup").removeClass("activeGroup"),0==i?en("No users selected."):(Qi?(FollowsGroup.update({_id:Qi},{$set:{clientid:Session.get("clientid"),follows:e,picture:t,count:i}}),$(".activeGroup").removeClass("activeGroup")):FollowsGroup.insert({clientid:Session.get("clientid"),follows:e,picture:t,count:i}),Qi=null,en("Group created."))}else Session.set("groupflag",!0),$("#showcheckmark").hide(),$("#hidecheckmark").show(),V(20,71,Di.__("atheader"),Di.__("atmessage")),en("Add users to create group.")}function R(e){var t=this;ji=setTimeout(function(){U(e,t)},300)}function U(e,t){var n=((new Date).getTime(),null);if(n=t?t:this,$(".active").removeClass("active"),Session.get("groupflag"))$(n).attr("class").match("activeGroup")?$(n).removeClass("activeGroup"):$(n).addClass("activeGroup");else{var i=$(n).attr("myid"),o=Session.get("clientid"),r=$(n).attr("name");i!=o&&en(Di.__("userselected1")+" "+r+","+Di.__("userselected2")),Session.set("activeFollows",i),$(this).addClass("active"),$(".followsIcons").each(function(e,t){t===n&&(Hi=e)}),ri()}}function H(){(new Date).getTime();try{var e=null,t=Session.get("currentBig");return e=Feed.findOne({likeid:t}),e||(e=UsersVote.findOne({likeid:t})),e}catch(n){console.log(n),ErrorUpdate.insert({error:n,clientid:Session.get("clientid"),date:new Date,side:"client","function":"cursorparser"})}}function z(e){(new Date).getTime();try{Feed.remove({_id:e})}catch(t){console.log(t),ErrorUpdate.insert({error:t,clientid:Session.get("clientid"),date:new Date,side:"client","function":"removeCursor"})}}function q(e){(new Date).getTime();try{var t=(e.type,e.likeid),n=null;n=Feed.find({likeid:t,display:"y"}),n.forEach(function(e){e.cache&&Feed._collection.update({_id:e._id},{$set:{display:"n",date:(new Date).getTime()}}),Feed.update({_id:e._id},{$set:{display:"n",date:(new Date).getTime()}})})}catch(i){console.log(i),ErrorUpdate.insert({error:i,clientid:Session.get("clientid"),date:new Date,side:"client","function":"updateCursor"})}}function V(e,t,n,i){(new Date).getTime();Xi&&(clearTimeout(Xi),clearInterval(Gi)),$("#sematicpopup .header").text(n),$("#sematicpopup .content").text(i),$("#sematicpopup").css({left:e-11+"%",top:t+7+"%"}),$("#sematicpopup").addClass("visible"),Xi=setTimeout(function(){$("#sematicpopup").removeClass("visible")},3e3)}function W(){(new Date).getTime();try{Session.set("activeFollows",Session.get("clientid")),$("#outer").animate({opacity:"0.0"},500,"linear"),$("#hprogressBar").animate({opacity:"0.0"},500,"linear"),$("#inner-inner").animate({opacity:"0.0"},500,"linear"),$("#inerhprogressBar").animate({opacity:"0.0"},500,"linear"),Hi=0;{$(".likeActive").removeClass("likeActive")}$(this).addClass("likeActive");var e=Session.get("currentBig"),t=$(this).attr("likeid");if(!t)return $(".statename").html("").css({"font-size":"48%","float":"right",top:"57%",left:"0%"}),Session.set("userid",null),Session.set("userselfpic",""),void 0;e?e!=t?(hi=H(),hi&&(hi.userid=Session.get("clientid"),hi.display="n",hi.date=(new Date).getTime(),q(hi),delete hi._id),J(),Session.set("currentBig",t),ki=!0):(hi=H(),hi&&(hi.userid=Session.get("clientid"),hi.date=(new Date).getTime(),hi.display="n",q(hi),delete hi._id),Session.set("currentBig",null)):(J(),Session.set("currentBig",t)),$(".feed").removeClass("likeActive"),$(this).addClass("likeActive"),bt(),Session.set("actionFollow",null)}catch(n){console.log(n),ErrorUpdate.insert({error:n,date:new Date,side:"client","function":"tapOnFeed"})}}function Y(e,t,n){(new Date).getTime();$("#outer").animate({opacity:"0.8"},100,"linear"),$(".inner").animate({opacity:"0.8"},100,"linear"),$("#hprogressBar").animate({opacity:"0.8"},100,"linear"),$("#inner-inner").animate({opacity:"0.8"},100,"linear"),promoteper=100-(n-63),cursorlove=n-70,$(".inner").css("height","0%"),$(".inner").animate({height:promoteper+"%"},800),$("#inner-inner").css("top","100%"),$("#inner-inner").animate({top:cursorlove+"%"},750),$("#inerhprogressBar").css("left","0%"),t.find("div").css("width","0%"),setTimeout(function(){$("#hprogressBar div").animate({opacity:"0.5"},100,"linear"),$("#inerhprogressBar").animate({opacity:"0.8"},100,"linear");var n=e+2;$("#inerhprogressBar").animate({left:n+"%"},800),t.find("div").animate({width:n+"%"},800)},1500)}function Q(e,t,n){for(var i=((new Date).getTime(),e.follows),o=e.picture,r=0,a=i.length;a>r;r++)GroupVoteRecommend.insert({clientid:i[r],follows:i,picture:o,likeid:Session.get("currentBig"),left:t,top:n,checked:!1});GroupVoteRecommend.insert({clientid:Session.get("clientid"),follows:i,picture:o,likeid:Session.get("currentBig"),left:t,top:n,checked:!1})}function J(){(new Date).getTime();activeLOPArray=[],Session.set("actionFollow",null),Fi=null,$i=null}function X(e){var t=this;setTimeout(function(){G(e,t)},10)}function G(e,t,n){(new Date).getTime();try{VoteStart=(new Date).getTime();var i=e.gesture.center.pageX-ro,o=e.gesture.center.pageY,r=$("#Main").height(),a=$("#Main").width(),s=$("#quadrant").height(),c=i/a*100,l=o/r*100,u=o/s*100;c=Math.round(c)-5,l=Math.round(l)-5,u=Math.round(u)-5;var d=Session.get("activeFollows"),f=Session.get("currentBig"),p=Session.get("actionFollow"),h=!0,g=tt(c,l,!1);if(p){$("#overlay").hide();var m=Votes.findOne({_id:p});return m?(Votes.update({_id:m._id},{$set:{left:c,top:l,place:g}}),$i=m._id,Ni=!1,Y(c,$("#hprogressBar"),u,$("#outer"))):(m=Feed.findOne({_id:p}),m&&(Feed.update({_id:m._id},{$set:{left:c,top:l,place:g}}),Fi=m._id,Ni=!0,Y(c,$("#hprogressBar"),u,$("#outer")))),Session.set("actionFollow",null),void 0}var v=FollowsGroup.findOne({_id:d});if(v&&(Q(v,c,l),d=Session.get("clientid")),Number(Session.get("clientid"))<0&&en("Please login with Instagram to use the app."),f&&d){var y=null,b=null;if(y=H(),!y)return;if(b=Follows.findOne({followid:d}),d==Session.get("clientid")){Y(c,$("#hprogressBar"),u,$("#outer")),h=!1;var _=(new Date).getTime();b||(b={}),n&&(b=n,y=n),profilePic=b.profile_picture;var w={checked:!1,place:g,profile_picture:b.profile_picture,followid:Session.get("clientid"),likeid:y.likeid,low:y.low,left:c,top:l,date:_};Ri.push(d),K(w),$i=Votes.insert(w),Ni=!1,tt(c,l,!0),Fi=null;var k=c+(100-l);Media.update({_id:w.likeid},{$inc:{loud:k,vote:1}}),q(y)}if(h||v){var m=Votes.findOne({followid:Session.get("clientid"),likeid:f});if(m||v){var T=[];v?T=v.follows:T.push(d);for(var S=0,x=T.length;x>S;S++)if(d=T[S],b=Follows.findOne({followid:d}),Number(d)<0&&(console.log("it's a guest user"),b={username:"guest",profile_picture:"images/face.jpg",followid:""+d}),b){var E={type:"r",display:"y",followusername:b.username,profile_picture:b.profile_picture,followid:b.followid,likeid:y.likeid,who:profilePic,whoid:Session.get("clientid"),whousername:Session.get("username"),low:y.low,left:c,top:l,notification:!1,seennotify:!0,tapnotify:!0,date:(new Date).getTime(),distance:0,checked:!1};E.clientid=b.followid,E.source="recommend",E.type=3,E.checked=!1,Z(E),Ri.push(d),Fi=Feed.insert(E),Ni=!0,Media.update({_id:E.likeid},{$inc:{recomend:1}});var C=Session.get("username")+" "+Di.__("hassendpicture");if(TapmateNotification.insert({senderid:b.followid,message:C,notify:!1,low:E.low,likeid:E.likeid}),Y(c,$("#hprogressBar"),u,$("#outer")),Follows.update({_id:b._id},{$inc:{hits:1}}),v);else{var P=Di.__("youRecommendPic1")+b.username+Di.__("youRecommendPic2");en(P)}var b=Follows.findOne({followid:Session.get("clientid")});b&&Follows.update({_id:b._id},{$inc:{hits:2}})}}}Session.set("activeFollows",null)}}catch(D){console.log(D),ErrorUpdate.insert({error:D,clientid:Session.get("clientid"),date:new Date,side:"client","function":"tapOnBigFeed"})}}function K(e){$("#wrapperSec").append('<img class="voting dummyElement" style="left : '+e.left+"%;top:"+e.top+'%;" myid="'+e.followid+'" votingid="'+e._id+'" src="'+e.profile_picture+'">'),setTimeout(et,300)}function Z(e){(new Date).getTime();return'<div class="recomm dummyElement" style="left : '+e.left+"%;top: "+e.top+'%;" whoid=" '+e.whoid+'" type="ing" recomid="'+e._id+'"><img class="receiver" src="'+e.who+'"><img class="sender" src="'+e.profile_picture+'"></div>'}function et(){$(".dummyElement").remove()}function tt(e,t,n){(new Date).getTime();Ki&&clearTimeout(Ki),t-=40;var i=0;return e>50&&25>t?(i=1,n&&en(Di.__("loveNpromote")),$("#loveQuadrant,#promoteQuadrant").css({opacity:"1.0"})):50>e&&25>t?(i=0,n&&en(Di.__("love")),$("#loveQuadrant,#dummyelement").css({opacity:"1.0"})):50>e&&t>25?(i=2,n&&en(Di.__("hate"))):e>50&&t>25&&(i=3,n&&en(Di.__("hateNpromote")),$("#promoteQuadrant,#dummyelement").css({opacity:"1.0"})),$($(".mainQuadrant")[i]).animate({opacity:"1.0"},500,"linear").animate({opacity:"0.0"},500,"linear").animate({opacity:"1.0"},500,"linear").animate({opacity:"0.0"},500,"linear"),Ki=setTimeout(function(){$("#loveQuadrant,#promoteQuadrant").css({opacity:"0.0"})},2e3),i}function nt(){(new Date).getTime();try{var e=$(this).attr("whoid"),t=$(this).attr("recomid"),n=$(this).attr("type");if("ed"==n)return $("#overlay").show(),Session.set("recommendedFollow",e),Session.set("actionFollow",null),void 0;e==Session.get("clientid")&&(yt(),Session.set("actionFollow",t),Session.set("recommendedFollow",null)),it(this)}catch(i){console.log(i),ErrorUpdate.insert({error:i,clientid:Session.get("clientid"),date:new Date,side:"client","function":"tapOnRecomm"})}}function it(e){(new Date).getTime();try{$(e).hammer().off("tap");var t=$(e).offset().left,n=$(e).offset().top,i=$(e).attr("type");"creator"==i&&(n=0);var o=$(e).height(),r=$(e).width();$(e).stop().animate({left:t-50,top:n-50,height:o+100,width:r+100},1e3),Meteor.setTimeout(function(){var i=$(e).attr("class");"voting"==i&&$(e).stop().animate({left:t,top:n,height:"40px",width:"40px"},1e3,"easeOutBounce",function(){$(e).hammer().on("tap",at)}),"recomm"==i&&$(e).stop().animate({left:t,top:n,height:"40px",width:"60px"},1e3,"easeOutBounce",function(){$(e).hammer().on("tap",nt)})},1e3)}catch(a){console.log(a),ErrorUpdate.insert({error:a,clientid:Session.get("clientid"),date:new Date,side:"client","function":"animateBig"})}}function ot(){var e=$(this).attr("whoid"),t=$(this).attr("recomid");t&&e==Session.get("clientid")&&Feed.remove({_id:t})}function rt(e){var t=(e.type,$(this).attr("myid")),n=$(this).attr("votingid");try{if(t==Session.get("clientid")){var i=Votes.findOne({followid:Session.get("clientid")});
if(i){Votes.remove({_id:n});var o=Feed.find({whoid:Session.get("clientid"),likeid:Session.get("currentBig")});o.forEach(function(e){console.log(e._id),Feed.remove({_id:e._id})})}}}catch(r){ErrorUpdate.insert({error:r,clientid:Session.get("clientid"),date:new Date,side:"client","function":"holdOnVoting"})}}function at(e){(new Date).getTime();try{var t=e.type,n=$(this).attr("myid"),i=$(this).attr("votingid");if("doubletap"==t){var o=$(this).offset().left,r=$(this).offset().top,a=$(this).height(),s=$(this).width();n==Session.get("clientid")?($("#likeButton").css({left:o,top:r,display:"block",height:a,width:s}).transition({left:o-10,top:r-10,height:a+50,width:s+50,opacity:"1.0"},500).transition({left:o,top:r,height:a,width:s,opacity:"0.5"},500).transition({left:o-10,top:r-10,height:a+50,width:s+50,opacity:"1.0"},500).transition({left:o,top:r,height:a,width:s,opacity:"1.0"},500),kt(),St(),yt(),Session.set("actionFollow",i),gt()):n&&(Session.set("followFollow",n),$("#followButton").css({left:o,top:r,display:"block",height:a,width:s}).transition({left:o-10,top:r-10,height:a+10,width:s+10,opacity:"1.0"},500).transition({left:o,top:r,height:a,width:s,opacity:"0.5"},500).transition({left:o-10,top:r-10,height:a+10,width:s+10,opacity:"1.0"},500).transition({left:o,top:r,height:a,width:s,opacity:"1.0"},500),Tt(),vt(),mt())}"tap"==t&&(it(this),n==Session.get("clientid")&&Session.set("actionFollow",i))}catch(c){console.log(c),ErrorUpdate.insert({error:c,clientid:Session.get("clientid"),date:new Date,side:"client","function":"tapOnVoting"})}}function st(){(new Date).getTime();try{var e=$("textarea").val(),t=Feed.findOne({_id:Session.get("actionFollow")});Comments.insert({comment:e,likeid:Session.get("currentBig"),receiverid:t.followid,senderid:Session.get("clientid")}),$("textarea").val(""),console.log(e),mediaid=Session.get("currentBig"),Meteor.call("commentOnInstagram",mediaid,e,function(e,t){e&&en(Di.__("reqToCommentFailed")),t&&en(Di.__("reqToCommentCompleted"))})}catch(n){console.log(n),ErrorUpdate.insert({error:n,clientid:Session.get("clientid"),date:new Date,side:"client","function":"tapOnSend"})}}function ct(){(new Date).getTime();try{var e=Feed.find({type:2});if(0==e.count())return;var t=$(".unseen");t.show("show",function(){var e=this;setTimeout(function(){$(e).hide("slow")},3e3)}),Meteor.setTimeout(function(){e.forEach(function(e){Feed.update({_id:e._id},{$set:{type:3,source:"seen"}})})},1500*t.length)}catch(n){console.log(n),ErrorUpdate.insert({error:n,clientid:Session.get("clientid"),date:new Date,side:"client","function":"tapOnRightArrow"})}}function lt(){var e=Meteor.status().connected;e||Meteor.reconnect(),ct()}function ut(e,t,n){(new Date).getTime();try{if(n>100)return;e=".header",t=".header div",n||(n=10),$(t).css({"font-size":n+"px"});var i=$(e).innerHeight(),o=$(e).innerWidth(),r=$(t).innerHeight()+2,a=$(t).innerWidth()+2;o>a&&i>r?ut(e,t,++n):(n-=5,$(t).css({"font-size":n+"px"}),$("#tapmateLogo").css({height:r-5,width:r-5}),$("#status").css({height:r,width:r}),$(".appname").css({left:-($(".appname").width()/2)}))}catch(s){console.log(s),ErrorUpdate.insert({error:s,clientid:Session.get("clientid"),date:new Date,side:"client","function":"fitTextFunction"})}}function dt(){var e=((new Date).getTime(),null);if(e=n("preload"),!e){for(var i=0,o=Zi.length;o>i;i++){var r=Zi[i];r.date=(new Date).getTime(),r.display="y",r.type=1,r.checked=!1,r.source="preload",r.clientid=Session.get("clientid"),r.checked=!1,Feed.insert(r)}t("preload",!0)}}function ft(){(new Date).getTime();try{if($("#loader").show(),Session.get("phonegap")){var e=0,t="https://instagram.com/accounts/logout/";anotherWindow=window.open(t,"_blank","location=yes"),window.mywindow=anotherWindow,window.mywindow.addEventListener("loadstart",function(){e&&(nn(),window.mywindow.close()),e++,pt()})}nn("Logging Out User.."),Meteor.logout(pt),Session.set("clientid",null),window.localStorage.setItem("clientid",""),$("#alreadyUser").hide(),oi(),window.localStorage.clear(),Ct()}catch(n){console.log(n),ErrorUpdate.insert({error:n,clientid:Session.get("clientid"),date:new Date,side:"client","function":"logOutUser"})}}function pt(){nn("You have been LogOut."),window.location.reload()}function ht(){(new Date).getTime();try{if(!this.value)return;var e=Session.get("currentBig"),t="Hello World";en(Di.__("reqToCommentSent")),Meteor.call("commentOnInstagram",e,t,function(e,t){e&&en(Di.__("reqToCommentFailed")),t&&en(Di.__("reqToCommentCompleted"))}),this.value=""}catch(n){console.log(n),ErrorUpdate.insert({error:n,clientid:Session.get("clientid"),date:new Date,side:"client","function":"commentOnInstagram"})}}function gt(){(new Date).getTime();try{var e=Session.get("currentBig"),t=Media.findOne({_id:e});t&&en(Di.__("likedata")+" "+t.username+"  <i class='checkmark icon'></i>"),Meteor.call("LikeOnMedia",e,function(t,n){if(t&&en(Di.__("likeerror")),n){var i=Media.findOne({_id:e});i&&en(Di.__("likedata")+" "+i.username+"<i class='cloud upload icon'></i>")}})}catch(n){console.log(n),ErrorUpdate.insert({error:n,clientid:Session.get("clientid"),date:new Date,side:"client","function":"likeOnInstagram"})}}function mt(){(new Date).getTime();try{var e=Session.get("followFollow");Meteor.call("followFollow",e,function(){})}catch(t){console.log(t),ErrorUpdate.insert({error:t,clientid:Session.get("clientid"),date:new Date,side:"client","function":"addFollowPic"})}}function vt(){(new Date).getTime();try{var e=Session.get("followFollow"),t=Follows.findOne({followid:e});t&&en(Di.__("followdata")+" "+t.username+" <i class='cloud upload icon'></i>"),Meteor.call("followOnInstagram",e,function(t,n){if(t&&en(Di.__("followerror")),n){var i=Follows.findOne({followid:e});i&&en(Di.__("followdata")+" "+i.username+" <i class='checkmark icon'></i>")}})}catch(n){console.log(n),ErrorUpdate.insert({error:n,clientid:Session.get("clientid"),date:new Date,side:"client","function":"followOnInstagram"})}}function yt(){(new Date).getTime();$("#overlay").show(),$("#moveFace").animate({top:"70%"},1e3,"easeOutBounce",function(){$("#moveFace").animate({top:"20%"},1e3,"easeOutBounce",function(){})})}function bt(){gi&&Meteor.clearTimeout(gi),$("#likeButton").hide()}function _t(){mi&&Meteor.clearTimeout(mi),$("#followButton").hide()}function wt(){vi&&Meteor.clearTimeout(vi)}function kt(){gi&&Meteor.clearTimeout(gi),gi=Meteor.setTimeout(function(){$("#likeButton").hide("slow")},5e3)}function Tt(){mi&&Meteor.clearTimeout(mi),mi=Meteor.setTimeout(function(){$("#followButton").hide("slow")},5e3)}function St(){vi&&Meteor.clearTimeout(vi),vi=Meteor.setTimeout(function(){},5e3)}function xt(){_t(),bt(),wt()}function Et(){$("#overlay").hide(),Session.set("actionFollow",null),Session.set("recommendedFollow",null)}function Ct(e){e&&(e.gesture&&e.gesture.preventDefault(),e.preventDefault()),$("#outer").animate({opacity:"0.0"},500,"linear"),$("#hprogressBar").animate({opacity:"0.0"},500,"linear"),$("#inner-inner").animate({opacity:"0.0"},500,"linear"),$("#inerhprogressBar").animate({opacity:"0.0"},500,"linear");(new Date).getTime();try{xt(),yi&&($(yi).remove(),yi=null),yi=$(".bigFeed").clone(),$(yi).stop().css({"z-index":"5",opacity:"1.0"}),$("#section4").prepend(yi),$(yi).stop().transition({left:"-100%"},"slow","easeOutBounce",function(){$(yi).remove(),yi=null});var t=$(".likeActive"),n=$(t).attr("likeid");if(n){var i={};i.likeid=n,q(i)}var o=$(".feed:first"),r=t.next(".feed");0==r.length&&(r=o),"none"==o.css("display")&&(r=o,Dt(r.attr("likeid"))),0!=r.length&&(t.removeClass("likeActive"),r.addClass("likeActive"),J(),Session.set("currentBig",r.attr("likeid"))),xt(),Et()}catch(a){console.log(a),ErrorUpdate.insert({error:a,clientid:Session.get("clientid"),date:new Date,side:"client","function":"swipeLeft"})}}function Pt(e){e&&(e.gesture&&e.gesture.preventDefault(),e.preventDefault()),$("#outer").animate({opacity:"0.0"},500,"linear"),$("#hprogressBar").animate({opacity:"0.0"},500,"linear"),$("#inner-inner").animate({opacity:"0.0"},500,"linear"),$("#inerhprogressBar").animate({opacity:"0.0"},500,"linear");(new Date).getTime();try{xt(),yi&&($(yi).remove(),yi=null),yi=$(".bigFeed").clone(),$(yi).stop().css({"z-index":"5",opacity:"1.0"}),$("#section4").prepend(yi),$(yi).stop().transition({left:"100%"},"slow","easeOutBounce",function(){$(yi).remove(),yi=null});var t=$(".likeActive"),n=$(t).attr("likeid");if(n){var i={};i.likeid=n,q(i)}var o=t.prev(".feed");0==o.length&&(o=$(".recentIcons:first"));var r=$(".feed:first");"none"==r.css("display")&&(o=r,Dt(o.attr("likeid"))),0!=o.length&&(t.removeClass("likeActive"),o.addClass("likeActive"),J(),Session.set("currentBig",o.attr("likeid"))),xt(),Et()}catch(a){console.log(a),ErrorUpdate.insert({error:a,clientid:Session.get("clientid"),date:new Date,side:"client","function":"swipeRight"})}}function Dt(e){var t=Feed.findOne({type:2,likeid:e});t&&Feed.update({_id:t._id},{$set:{type:3,source:"seen"}})}function Ot(){try{if(pi=window.localStorage.getItem("clientid"),isNaN(pi))return Session.set("clientid",pi),o(pi),Session.set("username",pi),profilePic=".images/face.jpg",Meteor.call("guestFirstTimeLogin",pi,function(){console.log("finish")}),void 0;pi?(an(),Session.set("clientid",pi),o(pi),Session.set("username",window.localStorage.getItem("username")),Me.update({_id:Session.get("clientid")},{$inc:{alreadyloggedin:1,yalreadyloggedin:1,malreadyloggedin:1,walreadyloggedin:1,dalreadyloggedin:1}}),_i=!0,Meteor.call("firstTimeLogin",Session.get("clientid"),function(e,t){t&&(window.localStorage.setItem("profile_picture",t.profile_picture),profilePic=t.profile_picture)}),cn(),x(),Mt(),nn("Populating pictures")):rn()}catch(e){console.log(e),ErrorUpdate.insert({error:e,clientid:Session.get("clientid"),date:new Date,side:"client","function":"autoLogin"})}}function Mt(){$("#loginScreen").remove(),$("#tutorial").remove(),$("#tutorialButton").remove(),$("#instructionPanel").remove(),$("#thankyouBackgroud,#thankyou,#loginform").remove()}function It(){(new Date).getTime();try{var e=$(this).attr("val");Session.set("searchByFollow",e),Session.set("group",null),$("#keyboardButton").text(e),$("#keyboard").hide(),$("#keyboard").html("")}catch(t){console.log(t),ErrorUpdate.insert({error:t,clientid:Session.get("clientid"),date:new Date,side:"client","function":"tapOnAlpahbet"})}}function At(){for(var e=((new Date).getTime(),0),t=26;t>e;e++)eo=String.fromCharCode(eo.charCodeAt(0)+1),$("#keyboard").append('<li val="'+eo+"|"+eo.toLowerCase()+'"> '+eo+" </li>");eo="@",$("#keyboard").append('<li val="0-50"> 0-50 </li>'),$(".keyboard li").hammer().on("tap",It);var n=$("#keyboard").css("display"),i=!0;"none"==n&&($("#keyboard").show("slow"),i=!1),"block"==n&&($("#keyboard").hide("slow"),i=!1),i&&($("#keyboard").hide("slow"),$("#keyboard").html(""))}function Nt(){(new Date).getTime();Ti=!1,w(),clearInterval(locatationIntervalId)}function $t(){Ti=!0,ei(),Meteor.app.receivedEvent()}function Ft(){Meteor.reconnect()}function Bt(){(new Date).getTime();try{en(Di.__("popular"));var e=this;$(e).hide(),Meteor.call("popular",Session.get("clientid"),function(t,n){$(e).show(),t&&en(Di.__("popularerror")),n&&en(Di.__("populardata"))})}catch(t){console.log(t),ErrorUpdate.insert({error:t,clientid:Session.get("clientid"),date:new Date,side:"client","function":"onClickPopular"})}}function Lt(e){(new Date).getTime();e||en(Di.__("globalFeed"));var t=this;$(t).hide(),Meteor.call("globalfeed",Session.get("clientid"),function(n,i){$(t).show(),n&&(e||en(Di.__("globalFeederror"))),i&&(e||en(Di.__("globalFeeddata")))})}function jt(){(new Date).getTime();language={},Di.__=function(e){return language[e]?language[e]:""};var e=null,i=null;e=n("language"),e&&null!=e?(e=EJSON.parse(e),Rt(e)):Meteor.call("getLanguage","en",function(e,n){n&&(i=EJSON.stringify(n),t("language",i),Rt(n)),e&&jt()})}function Rt(e){(new Date).getTime();language=e.toast;for(var t={},n=0,i=e.html.length;i>n;n++){var o=e.html;t[o[n][1]]=language[o[n][1]]}$.i18n.load(t);for(var n=0,i=e.html.length;i>n;n++){var o=e.html;$(o[n][0])._t(o[n][1]),delete language[o[n][1]]}}function Ut(){$("#language").hide(),$("#languageBackground").hide(),$("#language").html("")}function Ht(){console.log("sent main client function"),Meteor.call("sendMail")}function zt(){oi(),$("#ContactUsPopUpBackground").show(),$("#ContactUsPopUp").css("top","0%"),$("#ContactUsPopUp").show(),$("#ContactUsPopUp").animate({top:"50%"},900)}function qt(){$("#ContactUsPopUp").hide(),$("#ContactUsPopUpBackground").hide()}function Vt(){var e=null,t=navigator.userAgent,n={iphone:t.match(/(iPhone|iPod|iPad)/),blackberry:t.match(/BlackBerry/),android:t.match(/Android/)};n.android?e="https://play.google.com/store/apps/details?id=com.youiest.tapmatrix":n.iphone?e="https://itunes.apple.com/ms/app/tapmate/id774935608":n.blackberry||(e="http://youtap.meteor.com/app/tapmateYouiestcom"),window.open(e,"_system")}function Wt(){window.open("http://youtap.meteor.com/profile/"+Session.get("clientid"),"_system")}function Yt(){oi(),$("#AboutUsPopUp").css("top","0%"),$("#AboutUsPopUp").show(),$("#AboutUsPopUp").animate({top:"50%"},700),$("#AboutUsPopUpBackground").show()}function Qt(){var e="http://youtap.meteor.com/FAQ";window.open(e,"_system")}function Jt(){for(var e=((new Date).getTime(),0),t=to.length-1;t>e;e++)$("#language").append('<a class="item" value="'+to[e][0]+'">'+to[e][1]+"</a>");$(".language a").hammer().on("tap",Ut),oi(),$("#language").css("top","0%"),$("#language").show(),$("#languageBackground").show(),$("#language").animate({top:"25%"},900)}function Xt(){$("#AboutUsPopUp").animate({top:"100%"},700,function(){$("#AboutUsPopUp").hide(),$("#AboutUsPopUpBackground").hide()})}function Gt(){$("#welcomePopUpBackground").hide(),$("#welcomePopUp").hide()}function Kt(){$("#Aggrements").hide(),window.localStorage.setItem("agree",!0),$("#Aggrements").remove()}function Zt(){}function en(e){no.push(e),tn()}function tn(){(new Date).getTime();if(!io){var e=no.pop();e&&(io=!0,e.match("pts")&&Session.get("phonegap")||$("#headerSection").stop().animate({top:"-10%"},500,function(){$("#toastArea").html(e).css({display:"block"}),Meteor.setTimeout(function(){$("#headerSection").animate({top:"0%"},500,function(){io=!1,tn()}),$("#toastArea").css({display:"none"})},2500)}))}}function nn(e){_i=!0;(new Date).getTime();clearTimeout(Si),e&&$("#loaderMessage").text(e),$("#loader").show(),$("#loaderError").hide(),"You have been LogOut."!=e&&(Si=setTimeout(function(){$("#loaderError").show()},3e4))}function on(e){var t=((new Date).getTime(),e),n=t.indexOf("@"),i=t.lastIndexOf(".");return 1>n||n+2>i||i+2>=t.length?(en(Di.__("invalidEmail")),!1):!0}function rn(){(new Date).getTime();$("#loaderMessage").text(""),$("#loader").hide(),$("#loaderError").hide(),clearTimeout(Si),Si=null}function an(){(new Date).getTime();$("#loginScreen").hide(),$("#Main").show(),xi=0}function sn(e){$("#timer").html(e[4]+":"+e[5]+":"+e[6])}function cn(){(new Date).getTime();try{var e=new Date;e=new Date(e.getFullYear()+1,0,26),$("#timer").countdown({until:e,format:"HMS",onTick:sn,tickInterval:1}),$("#timer").removeClass("is-countdown")}catch(t){console.log(t),ErrorUpdate.insert({error:t,clientid:Session.get("clientid"),date:new Date,side:"client","function":"checkFormAndTimer"})}}function ln(){Session.get("phonegap")&&Kn()}function un(){var e=((new Date).getTime(),$(this).attr("type")),t=$("#instructionSection div[type='show']");$(t).attr("type","hide"),$(t).hide(),"next"==e?t=$(t).next():"prev"==e?t=$(t).prev():"done"==e&&($("#instructionPanel").hide(),$("#instructionSection div:first").attr("type","show").css("display","block")),0!=t.length?$(t).attr("type","show").css("display","block"):($("#instructionPanel").hide(),$("#instructionSection div:first").attr("type","show").css("display","block"))}function dn(){var e=((new Date).getTime(),{});Meteor.call("media","544580348099774609_2627385",function(t,n){if(200==n.statusCode&&(e=n.data.data)){var i=(e.user.username,e.user.profile_picture);this.unblock(),Media.insert({_id:mediaid,profile_picture:i,username:usernames})}})}function fn(){$("#loginwithInsta,#loginButton").hide(),setTimeout(function(){$("#loginwithInsta,#loginButton").show()},3e3),l(),Meteor.loginWithInstagram({requestPermissions:"basic",requestOfflineToken:!0},pn)}function pn(e){e||Meteor.call("mergedMyFace",fi,function(){$(".hideAfterComplete").html("Now"),console.log("here too")})}function hn(){console.log("loginWithFacebook");var e=(Random.id(),"popup");Session.get("phonegap")&&(e="touch");var t="https://www.facebook.com/dialog/oauth?client_id="+Meteor.settings.public.fbid+"&redirect_uri="+Meteor.settings.public.fbredirect+"&display="+e+"&scope=email,publish_actions&state="+Session.get("clientid"),n=window.open(t,"_blank");n.addEventListener("loadstop",function(e){0==e.url.indexOf(Meteor.settings.public.fbredirect)&&n.close()})}function gn(){console.log("loginWithGoogle"),Meteor.loginWithGoogle({requestPermissions:"https://www.googleapis.com/auth/userinfo.profile",requestOfflineToken:!0},mn)}function mn(e){console.log("loginWithGoogleCallbackFunction"),console.log(e)}function vn(e){try{{(new Date).getTime()}window.mywindow&&window.mywindow.close();var t=window.localStorage.getItem("guestid");if(t){Session.get("clientid")}if(e){var n=Di.__("wrongMgs")+e;en(n),bi++,rn()}else{$("#welcomePopUp").show(),$("#welcomePopUpBackground").show();var i=window.localStorage.getItem("emailtoken");i&&(Meteor.call("addMeInGroup",i,function(e,t){console.log(e),console.log(t),t&&en("You are added in the group.")}),window.localStorage.setItem("emailtoken",null)),an(),nn("Login successful"),Meteor.call("getInformation",ao,function(e,t){var n,i=null;if(t){i=window.localStorage.getItem("clientid"),Number(i)<0&&Meteor.call("updateGuestToUser",i,t.id,function(){}),n=t.id,profilePic=t.profile_picture,username=t.username;var i=Session.get("clientid");Session.set("clientid",n),i&&n&&Meteor.call("convertGuestToUser",i,n,function(){}),Session.set("username",t.username),window.localStorage.setItem("clientid",n),window.localStorage.setItem("profile_picture",profilePic),window.localStorage.setItem("username",t.username),o(n),Meteor.call("tutorial",n,function(e,t){t||($("#Aggrements").show(),tutorial())}),Meteor.call("firstTimeLogin",Session.get("clientid"))}cn(),nn("Populating pictures"),Ei=0}),u()}}catch(r){console.log(r),ErrorUpdate.insert({error:r,clientid:Session.get("clientid"),date:new Date,side:"client","function":"loginWithInstagramCallbackFunction"})}}function yn(e,t){(new Date).getTime();try{console.log(e),Accounts.oauth.tryLoginAfterPopupClosed(e,t)}catch(n){console.log(n),ErrorUpdate.insert({error:n,clientid:Session.get("clientid"),date:new Date,side:"client","function":"loginOnceStateReady"})}}function bn(){(new Date).getTime();en(Di.__("feed"));var e=this;$(e).hide(),Meteor.call("getFeed",Session.get("clientid"),function(t,n){$(e).show(),t&&en(Di.__("feederror")),n&&(0==n?en(Di.__("nofeed")):-1==n?en(Di.__("feedincomplete")):en(Di.__("feedSucess")))})}function _n(){(new Date).getTime();Meteor.status().connected&&Oi&&!wi&&Session.get("clientid")&&($("#keywordPopup").show(),$("#keywordPopupBackground").show(),Oi=!1)}function wn(){var e=((new Date).getTime(),$("#searchKeyword").val());return e?(en("Searching keyword "+e+"."),Meteor.call("seachKeyword",Session.get("clientid"),e,function(t){t||en("Searching keyword "+e+" complete.")}),$("#keywordPopup").hide(),$("#keywordPopupBackground").hide(),$("#searchKeyword").val(""),void 0):(en(Di.__("enterKeyword")),void 0)}function kn(){$("#searchKeyword").attr("placeholder",Di.__("enterkeyword")),$("#keywordPopup").css("top","0%"),$("#keywordPopup").show(),$("#keywordPopupBackground").show(),$("#keywordPopup").animate({top:"43%"},700)}function Tn(){$("#keywordPopup").animate({top:"100%"},700,function(){$("#keywordPopup").hide(),$("#keywordPopupBackground").hide()}),Session.get("searchKeyword",null)}function Sn(){var e=$(this).attr("cat");$("#"+e+"Category").slideToggle("slow")}function xn(){var e=((new Date).getTime(),navigator.userAgent),t={iphone:e.match(/(iPhone|iPod|iPad)/),blackberry:e.match(/BlackBerry/),android:e.match(/Android/)};Pi=t.android?"android":t.iphone?"iphone":t.blackberry?"blackberry":"others";$(window).height(),$(window).width()}function En(){console.log("autoSize");var e=$(window).height(),t=$(window).width();$("body").css({height:e,width:t})}function Cn(){try{window.localStorage.setItem("redirect",window.location),$("#Main").hammer().on("swiperight",Pt),$("#Main").hammer().on("swipeleft",Ct),$("#tap").hammer().on("swiperight",Pt),$("#tap").hammer().on("swipeleft",Ct),$("body").hammer().on("dragstart",function(e){e.preventDefault()}),$("#alreadyUser").hammer().on("tap",Ot),pi=window.localStorage.getItem("clientid"),pi&&(profilePic=window.localStorage.getItem("profile_picture"),$("#alreadyUser").show(),$("#profilePic img").attr("src",profilePic),$("#profilePic img").bind("error",function(){$("#profilePic img").attr("src","./images/face.jpg")})),$("#com").blur(ht),$("#close").hammer().on("tap",Et),$("#logout").hammer().on("tap",ft),$("#instruction").hammer().on("tap",function(){$("#instructionPanel,#1instruct").show("slow"),oi()}),$("#ContactUsPopUp").hammer().on("tap",qt),$("#ContactUsPopUpBackground").hammer().on("tap",qt),$(".keyboard li").hammer().on("tap",It),$("#contactUsButton").hammer().on("tap",zt),$("#hashgosearch").hammer().on("tap",wn),$("#hashgocancel").hammer().on("tap",Tn),$("#keywordPopupBackground").hammer().on("tap",Tn),$("#loaderError").hammer().on("tap",function(){a(),rn()}),$("#instructionNext,#instructionPrev,#instructionDone").hammer().on("tap",un),$("#media").hammer().on("tap",dn),$(".help").hammer().on("tap",Sn),$("#gamePromptOkButton").hammer().on("tap",function(){console.log("gamePromptOkButton"),gamePrompt()}),$("#hideWelcomePopUp").hammer().on("tap",Gt),$("#welcomePopUpBackground").hammer().on("tap",Gt),$("#hideAboutUsPopUp").hammer().on("tap",Xt),$("#AboutUsPopUpBackground").hammer().on("tap",Xt),$("#aboutUsButton").hammer().on("tap",Yt),$("#FAQButton").hammer().on("tap",Qt),$("#feedbackButton").hammer().on("tap",Vt),$("#languageButton").hammer().on("tap",Jt),$("#languageBackground").hammer().on("tap",Ut),$("#AggrementAccept").hammer().on("tap",Kt),$("#AggrementDeny").hammer().on("tap",Zt),$("#hprogressBar").hammer().on("touch",qn),$("#hprogressBar").hammer().on("release",zn),$("#hprogressBar").hammer().on("drag",Hn),$("#outer").hammer().on("touch",Un),$("#outer").hammer().on("release",Rn),$("#outer").hammer().on("drag",jn),$("#inner-inner").hammer().on("touch",Un),$("#inner-inner").hammer().on("release",Rn),$("#inner-inner").hammer().on("drag",jn),$("#inerhprogressBar").hammer().on("touch",qn),$("#inerhprogressBar").hammer().on("release",zn),$("#inerhprogressBar").hammer().on("drag",Hn),$("#invfacebook").hammer().on("tap",hn),$("#pushNotification").hammer().on("tap",Kn),$("#sendMail").hammer().on("tap",Ht),$("#optimize").hammer().on("tap",Yn),$("#videotutorial").hammer().on("tap",function(){oi(),window.open("https://www.youtube.com/watch?v=Z24Uw2OHx6o","_system")}),$("#chatboxclosebutton").hammer().on("tap",O),$("#chatsendbutton").hammer().on("tap",M),FastClick.attach(document.body),$("#addGroup").hammer().on("tap",j),$("#atbutton").hammer().on("tap",Qn),$("#getEmailButton").hammer().on("tap",Vn),$("#logininstagram").hammer().on("tap",Bn),$("#goinstaplaystore").hammer().on("tap",Ln),$("#loginwithfb").hammer().on("tap",hn),$("#loginwithgoog").hammer().on("tap",gn),$("#invmail").hammer().on("tap",Dn),$("#guestLogincancle").hammer().on("tap",function(){$("#guestLogin").css("display","none")}),$("#shareApp").hammer().on("tap",An),$("#emptyCacheButtonMenu").hammer().on("tap",function(){Mi=!0,window.location.reload()}),$(window).unbind("beforeunload"),$(window).bind("beforeunload",function(){w()}),$("#snapButtonWrapper").hammer().off("tap",oi),$("#snapButtonWrapper").hammer().on("tap",oi),$(".ui.heart.rating .icon").hammer().on("tap",In),$("#bodyWrapper").hammer().on("tap",On),$("#loginButtonWithInstagram").hammer().off("tap",fn),$("#loginButtonWithInstagram").hammer().on("tap",fn),$("#loginButtonWithFacebook").hammer().off("tap",hn),$("#loginButtonWithFacebook").hammer().on("tap",hn),$("#loginButtonWithGooglePlus").hammer().off("tap",gn),$("#loginButtonWithGooglePlus").hammer().on("tap",gn),$("#sePassThankyou1,#sePassThankyou2").keyup(Pn),li("snapy"),En()}catch(e){console.log(e),ErrorUpdate.insert({error:e,clientid:Session.get("clientid"),date:new Date,side:"client","function":"bindEvents"})}}function Pn(){var e=$("#sePassThankyou2").val(),t=$("#sePassThankyou1").val();e==t&&($("#seLoginThankyou").removeClass("blue").addClass("green"),d())}function Dn(){var e="mailto:tapmate@tapmate.mailgun.org?subject=You have been invited to join tapmate&body=click here to download it <br>http://youtap.meteor.com/app/tapmateYouiestcom";window.open(e,"_system")}function On(){Session.get("clientid")&&(20==Ui?Mn():2==Ui||10==Ui&&_n(),Ui++)}function Mn(){var e=Me.findOne({_id:Session.get("clientid")});e.rating||($("#RatingPopUp").css("top","0%"),$("#RatingPopUp").show(),$("#RatingPopUpBackground").show(),$("#RatingPopUp").animate({top:"50%"},700))}function In(){var e=$(".ui.heart.rating .icon");e.removeClass("active");for(var t=0,n=e.length;n>t&&($(e[t]).addClass("active"),e[t]!=this);t++);$("#RatingPopUpBackground").hide(),$("#RatingPopUp").animate({top:"100%"},700),$("#RatingPopUp").hide(),Vt()}function An(){return Session.get("phonegap")?(window.plugins.socialsharing.share("Tapmate","Check this out Tapmate is out! It's cool!","http://youtap.meteor.com/images/logo.png","http://tapmate.youiest.com"),void 0):(en("This feature is not available for web browser."),void 0)}function Nn(){var e=Media.findOne({_id:Session.get("currentBig")});e&&e.link&&window.open(e.link,"_system")}function $n(){var e=$(".bigFeed img").attr("src"),t=null;if(Session.get("phonegap")){var n=Media.findOne({_id:Session.get("currentBig")});n&&n.std&&(t=n.std),t||(t=e),window.plugins.socialsharing.share("Tapmate","Check this out Tapmate is out! It's cool!",t,"http://tapmate.youiest.com")}else en("This feature is not available for web browser.")}function Fn(e,t,n){(new Date).getTime();e&&t&&n&&(Meteor.subscribe("pushnotification",Session.get("clientid"),n),Session.set("currentBig",n),Feed._collection.insert({likeid:n,low:e}))}function Bn(){window.localStorage.setItem("guestid",Session.get("clientid")),$("#guestLogin").css("display","none"),ui()}function Ln(){(new Date).getTime();window.localStorage.setItem("guestid",Session.get("clientid")),Session.set("guestid",Session.get("clientid")),$("#guestLogin").css("display","none");var e="https://play.google.com/store/apps/details?id=com.instagram.android";window.open(e,"_system")}function jn(e){var t=((new Date).getTime(),e.gesture.center.pageY),n=$("#Main").height(),i=$("#quadrant").height(),o=t/n*100,r=t/i*100;if(o=Math.round(o)-2,r=Math.round(r)-5,promoteper=100-(r-63),100>=promoteper){$("#verticalprogress").css("height",promoteper+"%");var a=100-(promoteper+2);$("#inner-inner").css("top",a+"%");Ni?$(".recomm[recomid='"+Fi+"']").css("top",o+"%"):$i?$(".voting[votingid='"+$i+"']").css("top",o+"%"):$(".voting").css("top",o+"%")}}function Rn(){(new Date).getTime();try{var e=null;if(Ni){if(e=Feed.findOne({_id:Fi})){var t=$(".recomm[recomid="+Fi+"]").css("top"),n=t.substring(0,t.length-2),i=$("#Main").height(),o=n/i*100;o=Math.round(o),Feed.update({_id:e._id},{$set:{top:o}})}}else if(e=Votes.findOne({_id:$i})){var t=$(".voting").css("top"),n=t.substring(0,t.length-2),i=$("#Main").height(),o=n/i*100;o=Math.round(o),Votes.update({_id:e._id},{$set:{top:o}})}$("#inner-inner").css({height:"33px",width:"42px","font-size":"1em"})}catch(r){console.log(r),ErrorUpdate.insert({error:r,clientid:Session.get("clientid"),date:new Date,side:"client","function":"promoteProgDragend"})}}function Un(e){(new Date).getTime();e.preventDefault(),e.gesture&&e.gesture.preventDefault(),$("#inner-inner").css({height:"65px",width:"78px","font-size":"2em"}),$("#outer").animate({opacity:"0.5"},500,"linear")}function Hn(e){(new Date).getTime();e.preventDefault(),e.gesture&&e.gesture.preventDefault();var t=e.gesture.center.pageX,n=$("#Main").width(),i=t/n*100;percent=Math.round(i),90>=i&&($("#inerhprogressBar").css("left",percent+"%"),$("#hprogressBar").find("div").css("width",percent+"%"),Ni?$(".recomm[recomid='"+Fi+"']").css("left",percent+"%"):$(".voting[votingid='"+$i+"']").css("left",percent+"%"))}function zn(e){(new Date).getTime();e.preventDefault(),e.gesture&&e.gesture.preventDefault();var t=null;if(Ni){var n=$(".recomm[recomid="+Fi+"]").css("left");if(!n)return;var i=n.substring(0,n.length-2),o=$("#Main").width(),r=i/o*100;r=Math.round(r),t=Feed.findOne({_id:Fi}),t&&Feed.update({_id:t._id},{$set:{left:r}})}else{var n=$(".voting").css("left");if(!n)return;var i=n.substring(0,n.length-2),o=$("#Main").width(),r=i/o*100;r=Math.round(r),t=Votes.findOne({_id:$i}),t&&Votes.update({_id:t._id},{$set:{left:r}})}$("#inerhprogressBar").css({height:"38px",width:"42px","font-size":"large",top:"90%"})}function qn(){event.preventDefault(),event.gesture&&event.gesture.preventDefault(),$("#inerhprogressBar").css({height:"57px",width:"65px","font-size":"x-large",top:"84%"})}function Vn(){Meteor.call("getContentEmail",function(e,t){console.log(e),console.log(t),window.localStorage.clear(),window.location.reload(!0)})}function Wn(){{var e=((new Date).getTime(),window.localStorage.getItem("optimizeLimit"));$("#optimizeCheckBox").prop("checked")}4==e?(Session.set("limit",4),$(".ui.checkbox").checkbox("enable")):(Session.set("limit",8),$(".ui.checkbox").checkbox("disable"));var t=window.localStorage.getItem("agree");t?$("#Aggrements").remove():$("#Aggrements").show()}function Yn(){(new Date).getTime();$(".ui.checkbox").checkbox();var e=$("#optimizeCheckBox").prop("checked");e?(Session.set("limit",8),window.localStorage.setItem("optimizeLimit",8)):(Session.set("limit",4),window.localStorage.setItem("optimizeLimit",4))}function Qn(){var e="mailto:tapmate@tapmate.mailgun.org?subject="+Jn()+"&body="+Di.__("emailstring1")+"<br>"+Gn()+"<br> <img src='"+Xn()+"'> \\n "+Di.__("emailstring2")+" ";window.open(e,"_system")}function Jn(){(new Date).getTime();return Session.get("currentBig")+","+Session.get("clientid")}function Xn(){var e=Feed.findOne({likeid:Session.get("currentBig")});return e?e.low:void 0}function Gn(){(new Date).getTime();return DebugFace?"http://localhost:3000/picture/"+Session.get("currentBig"):"http://youtap.meteor.com/picture/"+Session.get("currentBig")}function Kn(){fo.receivedEvent()}function Zn(e){var t=null;t="android"==device.platform||"Android"==device.platform?"android":"iphone","OK"!=e&&Meteor.call("registrationid",e,t,Session.get("clientid"),function(t,n){n?(en("Success"),window.localStorage.setItem("pushid",e)):en("failure")})}function ei(){locatationIntervalId=setInterval(ti,54e6)}function ti(){navigator.geolocation?navigator.geolocation.getCurrentPosition(ni):console.log("Geolocation is not supported by this browser")}function ni(e){console.log("Latitude: "+e.coords.latitude),console.log("Longitude: "+e.coords.longitude)}function ii(){$("#snapButton").hammer().on("tap",oi)}function oi(){po?($("#snapy").transition({left:"-90%"}),$("#beforeLogin").transition({left:"0%"}),$("#snapButton").transition({left:"0%"}),$("#snapButtonWrapper").css({display:"none"})):($("#snapy").transition({left:"0%"}),$("#snapButton").transition({left:"90%"}),$("#snapButtonWrapper").css({display:"block"}),ho=!0,ri()),po=!po}function ii(){$("#snapButton").hammer().on("tap",oi)}function ri(){ho?(0!=ro?$("#section2").transition({left:"100%"}):$("#section2").transition({left:"100%"},function(){$("#section2").hide()}),$("#currentFollowWrapper").transition({right:"0px",width:"0%"}),$("#currentFollow").transition({right:"0px"}),$("#openclosearrow").animate("class","left arrow icon"),$("#currentFollow i").removeClass("right"),$("#currentFollow i").addClass("left")):($("#currentFollow i").removeClass("left"),$("#currentFollow i").addClass("right"),$("#section2").show(),$("#section2").transition({left:"25%"}),$("#currentFollowWrapper").transition({right:"75%",width:"25%"}),$("#currentFollow").transition({right:"75%"}),$("#openclosearrow").animate("class","right arrow icon"),Bi.fifth&&!Bi.sixth&&(V(82,36,"Users",Di.__("urfriends")),clearInterval(tapBigTutorialInterval),Bi.sixth=!0,setTimeout(ai,5e3))),ho=!ho
}function ai(){Session.get("clientid")&&isNaN(Session.get("clientid"))&&$("#guestLogin").css("display","block")}function si(){go?($("#groupDiv").animate({right:"-9%"},"fast","easeOutBounce"),$("#groupButton").animate({right:"89%"},"fast","easeOutBounce")):($("#groupDiv").animate({right:"-100%"},"fast","easeOutBounce"),$("#groupButton").animate({right:"0%"},"fast","easeOutBounce")),go=!go}function ci(){(new Date).getTime();return navigator.userAgent.match(/android 2.3/i)||navigator.userAgent.match(/gingerbread/i)||navigator.userAgent.match(/GINGERBREAD/i)?!0:!1}function li(e){(new Date).getTime();if(ci()){var t=(document.getElementById(e),0),n=0;document.getElementById(e).addEventListener("touchstart",function(e){t=this.scrollTop+e.touches[0].pageY,n=this.scrollLeft+e.touches[0].pageX},!1),document.getElementById(e).addEventListener("touchmove",function(e){(this.scrollTop<this.scrollHeight-this.offsetHeight&&this.scrollTop+e.touches[0].pageY<t-5||0!=this.scrollTop&&this.scrollTop+e.touches[0].pageY>t+5)&&e.preventDefault(),(this.scrollLeft<this.scrollWidth-this.offsetWidth&&this.scrollLeft+e.touches[0].pageX<n-5||0!=this.scrollLeft&&this.scrollLeft+e.touches[0].pageX>n+5)&&e.preventDefault(),this.scrollTop=t-e.touches[0].pageY,this.scrollLeft=n-e.touches[0].pageX},!1)}}function ui(){(new Date).getTime();try{$("#loginwithInsta,#loginButton").hide(),setTimeout(function(){$("#loginwithInsta,#loginButton").show()},3e3),nn("Login Process"),l(),Meteor.loginWithInstagram({requestPermissions:"basic",requestOfflineToken:!0},vn),_i=!0}catch(e){console.log(e),ErrorUpdate.insert({error:e,clientid:Session.get("clientid"),date:new Date,side:"client","function":"loginButton.click"})}}void 0===window.App&&(App={}),void 0===window.EJSON&&(EJSON=JSON),Package.oauth.Oauth.showPopup=function(e,t,i){var o=di(e,i&&i.width||650,i&&i.height||331,null,t);if(!Session.get("phonegap"))var r=setInterval(function(){try{var e=o.closed||void 0===o.closed}catch(t){return}e&&(clearInterval(r),console.log("closed"),yn(n("state"),vn))},100)};var di=function(e,t,i,o,r){var a="undefined"!=typeof window.screenX?window.screenX:window.screenLeft,s="undefined"!=typeof window.screenY?window.screenY:window.screenTop,c="undefined"!=typeof window.outerWidth?window.outerWidth:document.body.clientWidth,l="undefined"!=typeof window.outerHeight?window.outerHeight:document.body.clientHeight-22,u=a+(c-t)/2,d=s+(l-i)/2,f="width="+t+",height="+i+",left="+u+",top="+d+",scrollbars=yes",p=null;return Session.get("phonegap")?(e=encodeURI(e),p=window.open(e,"_blank","location=yes")):p=window.open(e,"_black",f),window.mystate=o,window.mycallback=r,window.closewindow=p,Session.get("phonegap")&&(p.addEventListener("loadstop",function(e){0==e.url.indexOf(Meteor.settings.public.redirectClose)&&(window.itriggered=!0,window.closewindow.close(),window.closewindow=null,yn(n("state"),vn))}),p.addEventListener("loaderror",function(){window.itriggered=!0,window.closewindow.close(),window.closewindow=null,yn(n("state"),vn)}),p.addEventListener("exit",function(){window.closewindow=null,yn(n("state"),vn),window.itriggered=!1})),p.focus&&p.focus(),p};Package.oauth.Oauth.initiateLogin=function(e,t,n,i){Package.oauth.Oauth.showPopup(t,_.bind(n,null,e),i)},e();var fi=!1;Router.map(function(){this.route("home",{path:"/",template:"body"}),this.route("index",{path:"/verifyHashEmail/:emailtoken",template:"body",data:function(){var e=this.params.emailtoken;fi=e,window.localStorage.setItem("clientid","")}}),this.route("index",{path:"/index.html",template:"body"}),this.route("index",{path:"/*",template:"body"})}),App.bug=i;var pi=null;pi=null,GlobalError=null,Follows=new Meteor.Collection("follows"),Me=new Meteor.Collection("myself"),Votes=new Meteor.Collection("votes"),Comments=new Meteor.Collection("comments"),Media=new Meteor.Collection("media"),Feed=new Meteor.Collection("feed"),SponserKeyword=new Meteor.Collection("sponserkeyword"),ErrorUpdate=new Meteor.Collection("error"),MiniGame=new Meteor.Collection("minigame"),TapmateNotification=new Meteor.Collection("notification"),UsersVote=new Meteor.Collection("usersvote"),Chat=new Meteor.Collection("chat"),FollowsGroup=new Meteor.Collection("followsgroup"),UserSession=new Meteor.Collection("usersession"),GroupVoteRecommend=new Meteor.Collection("groupvoterecommend"),MethodTimer=new Meteor.Collection("methodtimer"),Meteor.suscribeMeteor=o,Meteor.suscribeCusom=r,Deps.autorun(function(){Session.get("chatid")&&Meteor.subscribe("chat",Session.get("clientid"),Session.get("chatid"))});var hi=null,gi=null,mi=null,vi=null,yi=null,bi=0,_i=!0,wi=!1,ki=!1,Ti=!0,Si=null,xi=0,Ei=10,Ci=null,Pi=null,Di=null,Oi=!0,Mi=!1,Ii=null,Ai=null,Ni=!1,$i=null,Fi=null,Bi={},Li=null,ji=null,Ri=[],Ui=0;if(Meteor.isClient){Session.set("activeFollows",null),Session.set("followFollow",null),Session.set("username",""),Session.set("orientation",!0),Session.set("searchByFollow","0-50"),Session.set("searchKeyword",null),Session.set("userid",null),Session.set("group",null);Session.set("limit",8);var Hi=0;Meteor.startup(function(){try{var e=window.localStorage.getItem("phonegap");1==e?Session.set("phonegap",!0):Session.set("phonegap",!1),Session.set("clientid",null),Deps.autorun(function(){try{Session.get("clientid")?($("#loginScreen").hide(),$("#Main").show(),$("#currentFollow").show(),ut()):($("#loginScreen").show(),$("#Main").hide())}catch(e){console.log(e),ErrorUpdate.insert({error:e,clientid:Session.get("clientid"),date:new Date,side:"client","function":"clientid.autorun"})}}),Deps.autorun(function(){try{Ri=[],Meteor.subscribe("votes",Session.get("currentBig")),Meteor.subscribe("media",Session.get("currentBig")),Meteor.subscribe("recomm",Session.get("currentBig"),Session.get("clientid")),Meteor.subscribe("recommtwo",Session.get("currentBig"),Session.get("clientid")),Meteor.subscribe("groupvoterecommend",Session.get("clientid"),Session.get("currentBig")),Meteor.subscribe("pushnotification",Session.get("clientid"),Session.get("currentBig"))}catch(e){console.log(e),ErrorUpdate.insert({error:e,clientid:Session.get("clientid"),date:new Date,side:"client","function":"currentBig.autorun"})}}),document.addEventListener("deviceready",function(){try{Session.set("phonegap",!0),window.localStorage.setItem("phonegap",!0),document.addEventListener("pause",Nt,!1),document.addEventListener("resume",$t,!1),document.addEventListener("online",Ft,!1),ao=window.localStorage.getItem("pushid"),ln()}catch(e){console.log(e),ErrorUpdate.insert({error:e,clientid:Session.get("clientid"),date:new Date,side:"client","function":"deviceready"})}},!1)}catch(t){console.log(t),ErrorUpdate.insert({error:t,clientid:Session.get("clientid"),date:new Date,side:"client","function":"startup"})}}),Template.bodystatic.rendered=function(){v()},Template.loginWithInstagram.rendered=function(){$("#loginButton,#loginwithInsta").hammer().off("tap",ui),$("#loginButton,#loginwithInsta").hammer().on("tap",ui),$("#seLogin").hammer().off("tap",d),$("#seLogin").hammer().on("tap",d),$("#seSignup").hammer().off("tap",h),$("#seSignup").hammer().on("tap",h),$("#seLoginThankyou").hammer().off("tap",d),$("#seLoginThankyou").hammer().on("tap",d),$("#seSignup").hammer().off("tap",h),$("#seSignup").hammer().on("tap",h),$("#seLoginLogin").hammer().off("tap",s),$("#seLoginLogin").hammer().on("tap",s),fi&&($(".emailClass").hide(),$(".passwordClass").show(),c("thankyou"),$("#seSignup").hide(),$("#seLogin").show(),$("#seError").show(),$("#seError div").html("Enter a new password"))};var zi=null,qi=null;Meteor.documentReady=v,Template.Section1.events({"error .recentIcons img":function(e){z(this._id),$(e.currentTarget).attr("src","images/face.jpg")}}),Template.Section2.events({"error .followsIcons img":function(e){Meteor.call("checkWithServer",this),$(e.currentTarget).attr("src","images/face.jpg")},"error .groupicons img":function(e){$(e.currentTarget).attr("src","images/face.jpg")},"error .groupImages img":function(e){$(e.currentTarget).attr("src","images/face.jpg")}}),Template.userfeed.events({"error .userfeed img":function(){Meteor.status().connected&&UsersVote.remove({_id:this._id})}}),Template.Section3.events({"error .recommendImages img":function(){Meteor.status().connected&&z(this._id)},"error .feed img":function(){Meteor.status().connected&&z(this._id)}});var Vi={"error .feed img":y};Template.onetwo.events(Vi),Template.preload.events(Vi),Template.onethree.events(Vi),Template.onefeed.events(Vi),Template.oneglobal.events(Vi),Template.onepopular.events(Vi),Template.onehash.events(Vi),Template.Section4.events({"error .voting img":function(e){Meteor.call("checkVotesWithServer",this),$(e.currentTarget).attr("src","images/face.jpg")},"error .sender img":function(e){Meteor.call("checkRecsWithServer",this),$(e.currentTarget).attr("src","images/face.jpg")},"error .receiver img":function(e){Meteor.call("checkRecsWithServer",this),$(e.currentTarget).attr("src","images/face.jpg")}}),Template.keyword.events({"click .eachkeyword":function(){try{var e=this.keyword;en("#"+e+" is started."),Meteor.call("seachKeyword",Session.get("clientid"),this.keyword,function(){}),$("#keywordPopup").hide()}catch(t){console.log(t),ErrorUpdate.insert({error:t,clientid:Session.get("clientid"),date:new Date,side:"client","function":"click .eachkeyword"})}}}),Template.groupvote.rendered=function(){$(".grouping").each(function(e,t){for(var n=$(t).children("img"),i=0,o=n.length;o>i;i++)$(n[i]).css("left",20*i+"px")}),VoteEnd=(new Date).getTime()},Template.server.rendered=function(){$("#status").hammer().off("tap"),$("#status").hammer().on("tap",lt)},Template.Section1.rendered=function(){try{$(".recentIcons").hammer().off("tap"),$(".recentIcons").hammer().on("tap",P)}catch(e){console.log(e),ErrorUpdate.insert({error:e,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.Section1.rendered"})}},Template.Section2.rendered=function(){try{$(".followsIcons").hammer().off("tap",R),$(".followsIcons").hammer().on("tap",R),$(".followsgroup").hammer().off("tap",R),$(".followsIcons").hammer().off("doubletap",A),$(".followsIcons").hammer().on("doubletap",A),$(".followsIcons").hammer().off("hold",D),$(".followsIcons").hammer().on("hold",D),$("#currentFollow").hammer().off("tap",ri),$("#currentFollow").hammer().on("tap",ri),$("#currentFollowWrapper").hammer().off("tap",ri),$("#currentFollowWrapper").hammer().on("tap",ri),$("#section2").unbind("touchstart,touchmove"),li("section2"),$("#keyboardButton").hammer().off("tap",At),$("#keyboardButton").hammer().on("tap",At),$("#groupButton").hammer().off("tap",si),$("#groupButton").hammer().on("tap",si);var e=$(".extrabutton")[0];if(e){var t=$(e).width()-10;$(".followsIcons,#addGroup,#atbutton").css({height:t+"px"})}if(Session.get("currentBig")){var n=FollowsGroup.findOne({_id:Session.get("activeFollows")});if(n)return;var i=$(".followsIcons")[Hi];if(i||(Hi=0,i=$(".followsIcons")[0]),i){$(".followsIcons:first").attr("myid")==Session.get("clientid")&&(i=$(".followsIcons")[0]);var o=$(i).attr("myid");Session.set("activeFollows",o),$(".followsIcons").removeClass("active"),$(i).addClass("active"),0!=$(i).length&&$("#section2").scrollTop($(i).position().top)}}}catch(r){console.log(r),ErrorUpdate.insert({error:r,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.Section2.rendered"})}},Template.Section3.rendered=function(){try{$(".feed").hammer().off("tap"),$(".feed").hammer().on("tap",W),$("#section3").unbind("touchstart,touchmove"),$("#globalFeed").hammer().off("tap",Lt),$("#myFeed").hammer().off("tap",bn),$("#popular").hammer().off("tap",Bt),$("#hash").hammer().off("tap",kn),$("#globalFeed").hammer().on("tap",Lt),$("#myFeed").hammer().on("tap",bn),$("#popular").hammer().on("tap",Bt),$("#hash").hammer().on("tap",kn),li("section3");var e=$(".feed");Li=$(e[0]).width(),Li&&(e.css("height",Li),$(".right,.globalFeed,.popular,.hash,.usersfeed,#usersfeed,.ufeed").css("height",Li));var t=$(".feed[likeid="+Session.get("currentBig")+"]");if(t.addClass("likeActive"),0!=t.length&&$("#section3").scrollTop(Meteor.currentloc),_i){0!=$(".recentIcons").length&&rn();var e=$(".feed");if(0!=e.length){var n=$(e[0]).attr("likeid");if(n){J(),Session.get("currentBig")||Session.set("currentBig",n),_i=!1,rn(),setTimeout(ct,1e3);var i=$(".followsIcons:nth-child(2)");1==i.length&&A(null,i.attr("myid"),i.children("img").attr("src"))}}}}catch(o){console.log(o),ErrorUpdate.insert({error:o,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.Section3.rendered"})}},Meteor.previousloc=0,$(window).scroll(function(){Meteor.previousloc=Meteor.currentloc,Meteor.currentloc=$("body").scrollTop(),0==Meteor.currentloc&&(Meteor.currentloc=Meteor.previousloc)}),Template.userfeed.rendered=function(){Li&&$(".usersfeed,#usersfeed").css("height",Li),2==$(".userfeed").length&&Session.get("clientid")&&Meteor.call("usersVotesAdd",Session.get("clientid"),"363620479"),$(".ufeed").hammer().off("tap"),$(".ufeed").hammer().on("tap",W)},Template.userfeed.userselfpic=function(){return"http://images.ak.instagram.com/profiles/profile_580988446_75sq_1382759798.jpg"},Template.userfeed.eachUserFeed=function(){return UsersVote.find({clientid:Session.get("clientid"),followid:"580988446",display:"y"})},Template.multipleusers.anotheruserselfpic=function(){return Session.get("userselfpic")},Template.multipleusers.anotherUserFeed=function(){return UsersVote.find({clientid:Session.get("clientid"),followid:Session.get("userid"),display:"y"})},Template.Section4.rendered=function(){try{$(".bigFeed").hammer().off("tap"),$(".bigFeed").hammer().on("tap",X),$(".recomm").hammer().off("tap"),$(".recomm").hammer().on("tap",nt),$(".recomm").hammer().off("hold"),$(".recomm").hammer().on("hold",ot),$(".voting").hammer().off("doubletap"),$(".voting").hammer().on("doubletap",at),$(".voting").hammer().off("tap"),$(".voting").hammer().on("tap",at),$(".voting").hammer().off("hold"),$(".voting").hammer().on("hold",rt)}catch(e){console.log(e),ErrorUpdate.insert({error:e,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.Section4.rendered"})}},Template.bigImage.events({"load #high":function(){console.log("loaded"),$("#low").css("z-index","1"),$("#high").css("z-index","2")}}),Template.chatting.rendered=function(){try{$("#send,#creatorProfile,#sharePic").hammer().off("tap"),$("#send").hammer().on("tap",st),$("#creatorProfile").hammer().on("doubletap",at),$("#sharePic").hammer().on("tap",$n),$("#sharePicInsta").hammer().on("tap",Nn)}catch(e){console.log(e),ErrorUpdate.insert({error:e,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.chatting.rendered"})}},Template.grouptemplate.group=function(){return FollowsGroup.find({clientid:Session.get("clientid")})},Template.grouptemplate.rendered=function(){$(".followsgroup").hammer().off("tap"),$(".followsgroup").hammer().on("tap",F),$(".followsgroup").hammer().off("doubletap"),$(".followsgroup").hammer().on("doubletap",N),$(".followsgroup").hammer().off("hold"),$(".followsgroup").hammer().on("hold",L)},Template.profilemenu.user=function(){try{return Me.find({_id:Session.get("clientid")})}catch(e){console.log(e),ErrorUpdate.insert({error:e,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.profilemenu.user"})}},Template.profilemenu.rendered=function(){try{$("#profileItem").hammer().on("tap",Wt)}catch(e){console.log(e),ErrorUpdate.insert({error:e,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.profilemenu.user"})}},Template.Section1.recents=function(){try{return Feed.find({clientid:Session.get("clientid"),display:"n"},{sort:{date:-1},limit:1*Session.get("limit")})}catch(e){console.log(e),ErrorUpdate.insert({error:e,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.Section1.recents"})}},Template.votesProfile.recent=function(){try{return Votes.find({followid:Session.get("profile")},{sort:{date:-1},limit:4})}catch(e){console.log(e),ErrorUpdate.insert({error:e,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.recents1.recents"})}},Template.feedsProfile.recent=function(){try{return Feed.find({clientid:Session.get("profile"),display:"y"},{sort:{date:-1},limit:4})}catch(e){console.log(e),ErrorUpdate.insert({error:e,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.recents1.recents"})}},Template.recents1.recent=function(){try{return Feed.find({clientid:Session.get("profile"),display:"n"},{sort:{date:-1},limit:4})}catch(e){console.log(e),ErrorUpdate.insert({error:e,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.recents1.recents"})}},Template.distanceTemplate.distance=function(){try{var e=Me.findOne({_id:Session.get("clientid")});if(e)return e.score}catch(t){console.log(t),ErrorUpdate.insert({error:t,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.distanceTemplate.distance"})}},Template.distanceTemplate.heat=function(){try{var e=Me.findOne({_id:Session.get("clientid")});if(e)return e.heatscore}catch(t){console.log(t),ErrorUpdate.insert({error:t,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.distanceTemplate.heat"})}},Template.Section2.follows=function(){var e=Feed.find({likeid:Session.get("currentBig"),whoid:Session.get("clientid")}),t=Votes.find({likeid:Session.get("currentBig")}),n=[];t.forEach(function(e){n.push(e.followid)}),e.forEach(function(e){n.push(e.followid)});var i=Session.get("searchByFollow");return"0-50"==i?Follows.find({userid:Session.get("clientid"),followid:{$nin:n}},{sort:{hits:-1},limit:50}):(i=i+"|"+Session.get("username"),Follows.find({userid:Session.get("clientid"),followid:{$nin:n},username:{$regex:"^"+i+".*",$options:"i"}},{sort:{hits:-1},limit:50}))},Template.Section2.currentFollow=function(){return Follows.findOne({followid:Session.get("activeFollows")})},Template.Section2.alpahbet=function(){try{return Session.get("searchByFollow")}catch(e){console.log(e),ErrorUpdate.insert({error:e,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.Section2.alpahbet"})}},Template.preload.eachfeed=function(){return Feed.find({clientid:Session.get("clientid"),display:"y",type:1},{sort:{date:-1},limit:2*Session.get("limit")})},Template.onefeed.eachfeed=function(){return Feed.find({clientid:Session.get("clientid"),display:"y"},{sort:{date:-1},limit:2*Session.get("limit")})},Template.bigImage.low=function(){Session.get("currentBig");try{return Feed.findOne({likeid:Session.get("currentBig")})}catch(e){console.log(e),ErrorUpdate.insert({error:e,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.bigImage.low"})}},Template.bigImage.high=function(){Session.get("currentBig");try{return Media.findOne({_id:Session.get("currentBig")})}catch(e){console.log(e),ErrorUpdate.insert({error:e,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.bigImage.low"})}},Template.recommended.recents=function(){try{var e=Session.get("currentBig"),t=Votes.findOne({followid:Session.get("clientid"),likeid:e});if(t)return Feed.find({likeid:e,type:3,clientid:Session.get("clientid")})}catch(n){console.log(n),ErrorUpdate.insert({error:n,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.recommended.recents"})}},Template.recommending.recents=function(){try{var e=Session.get("currentBig"),t=Votes.findOne({followid:Session.get("clientid"),likeid:e});if(t)return Feed.find({likeid:e,type:3,whoid:Session.get("clientid")})}catch(n){console.log(n),ErrorUpdate.insert({error:n,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.recommending.recents"})}},Template.recommending.recentstwo=function(){try{var e=Session.get("currentBig"),t=Votes.findOne({followid:Session.get("clientid"),likeid:e});if(t)return Feed.find({likeid:e,type:2,whoid:Session.get("clientid")})}catch(n){console.log(n),ErrorUpdate.insert({error:n,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.recommending.recents"})}},Template.vote.votes=function(){try{var e=Session.get("currentBig"),t=Votes.findOne({followid:Session.get("clientid"),likeid:e}),n=GroupVoteRecommend.findOne({clientid:Session.get("clientid"),likeid:e});return n?Votes.find({likeid:e,followid:{$in:n.follows}}):t?Votes.find({likeid:e}):null}catch(i){console.log(i),ErrorUpdate.insert({error:i,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.vote.votes"})}},Template.groupvote.votes=function(){try{var e=Session.get("currentBig"),t=Votes.findOne({followid:Session.get("clientid"),likeid:e});return t?GroupVoteRecommend.find({likeid:e,clientid:Session.get("clientid")}):null}catch(n){console.log(n),ErrorUpdate.insert({error:n,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.groupvote.votes"})}},Template.chatting.recommending=function(){try{if(Session.get("actionFollow")){var e=Feed.findOne({_id:Session.get("actionFollow")});if(e&&e.whoid==Session.get("clientid"))return e}return!1}catch(t){console.log(t),ErrorUpdate.insert({error:t,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.chatting.recommending"})}},Template.chatting.creator=function(){try{var e=Votes.findOne({_id:Session.get("actionFollow")});return e?Media.findOne({_id:e.likeid}):!1}catch(t){console.log(t),ErrorUpdate.insert({error:t,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.chatting.creator"})}},Template.chatting.recommended=function(){try{return Session.get("recommendedFollow")}catch(e){console.log(e),ErrorUpdate.insert({error:e,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.chatting.recommended"})}},Template.chatting.othername=function(){try{var e=Feed.findOne({_id:Session.get("actionFollow")});if(e)return{followusername:e.followusername,left:e.left,top:e.top,username:Session.get("username")}}catch(t){console.log(t),ErrorUpdate.insert({error:t,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.chatting.othername"})}},Template.chatting.eachcomment=function(){try{return Comments.find({likeid:Session.get("currentBig")})}catch(e){console.log(e),ErrorUpdate.insert({error:e,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.chatting.eachcomment"})}},Template.keyword.eachkeyword=function(){try{var e=SponserKeyword.find({});if(e)return e}catch(t){console.log(t),ErrorUpdate.insert({error:t,clientid:Session.get("clientid"),date:new Date,side:"client","function":"Template.keyword.eachkeyword"})}},Template.server.status=function(){return Meteor.status().connected},Template.myprofile.profile=function(){var e=Session.get("profile");return isNaN(e)?Me.find({username:e}):Me.find({_id:e})}}Template.chatfeature.chat=function(){return Chat.find({clientid:Session.get("clientid"),chatid:Session.get("chatid")})},Template.chatfeature.rendered=function(){$(".summary").hammer().off("hold",b),$(".summary").hammer().on("hold",b)},Template.chatfeature.pic=function(){return"right"==this.position?profilePic:Session.get("senderpic")};var Wi;Meteor.saveCollection=w,Meteor.restoreCollection=x,Chat.find({status:"server"}).observe({added:function(e){Chat.update({_id:e._id},{$set:{status:"receive"}})}});var Yi,Qi=null,Ji=!1,Xi=null,Gi=null;tapBigTutorialInterval=null;VoteStart=null;var Ki=null;App.checkQuadrant=tt;var Zi=[{likeid:"662341395520389209_363620479",low:"http://distilleryimage0.s3.amazonaws.com/1f5c982a9cae11e3b4f00e8811d39b04_6.jpg"},{likeid:"594764576135283612_363620479",low:"http://distilleryimage0.s3.amazonaws.com/57ec1704536d11e3b8cd1227d7fa1b14_6.jpg"},{likeid:"586163271886612245_3877984",low:"http://distilleryimage9.s3.amazonaws.com/007eebd84a1a11e381410e5cd106ae28_6.jpg"},{likeid:"586216653187884167_3877984",low:"http://distilleryimage11.s3.amazonaws.com/d1772b024a2811e38f3c0ab06fdbedbd_6.jpg"}],eo="@",to=[["ar","Arabic"],["ch","Chinese"],["en","English"],["fr","French"],["ind","Indonesian"],["hi","Hindi"],["ja","Japanese"],["po","Portuguese"],["ru","Russian"],["sp","Spanish"],["ur","Urdu"]],no=[],io=!1;Meteor.toast=en,Meteor.toastStartFlag=io;Meteor.periods=null;var oo=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent);Meteor.facebook=hn,jQuery.fn.shake=function(){return this.each(function(){$(this).css({position:"relative"});for(var e=1;3>=e;e++)$(this).animate({left:-25},10).animate({left:0},50).animate({left:25},10).animate({left:0},50)}),this};var ro=0,ao=null;Meteor.promoteProgDrag=jn,Meteor.promoteProgDragend=Rn,Meteor.promoteProgDragstart=Un,Meteor.loveProgDrag=Hn,Meteor.loveProgDragend=zn,Meteor.loveProgDragstart=qn,jQuery.fn.shake=function(){return this.each(function(){$(this).css({position:"relative"});for(var e=1;3>=e;e++)$(this).animate({left:-25},10).animate({left:0},50).animate({left:25},10).animate({left:0},50)}),this},Meteor.getTextForNewsletters=function(){Meteor.call("getTextForNewsletters",function(e,t){if(t&&200==t.statusCode){var n=t.data.data;if(n.length>0){n[0].caption}}})};var so=null,co=null,lo=null,uo=null,fo={initialize:function(){this.bindEvents()},bindEvents:function(){document.addEventListener("deviceready",this.onDeviceReady,!1)},onDeviceReady:function(){fo.receivedEvent("deviceready")},receivedEvent:function(){var e=window.plugins.pushNotification;"android"==device.platform||"Android"==device.platform?e.register(this.successHandler,this.errorHandler,{senderID:"422665837619",ecb:"Meteor.app.onNotificationGCM"}):e.register(this.successHandler,this.errorHandler,{badge:"true",sound:"true",alert:"true",ecb:"Meteor.app.onNotificationAPN"})},successHandler:function(e){console.log("Callback Success! Result = "+e),Zn(e)},errorHandler:function(e){console.log(e)},onNotificationGCM:function(e){switch(e.event){case"registered":e.regid.length>0&&(console.log("Regid "+e.regid),Zn(e.regid));break;case"message":if(e.foreground){var t=new Media("/android_asset/www/"+e.soundname);t.play()}else e.coldstart;so=e.payload.low,co=e.payload.message,lo=e.payload.likeid,uo=e.payload.collection,Fn(so,co,lo,uo);break;case"error":console.log("GCM error = "+e.msg);break;default:console.log("An unknown GCM event has occurred")}},onNotificationAPN:function(e){var t=window.plugins.pushNotification;if(e.alert&&navigator.notification.alert(e.alert),e.badge&&t.setApplicationIconBadgeNumber(this.successHandler,this.errorHandler,e.badge),e.sound){var n=new Media(e.sound);n.play()}}};Meteor.app=fo,Meteor.app.initialize();var po=!1,ho=!1,go=!1}(),function(){DebugFace=null,Load=new Meteor.Collection("load"),Meteor.isClient&&Meteor.startup(function(){window.location.href.match("localhost:3000")&&(DebugFace=!0),window.location.href.match("192.168.")&&(DebugFace=!0)}),Meteor.startup(function(){Meteor.absoluteUrl.defaultOptions.rootUrl.match("localhost:3000")&&(DebugFace=!0)})}();